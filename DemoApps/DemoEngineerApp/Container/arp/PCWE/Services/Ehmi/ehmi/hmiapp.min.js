///////////////////////////////////////////////////////////////////////////////
//
//  HMI Browser Client App Version: 7.4.0.1867
//
//  Copyright PHOENIX CONTACT
//
///////////////////////////////////////////////////////////////////////////////
var ErrorStrings={pageCaption:"The HMI application has stopped.",messageCaption:"An error has occurred.",DownloadScreenError:"A project resource could not be downloaded.",UpdateDataError:"A data update error occurred.",RegisterGroupError:"An error occurred during data group registration.",UnauthorizedDataError:"Access unauthorized on secure data channel. User levels not configured for project and/or the login dialog is not present.",ManageSessionError:"An error occurred during data session management.",
DuplicateStationIDError:"An error occurred during data session management because the requested Station ID is already in use.",LocalProjectChangeError:"An error occurred during project update, please restart.",LocalProjectUpdate:"Project change detected, please wait...",LocalProjectRetry:"Local project failed to update.",NetworkLevelError:"A network level error occurred.",NetworkTimeoutError:"A network timeout error occurred.",InternalError:"An internal error occurred.",ExceptionError:"An exception occurred.",
ConnectionError:"A connection with the PLC could not be established"},exportGlobal=function(a,b){if("undefined"!==typeof global)global[a]=b;else if("undefined"!==typeof window)window[a]=b;else throw Error("Unknown runtime environment.");};exportGlobal("exportGlobal",exportGlobal);var importGlobal=function(a){if("undefined"!==typeof global)return global[a.toString()];if("undefined"!==typeof window)return window[a.toString()];throw Error("Unknown runtime environment.");};
exportGlobal("importGlobal",importGlobal);var Scroller;
(function(){var a=function(){};Scroller=function(b,c){this.__callback=b;this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:a,penetrationDeceleration:.03,penetrationAcceleration:.08};for(var e in c)this.options[e]=c[e]};var b=function(a){return Math.pow(a-1,3)+1},c=function(a){return 1>(a/=.5)?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)},d={__isSingleTouch:!1,__isTracking:!1,
__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,
__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(a,b,c,d){a===+a&&(this.__clientWidth=a);b===+b&&(this.__clientHeight=b);c===+c&&(this.__contentWidth=c);d===+d&&(this.__contentHeight=d);this.__computeScrollMax();this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition:function(a,b){this.__clientLeft=
a||0;this.__clientTop=b||0},setSnapSize:function(a,b){this.__snapWidth=a;this.__snapHeight=b},activatePullToRefresh:function(a,b,c,d){this.__refreshHeight=a;this.__refreshActivate=b;this.__refreshDeactivate=c;this.__refreshStart=d},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0);this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){this.__refreshActive=!1;this.__refreshDeactivate&&this.__refreshDeactivate();this.scrollTo(this.__scrollLeft,
this.__scrollTop,!0)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(a,b,c,d,f){if(!this.options.zooming)throw Error("Zooming is not enabled!");f&&(this.__zoomComplete=f);this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);f=this.__zoomLevel;null==c&&(c=this.__clientWidth/2);null==d&&(d=this.__clientHeight/
2);a=Math.max(Math.min(a,this.options.maxZoom),this.options.minZoom);this.__computeScrollMax(a);c=(c+this.__scrollLeft)*a/f-c;d=(d+this.__scrollTop)*a/f-d;c>this.__maxScrollLeft?c=this.__maxScrollLeft:0>c&&(c=0);d>this.__maxScrollTop?d=this.__maxScrollTop:0>d&&(d=0);this.__publish(c,d,a,b)},zoomBy:function(a,b,c,d,f){this.zoomTo(this.__zoomLevel*a,b,c,d,f)},scrollTo:function(a,b,c,d){this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);if(null!=d&&d!==
this.__zoomLevel){if(!this.options.zooming)throw Error("Zooming is not enabled!");a*=d;b*=d;this.__computeScrollMax(d)}else d=this.__zoomLevel;this.options.scrollingX?this.options.paging?a=Math.round(a/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(a=Math.round(a/this.__snapWidth)*this.__snapWidth):a=this.__scrollLeft;this.options.scrollingY?this.options.paging?b=Math.round(b/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(b=Math.round(b/this.__snapHeight)*this.__snapHeight):
b=this.__scrollTop;a=Math.max(Math.min(this.__maxScrollLeft,a),0);b=Math.max(Math.min(this.__maxScrollTop,b),0);a===this.__scrollLeft&&b===this.__scrollTop&&(c=!1);this.__isTracking||this.__publish(a,b,d,c)},scrollBy:function(a,b,c){this.scrollTo((this.__isAnimating?this.__scheduledLeft:this.__scrollLeft)+(a||0),(this.__isAnimating?this.__scheduledTop:this.__scrollTop)+(b||0),c)},doMouseZoom:function(a,b,c,d){return this.zoomTo(this.__zoomLevel*(0<a?.97:1.03),!1,c-this.__clientLeft,d-this.__clientTop)},
doTouchStart:function(a,b){if(null==a.length)throw Error("Invalid touch list: "+a);b instanceof Date&&(b=b.valueOf());if("number"!==typeof b)throw Error("Invalid timestamp value: "+b);this.__interruptedAnimation=!0;this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0);this.__isAnimating&&(core.effect.Animate.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var c=1===a.length;if(c){var d=a[0].pageX;
a=a[0].pageY}else d=Math.abs(a[0].pageX+a[1].pageX)/2,a=Math.abs(a[0].pageY+a[1].pageY)/2;this.__initialTouchLeft=d;this.__initialTouchTop=a;this.__zoomLevelStart=this.__zoomLevel;this.__lastTouchLeft=d;this.__lastTouchTop=a;this.__lastTouchMove=b;this.__lastScale=1;this.__enableScrollX=!c&&this.options.scrollingX;this.__enableScrollY=!c&&this.options.scrollingY;this.__isTracking=!0;this.__didDecelerationComplete=!1;this.__isDragging=!c;this.__isSingleTouch=c;this.__positions=[]},doTouchMove:function(a,
b,c){if(null==a.length)throw Error("Invalid touch list: "+a);b instanceof Date&&(b=b.valueOf());if("number"!==typeof b)throw Error("Invalid timestamp value: "+b);if(this.__isTracking){if(2===a.length){var d=Math.abs(a[0].pageX+a[1].pageX)/2;a=Math.abs(a[0].pageY+a[1].pageY)/2}else d=a[0].pageX,a=a[0].pageY;var g=this.__positions;if(this.__isDragging){var e=d-this.__lastTouchLeft,h=a-this.__lastTouchTop,f=this.__scrollLeft,q=this.__scrollTop,t=this.__zoomLevel;if(null!=c&&this.options.zooming){var u=
t;t=t/this.__lastScale*c;t=Math.max(Math.min(t,this.options.maxZoom),this.options.minZoom);if(u!==t){var y=d-this.__clientLeft,I=a-this.__clientTop;f=(y+f)*t/u-y;q=(I+q)*t/u-I;this.__computeScrollMax(t)}}this.__enableScrollX&&(f-=e*this.options.speedMultiplier,u=this.__maxScrollLeft,f>u||0>f)&&(f=this.options.bouncing?f+e/2*this.options.speedMultiplier:f>u?u:0);this.__enableScrollY&&(q-=h*this.options.speedMultiplier,e=this.__maxScrollTop,q>e||0>q)&&(this.options.bouncing?(q+=h/2*this.options.speedMultiplier,
this.__enableScrollX||null==this.__refreshHeight||(!this.__refreshActive&&q<=-this.__refreshHeight?(this.__refreshActive=!0,this.__refreshActivate&&this.__refreshActivate()):this.__refreshActive&&q>-this.__refreshHeight&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))):q=q>e?e:0);60<g.length&&g.splice(0,30);g.push(f,q,b);this.__publish(f,q,t)}else if(h=this.options.locking?3:0,f=Math.abs(d-this.__initialTouchLeft),q=Math.abs(a-this.__initialTouchTop),this.__enableScrollX=
this.options.scrollingX&&f>=h,this.__enableScrollY=this.options.scrollingY&&q>=h,g.push(this.__scrollLeft,this.__scrollTop,b),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(5<=f||5<=q))this.__interruptedAnimation=!1;this.__lastTouchLeft=d;this.__lastTouchTop=a;this.__lastTouchMove=b;this.__lastScale=c}},doTouchEnd:function(a){a instanceof Date&&(a=a.valueOf());if("number"!==typeof a)throw Error("Invalid timestamp value: "+a);if(this.__isTracking){this.__isTracking=!1;if(this.__isDragging)if(this.__isDragging=
!1,this.__isSingleTouch&&this.options.animating&&100>=a-this.__lastTouchMove){for(var b=this.__positions,c=b.length-1,d=c,e=c;0<e&&b[e]>this.__lastTouchMove-100;e-=3)d=e;d!==c?(c=b[c]-b[d],e=this.__scrollTop-b[d-1],this.__decelerationVelocityX=(this.__scrollLeft-b[d-2])/c*(1E3/60),this.__decelerationVelocityY=e/c*(1E3/60),b=this.options.paging||this.options.snapping?4:1,Math.abs(this.__decelerationVelocityX)>b||Math.abs(this.__decelerationVelocityY)>b?this.__refreshActive||this.__startDeceleration(a):
this.options.scrollingComplete()):this.options.scrollingComplete()}else 100<a-this.__lastTouchMove&&this.options.scrollingComplete();this.__isDecelerating||(this.__refreshActive&&this.__refreshStart?(this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()):((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel),this.__refreshActive&&(this.__refreshActive=
!1,this.__refreshDeactivate&&this.__refreshDeactivate())));this.__positions.length=0}},__publish:function(a,d,f,k){var e=this,g=e.__isAnimating;g&&(core.effect.Animate.stop(g),e.__isAnimating=!1);if(k&&e.options.animating){e.__scheduledLeft=a;e.__scheduledTop=d;e.__scheduledZoom=f;var h=e.__scrollLeft,p=e.__scrollTop,q=e.__zoomLevel,t=a-h,u=d-p,y=f-q;e.__isAnimating=core.effect.Animate.start(function(a,b,c){c&&(e.__scrollLeft=h+t*a,e.__scrollTop=p+u*a,e.__zoomLevel=q+y*a,e.__callback&&e.__callback(e.__scrollLeft,
e.__scrollTop,e.__zoomLevel))},function(a){return e.__isAnimating===a},function(a,b,c){b===e.__isAnimating&&(e.__isAnimating=!1);(e.__didDecelerationComplete||c)&&e.options.scrollingComplete();e.options.zooming&&(e.__computeScrollMax(),e.__zoomComplete&&(e.__zoomComplete(),e.__zoomComplete=null))},e.options.animationDuration,g?b:c)}else e.__scheduledLeft=e.__scrollLeft=a,e.__scheduledTop=e.__scrollTop=d,e.__scheduledZoom=e.__zoomLevel=f,e.__callback&&e.__callback(a,d,f),e.options.zooming&&(e.__computeScrollMax(),
e.__zoomComplete&&(e.__zoomComplete(),e.__zoomComplete=null))},__computeScrollMax:function(a){null==a&&(a=this.__zoomLevel);this.__maxScrollLeft=Math.max(this.__contentWidth*a-this.__clientWidth,0);this.__maxScrollTop=Math.max(this.__contentHeight*a-this.__clientHeight,0)},__startDeceleration:function(a){var b=this;if(b.options.paging){a=Math.max(Math.min(b.__scrollLeft,b.__maxScrollLeft),0);var c=Math.max(Math.min(b.__scrollTop,b.__maxScrollTop),0),d=b.__clientWidth,e=b.__clientHeight;b.__minDecelerationScrollLeft=
Math.floor(a/d)*d;b.__minDecelerationScrollTop=Math.floor(c/e)*e;b.__maxDecelerationScrollLeft=Math.ceil(a/d)*d;b.__maxDecelerationScrollTop=Math.ceil(c/e)*e}else b.__minDecelerationScrollLeft=0,b.__minDecelerationScrollTop=0,b.__maxDecelerationScrollLeft=b.__maxScrollLeft,b.__maxDecelerationScrollTop=b.__maxScrollTop;var f=b.options.snapping?4:.001;b.__isDecelerating=core.effect.Animate.start(function(a,c,d){b.__stepThroughDeceleration(d)},function(){var a=Math.abs(b.__decelerationVelocityX)>=f||
Math.abs(b.__decelerationVelocityY)>=f;a||(b.__didDecelerationComplete=!0);return a},function(a,c,d){b.__isDecelerating=!1;b.__didDecelerationComplete&&b.options.scrollingComplete();b.scrollTo(b.__scrollLeft,b.__scrollTop,b.options.snapping)})},__stepThroughDeceleration:function(a){var b=this.__scrollLeft+this.__decelerationVelocityX,c=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var d=Math.max(Math.min(this.__maxDecelerationScrollLeft,b),this.__minDecelerationScrollLeft);
d!==b&&(b=d,this.__decelerationVelocityX=0);d=Math.max(Math.min(this.__maxDecelerationScrollTop,c),this.__minDecelerationScrollTop);d!==c&&(c=d,this.__decelerationVelocityY=0)}a?this.__publish(b,c,this.__zoomLevel):(this.__scrollLeft=b,this.__scrollTop=c);this.options.paging||(this.__decelerationVelocityX*=.95,this.__decelerationVelocityY*=.95);if(this.options.bouncing){d=a=0;var e=this.options.penetrationDeceleration,f=this.options.penetrationAcceleration;b<this.__minDecelerationScrollLeft?a=this.__minDecelerationScrollLeft-
b:b>this.__maxDecelerationScrollLeft&&(a=this.__maxDecelerationScrollLeft-b);c<this.__minDecelerationScrollTop?d=this.__minDecelerationScrollTop-c:c>this.__maxDecelerationScrollTop&&(d=this.__maxDecelerationScrollTop-c);0!==a&&(this.__decelerationVelocityX=0>=a*this.__decelerationVelocityX?this.__decelerationVelocityX+a*e:a*f);0!==d&&(this.__decelerationVelocityY=0>=d*this.__decelerationVelocityY?this.__decelerationVelocityY+d*e:d*f)}}},f;for(f in d)Scroller.prototype[f]=d[f]})();
var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return"CORRUPT: "+this.message};this.message=a},invalid:function(a){this.toString=function(){return"INVALID: "+this.message};this.message=a},bug:function(a){this.toString=function(){return"BUG: "+this.message};this.message=a},notReady:function(a){this.toString=function(){return"NOT READY: "+this.message};this.message=a}}};
"undefined"!=typeof module&&module.exports&&(module.exports=sjcl);
sjcl.cipher.aes=function(a){this.h[0][0][0]||this.z();var b,c,d=this.h[0][4],f=this.h[1];var e=a.length;var g=1;if(4!==e&&6!==e&&8!==e)throw new sjcl.exception.invalid("invalid aes key size");this.a=[b=a.slice(0),c=[]];for(a=e;a<4*e+28;a++){var h=b[a-1];if(0===a%e||8===e&&4===a%e)h=d[h>>>24]<<24^d[h>>16&255]<<16^d[h>>8&255]<<8^d[h&255],0===a%e&&(h=h<<8^h>>>24^g<<24,g=g<<1^283*(g>>7));b[a]=b[a-e]^h}for(e=0;a;e++,a--)h=b[e&3?a:a-4],c[e]=4>=a||4>e?h:f[0][d[h>>>24]]^f[1][d[h>>16&255]]^f[2][d[h>>8&255]]^
f[3][d[h&255]]};
sjcl.cipher.aes.prototype={encrypt:function(a){return this.I(a,0)},decrypt:function(a){return this.I(a,1)},h:[[[],[],[],[],[]],[[],[],[],[],[]]],z:function(){var a=this.h[0],b=this.h[1],c=a[4],d=b[4],f,e,g,h=[],k=[],m;for(f=0;256>f;f++)k[(h[f]=f<<1^283*(f>>7))^f]=f;for(e=g=0;!c[e];e^=m||1,g=k[g]||1){var n=g^g<<1^g<<2^g<<3^g<<4;n=n>>8^n&255^99;c[e]=n;d[n]=e;var r=h[f=h[m=h[e]]];var p=16843009*r^65537*f^257*m^16843008*e;r=257*h[n]^16843008*n;for(f=0;4>f;f++)a[f][e]=r=r<<24^r>>>8,b[f][n]=p=p<<24^p>>>
8}for(f=0;5>f;f++)a[f]=a[f].slice(0),b[f]=b[f].slice(0)},I:function(a,b){if(4!==a.length)throw new sjcl.exception.invalid("invalid aes block size");var c=this.a[b],d=a[0]^c[0],f=a[b?3:1]^c[1],e=a[2]^c[2];a=a[b?1:3]^c[3];var g=c.length/4-2,h,k=4,m=[0,0,0,0];var n=this.h[b];var r=n[0],p=n[1],q=n[2],t=n[3],u=n[4];for(h=0;h<g;h++){n=r[d>>>24]^p[f>>16&255]^q[e>>8&255]^t[a&255]^c[k];var y=r[f>>>24]^p[e>>16&255]^q[a>>8&255]^t[d&255]^c[k+1];var I=r[e>>>24]^p[a>>16&255]^q[d>>8&255]^t[f&255]^c[k+2];a=r[a>>>
24]^p[d>>16&255]^q[f>>8&255]^t[e&255]^c[k+3];k+=4;d=n;f=y;e=I}for(h=0;4>h;h++)m[b?3&-h:h]=u[d>>>24]<<24^u[f>>16&255]<<16^u[e>>8&255]<<8^u[a&255]^c[k++],n=d,d=f,f=e,e=a,a=n;return m}};
sjcl.bitArray={bitSlice:function(a,b,c){a=sjcl.bitArray.P(a.slice(b/32),32-(b&31)).slice(1);return void 0===c?a:sjcl.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d=Math.floor(-b-c&31);return((b+c-1^b)&-32?a[b/32|0]<<32-d^a[b/32+1|0]>>>d:a[b/32|0]>>>d)&(1<<c)-1},concat:function(a,b){if(0===a.length||0===b.length)return a.concat(b);var c=a[a.length-1],d=sjcl.bitArray.getPartial(c);return 32===d?a.concat(b):sjcl.bitArray.P(b,d,c|0,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length;return 0===
b?0:32*(b-1)+sjcl.bitArray.getPartial(a[b-1])},clamp:function(a,b){if(32*a.length<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;b&=31;0<c&&b&&(a[c-1]=sjcl.bitArray.partial(b,a[c-1]&2147483648>>b-1,1));return a},partial:function(a,b,c){return 32===a?b:(c?b|0:b<<32-a)+1099511627776*a},getPartial:function(a){return Math.round(a/1099511627776)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return!1;var c=0,d;for(d=0;d<a.length;d++)c|=a[d]^b[d];return 0===
c},P:function(a,b,c,d){var f;for(void 0===d&&(d=[]);32<=b;b-=32)d.push(c),c=0;if(0===b)return d.concat(a);for(f=0;f<a.length;f++)d.push(c|a[f]>>>b),c=a[f]<<32-b;f=a.length?a[a.length-1]:0;a=sjcl.bitArray.getPartial(f);d.push(sjcl.bitArray.partial(b+a&31,32<b+a?c:d.pop(),1));return d},k:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}};
sjcl.codec.utf8String={fromBits:function(a){var b="",c=sjcl.bitArray.bitLength(a),d,f;for(d=0;d<c/8;d++)0===(d&3)&&(f=a[d/4]),b+=String.fromCharCode(f>>>24),f<<=8;return decodeURIComponent(escape(b))},toBits:function(a){a=unescape(encodeURIComponent(a));var b=[],c,d=0;for(c=0;c<a.length;c++)d=d<<8|a.charCodeAt(c),3===(c&3)&&(b.push(d),d=0);c&3&&b.push(sjcl.bitArray.partial(8*(c&3),d));return b}};
sjcl.codec.hex={fromBits:function(a){var b="",c;for(c=0;c<a.length;c++)b+=((a[c]|0)+0xf00000000000).toString(16).substr(4);return b.substr(0,sjcl.bitArray.bitLength(a)/4)},toBits:function(a){var b,c=[];a=a.replace(/\s|0x/g,"");var d=a.length;a+="00000000";for(b=0;b<a.length;b+=8)c.push(parseInt(a.substr(b,8),16)^0);return sjcl.bitArray.clamp(c,4*d)}};
sjcl.codec.base64={F:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(a,b,c){var d="",f=0,e=sjcl.codec.base64.F,g=0,h=sjcl.bitArray.bitLength(a);c&&(e=e.substr(0,62)+"-_");for(c=0;6*d.length<h;)d+=e.charAt((g^a[c]>>>f)>>>26),6>f?(g=a[c]<<6-f,f+=26,c++):(g<<=6,f-=6);for(;d.length&3&&!b;)d+="=";return d},toBits:function(a,b){a=a.replace(/\s|=/g,"");var c=[],d=0,f=sjcl.codec.base64.F,e=0;b&&(f=f.substr(0,62)+"-_");for(b=0;b<a.length;b++){var g=f.indexOf(a.charAt(b));
if(0>g)throw new sjcl.exception.invalid("this isn't base64!");26<d?(d-=26,c.push(e^g>>>d),e=g<<32-d):(d+=6,e^=g<<32-d)}d&56&&c.push(sjcl.bitArray.partial(d&56,e,1));return c}};sjcl.codec.base64url={fromBits:function(a){return sjcl.codec.base64.fromBits(a,1,1)},toBits:function(a){return sjcl.codec.base64.toBits(a,1)}};sjcl.hash.sha256=function(a){this.a[0]||this.z();a?(this.n=a.n.slice(0),this.i=a.i.slice(0),this.e=a.e):this.reset()};sjcl.hash.sha256.hash=function(a){return(new sjcl.hash.sha256).update(a).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.n=this.N.slice(0);this.i=[];this.e=0;return this},update:function(a){"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));var b=this.i=sjcl.bitArray.concat(this.i,a);var c=this.e;a=this.e=c+sjcl.bitArray.bitLength(a);for(c=512+c&-512;c<=a;c+=512)this.D(b.splice(0,16));return this},finalize:function(){var a,b=this.i,c=this.n;b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]);for(a=b.length+2;a&15;a++)b.push(0);b.push(Math.floor(this.e/
4294967296));for(b.push(this.e|0);b.length;)this.D(b.splice(0,16));this.reset();return c},N:[],a:[],z:function(){function a(a){return 4294967296*(a-Math.floor(a))|0}var b=0,c=2,d;a:for(;64>b;c++){for(d=2;d*d<=c;d++)if(0===c%d)continue a;8>b&&(this.N[b]=a(Math.pow(c,.5)));this.a[b]=a(Math.pow(c,1/3));b++}},D:function(a){var b=a.slice(0),c=this.n,d=this.a,f=c[0],e=c[1],g=c[2],h=c[3],k=c[4],m=c[5],n=c[6],r=c[7];for(a=0;64>a;a++){if(16>a)var p=b[a];else{p=b[a+1&15];var q=b[a+14&15];p=b[a&15]=(p>>>7^p>>>
18^p>>>3^p<<25^p<<14)+(q>>>17^q>>>19^q>>>10^q<<15^q<<13)+b[a&15]+b[a+9&15]|0}p=p+r+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+(n^k&(m^n))+d[a];r=n;n=m;m=k;k=h+p|0;h=g;g=e;e=f;f=p+(e&g^h&(e^g))+(e>>>2^e>>>13^e>>>22^e<<30^e<<19^e<<10)|0}c[0]=c[0]+f|0;c[1]=c[1]+e|0;c[2]=c[2]+g|0;c[3]=c[3]+h|0;c[4]=c[4]+k|0;c[5]=c[5]+m|0;c[6]=c[6]+n|0;c[7]=c[7]+r|0}};
sjcl.mode.ccm={name:"ccm",encrypt:function(a,b,c,d,f){var e,g=b.slice(0),h=sjcl.bitArray,k=h.bitLength(c)/8,m=h.bitLength(g)/8;f=f||64;d=d||[];if(7>k)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(e=2;4>e&&m>>>8*e;e++);e<15-k&&(e=15-k);c=h.clamp(c,8*(15-e));b=sjcl.mode.ccm.H(a,b,c,d,f,e);g=sjcl.mode.ccm.J(a,g,c,b,f,e);return h.concat(g.data,g.tag)},decrypt:function(a,b,c,d,f){f=f||64;d=d||[];var e=sjcl.bitArray,g=e.bitLength(c)/8,h=e.bitLength(b),k=e.clamp(b,h-f),m=e.bitSlice(b,
h-f);h=(h-f)/8;if(7>g)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(b=2;4>b&&h>>>8*b;b++);b<15-g&&(b=15-g);c=e.clamp(c,8*(15-b));k=sjcl.mode.ccm.J(a,k,c,m,f,b);a=sjcl.mode.ccm.H(a,k.data,c,d,f,b);if(!e.equal(k.tag,a))throw new sjcl.exception.corrupt("ccm: tag doesn't match");return k.data},H:function(a,b,c,d,f,e){var g=[],h=sjcl.bitArray,k=h.k;f/=8;if(f%2||4>f||16<f)throw new sjcl.exception.invalid("ccm: invalid tag length");if(4294967295<d.length||4294967295<b.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");
e=[h.partial(8,(d.length?64:0)|f-2<<2|e-1)];e=h.concat(e,c);e[3]|=h.bitLength(b)/8;e=a.encrypt(e);if(d.length)for(c=h.bitLength(d)/8,65279>=c?g=[h.partial(16,c)]:4294967295>=c&&(g=h.concat([h.partial(16,65534)],[c])),g=h.concat(g,d),d=0;d<g.length;d+=4)e=a.encrypt(k(e,g.slice(d,d+4).concat([0,0,0])));for(d=0;d<b.length;d+=4)e=a.encrypt(k(e,b.slice(d,d+4).concat([0,0,0])));return h.clamp(e,8*f)},J:function(a,b,c,d,f,e){var g=sjcl.bitArray;var h=g.k;var k=b.length,m=g.bitLength(b);c=g.concat([g.partial(8,
e-1)],c).concat([0,0,0]).slice(0,4);d=g.bitSlice(h(d,a.encrypt(c)),0,f);if(!k)return{tag:d,data:[]};for(h=0;h<k;h+=4)c[3]++,f=a.encrypt(c),b[h]^=f[0],b[h+1]^=f[1],b[h+2]^=f[2],b[h+3]^=f[3];return{tag:d,data:g.clamp(b,m)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(a,b,c,d,f,e){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var g,h=sjcl.mode.ocb2.B,k=sjcl.bitArray,m=k.k,n=[0,0,0,0];c=h(a.encrypt(c));var r=[];d=d||[];f=f||64;for(g=0;g+4<b.length;g+=4){var p=b.slice(g,g+4);n=m(n,p);r=r.concat(m(c,a.encrypt(m(c,p))));c=h(c)}p=b.slice(g);b=k.bitLength(p);g=a.encrypt(m(c,[0,0,0,b]));p=k.clamp(m(p.concat([0,0,0]),g),b);n=m(n,m(p.concat([0,0,0]),g));n=a.encrypt(m(n,m(c,h(c))));
d.length&&(n=m(n,e?d:sjcl.mode.ocb2.pmac(a,d)));return r.concat(k.concat(p,k.clamp(n,f)))},decrypt:function(a,b,c,d,f,e){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid("ocb iv must be 128 bits");f=f||64;var g=sjcl.mode.ocb2.B,h=sjcl.bitArray,k=h.k,m=[0,0,0,0],n=g(a.encrypt(c)),r=sjcl.bitArray.bitLength(b)-f,p=[];d=d||[];for(c=0;c+4<r/32;c+=4){var q=k(n,a.decrypt(k(n,b.slice(c,c+4))));m=k(m,q);p=p.concat(q);n=g(n)}var t=r-32*c;q=a.encrypt(k(n,[0,0,0,t]));q=k(q,h.clamp(b.slice(c),
t).concat([0,0,0]));m=k(m,q);m=a.encrypt(k(m,k(n,g(n))));d.length&&(m=k(m,e?d:sjcl.mode.ocb2.pmac(a,d)));if(!h.equal(h.clamp(m,f),h.bitSlice(b,r)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return p.concat(h.clamp(q,t))},pmac:function(a,b){var c,d=sjcl.mode.ocb2.B,f=sjcl.bitArray,e=f.k,g=[0,0,0,0],h=a.encrypt([0,0,0,0]);h=e(h,d(d(h)));for(c=0;c+4<b.length;c+=4)h=d(h),g=e(g,a.encrypt(e(h,b.slice(c,c+4))));b=b.slice(c);128>f.bitLength(b)&&(h=e(h,d(h)),b=f.concat(b,[-2147483648,0,0,0]));
g=e(g,b);return a.encrypt(e(d(e(h,d(h))),g))},B:function(a){return[a[0]<<1^a[1]>>>31,a[1]<<1^a[2]>>>31,a[2]<<1^a[3]>>>31,a[3]<<1^135*(a[0]>>>31)]}};sjcl.misc.hmac=function(a,b){this.M=b=b||sjcl.hash.sha256;var c=[[],[]],d=b.prototype.blockSize/32;this.l=[new b,new b];a.length>d&&(a=b.hash(a));for(b=0;b<d;b++)c[0][b]=a[b]^909522486,c[1][b]=a[b]^1549556828;this.l[0].update(c[0]);this.l[1].update(c[1])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(a,b){a=(new this.M(this.l[0])).update(a,b).finalize();return(new this.M(this.l[1])).update(a).finalize()};
sjcl.misc.pbkdf2=function(a,b,c,d,f){c=c||1E3;if(0>d||0>c)throw sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));f=f||sjcl.misc.hmac;a=new f(a);var e,g,h,k,m=[],n=sjcl.bitArray;for(k=1;32*m.length<(d||1);k++){f=e=a.encrypt(n.concat(b,[k]));for(g=1;g<c;g++)for(e=a.encrypt(e),h=0;h<e.length;h++)f[h]^=e[h];m=m.concat(f)}d&&(m=n.clamp(m,d));return m};
sjcl.random={randomWords:function(a,b){var c=[];b=this.isReady(b);if(0===b)throw new sjcl.exception.notReady("generator isn't seeded");b&2&&this.U(!(b&1));for(b=0;b<a;b+=4){0===(b+1)%65536&&this.L();var d=this.w();c.push(d[0],d[1],d[2],d[3])}this.L();return c.slice(0,a)},setDefaultParanoia:function(a){this.t=a},addEntropy:function(a,b,c){c=c||"user";var d=(new Date).valueOf(),f=this.q[c],e=this.isReady(),g=0;var h=this.G[c];void 0===h&&(h=this.G[c]=this.R++);void 0===f&&(f=this.q[c]=0);this.q[c]=
(this.q[c]+1)%this.b.length;switch(typeof a){case "number":void 0===b&&(b=1);this.b[f].update([h,this.u++,1,b,d,1,a|0]);break;case "object":c=Object.prototype.toString.call(a);if("[object Uint32Array]"===c){var k=[];for(c=0;c<a.length;c++)k.push(a[c]);a=k}else for("[object Array]"!==c&&(g=1),c=0;c<a.length&&!g;c++)"number"!=typeof a[c]&&(g=1);if(!g){if(void 0===b)for(c=b=0;c<a.length;c++)for(k=a[c];0<k;)b++,k>>>=1;this.b[f].update([h,this.u++,2,b,d,a.length].concat(a))}break;case "string":void 0===
b&&(b=a.length);this.b[f].update([h,this.u++,3,b,d,a.length]);this.b[f].update(a);break;default:g=1}if(g)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.j[f]+=b;this.f+=b;0===e&&(0!==this.isReady()&&this.K("seeded",Math.max(this.g,this.f)),this.K("progress",this.getProgress()))},isReady:function(a){a=this.C[void 0!==a?a:this.t];return this.g&&this.g>=a?80<this.j[0]&&(new Date).valueOf()>this.O?3:1:this.f>=a?2:0},getProgress:function(a){a=this.C[a?
a:this.t];return this.g>=a?1:this.f>a?1:this.f/a},startCollectors:function(){if(!this.m){if(window.addEventListener)window.addEventListener("load",this.o,!1),window.addEventListener("mousemove",this.p,!1);else if(document.attachEvent)document.attachEvent("onload",this.o),document.attachEvent("onmousemove",this.p);else throw new sjcl.exception.bug("can't attach event");this.m=!0}},stopCollectors:function(){this.m&&(window.removeEventListener?(window.removeEventListener("load",this.o,!1),window.removeEventListener("mousemove",
this.p,!1)):window.detachEvent&&(window.detachEvent("onload",this.o),window.detachEvent("onmousemove",this.p)),this.m=!1)},addEventListener:function(a,b){this.r[a][this.Q++]=b},removeEventListener:function(a,b){a=this.r[a];var c=[];for(d in a)a.hasOwnProperty(d)&&a[d]===b&&c.push(d);for(b=0;b<c.length;b++){var d=c[b];delete a[d]}},b:[new sjcl.hash.sha256],j:[0],A:0,q:{},u:0,G:{},R:0,g:0,f:0,O:0,a:[0,0,0,0,0,0,0,0],d:[0,0,0,0],s:void 0,t:6,m:!1,r:{progress:{},seeded:{}},Q:0,C:[0,48,64,96,128,192,256,
384,512,768,1024],w:function(){for(var a=0;4>a&&(this.d[a]=this.d[a]+1|0,!this.d[a]);a++);return this.s.encrypt(this.d)},L:function(){this.a=this.w().concat(this.w());this.s=new sjcl.cipher.aes(this.a)},T:function(a){this.a=sjcl.hash.sha256.hash(this.a.concat(a));this.s=new sjcl.cipher.aes(this.a);for(a=0;4>a&&(this.d[a]=this.d[a]+1|0,!this.d[a]);a++);},U:function(a){var b=[],c=0,d;this.O=b[0]=(new Date).valueOf()+3E4;for(d=0;16>d;d++)b.push(4294967296*Math.random()|0);for(d=0;d<this.b.length&&(b=
b.concat(this.b[d].finalize()),c+=this.j[d],this.j[d]=0,a||!(this.A&1<<d));d++);this.A>=1<<this.b.length&&(this.b.push(new sjcl.hash.sha256),this.j.push(0));this.f-=c;c>this.g&&(this.g=c);this.A++;this.T(b)},p:function(a){sjcl.random.addEntropy([a.x||a.clientX||a.offsetX||0,a.y||a.clientY||a.offsetY||0],2,"mouse")},o:function(){sjcl.random.addEntropy((new Date).valueOf(),2,"loadtime")},K:function(a,b){var c;a=sjcl.random.r[a];var d=[];for(c in a)a.hasOwnProperty(c)&&d.push(a[c]);for(c=0;c<d.length;c++)d[c](b)}};
try{var s=new Uint32Array(32);crypto.getRandomValues(s);sjcl.random.addEntropy(s,1024,"crypto['getRandomValues']")}catch(a){}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(a,b,c,d){c=c||{};d=d||{};var f=sjcl.json,e=f.c({iv:sjcl.random.randomWords(4,0)},f.defaults);f.c(e,c);c=e.adata;"string"===typeof e.salt&&(e.salt=sjcl.codec.base64.toBits(e.salt));"string"===typeof e.iv&&(e.iv=sjcl.codec.base64.toBits(e.iv));if(!sjcl.mode[e.mode]||!sjcl.cipher[e.cipher]||"string"===typeof a&&100>=e.iter||64!==e.ts&&96!==e.ts&&128!==e.ts||128!==e.ks&&192!==e.ks&&256!==e.ks||2>e.iv.length||
4<e.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");if("string"===typeof a){var g=sjcl.misc.cachedPbkdf2(a,e);a=g.key.slice(0,e.ks/32);e.salt=g.salt}"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));"string"===typeof c&&(c=sjcl.codec.utf8String.toBits(c));g=new sjcl.cipher[e.cipher](a);f.c(d,e);d.key=a;e.ct=sjcl.mode[e.mode].encrypt(g,b,e.iv,c,e.ts);return f.encode(e)},decrypt:function(a,b,c,d){c=c||{};d=d||{};var f=sjcl.json;b=f.c(f.c(f.c({},f.defaults),f.decode(b)),
c,!0);c=b.adata;"string"===typeof b.salt&&(b.salt=sjcl.codec.base64.toBits(b.salt));"string"===typeof b.iv&&(b.iv=sjcl.codec.base64.toBits(b.iv));if(!sjcl.mode[b.mode]||!sjcl.cipher[b.cipher]||"string"===typeof a&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&256!==b.ks||!b.iv||2>b.iv.length||4<b.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");if("string"===typeof a){var e=sjcl.misc.cachedPbkdf2(a,b);a=e.key.slice(0,b.ks/32);b.salt=e.salt}"string"===
typeof c&&(c=sjcl.codec.utf8String.toBits(c));e=new sjcl.cipher[b.cipher](a);c=sjcl.mode[b.mode].decrypt(e,b.ct,b.iv,c,b.ts);f.c(d,b);d.key=a;return sjcl.codec.utf8String.fromBits(c)},encode:function(a){var b,c="{",d="";for(b in a)if(a.hasOwnProperty(b)){if(!b.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");c+=d+'"'+b+'":';d=",";switch(typeof a[b]){case "number":case "boolean":c+=a[b];break;case "string":c+='"'+escape(a[b])+'"';break;case "object":c+='"'+
sjcl.codec.base64.fromBits(a[b],1)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return c+"}"},decode:function(a){a=a.replace(/\s/g,"");if(!a.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");a=a.replace(/^\{|\}$/g,"").split(/,/);var b={},c,d;for(c=0;c<a.length;c++){if(!(d=a[c].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");b[d[2]]=
d[3]?parseInt(d[3],10):d[2].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(d[4]):unescape(d[4])}return b},c:function(a,b,c){void 0===a&&(a={});if(void 0===b)return a;for(var d in b)if(b.hasOwnProperty(d)){if(c&&void 0!==a[d]&&a[d]!==b[d])throw new sjcl.exception.invalid("required parameter overridden");a[d]=b[d]}return a},W:function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&a[d]!==b[d]&&(c[d]=a[d]);return c},V:function(a,b){var c={},d;for(d=0;d<b.length;d++)void 0!==a[b[d]]&&(c[b[d]]=a[b[d]]);
return c}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.S={};sjcl.misc.cachedPbkdf2=function(a,b){var c=sjcl.misc.S;b=b||{};var d=b.iter||1E3;c=c[a]=c[a]||{};d=c[d]=c[d]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):sjcl.random.randomWords(2,0)};c=void 0===b.salt?d.firstSalt:b.salt;d[c]=d[c]||sjcl.misc.pbkdf2(a,c,b.iter);return{key:d[c].slice(0),salt:c.slice(0)}};
!function(a,b,c,d){function f(a,b,c){return setTimeout(m(a,c),b)}function e(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var l;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(l=0;l<a.length;)b.call(c,a[l],l,a),l++;else for(l in a)a.hasOwnProperty(l)&&b.call(c,a[l],l,a)}function h(b,c,d){var l="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=Error("get-stack-trace");c=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,
"{anonymous}()@"):"Unknown Stack Trace";var d=a.console&&(a.console.warn||a.console.log);return d&&d.call(a.console,l,c),b.apply(this,arguments)}}function k(a,b,c){var l=b.prototype;b=a.prototype=Object.create(l);b.constructor=a;b._super=l;c&&G(b,c)}function m(a,b){return function(){return a.apply(b,arguments)}}function n(a,b){return typeof a==Na?a.apply(b?b[0]||d:d,b):a}function r(a,b,c){g(t(b),function(b){a.addEventListener(b,c,!1)})}function p(a,b,c){g(t(b),function(b){a.removeEventListener(b,
c,!1)})}function q(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function t(a){return a.trim().split(/\s+/g)}function u(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var l=0;l<a.length;){if(c&&a[l][c]==b||!c&&a[l]===b)return l;l++}return-1}function y(a){return Array.prototype.slice.call(a,0)}function I(a,b,c){for(var l=[],d=[],e=0;e<a.length;){var f=b?a[e][b]:a[e];0>u(d,f)&&l.push(a[e]);d[e]=f;e++}return c&&(l=b?l.sort(function(a,c){return a[b]>c[b]}):l.sort()),l}function X(a,b){for(var c,
l,e=b[0].toUpperCase()+b.slice(1),f=0;f<va.length;){if(c=va[f],l=c?c+e:b,l in a)return l;f++}return d}function ua(b){b=b.ownerDocument||b;return b.defaultView||b.parentWindow||a}function z(a,b){var c=this;this.manager=a;this.callback=b;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(b){n(a.options.enable,[a])&&c.handler(b)};this.init()}function Oa(a){var b=a.options.inputClass;return new (b?b:Pa?ja:Qa?Y:wa?ka:Z)(a,Ra)}function Ra(a,b,c){var l=c.pointers.length;var e=
c.changedPointers.length;var f=b&w&&0===l-e;l=b&(v|x)&&0===l-e;c.isFirst=!!f;c.isFinal=!!l;f&&(a.session={});c.eventType=b;b=a.session;f=c.pointers;l=f.length;b.firstInput||(b.firstInput=xa(c));1<l&&!b.firstMultiple?b.firstMultiple=xa(c):1===l&&(b.firstMultiple=!1);e=b.firstInput;var g=(l=b.firstMultiple)?l.center:e.center;var h=c.center=ya(f);c.timeStamp=la();c.deltaTime=c.timeStamp-e.timeStamp;c.angle=ma(g,h);c.distance=aa(g,h);e=c.center;g=b.offsetDelta||{};h=b.prevDelta||{};var J=b.prevInput||
{};c.eventType!==w&&J.eventType!==v||(h=b.prevDelta={x:J.deltaX||0,y:J.deltaY||0},g=b.offsetDelta={x:e.x,y:e.y});c.deltaX=h.x+(e.x-g.x);c.deltaY=h.y+(e.y-g.y);c.offsetDirection=za(c.deltaX,c.deltaY);g=c.deltaTime;e=c.deltaX/g||0;g=c.deltaY/g||0;c.overallVelocityX=e;c.overallVelocityY=g;c.overallVelocity=K(e)>K(g)?e:g;l?(e=l.pointers,e=aa(f[0],f[1],ba)/aa(e[0],e[1],ba)):e=1;c.scale=e;l?(l=l.pointers,f=ma(f[1],f[0],ba)+ma(l[1],l[0],ba)):f=0;c.rotation=f;c.maxPointers=b.prevInput?c.pointers.length>b.prevInput.maxPointers?
c.pointers.length:b.prevInput.maxPointers:c.pointers.length;g=b.lastInterval||c;f=c.timeStamp-g.timeStamp;c.eventType!=x&&(f>Sa||g.velocity===d)?(e=c.deltaX-g.deltaX,g=c.deltaY-g.deltaY,h=e/f||0,J=g/f||0,f=h,l=J,h=K(h)>K(J)?h:J,e=za(e,g),b.lastInterval=c):(h=g.velocity,f=g.velocityX,l=g.velocityY,e=g.direction);c.velocity=h;c.velocityX=f;c.velocityY=l;c.direction=e;b=a.element;q(c.srcEvent.target,b)&&(b=c.srcEvent.target);c.target=b;a.emit("hammer.input",c);a.recognize(c);a.session.prevInput=c}function xa(a){for(var b=
[],c=0;c<a.pointers.length;)b[c]={clientX:O(a.pointers[c].clientX),clientY:O(a.pointers[c].clientY)},c++;return{timeStamp:la(),pointers:b,center:ya(b),deltaX:a.deltaX,deltaY:a.deltaY}}function ya(a){var b=a.length;if(1===b)return{x:O(a[0].clientX),y:O(a[0].clientY)};for(var c=0,l=0,d=0;b>d;)c+=a[d].clientX,l+=a[d].clientY,d++;return{x:O(c/b),y:O(l/b)}}function za(a,b){return a===b?ca:K(a)>=K(b)?0>a?Q:R:0>b?S:T}function aa(a,b,c){c||(c=Aa);var d=b[c[0]]-a[c[0]];a=b[c[1]]-a[c[1]];return Math.sqrt(d*
d+a*a)}function ma(a,b,c){c||(c=Aa);return 180*Math.atan2(b[c[1]]-a[c[1]],b[c[0]]-a[c[0]])/Math.PI}function Z(){this.evEl=Ta;this.evWin=Ua;this.pressed=!1;z.apply(this,arguments)}function ja(){this.evEl=Ba;this.evWin=Ca;z.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function Da(){this.evTarget=Va;this.evWin=Wa;this.started=!1;z.apply(this,arguments)}function Y(){this.evTarget=Xa;this.targetIds={};z.apply(this,arguments)}function Ya(a,b){var c=y(a.touches),d=this.targetIds;
if(b&(w|L)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var l;a=y(a.changedTouches);var e=[],f=this.target;if(l=c.filter(function(a){return q(a.target,f)}),b===w)for(c=0;c<l.length;)d[l[c].identifier]=!0,c++;for(c=0;c<a.length;)d[a[c].identifier]&&e.push(a[c]),b&(v|x)&&delete d[a[c].identifier],c++;return e.length?[I(l.concat(e),"identifier",!0),e]:void 0}function ka(){z.apply(this,arguments);var a=m(this.handler,this);this.touch=new Y(this.manager,a);this.mouse=new Z(this.manager,a);this.primaryTouch=
null;this.lastTouches=[]}function Ea(a){a=a.changedPointers[0];if(a.identifier===this.primaryTouch){var b={x:a.clientX,y:a.clientY};this.lastTouches.push(b);var c=this.lastTouches;setTimeout(function(){var a=c.indexOf(b);-1<a&&c.splice(a,1)},Za)}}function na(a,b){this.manager=a;this.set(b)}function $a(a){if(-1<a.indexOf(M))return M;var b=-1<a.indexOf(U),c=-1<a.indexOf(V);return b&&c?M:b||c?b?U:V:-1<a.indexOf(oa)?oa:Fa}function D(a){this.options=G({},this.defaults,a||{});this.id=ab++;this.manager=
null;a=this.options.enable;this.options.enable=a===d?!0:a;this.state=da;this.simultaneous={};this.requireFail=[]}function Ga(a){return a&W?"cancel":a&H?"end":a&P?"move":a&A?"start":""}function Ha(a){return a==T?"down":a==S?"up":a==Q?"left":a==R?"right":""}function ea(a,b){return(b=b.manager)?b.get(a):a}function B(){D.apply(this,arguments)}function fa(){B.apply(this,arguments);this.pY=this.pX=null}function pa(){B.apply(this,arguments)}function qa(){D.apply(this,arguments);this._input=this._timer=null}
function ra(){B.apply(this,arguments)}function sa(){B.apply(this,arguments)}function ha(){D.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function E(a,b){b=b||{};var c=b.recognizers;return b.recognizers=c===d?E.defaults.preset:c,new ta(a,b)}function ta(a,b){this.options=G({},E.defaults,b||{});this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=a;this.input=Oa(this);this.touchAction=
new na(this,this.options.touchAction);Ia(this,!0);g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]);a[3]&&b.requireFailure(a[3])},this)}function Ia(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,l){d=X(c.style,l);b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""});b||(a.oldCssProps={})}}function bb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0);d.gesture=c;c.target.dispatchEvent(d)}var va=" webkit Moz MS ms o".split(" "),
cb=b.createElement("div"),Na="function",O=Math.round,K=Math.abs,la=Date.now;var G="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var l in e)e.hasOwnProperty(l)&&(b[l]=e[l])}return b}:Object.assign;var Ja=h(function(a,b,c){for(var e=Object.keys(b),l=0;l<e.length;)(!c||c&&a[e[l]]===d)&&(a[e[l]]=b[e[l]]),l++;return a},"extend","Use `assign`."),
db=h(function(a,b){return Ja(a,b,!0)},"merge","Use `assign`."),ab=1,eb=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,Pa=X(a,"PointerEvent")!==d,Qa=wa&&eb.test(navigator.userAgent),Sa=25,w=1,L=2,v=4,x=8,ca=1,Q=2,R=4,S=8,T=16,C=Q|R,N=S|T,Ka=C|N,Aa=["x","y"],ba=["clientX","clientY"];z.prototype={handler:function(){},init:function(){this.evEl&&r(this.element,this.evEl,this.domHandler);this.evTarget&&r(this.target,this.evTarget,this.domHandler);this.evWin&&r(ua(this.element),this.evWin,
this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler);this.evTarget&&p(this.target,this.evTarget,this.domHandler);this.evWin&&p(ua(this.element),this.evWin,this.domHandler)}};var fb={mousedown:w,mousemove:L,mouseup:v},Ta="mousedown",Ua="mousemove mouseup";k(Z,z,{handler:function(a){var b=fb[a.type];b&w&&0===a.button&&(this.pressed=!0);b&L&&1!==a.which&&(b=v);this.pressed&&(b&v&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:"mouse",
srcEvent:a}))}});var gb={pointerdown:w,pointermove:L,pointerup:v,pointercancel:x,pointerout:x},hb={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ba="pointerdown",Ca="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Ba="MSPointerDown",Ca="MSPointerMove MSPointerUp MSPointerCancel");k(ja,z,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms","");d=gb[d];var e=hb[a.pointerType]||a.pointerType,l="touch"==e,f=u(b,a.pointerId,"pointerId");d&w&&(0===a.button||
l)?0>f&&(b.push(a),f=b.length-1):d&(v|x)&&(c=!0);0>f||(b[f]=a,this.callback(this.manager,d,{pointers:b,changedPointers:[a],pointerType:e,srcEvent:a}),c&&b.splice(f,1))}});var ib={touchstart:w,touchmove:L,touchend:v,touchcancel:x},Va="touchstart",Wa="touchstart touchmove touchend touchcancel";k(Da,z,{handler:function(a){var b=ib[a.type];if(b===w&&(this.started=!0),this.started){var c=y(a.touches);var d=y(a.changedTouches);d=(b&(v|x)&&(c=I(c.concat(d),"identifier",!0)),[c,d]);b&(v|x)&&0===d[0].length-
d[1].length&&(this.started=!1);this.callback(this.manager,b,{pointers:d[0],changedPointers:d[1],pointerType:"touch",srcEvent:a})}}});var jb={touchstart:w,touchmove:L,touchend:v,touchcancel:x},Xa="touchstart touchmove touchend touchcancel";k(Y,z,{handler:function(a){var b=jb[a.type],c=Ya.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:"touch",srcEvent:a})}});var Za=2500;k(ka,z,{handler:function(a,b,c){var d="touch"==c.pointerType,e="mouse"==c.pointerType;
if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)b&w?(this.primaryTouch=c.changedPointers[0].identifier,Ea.call(this,c)):b&(v|x)&&Ea.call(this,c);else{if(d=e)a:{d=c.srcEvent.clientX;e=c.srcEvent.clientY;for(var l=0;l<this.lastTouches.length;l++){var f=this.lastTouches[l],g=Math.abs(e-f.y);if(25>=Math.abs(d-f.x)&&25>=g){d=!0;break a}}d=!1}if(d)return}this.callback(a,b,c)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var La=X(cb.style,"touchAction"),Ma=
La!==d,Fa="auto",oa="manipulation",M="none",U="pan-x",V="pan-y",ia=function(){if(!Ma)return!1;var b={},c=a.CSS&&a.CSS.supports;return"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}();na.prototype={set:function(a){"compute"==a&&(a=this.compute());Ma&&this.manager.element.style&&ia[a]&&(this.manager.element.style[La]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=
[];return g(this.manager.recognizers,function(b){n(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),$a(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=-1<d.indexOf(M)&&!ia[M],f=-1<d.indexOf(V)&&!ia[V];d=-1<d.indexOf(U)&&!ia[U];if(e){var l=2>a.distance,g=250>a.deltaTime;if(1===a.pointers.length&&l&&g)return}return d&&f?void 0:e||f&&c&C||d&&c&N?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=
!0;a.preventDefault()}};var da=1,A=2,P=4,H=8,F=H,W=16;D.prototype={defaults:{},set:function(a){return G(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(e(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=ea(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return e(a,"dropRecognizeWith",this)?this:(a=ea(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(e(a,"requireFailure",
this))return this;var b=this.requireFail;return a=ea(a,this),-1===u(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(e(a,"dropRequireFailure",this))return this;a=ea(a,this);a=u(this.requireFail,a);return-1<a&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;H>d&&b(c.options.event+Ga(d));
b(c.options.event);a.additionalEvent&&b(a.additionalEvent);d>=H&&b(c.options.event+Ga(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|da)))return!1;a++}return!0},recognize:function(a){a=G({},a);return n(this.options.enable,[this,a])?(this.state&(F|W|32)&&(this.state=da),this.state=this.process(a),void(this.state&(A|P|H|W)&&this.tryEmit(a))):(this.reset(),void(this.state=32))},
process:function(a){},getTouchAction:function(){},reset:function(){}};k(B,D,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(A|P);a=this.attrTest(a);return d&&(c&x||!a)?b|W:d||a?c&v?b|H:b&A?b|P:A:32}});k(fa,B,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ka},getTouchAction:function(){var a=this.options.direction,b=[];return a&C&&b.push(V),a&N&&b.push(U),b},directionTest:function(a){var b=
this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&C?(e=0===f?ca:0>f?Q:R,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?ca:0>g?S:T,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return B.prototype.attrTest.call(this,a)&&(this.state&A||!(this.state&A)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX;this.pY=a.deltaY;var b=Ha(a.direction);b&&(a.additionalEvent=this.options.event+b);this._super.emit.call(this,
a)}});k(pa,B,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[M]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&A)},emit:function(a){1!==a.scale&&(a.additionalEvent=this.options.event+(1>a.scale?"in":"out"));this._super.emit.call(this,a)}});k(qa,D,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Fa]},process:function(a){var b=this.options,c=a.pointers.length===
b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(v|x)&&!e)this.reset();else if(a.eventType&w)this.reset(),this._timer=f(function(){this.state=F;this.tryEmit()},b.time,this);else if(a.eventType&v)return F;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===F&&(a&&a.eventType&v?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=la(),this.manager.emit(this.options.event,this._input)))}});k(ra,B,{defaults:{event:"rotate",
threshold:0,pointers:2},getTouchAction:function(){return[M]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&A)}});k(sa,B,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:C|N,pointers:1},getTouchAction:function(){return fa.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(C|N)?b=a.overallVelocity:c&C?b=a.overallVelocityX:c&N&&(b=a.overallVelocityY),this._super.attrTest.call(this,
a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&K(b)>this.options.velocity&&a.eventType&v},emit:function(a){var b=Ha(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a);this.manager.emit(this.options.event,a)}});k(ha,D,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[oa]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,
e=a.deltaTime<b.time;if(this.reset(),a.eventType&w&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=v)return this.failTimeout();c=this.pTime?a.timeStamp-this.pTime<b.interval:!0;d=!this.pCenter||aa(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;d&&c?this.count+=1:this.count=1;this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=f(function(){this.state=F;this.tryEmit()},b.interval,this),A):F}return 32},failTimeout:function(){return this._timer=
f(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==F&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});E.VERSION="2.0.8";E.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ra,{enable:!1}],[pa,{enable:!1},["rotate"]],[sa,{direction:C}],[fa,{direction:C},["swipe"]],[ha],[ha,{event:"doubletap",taps:2},["tap"]],[qa]],cssProps:{userSelect:"none",
touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ta.prototype={set:function(a){return G(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c=this.recognizers,d=b.curRecognizer;(!d||d&&d.state&F)&&
(d=b.curRecognizer=null);for(var e=0;e<c.length;){var f=c[e];2===b.stopped||d&&f!=d&&!f.canRecognizeWith(d)?f.reset():f.recognize(a);!d&&f.state&(A|P|H)&&(d=b.curRecognizer=f);e++}}},get:function(a){if(a instanceof D)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(e(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(e(a,
"remove",this))return this;if(a=this.get(a)){var b=this.recognizers;a=u(b,a);-1!==a&&(b.splice(a,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(t(a),function(a){c[a]=c[a]||[];c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(t(a),function(a){b?c[a]&&c[a].splice(u(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&bb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length)for(b.type=
a,b.preventDefault=function(){b.srcEvent.preventDefault()},a=0;a<c.length;)c[a](b),a++},destroy:function(){this.element&&Ia(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};G(E,{INPUT_START:w,INPUT_MOVE:L,INPUT_END:v,INPUT_CANCEL:x,STATE_POSSIBLE:da,STATE_BEGAN:A,STATE_CHANGED:P,STATE_ENDED:H,STATE_RECOGNIZED:F,STATE_CANCELLED:W,STATE_FAILED:32,DIRECTION_NONE:ca,DIRECTION_LEFT:Q,DIRECTION_RIGHT:R,DIRECTION_UP:S,DIRECTION_DOWN:T,DIRECTION_HORIZONTAL:C,DIRECTION_VERTICAL:N,
DIRECTION_ALL:Ka,Manager:ta,Input:z,TouchAction:na,TouchInput:Y,MouseInput:Z,PointerEventInput:ja,TouchMouseInput:ka,SingleTouchInput:Da,Recognizer:D,AttrRecognizer:B,Tap:ha,Pan:fa,Swipe:sa,Pinch:pa,Rotate:ra,Press:qa,on:r,off:p,each:g,merge:db,extend:Ja,assign:G,inherit:k,bindFn:m,prefixed:X});("undefined"!=typeof a?a:"undefined"!=typeof self?self:{}).Hammer=E;"function"==typeof define&&define.amd?define(function(){return E}):"undefined"!=typeof module&&module.exports?module.exports=E:a[c]=E}(window,
document,"Hammer");
!function(){var a="undefined"!=typeof module&&module.exports,b="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,c=function(){var a,b=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),
"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],c=0;var d=b.length;for(var k={};d>c;c++)if(a=b[c],a&&a[1]in document){c=0;for(d=a.length;d>c;c++)k[b[0][c]]=a[c];return k}return!1}(),d={request:function(a){var d=c.requestFullscreen;a=a||document.documentElement;/5\.1[\.\d]* Safari/.test(navigator.userAgent)?a[d]():a[d](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[c.exitFullscreen]()},toggle:function(a){this.isFullscreen?
this.exit():this.request(a)},onchange:function(){},onerror:function(){},raw:c};return c?(Object.defineProperties(d,{isFullscreen:{get:function(){return!!document[c.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[c.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[c.fullscreenEnabled]}}}),document.addEventListener(c.fullscreenchange,function(a){d.onchange.call(d,a)}),document.addEventListener(c.fullscreenerror,function(a){d.onerror.call(d,a)}),void(a?
module.exports=d:window.screenfull=d)):void(a?module.exports=!1:window.screenfull=!1)}();
(function(a){try{var b=!!Symbol.iterator}catch(f){b=!1}var c=function(a){var c={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};b&&(c[Symbol.iterator]=function(){return c});return c},d=function(){var d=function(a){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var b=typeof a;if("undefined"!==b)if("string"===b)""!==a&&this._fromString(a);else if(a instanceof d){var c=this;a.forEach(function(a,b){c.append(b,a)})}else if(null!==a&&"object"===b)if("[object Array]"===Object.prototype.toString.call(a))for(b=
0;b<a.length;b++){var e=a[b];if("[object Array]"===Object.prototype.toString.call(e)||2!==e.length)this.append(e[0],e[1]);else throw new TypeError("Expected [string, any] as entry at index "+b+" of URLSearchParams's input");}else for(e in a)a.hasOwnProperty(e)&&this.append(e,a[e]);else throw new TypeError("Unsupported input's type for URLSearchParams");},e=d.prototype;e.append=function(a,b){a in this._entries?this._entries[a].push(String(b)):this._entries[a]=[String(b)]};e.delete=function(a){delete this._entries[a]};
e.get=function(a){return a in this._entries?this._entries[a][0]:null};e.getAll=function(a){return a in this._entries?this._entries[a].slice(0):[]};e.has=function(a){return a in this._entries};e.set=function(a,b){this._entries[a]=[String(b)]};e.forEach=function(a,b){var c;for(c in this._entries)if(this._entries.hasOwnProperty(c)){var d=this._entries[c];for(var e=0;e<d.length;e++)a.call(b,d[e],c,this)}};e.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return c(a)};e.values=function(){var a=
[];this.forEach(function(b){a.push(b)});return c(a)};e.entries=function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return c(a)};b&&(e[Symbol.iterator]=e.entries);e.toString=function(){var a=[];this.forEach(function(b,c){a.push(encodeURIComponent(c).replace(/%20/g,"+")+"="+encodeURIComponent(b).replace(/%20/g,"+"))});return a.join("&")};a.URLSearchParams=d};"URLSearchParams"in a&&"a=1"===(new URLSearchParams("?a=1")).toString()||d();d=URLSearchParams.prototype;"function"!==typeof d.sort&&
(d.sort=function(){var a=this,b=[];this.forEach(function(c,d){b.push([d,c]);a._entries||a.delete(d)});b.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});a._entries&&(a._entries={});for(var c=0;c<b.length;c++)this.append(b[c][0],b[c][1])});"function"!==typeof d._fromString&&Object.defineProperty(d,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(a){if(this._entries)this._entries={};else{var b=[];this.forEach(function(a,c){b.push(c)});for(var c=0;c<b.length;c++)this.delete(b[c])}a=
a.replace(/^\?/,"");a=a.split("&");for(c=0;c<a.length;c++){var d=a[c].split("=");this.append(decodeURIComponent(d[0]).replace(/\+/g," "),1<d.length?decodeURIComponent(d[1]).replace(/\+/g," "):"")}}})})("undefined"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this);
(function(a){var b=function(){var b=a.URL,c=function(b,c){"string"!==typeof b&&(b=String(b));var d=document;if(c&&(void 0===a.location||c!==a.location.href)){d=document.implementation.createHTMLDocument("");var e=d.createElement("base");e.href=c;d.head.appendChild(e);try{if(0!==e.href.indexOf(c))throw Error(e.href);}catch(y){throw Error("URL unable to set base "+c+" due to "+y);}}c=d.createElement("a");c.href=b;e&&(d.body.appendChild(c),c.href=c.href);if(":"===c.protocol||!/:/.test(c.href))throw new TypeError("Invalid URL");
Object.defineProperty(this,"_anchorElement",{value:c});var f=new URLSearchParams(this.search),h=!0,g=!0,k=this;["append","delete","set"].forEach(function(a){var b=f[a];f[a]=function(){b.apply(f,arguments);h&&(g=!1,k.search=f.toString(),g=!0)}});Object.defineProperty(this,"searchParams",{value:f,enumerable:!0});var u=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==u&&(u=this.search,g&&(h=!1,this.searchParams._fromString(this.search),
h=!0))}})},e=c.prototype,g=function(a){Object.defineProperty(e,a,{get:function(){return this._anchorElement[a]},set:function(b){this._anchorElement[a]=b},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(a){g(a)});Object.defineProperty(e,"search",{get:function(){return this._anchorElement.search},set:function(a){this._anchorElement.search=a;this._updateSearchParams()},enumerable:!0});Object.defineProperties(e,{toString:{get:function(){var a=this;return function(){return a.href}}},
href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(a){this._anchorElement.href=a;this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(a){this._anchorElement.pathname=a},enumerable:!0},origin:{get:function(){return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(this._anchorElement.port!={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol]&&""!==this._anchorElement.port?
":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(a){},enumerable:!0},username:{get:function(){return""},set:function(a){},enumerable:!0}});c.createObjectURL=function(a){return b.createObjectURL.apply(b,arguments)};c.revokeObjectURL=function(a){return b.revokeObjectURL.apply(b,arguments)};a.URL=c};(function(){try{var a=new URL("b","http://a");a.pathname="c%20d";return"http://a/c%20d"===a.href&&a.searchParams}catch(f){return!1}})()||b();if(void 0!==a.location&&
!("origin"in a.location)){var c=function(){return a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"")};try{Object.defineProperty(a.location,"origin",{get:c,enumerable:!0})}catch(d){setInterval(function(){a.location.origin=c()},100)}}})("undefined"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this);
!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=210)}([function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(22);var a=n(1);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"Log",value:function(e,t){void 0===t&&(t=a.a.Information);var n="["+(new Date).toString()+"] "+e;switch(t){case a.a.Debug:this.IsDebugOutputEnabled&&console.debug(n);break;case a.a.Information:console.log(n);break;case a.a.Error:console.error(n);break;case a.a.Warning:console.warn(n)}}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();i.IsDebugOutputEnabled=!1},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Debug=0]="Debug",e[e.Information=1]="Information",e[e.Error=2]="Error",e[e.Warning=3]="Warning"}(a||(a={}))},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Pending=-1]="Pending",e[e.OK=0]="OK",e[e.DataPollTimeoutWarning=1]="DataPollTimeoutWarning",e[e.NetworkLevelError=2]="NetworkLevelError",e[e.NetworkTimeoutError=3]="NetworkTimeoutError",e[e.InternalError=4]="InternalError",e[e.ExceptionError=5]="ExceptionError",e[e.DownloadScreenError=10]="DownloadScreenError",e[e.RegisterGroupError=11]="RegisterGroupError",e[e.UpdateDataError=12]="UpdateDataError",e[e.InvalidGroupIDError=13]="InvalidGroupIDError",e[e.AuthorizationError=14]="AuthorizationError",e[e.SessionError=15]="SessionError",e[e.DuplicateStationIDError=16]="DuplicateStationIDError",e[e.ProjectUnloadedError=17]="ProjectUnloadedError",e[e.LocalProjectChangeError=18]="LocalProjectChangeError",e[e.LocalProjectUpdating=19]="LocalProjectUpdating",e[e.LocalProjectChangeRetry=20]="LocalProjectChangeRetry",e[e.ProjectChanged=100]="ProjectChanged"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(22);var a=n(37),r=n(16),i=n(10),o=n(86),s=n(4),u=n(13),c=n(28),l=n(6);function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,f;return t=e,f=[{key:"getImageScaling",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.b.Stretch;if(void 0===e)return t;switch(e){case"Fill":return a.b.Fill;case"Fit":return a.b.Fit;case"Center":return a.b.Center;case"Stretch":default:return a.b.Stretch}}},{key:"getPlacement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.b.Center;if(void 0===e)return t;switch(e){case"Left":return r.b.Left;case"Right":return r.b.Right;case"Top":return r.b.Top;case"Bottom":return r.b.Bottom;case"Center":default:return r.b.Center}}},{key:"getHorizontalAlignment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.a.Center;if(void 0===e)return t;switch(e){case"Left":return i.a.Left;case"Right":return i.a.Right;case"Center":default:return i.a.Center}}},{key:"getVerticalAlignment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.c.Middle;if(void 0===e)return t;switch(e){case"Top":return i.c.Top;case"Bottom":return i.c.Bottom;case"Middle":default:return i.c.Middle}}},{key:"getTextDirection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.b.LeftToRight;if(void 0===e)return t;switch(e){case"TopToBottom":return i.b.TopToBottom;case"BottomToTop":return i.b.BottomToTop;case"LeftToRight":default:return i.b.LeftToRight}}},{key:"getBoolean",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"boolean"!=typeof e&&(e="string"==typeof e?o.a.stringToBoolean(e):t),e}},{key:"convertToBoolean",value:function(e){if("boolean"!=typeof e){if("string"==typeof e){var t=e.toLowerCase();if("true"===t)e=!0;else if("false"===t)e=!1;else{var n=parseFloat(e);e=n>0||n<0}return e}e="number"==typeof e?e>0||e<0:!!l.a.isLong(e)&&!e.isZero()}return e}},{key:"getNumber",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?t=e:"string"==typeof e?(t=parseFloat(e),isNaN(t)&&(t=o.a.booleanStringToNumber(e))):"boolean"==typeof e?t=e?1:0:l.a.isLong(e)&&(t=e.toNumber()),isNaN(t)?n:t}},{key:"getString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"string"!=typeof e&&(e=null==e?t:e.toString()),e}},{key:"getPoint",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;void 0===t&&(t=null!==n?n:{X:0,Y:0});var a=e.getNumber(t.X),r=e.getNumber(t.Y);return new s.a(a,r)}},{key:"getSize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;void 0===t&&(t=null!==n?n:{Width:0,Height:0});var a=e.getNumber(t.Width),r=e.getNumber(t.Height);return new s.a(a,r)}},{key:"getRect",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;void 0===t&&(t=null!==n?n:{Left:0,Top:0,Right:0,Bottom:0});var a=e.getNumber(t.Left),r=e.getNumber(t.Top),i=e.getNumber(t.Right),o=e.getNumber(t.Bottom);return new u.a(a,r,i,o)}},{key:"getColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(void 0===e)return t;e=e.toString();var n=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16),i=parseInt(e.slice(7,9),16);return new c.a(a,r,i,n)}}],(n=null)&&h(t.prototype,n),f&&h(t,f),e}()},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}var t,n,r;return t=e,r=[{key:"equals",value:function(e,t,n){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n}},{key:"equalsXY",value:function(e,t,n,a){return Math.abs(e.x-t)<a&&Math.abs(e.y-n)<a}},{key:"distance",value:function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}},{key:"dotProduct",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"createPointArray",value:function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=new e;return n}}],(n=[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"getLength",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"getAngle",value:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e}},{key:"normalize",value:function(){var e=1/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=e,this.y*=e}},{key:"scale",value:function(e,t){this.x*=e,this.y*=t}}])&&a(t.prototype,n),r&&a(t,r),e}();r.origin=new r(0,0),r.i=new r(1,0),r.j=new r(0,1)},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n(1),o=n(12);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==t&&(this.Name=t),void 0!==n&&(this.Value=n)}var t,n,a;return t=e,(n=[{key:"NewData",get:function(){return this._newData},set:function(e){this._newData=e}},{key:"Name",get:function(){return this._name},set:function(e){this._name=e}},{key:"Value",get:function(){return this.NewData=!1,this._value},set:function(e){e!==this._value&&(this._value=e,this.NewData=!0)}}])&&s(t.prototype,n),a&&s(t,a),e}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return h}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return _});var h=function(){function e(t,n,o){c(this,e),this.useRequestTrackingMode=!1,this.xhrTimeout=1e3,this._serviceStatus=a.a.OK,void 0!==n&&"ON"===n.toUpperCase()?r.a.IsDebugOutputEnabled=!0:r.a.IsDebugOutputEnabled=!1,void 0!==t&&t>0&&(this.xhrTimeout=t),r.a.Log("DEBUG: Base Data Access service's XHR timeout (ms): "+this.xhrTimeout,i.a.Debug),void 0!==o&&(this.stationID=o),r.a.Log("DEBUG: Base Data Access service's station ID: "+this.stationID,i.a.Debug)}var t,n,s;return t=e,s=[{key:"PrepareStatusCallbackData",value:function(e){return{status:e}}},{key:"PrepareVarCallbackData",value:function(e,t){var n=[];try{n={name:e,value:t},JSON.stringify(n)}catch(e){r.a.Log("ERROR: DataAccessServiceBase.PrepareVarCallbackData) Caught exception: "+e,i.a.Error),n=this.PrepareStatusCallbackData(a.a.ExceptionError)}return n}},{key:"PrepareSessionCreationCallbackData",value:function(e,t,n){var o=[];try{o=void 0===n?{status:e,sessionID:t}:{status:e,sessionID:t,timeout:n},JSON.stringify(o)}catch(e){r.a.Log("ERROR: DataAccessServiceBase.PrepareSessionCreationCallbackData) Caught exception: "+e,i.a.Error),o=this.PrepareStatusCallbackData(a.a.ExceptionError)}return o}},{key:"PrepareSessionMaintenanceCallbackData",value:function(t,n){return e.PrepareSessionCreationCallbackData(t,n,void 0)}}],(n=[{key:"PrepareXhr",value:function(e,t,n,s){var u=this;try{this.SetStatus(a.a.Pending),e.onerror=function(e){return u.OnXhrError(e,n,s)},e.ontimeout=function(e){return u.OnXhrTimeout(e,n,s)};var c=!0;void 0!==t&&!1===(c=o.a.SetAcceptType(e,t))&&r.a.Log("WARNING: Base Data Access service's preparing of XML HTTP Request failed to set the accept MIME type.",i.a.Warning);var l=o.a.DisableCaching(e);!1===l&&r.a.Log("WARNING: Base Data Access service's preparing of XML HTTP Request failed to disable caching.",i.a.Warning);var h=o.a.EnableTimeout(e,this.xhrTimeout);return!1===h&&r.a.Log("WARNING: Base Data Access service's preparing of XML HTTP Request failed to enable timeout setting.",i.a.Warning),this.access_token?e.setRequestHeader("Authorization","Bearer "+this.access_token):r.a.Log("DEBUG: No access token available for command: "+n,i.a.Debug),c&&l&&h}catch(e){return r.a.Log("ERROR: DataAccessServiceBase.PrepareXhr) Caught exception: "+e,i.a.Error),this.SetStatus(a.a.ExceptionError),!1}}},{key:"PrepareStatusCallbackData",value:function(t){return void 0!==t&&this.SetStatus(t),e.PrepareStatusCallbackData(this.status)}},{key:"PrepareVarsCallbackDataSupport",value:function(e){var t=[];try{this.SetStatus(a.a.OK);t={status:this.status,variables:e};JSON.stringify(t)}catch(e){r.a.Log("ERROR: DataAccessServiceBase.PrepareVarsCallbackDataSupport) Caught exception: "+e,i.a.Error),t=this.PrepareStatusCallbackData(a.a.ExceptionError)}return t}},{key:"PrepareGroupRegistrationCallbackData",value:function(e,t){var n=[];try{this.SetStatus(a.a.OK),n={status:this.status,requestIdentifier:t,groupIdentifier:e},JSON.stringify(n)}catch(e){r.a.Log("ERROR: DataAccessServiceBase.PrepareGroupRegistrationCallbackData) Caught exception: "+e,i.a.Error),n=this.PrepareStatusCallbackData(a.a.ExceptionError)}return n}},{key:"SetStatus",value:function(e){this._serviceStatus=e}},{key:"OnXhrError",value:function(e,t,n){var o;try{var s=e.target;r.a.Log("ERROR: Base Data Access service's XML HTTP Request failed for command '"+t+"' with status code '"+s.status+"' and status text '"+s.statusText+"'.",i.a.Error),o=this.PrepareStatusCallbackData(a.a.NetworkLevelError)}catch(e){r.a.Log("WARNING: DataAccessServiceBase.OnXhrError) Caught exception: "+e,i.a.Warning),o=this.PrepareStatusCallbackData(a.a.ExceptionError)}void 0!==n&&n(o)}},{key:"OnXhrTimeout",value:function(e,t,n){var o;try{r.a.Log("ERROR: Base Data Access service's XML HTTP Request timed out for command: "+t,i.a.Error),o=this.PrepareStatusCallbackData(a.a.NetworkTimeoutError)}catch(e){r.a.Log("WARNING: DataAccessServiceBase.OnXhrTimeout) Caught exception: "+e,i.a.Warning),o=this.PrepareStatusCallbackData(a.a.ExceptionError)}void 0!==n&&n(o)}},{key:"sessionID",get:function(){return this._sessionID}},{key:"sessionTimeout",get:function(){return this._sessionTimeout}},{key:"sessionUrl",get:function(){return this._sessionUrl}},{key:"status",get:function(){return this._serviceStatus}}])&&l(t.prototype,n),s&&l(t,s),e}();h.function="function",h.forwardSlash="/",h.httpRequestMethod_GET="GET",h.httpRequestMethod_DELETE="DELETE",h.httpRequestMethod_POST="POST",h.httpRequestMethod_PUT="PUT",h.httpRequestReadyState_Unsent=0,h.httpRequestReadyState_Opened=1,h.httpRequestReadyState_HeadersReceived=2,h.httpRequestReadyState_Loading=3,h.httpRequestReadyState_Done=4,h.httpRequestStatus_OK=200,h.httpRequestStatus_Created=201,h.httpRequestStatus_NoContent=204,h.httpRequestStatus_NotModified=304,h.httpRequestStatus_BadRequest=400,h.httpRequestStatus_Unauthorized=401,h.httpRequestStatus_Forbidden=403,h.httpRequestStatus_NotFound=404,h.httpRequestStatus_RequestTimeout=408,h.httpRequestStatus_Conflict=409,h.httpRequestStatus_Gone=410,h.httpRequestStatus_NotImplemented=501,h.httpRequestStatus_BadGateway=502,h.httpRequestStatus_ServiceUnavailable=503,h.httpRequestHeader_Location="Location",h.commandReadGroup="ReadGroup",h.commandRegisterGroup="RegisterGroup",h.commandUnregisterGroup="UnregisterGroup",h.commandUpdateGroup="UpdateGroup",h.commandWriteValues="WriteValues",h.commandReadVariables="ReadVariables",h.commandWriteVariables="WriteVariables";var f=function e(t,n){c(this,e),this.id=t,this.location=n},_=function e(t,n){for(var a in c(this,e),this.items=[],this.id=t,n)this.items.push(new u(n[a]))}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(22),n(155);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lte=this.lessThanOrEqual,this.gt=this.greaterThan,this.shl=this.shiftLeft,this.shr=this.shiftRight,this.shru=this.shiftRightUnsigned,this.shr_u=this.shiftRightUnsigned,this.low=0|t,this.high=0|n,this.unsigned=!!a}var t,n,r;return t=e,r=[{key:"isLong",value:function(e){return!0===(e&&e.IsLong)}},{key:"fromInt",value:function(t,n){var a,r,i;return n?(i=0<=(t>>>=0)&&t<256)&&(r=e.UINT_CACHE[t])?r:(a=e.fromBits(t,(0|t)<0?-1:0,!0),i&&(e.UINT_CACHE[t]=a),a):(i=-128<=(t|=0)&&t<128)&&(r=e.INT_CACHE[t])?r:(a=e.fromBits(t,t<0?-1:0,!1),i&&(e.INT_CACHE[t]=a),a)}},{key:"fromNumber",value:function(t,n){if(isNaN(t))return n?e.UZERO:e.ZERO;if(n){if(t<0)return e.UZERO;if(t>=e.TWO_PWR_64_DBL)return e.MAX_UNSIGNED_VALUE}else{if(t<=-e.TWO_PWR_63_DBL)return e.MIN_VALUE;if(t+1>=e.TWO_PWR_63_DBL)return e.MAX_VALUE}return t<0?e.fromNumber(-t,n).neg():e.fromBits(t%e.TWO_PWR_32_DBL|0,t/e.TWO_PWR_32_DBL|0,n)}},{key:"fromBits",value:function(t,n,a){return new e(t,n,a)}},{key:"fromString",value:function(t,n,a){if(0===t.length)return e.ZERO;if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof n?(a=n,n=!1):n=!!n,(a=a||10)<2||36<a)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return e.fromString(t.substring(1),n,a).neg();for(var i=e.fromNumber(e.pow_dbl(a,8)),o=e.ZERO,s=0;s<t.length;s+=8){var u=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+u),a);if(u<8){var l=e.fromNumber(e.pow_dbl(a,u));o=o.mul(l).add(e.fromNumber(c))}else o=(o=o.mul(i)).add(e.fromNumber(c))}return o.unsigned=n,o}},{key:"fromValue",value:function(t,n){return"number"==typeof t?e.fromNumber(t,n):"string"==typeof t?e.fromString(t,n):e.fromBits(t.low,t.high,"boolean"==typeof n?n:t.unsigned)}},{key:"fromBytes",value:function(t,n,a){return a?e.fromBytesLE(t,n):e.fromBytesBE(t,n)}},{key:"fromBytesLE",value:function(t,n){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)}},{key:"fromBytesBE",value:function(t,n){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)}}],(n=[{key:"toInt",value:function(){return this.unsigned?this.low>>>0:this.low}},{key:"toNumber",value:function(){return this.unsigned?(this.high>>>0)*e.TWO_PWR_32_DBL+(this.low>>>0):this.high*e.TWO_PWR_32_DBL+(this.low>>>0)}},{key:"toString",value:function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(e.MIN_VALUE)){var n=e.fromNumber(t),a=this.div(n),r=a.mul(n).sub(this);return a.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=e.fromNumber(e.pow_dbl(t,6),this.unsigned),o=new e(this.low,this.high,this.unsigned),s="";;){var u=o.div(i),c=(o.sub(u.mul(i)).toInt()>>>0).toString(t);if((o=u).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}}},{key:"toFixed",value:function(e){var t=this.toString();if(e>0){t.concat(".");for(var n=0;n<20&&n<e;n++)t+="0"}return t}},{key:"getHighBits",value:function(){return this.high}},{key:"getHighBitsUnsigned",value:function(){return this.high>>>0}},{key:"getLowBits",value:function(){return this.low}},{key:"getLowBitsUnsigned",value:function(){return this.low>>>0}},{key:"getNumBitsAbs",value:function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1}},{key:"isZero",value:function(){return 0===this.high&&0===this.low}},{key:"isNegative",value:function(){return!this.unsigned&&this.high<0}},{key:"isPositive",value:function(){return this.unsigned||this.high>=0}},{key:"isOdd",value:function(){return 1==(1&this.low)}},{key:"isEven",value:function(){return 0==(1&this.low)}},{key:"equals",value:function(t){return e.isLong(t)||(t=e.fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)}},{key:"eq",value:function(e){return this.equals(e)}},{key:"notEquals",value:function(e){return!this.equals(e)}},{key:"neq",value:function(e){return this.notEquals(e)}},{key:"ne",value:function(e){return this.notEquals(e)}},{key:"lessThan",value:function(e){return this.comp(e)<0}},{key:"lt",value:function(e){return this.lessThan(e)}},{key:"lessThanOrEqual",value:function(e){return this.comp(e)<=0}},{key:"le",value:function(e){return this.lessThanOrEqual(e)}},{key:"greaterThan",value:function(e){return this.comp(e)>0}},{key:"greaterThanOrEqual",value:function(e){return this.comp(e)>=0}},{key:"gte",value:function(e){return this.greaterThanOrEqual(e)}},{key:"ge",value:function(e){return this.greaterThanOrEqual(e)}},{key:"compare",value:function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var n=this.isNegative(),a=t.isNegative();return n&&!a?-1:!n&&a?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1}},{key:"comp",value:function(e){return this.compare(e)}},{key:"negate",value:function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)}},{key:"neg",value:function(){return this.negate()}},{key:"add",value:function(t){e.isLong(t)||(t=e.fromValue(t));var n=this.high>>>16,a=65535&this.high,r=this.low>>>16,i=65535&this.low,o=t.high>>>16,s=65535&t.high,u=t.low>>>16,c=0,l=0,h=0,f=0;return h+=(f+=i+(65535&t.low))>>>16,f&=65535,l+=(h+=r+u)>>>16,h&=65535,c+=(l+=a+s)>>>16,l&=65535,c+=n+o,c&=65535,e.fromBits(h<<16|f,c<<16|l,this.unsigned)}},{key:"subtract",value:function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"multiply",value:function(t){if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())return this.unsigned?e.UZERO:e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.fromValue(e.MIN_VALUE,this.unsigned):this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,r=this.low>>>16,i=65535&this.low,o=t.high>>>16,s=65535&t.high,u=t.low>>>16,c=65535&t.low,l=0,h=0,f=0,_=0;return f+=(_+=i*c)>>>16,_&=65535,h+=(f+=r*c)>>>16,f&=65535,h+=(f+=i*u)>>>16,f&=65535,l+=(h+=a*c)>>>16,h&=65535,l+=(h+=r*u)>>>16,h&=65535,l+=(h+=i*s)>>>16,h&=65535,l+=n*c+a*u+r*s+i*o,l&=65535,e.fromBits(f<<16|_,l<<16|h,this.unsigned)}},{key:"mul",value:function(e){return this.multiply(e)}},{key:"divide",value:function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var n,a,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;r=e.UZERO}else{if(this.eq(e.MIN_VALUE))return t.eq(e.ONE)||t.eq(e.NEG_ONE)?e.MIN_VALUE:t.eq(e.MIN_VALUE)?e.ONE:(n=this.shr(1).div(t).shl(1)).eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(a=this.sub(t.mul(n)),r=n.add(a.div(t)));if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=e.ZERO}for(a=this;a.gte(t);){n=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),o=i<=48?1:e.pow_dbl(2,i-48),s=e.fromNumber(n),u=s.mul(t);u.isNegative()||u.gt(a);)n-=o,u=(s=e.fromNumber(n,this.unsigned)).mul(t);s.isZero()&&(s=e.ONE),r=r.add(s),a=a.sub(u)}return r}},{key:"div",value:function(e){return this.divide(e)}},{key:"modulo",value:function(t){return e.isLong(t)||(t=e.fromValue(t)),this.sub(this.div(t).mul(t))}},{key:"mod",value:function(e){return this.modulo(e)}},{key:"rem",value:function(e){return this.modulo(e)}},{key:"not",value:function(){return e.fromBits(~this.low,~this.high,this.unsigned)}},{key:"and",value:function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)}},{key:"or",value:function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)}},{key:"xor",value:function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)}},{key:"shiftLeft",value:function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)}},{key:"shiftRight",value:function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)}},{key:"shiftRightUnsigned",value:function(t){if(e.isLong(t)&&(t=t.toInt()),0===(t&=63))return this;var n=this.high;if(t<32){var a=this.low;return e.fromBits(a>>>t|n<<32-t,n>>>t,this.unsigned)}return 32===t?e.fromBits(n,0,this.unsigned):e.fromBits(n>>>t-32,0,this.unsigned)}},{key:"toSigned",value:function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this}},{key:"toUnsigned",value:function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)}},{key:"toBytes",value:function(e){return e?this.toBytesLE():this.toBytesBE()}},{key:"toBytesLE",value:function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}},{key:"toBytesBE",value:function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]}},{key:"IsLong",get:function(){return!0}}])&&a(t.prototype,n),r&&a(t,r),e}();r.INT_CACHE={},r.UINT_CACHE={},r.pow_dbl=Math.pow,r.TWO_PWR_16_DBL=65536,r.TWO_PWR_24_DBL=1<<24,r.TWO_PWR_32_DBL=r.TWO_PWR_16_DBL*r.TWO_PWR_16_DBL,r.TWO_PWR_64_DBL=r.TWO_PWR_32_DBL*r.TWO_PWR_32_DBL,r.TWO_PWR_63_DBL=r.TWO_PWR_64_DBL/2,r.TWO_PWR_24=r.fromInt(r.TWO_PWR_24_DBL),r.ZERO=r.fromInt(0),r.UZERO=r.fromInt(0,!0),r.ONE=r.fromInt(1),r.UONE=r.fromInt(1,!0),r.NEG_ONE=r.fromInt(-1),r.MAX_VALUE=r.fromBits(-1,2147483647,!1),r.MAX_UNSIGNED_VALUE=r.fromBits(-1,-1,!0),r.MIN_VALUE=r.fromBits(0,-2147483648,!1)},function(e,t,n){n(169)("asyncIterator")},function(e,t,n){"use strict";var a=n(54),r=n(65),i=n(55),o=n(67),s=n(75),u=n(199).KEY,c=n(58),l=n(148),h=n(158),f=n(115),_=n(47),d=n(170),p=n(169),g=n(200),v=n(201),y=n(52),m=n(66),b=n(94),E=n(123),D=n(122),S=n(150),P=n(202),w=n(121),C=n(59),O=n(116),R=w.f,k=C.f,x=P.f,T=a.Symbol,L=a.JSON,A=L&&L.stringify,M=_("_hidden"),I=_("toPrimitive"),B={}.propertyIsEnumerable,U=l("symbol-registry"),j=l("symbols"),F=l("op-symbols"),N=Object.prototype,W="function"==typeof T,G=a.QObject,V=!G||!G.prototype||!G.prototype.findChild,K=i&&c(function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,n){var a=R(N,t);a&&delete N[t],k(e,t,n),a&&e!==N&&k(N,t,a)}:k,q=function(e){var t=j[e]=S(T.prototype);return t._k=e,t},H=W&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},z=function(e,t,n){return e===N&&z(F,t,n),y(e),t=E(t,!0),y(n),r(j,t)?(n.enumerable?(r(e,M)&&e[M][t]&&(e[M][t]=!1),n=S(n,{enumerable:D(0,!1)})):(r(e,M)||k(e,M,D(1,{})),e[M][t]=!0),K(e,t,n)):k(e,t,n)},X=function(e,t){y(e);for(var n,a=g(t=b(t)),r=0,i=a.length;i>r;)z(e,n=a[r++],t[n]);return e},Y=function(e){var t=B.call(this,e=E(e,!0));return!(this===N&&r(j,e)&&!r(F,e))&&(!(t||!r(this,e)||!r(j,e)||r(this,M)&&this[M][e])||t)},Q=function(e,t){if(e=b(e),t=E(t,!0),e!==N||!r(j,t)||r(F,t)){var n=R(e,t);return!n||!r(j,t)||r(e,M)&&e[M][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=x(b(e)),a=[],i=0;n.length>i;)r(j,t=n[i++])||t==M||t==u||a.push(t);return a},J=function(e){for(var t,n=e===N,a=x(n?F:b(e)),i=[],o=0;a.length>o;)!r(j,t=a[o++])||n&&!r(N,t)||i.push(j[t]);return i};W||(s((T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===N&&t.call(F,n),r(this,M)&&r(this[M],e)&&(this[M][e]=!1),K(this,e,D(1,n))};return i&&V&&K(N,e,{configurable:!0,set:t}),q(e)}).prototype,"toString",function(){return this._k}),w.f=Q,C.f=z,n(124).f=P.f=Z,n(146).f=Y,n(171).f=J,i&&!n(126)&&s(N,"propertyIsEnumerable",Y,!0),d.f=function(e){return q(_(e))}),o(o.G+o.W+o.F*!W,{Symbol:T});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)_($[ee++]);for(var te=O(_.store),ne=0;te.length>ne;)p(te[ne++]);o(o.S+o.F*!W,"Symbol",{for:function(e){return r(U,e+="")?U[e]:U[e]=T(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),o(o.S+o.F*!W,"Object",{create:function(e,t){return void 0===t?S(e):X(S(e),t)},defineProperty:z,defineProperties:X,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),L&&o(o.S+o.F*(!W||c(function(){var e=T();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){for(var t,n,a=[e],r=1;arguments.length>r;)a.push(arguments[r++]);if(n=t=a[1],(m(t)||void 0!==e)&&!H(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!H(t))return t}),a[1]=t,A.apply(L,a)}}),T.prototype[I]||n(74)(T.prototype,I,T.prototype.valueOf),h(T,"Symbol"),h(Math,"Math",!0),h(a.JSON,"JSON",!0)},function(e,t,n){"use strict";n(7),n(8),n(56),n(22);var a=n(11),r=n(28),i=n(4),o=n(78),s=n(40),u=n(133);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fontString="",this._family=t,this._size=n,this._style=a,this._weight=r,this._lineSpacing=i,this._fontString=e.createFontString(t,n,a,r)}var t,n,a;return t=e,a=[{key:"createFontString",value:function(e,t,n,a){var r=new u.a;return r.append(n.toLowerCase()),r.append(" "),r.append(a.toString()),r.append(" "),r.append(t.toFixed(1)),r.append("px "),r.append(e),r.toString()}}],(n=[{key:"toString",value:function(){return this._fontString}},{key:"family",get:function(){return this._family}},{key:"size",get:function(){return this._size}},{key:"style",get:function(){return this._style}},{key:"weight",get:function(){return this._weight}},{key:"lineSpacing",get:function(){return this._lineSpacing}}])&&c(t.prototype,n),a&&c(t,a),e}(),h=n(3),f=n(15),_=n(57),d=n(26);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return E});var E=function(e){function t(e,n,r,o){var u,c,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c=this,f=y(t).call(this,r,o),(u=!f||"object"!==p(f)&&"function"!=typeof f?b(c):f).text=null,u.fillStyle=new s.a(null),u.strokeStyle=new s.a(null),u.fontFillStyle=new s.a(null),u.path=null,u.guiStyle=t.defaultGuiStyle,u.font=null,u.lineWidth=t.defaultLineWidth,u.dashSegments=[],u.dashOffset=0,u._boundsPoint=new i.a,u._type="VisualNode",u._isVisual=!0,u._app=e,u.strokeStyle.value=h.a.getColor(r.LineColor,t.defaultLineColor).toString(),u.fontFillStyle.value=h.a.getColor(r.FontColor,t.defaultFontColor).toString(),u.guiStyle=t.getGuiStyle(r.GuiStyle,t.defaultGuiStyle),u.lineWidth=h.a.getNumber(r.LineWidth,t.defaultLineWidth),u.loadDashStyle(r);var _=h.a.getString(r.FontFamily,t.defaultFontFamily),d=h.a.getNumber(r.FontSize,t.defaultFontSize),g=h.a.getString(r.FontStyle,t.defaultFontStyle),v=h.a.getNumber(r.FontWeight,t.defaultFontWeight),m=h.a.getNumber(r.FontLineSpacing,t.defaultFontLineSpacing);u.font=new l(_,d,g,v,m);var E=function(e){u.resetAnimationWatchDog()};return u.fillStyle.valueChanged=E,u.strokeStyle.valueChanged=E,u.fontFillStyle.valueChanged=E,u.isEnabled.valueChanged=function(e){u.resetAnimationWatchDog(),u.isEnabled.value&&null!==a.a.Enabled?a.a.Enabled(b(b(u))):null!==a.a.Disabled&&a.a.Disabled(b(b(u)))},u}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,a["a"]),n=t,o=[{key:"getGuiStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.b.Flat;if(null==e)return t;switch(e){case"Glossy":return d.b.Glossy;case"Flat":default:return d.b.Flat}}}],(r=[{key:"getHasHitRegion",value:function(){return this.hasActions(!0)}},{key:"initVisual",value:function(e,n){return v(y(t.prototype),"init",this).call(this,n),this.path&&!this.needPathStrokeApproximation()&&this.path.freeStrokeApproximation(),this}},{key:"needPathStrokeApproximation",value:function(){return this.hasHitRegion}},{key:"loadDashStyle",value:function(e){if(null!=e.DashStyle&&null!=e.DashStyle.Dashes){var t=e.DashStyle.Dashes;this.dashSegments=new Array(t.length);for(var n=0;n<t.length;n++)this.dashSegments[n]=this.lineWidth*h.a.getNumber(t[n]),this.dashSegments[n]<=0&&(this.dashSegments[n]=1);this.dashOffset=h.a.getNumber(e.DashStyle.Offset,0)}}},{key:"draw",value:function(e,t){}},{key:"isPointInPath",value:function(e,t,n){return null!==this.path&&f.a.isPointInPath(e,this.path,t,n,this.screenMatrix)}},{key:"isPointClippped",value:function(e,t){return!!this.screenClipRect&&!this.screenClipRect.containsXY(e,t)}},{key:"onKeyDown",value:function(e){if("Enter"==e.key||" "==e.key||"Spacebar"==e.key){var t=new _.a(e.source);return this._app.dispatchNodeEvent(this,function(e){return e.onPointerOver(t)}),this._app.dispatchNodeEvent(this,function(e){return e.onPointerDown(t)}),!0}return!1}},{key:"onKeyUp",value:function(e){if("Enter"==e.key||" "==e.key||"Spacebar"==e.key){var t=new _.a(e.source);this._app.dispatchNodeEvent(this,function(e){return e.onPointerUp(t)}),this._app.dispatchNodeEvent(this,function(e){return e.onPointerTap(t)}),this._app.dispatchNodeEvent(this,function(e){return e.onPointerOut(t)})}return!1}},{key:"computeScreenBounds",value:function(){var e=this.screenBounds,t=this.bounds;e.reset();var n=t.left,a=t.top,r=t.right,i=t.bottom;if(r-n>0&&i-a>0){var o=this.screenMatrix,s=this._boundsPoint;o.transformXY(n,a,s),e.addXY(s.x,s.y),o.transformXY(r,a,s),e.addXY(s.x,s.y),o.transformXY(r,i,s),e.addXY(s.x,s.y),o.transformXY(n,i,s),e.addXY(s.x,s.y)}}},{key:"computeFocusRect",value:function(e){var t=this.bounds,n=t.left,a=t.top,r=t.right,i=t.bottom;e[0].x=n,e[0].y=a,e[1].x=r,e[1].y=a,e[2].x=r,e[2].y=i,e[3].x=n,e[3].y=i,this.screenMatrix.transformPointsInPlace(e)}},{key:"getTargetProperty",value:function(e){var n=v(y(t.prototype),"getTargetProperty",this).call(this,e);if(null===n)switch(e){case"Text":return this.text;case"Fill":return this.fillStyle;case"LineColor":return this.strokeStyle;case"FontColor":return this.fontFillStyle}return n}},{key:"bounds",get:function(){return this.path.hitBounds}},{key:"hasHitRegion",get:function(){return this.getHasHitRegion()}}])&&g(n.prototype,r),o&&g(n,o),t}();E.defaultGuiStyle=d.b.Flat,E.defaultFontFamily="sans-serif",E.defaultFontSize=12,E.defaultFontStyle="normal",E.defaultFontWeight=400,E.defaultFontLineSpacing=1.15,E.defaultFontColor=r.a.Black,E.defaultLineColor=r.a.Black,E.defaultLineWidth=0,E.defaultFill=o.a.White,E.defaultShadowOffset=new i.a(1,1),E.defaultShadowBlur=2,E.defaultShadowColor="rgba(0, 0, 0, 0.4)",E.defaultPathMiterLimit=15,E.defaultRectangleMiterLimit=2,E.disabledFillColor="rgba(244, 244, 244, 1)",E.disabledLineColor="rgba(173, 178, 181, 1)",E.defaultLineEndType="None",E.defaultLineEndSize="Medium",E.defaultFocusLineWidth=5,E.defaultFocusPadding=.5*E.defaultFocusLineWidth+2,E.defaultFocusStrokeStyle="rgba(63, 207, 216, 0.8)",E.defaultDialogCornerRadius=new i.a(5,5),E.defaultDialogDimmerColor="rgba(0, 0, 0, 0.6)",E.defaultDialogShadowColor="rgba(0, 0, 0, 0.6)",E.defaultDialogShadowBlur=20},function(e,t,n){"use strict";var a,r,i;n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(a||(a={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(r||(r={})),function(e){e[e.LeftToRight=0]="LeftToRight",e[e.TopToBottom=1]="TopToBottom",e[e.BottomToTop=2]="BottomToTop"}(i||(i={}))},function(e,t,n){"use strict";var a=n(87),r=(n(7),n(8),n(40)),i=n(4);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["a"]),n=t,(a=[{key:"hasValueChanged",value:function(e,t){return null==e||null==t?e!=t:e.x!=t.x||e.y!=t.y}},{key:"setPointValue",value:function(e,t){this.value.x==e&&this.value.y==t||(this.value.x=e,this.value.y=t,this.onValueChanged())}},{key:"setX",value:function(e){this.value.x!==e&&(this.value.x=e,this.onValueChanged())}},{key:"setY",value:function(e){this.value.y!==e&&(this.value.y=e,this.onValueChanged())}}])&&s(n.prototype,a),o&&s(n,o),t}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,d(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["a"]),t}(),v=n(119),y=n(21),m=n(34),b=n(3),E=n(118),D=n(42),S=n(76),P=n(46);var w=n(97),C=n(77),O=n(14),R=n(26);function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return x});var x=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type="Node",this._isVisual=!1,this.uid=null,this.parent=null,this.visibility=new a.a(!0),this.isEnabled=new a.a(!0),this.location=new h,this.rotation=new g,this.scale=new h(new i.a(1,1)),this._visibilityCount=0,this.screenMatrix=new y.a,this.screenBounds=new m.a,this.tabIndex=0,this.focusStyle=R.a.Box,this.nodes=[],this.dynamics=[],this.actions=[],this._animationWatchDog=0,this._newLocation=new h,this.id=b.a.getString(t.ID),this.parent=n,this.isEnabled.value=b.a.getBoolean(t.isEnabled,!0),this.tabIndex=b.a.getNumber(t.TabOrder,0),this.location.value=b.a.getPoint(t.Location),this.scale.value=b.a.getPoint(t.Scale,{X:1,Y:1}),this.rotation.value=E.a.degToRad(b.a.getNumber(t.Rotation));var o=function(e){return r.resetAnimationWatchDog(!0)};this.location.valueChanged=o,this.scale.valueChanged=o,this.rotation.valueChanged=o,this.visibility.valueChanged=function(e){r.onVisibilityChanged(r.visibility.value)},this.loadSecurityExpressions(t)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){return this}},{key:"onVisibilityChanged",value:function(e){if(this._visibilityCount+=e?1:-1,this._visibilityCount>0)throw Error("visibilityCount > 0");this.resetAnimationWatchDog();for(var t=0,n=this.nodes.length;t<n;t++)this.nodes[t].onVisibilityChanged(e)}},{key:"loadSecurityExpressions",value:function(e){e.EnabledAccessControl&&"Always"!=e.EnabledAccessControl.Scope&&(this.enabledAccessControl=new v.a(e.EnabledAccessControl)),e.VisibilityAccessControl&&"Always"!=e.VisibilityAccessControl.Scope&&(this.visibilityAccessControl=new v.a(e.VisibilityAccessControl))}},{key:"isAnimating",value:function(t){return t-this._animationWatchDog<e.animationWatchDogPreset}},{key:"resetAnimationWatchDog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._animationWatchDog=Date.now(),e)for(var t=0,n=this.nodes.length;t<n;t++)this.nodes[t].resetAnimationWatchDog(e)}},{key:"computeScreenMatrix",value:function(e){var t=this.screenMatrix,n=this.location.value,a=this.rotation.value,r=this.scale.value;t.identity(),t.postMultiply(e),t.translate(n.x,n.y),t.rotate(a),t.scale(r.x,r.y)}},{key:"computeScreenClipRect",value:function(){}},{key:"computeScreenBounds",value:function(){this.screenBounds.reset()}},{key:"computeFocusRect",value:function(e){var t=this.screenBounds,n=t.left,a=t.top,r=t.right,i=t.bottom;e[0].x=n,e[0].y=a,e[1].x=r,e[1].y=a,e[2].x=r,e[2].y=i,e[3].x=n,e[3].y=i}},{key:"onFocus",value:function(){return null!==e.Focused&&e.Focused(this),!0}},{key:"onBlur",value:function(){return null!==e.Blurred&&e.Blurred(this),!0}},{key:"onKeyPress",value:function(e){return!0}},{key:"onKeyDown",value:function(e){return!0}},{key:"onKeyUp",value:function(e){return!0}},{key:"onPointerOver",value:function(t){if(this.hasActions(!1)){var n=this.getAction(function(e){return e.gesture===O.a.Click||e.gesture===O.a.Pressed||e.gesture===O.a.Released});return this.isEnabled.value&&null!==n&&null!==e.CursorChanged&&e.CursorChanged(this,D.a.Pointer),!0}return!1}},{key:"onPointerOut",value:function(t){return e.CursorChanged(this,D.a.Default),!0}},{key:"onPointerDown",value:function(e){return this.executeActions(O.a.Pressed)}},{key:"onPointerUp",value:function(e){return this.executeActions(O.a.Released)}},{key:"onPointerTap",value:function(e){return"ScrollBar"!==this.id&&"ScrollBarPath"!==this.id||this.newLocation.setPointValue(e.x,e.y),this.executeActions(O.a.Click)}},{key:"implBeginDrag",value:function(t,n,a){var r=this.getAction(function(e){return e instanceof w.a});if(null===r)return!1;var i=this.getDynamic(function(e){return e instanceof C.a});return null!==i&&(a.action=r,a.dynamic=i,null!==e.DragExecuted&&e.DragExecuted(this,e._dragData),!0)}},{key:"onBeginDrag",value:function(t,n){return e._dragData.state=P.a.None,!!this.isEnabled.value&&(e._dragData.state=P.a.BeginDrag,e._dragData.mouseCurrent.x=t,e._dragData.mouseCurrent.y=n,!!this.implBeginDrag(t,n,e._dragData))}},{key:"implDrag",value:function(t,n,a){return e.DragExecuted(this,a),!0}},{key:"onDrag",value:function(t,n){return(e._dragData.state===P.a.BeginDrag||e._dragData.state===P.a.Drag)&&(e._dragData.state=P.a.Drag,e._dragData.mouseCurrent.x=t,e._dragData.mouseCurrent.y=n,this.implDrag(t,n,e._dragData),!0)}},{key:"implEndDrag",value:function(t,n,a){return e.DragExecuted(this,a),!0}},{key:"onEndDrag",value:function(t,n){return(e._dragData.state===P.a.BeginDrag||e._dragData.state===P.a.Drag)&&(e._dragData.state=P.a.EndDrag,e._dragData.mouseCurrent.x=t,e._dragData.mouseCurrent.y=n,this.implEndDrag(t,n,e._dragData),!0)}},{key:"hasActions",value:function(e){var t=this.actions.length>0;if(!t&&e)for(var n=this.parent;null!==n&&!t;)t=n.actions.length>0,n=n.parent;return t}},{key:"getAction",value:function(e){for(var t=0;t<this.actions.length;t++)if(e(this.actions[t]))return this.actions[t];return null}},{key:"executeActions",value:function(t){if(!this.isEnabled.value)return!1;for(var n=0,a=0;a<this.actions.length;a++){var r=this.actions[a];r.gesture===t&&r.mouseButtons!=O.b.None&&(n++,null!==e.ActionExecuted&&e.ActionExecuted(this,r))}return n>0}},{key:"getDynamic",value:function(e){for(var t=0;t<this.dynamics.length;t++)if(e(this.dynamics[t]))return this.dynamics[t];return null}},{key:"getChildNodeIndex",value:function(e){for(var t=-1,n=0;n<this.nodes.length;n++)if(this.nodes[n]==e){t=n;break}return t}},{key:"removeChildNode",value:function(e){var t=this.getChildNodeIndex(e);-1!=t&&this.nodes.splice(t,1)}},{key:"getTargetProperty",value:function(e){return null}},{key:"type",get:function(){return this._type}},{key:"isVisual",get:function(){return this._isVisual}},{key:"isVisible",get:function(){return 0===this._visibilityCount}},{key:"newLocation",get:function(){return this._newLocation},set:function(e){this._newLocation=e}}])&&k(t.prototype,n),r&&k(t,r),e}();x.PressedExecuted=null,x.ReleasedExecuted=null,x.ActionExecuted=null,x.DragExecuted=null,x.CursorChanged=null,x.Focused=null,x.Blurred=null,x.Enabled=null,x.Disabled=null,x.animationWatchDogPreset=1e3,x._dragData=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=P.a.None,this.mouseCurrent=new i.a,this.action=null,this.dynamic=null,this.dragValueSource=new S.a,this.dragPoint=new i.a,this.closestPoint=new i.a}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),r=n(1);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"DisableCaching",value:function(e){try{return e.setRequestHeader("Cache-Control","no-cache, no-store"),e.msCaching="disabled",e.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),!0}catch(e){return a.a.Log("ERROR: XhrSupport.DisableCaching) Caught exception: "+e,r.a.Error),!1}}},{key:"SetAcceptType",value:function(e,t){try{return e.setRequestHeader("Accept",t),!0}catch(e){return a.a.Log("ERROR: XhrSupport.SetAcceptType) Caught exception: "+e,r.a.Error),!1}}},{key:"SetContentType",value:function(e,t){try{return e.setRequestHeader("Content-Type",t),e.msCaching="disabled",!0}catch(e){return a.a.Log("ERROR: XhrSupport.SetContentType) Caught exception: "+e,r.a.Error),!1}}},{key:"EnableTimeout",value:function(e,t){try{return e.timeout=t,!0}catch(e){return a.a.Log("WARNING: XhrSupport.EnableTimeout) Caught exception: "+e,r.a.Warning),!1}}}],(n=null)&&i(t.prototype,n),o&&i(t,o),e}();o.jsonMimeType="application/json",o.plainTextMimeType="text/plain; charset=utf-8"},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.top=n,this.right=a,this.bottom=r}var t,n,r;return t=e,(n=[{key:"union",value:function(e){e.left<this.left&&(this.left=e.left),e.top<this.top&&(this.top=e.top),e.right>this.right&&(this.right=e.right),e.bottom>this.bottom&&(this.bottom=e.bottom)}},{key:"contains",value:function(e){return e.x>=this.left&&e.x<=this.right&&e.y>=this.top&&e.y<=this.bottom}},{key:"containsXY",value:function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}},{key:"intersects",value:function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top}},{key:"translate",value:function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t}},{key:"equals",value:function(e){return Math.abs(this.left-e.left)<1e-4&&Math.abs(this.top-e.top)<1e-4&&Math.abs(this.right-e.right)<1e-4&&Math.abs(this.bottom-e.bottom)<1e-4}},{key:"width",get:function(){return Math.abs(this.right-this.left)}},{key:"height",get:function(){return Math.abs(this.bottom-this.top)}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";var a,r;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.Drag=2]="Drag",e[e.Pressed=3]="Pressed",e[e.Released=4]="Released",e[e.Data=5]="Data"}(a||(a={})),function(e){e[e.None=0]="None",e[e.Right=1]="Right",e[e.Middle=2]="Middle",e[e.Left=4]="Left"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(85);var a=n(4),r=n(36),i=n(90),o=n(43);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"define",value:function(e,t){for(var n,a,s,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.points,l=0,h=0,f=t.subPaths.length;l<f;l++){n=c[h],e.moveTo(n.x,n.y);var _=t.subPaths[l],d=_.segments.length;_.hasClosingSegment&&d--;for(var p=0;p<d;p++){var g=_.segments[p];g instanceof r.a?(a=c[h+1],s=c[h+2],u=c[h+3],e.bezierCurveTo(a.x,a.y,s.x,s.y,u.x,u.y),h+=3):g instanceof i.a?(a=c[h+1],s=c[h+2],e.quadraticCurveTo(a.x,a.y,s.x,s.y),h+=2):g instanceof o.a&&(a=c[h+1],e.lineTo(a.x,a.y),h+=1)}_.isClosed&&e.closePath(),h++}}},{key:"defineSnapped",value:function(t,n,a){for(var s=n.points,u=this._snap0,c=this._snap1,l=this._snap2,h=this._snap3,f=0,_=0,d=n.subPaths.length;f<d;f++){e.snapPoint(a,s[_],u),t.moveTo(u.x,u.y);var p=n.subPaths[f],g=p.segments.length;p.hasClosingSegment&&g--;for(var v=0;v<g;v++){var y=p.segments[v];y instanceof r.a?(e.snapPoint(a,s[_+1],c),e.snapPoint(a,s[_+2],l),e.snapPoint(a,s[_+3],h),t.bezierCurveTo(c.x,c.y,l.x,l.y,h.x,h.y),_+=3):y instanceof i.a?(e.snapPoint(a,s[_+1],c),e.snapPoint(a,s[_+2],l),t.quadraticCurveTo(c.x,c.y,l.x,l.y),_+=2):y instanceof o.a&&(e.snapPoint(a,s[_+1],c),t.lineTo(c.x,c.y),_+=1)}p.isClosed&&t.closePath(),_++}}},{key:"snapPoint",value:function(e,t,n){e.transformPoint(t,n),n.x=Math.floor(n.x)+.5,n.y=Math.floor(n.y)+.5}},{key:"snapXY",value:function(e,t,n,a){e.transformXY(t,n,a),a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5}},{key:"snapPoints",value:function(e,t,n){for(var a=0,r=t.length;a<r;a++)this.snapPoint(e,t[a],n[a])}},{key:"snapRect",value:function(e,t,n){e.transformRect(t,n),n.left=Math.floor(n.left)+.5,n.top=Math.floor(n.top)+.5,n.right=Math.floor(n.right)+.5,n.bottom=Math.floor(n.bottom)+.5}},{key:"defineStroke",value:function(e,t){if(t.hasStrokeApproximation)for(var n=t.subPaths,a=n.length,r=0;r<a;r++){var i=n[r],o=i.segments,s=o[0].outerOffsetPoints[0];e.moveTo(s.x,s.y);for(var u=1,c=o.length,l=0;l<c;l++){for(var h=o[l].outerOffsetPoints,f=u,_=h.length;f<_;f++)e.lineTo(h[f].x,h[f].y);u=0}if(i.isClosed){var d=o[0].innerOffsetPoints[0];e.lineTo(s.x,s.y),e.lineTo(d.x,d.y)}for(l=o.length-1;l>=0;l--){var p=o[l].innerOffsetPoints;for(f=p.length-1;f>=0;f--)e.lineTo(p[f].x,p[f].y)}e.closePath()}}},{key:"defineOuterStroke",value:function(e,t){if(t.hasStrokeApproximation&&t.subPaths.length>0){var n=t.subPaths[0].segments,a=n[0].outerOffsetPoints[0];e.moveTo(a.x,a.y);for(var r=1,i=n.length,o=0;o<i;o++){for(var s=n[o].outerOffsetPoints,u=r,c=s.length;u<c;u++)e.lineTo(s[u].x,s[u].y);r=0}e.closePath()}}},{key:"defineArrowHeads",value:function(e,t){var n=t.startArrowPoints,a=t.endArrowPoints;null!=n&&(e.moveTo(n[0].x,n[0].y),e.lineTo(n[1].x,n[1].y),e.lineTo(n[2].x,n[2].y),e.closePath()),null!=a&&(e.moveTo(a[0].x,a[0].y),e.lineTo(a[1].x,a[1].y),e.lineTo(a[2].x,a[2].y),e.closePath())}},{key:"isPointInPath",value:function(t,n,a,r,i){t.save(),t.setTransform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy);var o=!1;return n.isConvex&&n.hasInterior&&n.hasStrokeApproximation?(t.beginPath(),e.defineOuterStroke(t,n),o=t.isPointInPath(a,r)):(n.hasInterior&&(t.beginPath(),e.define(t,n),o=t.isPointInPath(a,r)),!o&&n.hasStrokeApproximation&&(t.beginPath(),e.defineStroke(t,n),o=t.isPointInPath(a,r))),o||null==n.startArrowPoints&&null==n.endArrowPoints||(t.beginPath(),e.defineArrowHeads(t,n),o=t.isPointInPath(a,r)),t.restore(),o}},{key:"drawHitRegions",value:function(t,n,a){t.setTransform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),t.lineWidth=1,t.strokeStyle="gray",t.fillStyle="rgba(200, 200, 200, 0.8)";var r=!1;n.isConvex&&n.hasInterior&&n.hasStrokeApproximation?(r=!0,t.beginPath(),e.defineOuterStroke(t,n),t.fill(),t.stroke()):(n.hasInterior&&(t.beginPath(),e.define(t,n),t.fill(),t.stroke()),n.hasStrokeApproximation&&(t.beginPath(),e.defineStroke(t,n),t.fill(),t.stroke())),null==n.startArrowPoints&&null==n.endArrowPoints||(t.beginPath(),e.defineArrowHeads(t,n),t.fill(),t.stroke()),n.hasStrokeApproximation&&e.drawOffsetPoints(t,n,a,r)}},{key:"drawOffsetPoints",value:function(e,t,n,r){if(t.hasStrokeApproximation){e.save(),e.setTransform(1,0,0,1,0,0),e.strokeStyle="yellow",e.lineWidth=1;for(var i=new a.a,o=new a.a,s=t.subPaths.length,u=0;u<s;u++){var c=t.subPaths[u],l=c.segments.length;e.beginPath();for(var h=0;h<l;h++)for(var f=c.segments[h].outerOffsetPoints,_=0,d=f.length;_<d;_++)n.transformPoint(f[_],o),e.rect(o.x-2,o.y-2,4,4);if(e.fillStyle="red",e.fill(),e.stroke(),!r){e.beginPath();for(h=0;h<l;h++){var p=c.segments[h].innerOffsetPoints;for(_=0,d=p.length;_<d;_++)n.transformPoint(p[_],i),e.rect(i.x-2,i.y-2,4,4)}e.fillStyle="blue",e.fill(),e.stroke()}}e.restore()}}}],(n=null)&&s(t.prototype,n),u&&s(t,u),e}();u._snap0=new a.a,u._snap1=new a.a,u._snap2=new a.a,u._snap3=new a.a},function(e,t,n){"use strict";var a,r;n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),function(e){e[e.Left=0]="Left",e[e.Top=1]="Top",e[e.Right=2]="Right",e[e.Bottom=3]="Bottom",e[e.Center=4]="Center"}(a||(a={})),function(e){e[e.Normal=0]="Normal",e[e.Pressed=1]="Pressed",e[e.MouseOver=2]="MouseOver"}(r||(r={}))},function(e,t,n){"use strict";n(7),n(8),n(33);var a=n(3),r=n(76);var i=function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeFrom=t,this.timeTo=n,this.valueFrom=a,this.valueTo=r};function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._entries=null,this._count=0,this._entries=[],this.resize(e.minimumLength)}var t,n,r;return t=e,(n=[{key:"trim",value:function(e){for(var t=null,n=0,a=this.count;n<a;n++)if(e>(t=this._entries[n]).timeTo||e>=t.timeFrom)return this._count=n+1,t;return null}},{key:"resize",value:function(t){if(t>=e.minimumLength&&t<=e.maximumLength)for(var n=t-this._entries.length,a=0,r=Math.abs(n);a<r;a++)n>0?this._entries.push(new i(-1,-1,-1,-1)):this._entries.pop();return this._entries.length}},{key:"enqueue",value:function(t,n){t=a.a.getNumber(t);var r=this._entries.length;this._count+1>r&&r<e.maximumLength&&(r=this.resize(this._count+e.minimumLength));for(var i=this.count-1;i>=0;i--)if(i<r-1){var o=this._entries[i],s=this._entries[i+1];s.timeFrom=o.timeFrom,s.timeTo=o.timeTo,s.valueFrom=o.valueFrom,s.valueTo=o.valueTo}var u=this._entries[0];this.count>0?(u.timeFrom=u.timeTo,u.valueFrom=u.valueTo):(u.timeFrom=n,u.valueFrom=t),u.timeTo=n,u.valueTo=t,this.count<r&&this._count++}},{key:"count",get:function(){return this._count}}])&&o(t.prototype,n),r&&o(t,r),e}();s.minimumLength=3,s.maximumLength=3;var u=n(6);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=a.a.getNumber(e);return null!=t?Math.abs(Math.round(t)):e}function p(e){var t=a.a.getNumber(e);return null!=t?Math.round(t):e}function g(e){var t=a.a.getNumber(e);return null!=t?t:e}function v(e){var t=a.a.getBoolean(e);return null!=t?t:e}function y(e){return e}function m(e){return u.a.fromString(e,!1)}function b(e){var t;"string"==typeof e&&((t=e.indexOf("."))>=0&&(e=e.substring(0,t)));return e}function E(e){return e=b(e),u.a.fromString(e,!1)}function D(e){return e=b(e),u.a.fromString(e,!0)}n.d(t,"a",function(){return S});var S=function(e){function t(e,n,a){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,f(t).call(this))).isEnumeration=!1,r.roundOnWrite=!1,r.writePendingCount=0,r.isReadOnly=!1,r._lastTimestamp=-1,r._timestampQueue=null,r._allowTimestamping=!1,r.name=e,r.type=n,a&&(r.isReadOnly=a),r.setTypeConverter(),r}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["a"]),n=t,(a=[{key:"equals",value:function(e){return this.name==e.name}},{key:"setTypeConverter",value:function(){switch(this.type){case"BOOL":this.convertTypeFromString=v;break;case"USINT":case"UINT":case"UDINT":case"BYTE":case"WORD":case"DWORD":this.convertTypeFromString=d;break;case"SINT":case"INT":case"DINT":this.convertTypeFromString=p;break;case"REAL":this.convertTypeFromString=g;break;case"TIME":this.convertTypeFromString=p;break;case"LREAL":this.convertTypeFromString=g;break;case"LWORD":case"ULINT":this.convertTypeFromString=D;break;case"LTIME_OF_DAY":case"LDATE_AND_TIME":case"LDATE":case"LTIME":this.convertTypeFromString=m;break;case"LINT":this.convertTypeFromString=E;break;default:this.convertTypeFromString=y}}},{key:"initialize",value:function(e){this.update(e),this._initValue=this.value}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isReadOnly||("number"==typeof e&&"BOOL"===this.type?this.value=0!=e:this.isEnumeration||"string"!=typeof e?this.value=e:(e=this.convertTypeFromString(e),this.value=e),this.allowTimestamping&&-1!==t&&t!==this._lastTimestamp&&(this._timestampQueue.enqueue(this.value,t),this._lastTimestamp=t))}},{key:"getTimestampEntry",value:function(e){return this._timestampQueue?this._timestampQueue.trim(e):null}},{key:"initValue",get:function(){return this._initValue}},{key:"allowTimestamping",get:function(){return this._allowTimestamping},set:function(e){this._allowTimestamping=e,!0===e&&null===this._timestampQueue?this._timestampQueue=new s:!1===e&&(this._timestampQueue=null)}},{key:"writeName",get:function(){return this.name}}])&&l(n.prototype,a),i&&l(n,i),t}()},function(e,t,n){"use strict";var a=n(3);n(7),n(8),n(22);var r=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t,this.color=n};function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stops=this.parseGradientStops(t)}var t,n,o;return t=e,(n=[{key:"createStyle",value:function(e,t){}},{key:"parseGradientStops",value:function(e){var t=[];if(null!=e.Stops)for(var n=0;n<e.Stops.length;n++){var i=new r(a.a.getNumber(e.Stops[n].Offset),a.a.getColor(e.Stops[n].Color));t.push(i)}return t}}])&&i(t.prototype,n),o&&i(t,o),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,l(t).call(this,n)))._startPoint=a.a.getPoint(n.StartPoint),e._endPoint=a.a.getPoint(n.EndPoint),e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,o),n=t,(r=[{key:"createStyle",value:function(e,t){for(var n=t.left+t.width*this._startPoint.x,a=t.top+t.height*this._startPoint.y,r=t.left+t.width*this._endPoint.x,i=t.top+t.height*this._endPoint.y,o=e.createLinearGradient(n,a,r,i),s=0;s<this._stops.length;s++){var u=this._stops[s];o.addColorStop(u.offset,u.color.toString())}return o}}])&&u(n.prototype,r),i&&u(n,i),t}(),_=n(4),d=n(21);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,y(t).call(this,n)))._center=a.a.getPoint(n.Center),e._radiusX=a.a.getNumber(n.RadiusX,1),e._radiusY=a.a.getNumber(n.RadiusY,1),e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o),n=t,(r=[{key:"createStyle",value:function(e,t){for(var n=t.left+t.width*this._center.x,a=t.top+t.height*this._center.y,r=new _.a(this._radiusX*t.width,this._radiusY*t.height),i=Math.max(r.x,r.y),o=e.createRadialGradient(n,a,0,n,a,i),s=0;s<this._stops.length;s++){var u=this._stops[s];o.addColorStop(u.offset,u.color.toString())}return o.fillMatrix=this.createFillMatrix(t,r),o}},{key:"createFillMatrix",value:function(e,t){var n=new _.a(1,1);t.x>t.y?n.y=t.y/t.x:n.x=t.x/t.y;var a=new _.a(e.left,e.top);a.x+=e.width*this._center.x,a.y+=e.height*this._center.y;var r=new d.a;return r.translate(a.x,a.y),r.scale(n.x,n.y),r.translate(-a.x,-a.y),r}}])&&g(n.prototype,r),i&&g(n,i),t}(),E=n(78);function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return S});var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createFill",value:function(t){if(e.IsNoFill(t))return null;switch(a.a.getString(t.Type)){case"LinearGradientFill":return new f(t);case"RadialGradientFill":return new b(t);case"SolidFill":return new E.a(t);default:return null}}},{key:"IsNoFill",value:function(e){return null==e}},{key:"createFillStyle",value:function(t,n,a){var r=e.createFill(n);return null!==r?r.createStyle(t,a):null}}],(n=null)&&D(t.prototype,n),r&&D(t,r),e}()},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down",e[e.Home=4]="Home"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(96);var a=n(23),r=n(41),i=n(3),o=n(143);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"initialize",value:function(e){this._query=e}},{key:"getPageRootUrl",value:function(){return e.getPageRootUrlSupport(this._query)}},{key:"getPageRootUrlSupport",value:function(e){var t=null;if(void 0!==e&&(void 0!==e.HmiPage?t=e.HmiPage:void 0!==e.HmiPath&&(t=r.a.EnsureUrlTrailingForwardSlash(e.HmiPath)),null!==t)){var n=t.split("/");t=(n=n.slice(0,n.length-1)).join("/")}return t}},{key:"getResourceUrl",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(void 0===t)return n;var a=i.a.getString(t),r=e.getPageRootUrl();return null===r||""===r?a:r+"/"+a}},{key:"LoadModule",value:function(t){this._loadedModules.contains(t)||this._loadedModules.add(t,o.a.LoadScript(e.getResourceUrl(t+".js")))}},{key:"GetModuleInstance",value:function(e){return this._loadedModules.getValue(e)}}],(n=null)&&s(t.prototype,n),a&&s(t,a),e}();u._loadedModules=new a.a},function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(82),n(22);var a=n(133);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.m11=t,this.m12=n,this.m21=a,this.m22=r,this.dx=i,this.dy=o}var t,n,i;return t=e,i=[{key:"postMultiply",value:function(e,t,n,a,r,i,o){var s=t*e.m11+n*e.m21,u=t*e.m12+n*e.m22,c=a*e.m11+r*e.m21,l=a*e.m12+r*e.m22,h=i*e.m11+o*e.m21+e.dx,f=i*e.m12+o*e.m22+e.dy;e.m11=s,e.m12=u,e.m21=c,e.m22=l,e.dx=h,e.dy=f}},{key:"preMultiply",value:function(e,t,n,a,r,i,o){var s=e.m11*t+e.m12*a,u=e.m11*n+e.m12*r,c=e.m21*t+e.m22*a,l=e.m21*n+e.m22*r,h=e.dx*t+e.dy*a+i,f=e.dx*n+e.dy*r+o;e.m11=s,e.m12=u,e.m21=c,e.m22=l,e.dx=h,e.dy=f}},{key:"clone",value:function(t){return new e(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)}},{key:"solve",value:function(e,t,n){var a=e.m11*e.m22-e.m12*e.m21;Math.abs(a)<1e-4?(n.x=Number.NaN,n.y=Number.NaN):(n.x=(t.x*e.m22-e.m12*t.y)/a,n.y=(e.m11*t.y-t.x*e.m21)/a)}},{key:"findInverse",value:function(e,t){var n=e.m11*e.m22-e.m12*e.m21;if(Math.abs(n)<1e-4)return!1;var a=1/n;return t.m11=e.m22*a,t.m12=-e.m12*a,t.m21=-e.m21*a,t.m22=e.m11*a,t.dx=(e.m21*e.dy-e.m22*e.dx)*a,t.dy=(e.m12*e.dx-e.m11*e.dy)*a,!0}}],(n=[{key:"setMatrixFrom",value:function(e){this.m11=e.m11,this.m12=e.m12,this.m21=e.m21,this.m22=e.m22,this.dx=e.dx,this.dy=e.dy}},{key:"equals",value:function(e,t){return Math.abs(e.m11-this.m11)<t&&Math.abs(e.m12-this.m12)<t&&Math.abs(e.m21-this.m21)<t&&Math.abs(e.m22-this.m22)<t&&Math.abs(e.dx-this.dx)<t&&Math.abs(e.dy-this.dy)<t}},{key:"identity",value:function(){this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0}},{key:"preMultiply",value:function(t){e.preMultiply(this,t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)}},{key:"postMultiply",value:function(t){e.postMultiply(this,t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)}},{key:"transformXY",value:function(e,t,n){n.x=e*this.m11+t*this.m21+this.dx,n.y=e*this.m12+t*this.m22+this.dy}},{key:"transformPoint",value:function(e,t){t.x=e.x*this.m11+e.y*this.m21+this.dx,t.y=e.x*this.m12+e.y*this.m22+this.dy}},{key:"transformPoints",value:function(e,t){for(var n=0,a=e.length;n<a;n++)this.transformPoint(e[n],t[n])}},{key:"transformPointInPlace",value:function(e){var t=e.x,n=e.y;e.x=t*this.m11+n*this.m21+this.dx,e.y=t*this.m12+n*this.m22+this.dy}},{key:"transformPointsInPlace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=0;n<t;n++)this.transformPointInPlace(e[n])}},{key:"transformRect",value:function(e,t){t.left=e.left*this.m11+e.left*this.m21+this.dx,t.top=e.top*this.m12+e.top*this.m22+this.dy,t.right=e.right*this.m11+e.right*this.m21+this.dx,t.bottom=e.bottom*this.m12+e.bottom*this.m22+this.dy}},{key:"scale",value:function(e,t){this.m11*=e,this.m12*=e,this.m21*=t,this.m22*=t}},{key:"rotate",value:function(t){var n=Math.cos(t),a=Math.sin(t);e.postMultiply(this,n,a,-a,n,0,0)}},{key:"translate",value:function(e,t){this.dx=e*this.m11+t*this.m21+this.dx,this.dy=e*this.m12+t*this.m22+this.dy}},{key:"toCssString",value:function(){var e=new a.a;return e.append("matrix("),e.append(this.m11.toString()),e.append(", "),e.append(this.m12.toString()),e.append(", "),e.append(this.m21.toString()),e.append(", "),e.append(this.m22.toString()),e.append(", "),e.append(this.dx.toString()),e.append(", "),e.append(this.dy.toString()),e.append(")"),e.toString()}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";n(195);var a=n(52),r=n(128),i=n(55),o=/./.toString,s=function(e){n(75)(RegExp.prototype,"toString",e,!0)};n(58)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?r.call(e):void 0)}):"toString"!=o.name&&s(function(){return o.call(this)})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(39),n(84);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keys=[],this.values=[]}var t,n,r;return t=e,r=[{key:"endsWith",value:function(e,t){return-1!==e.indexOf(t,e.length-t.length)}}],(n=[{key:"add",value:function(e,t){var n=null;n=this.hasOwnProperty(e)?this[e]:this.keys.length++,this[e]=n,this.keys[n]=e,this.values[n]=t}},{key:"getValue",value:function(e){if(this.hasOwnProperty(e)){var t=this[e];return this.values[t]}return null}},{key:"contains",value:function(e){return this.hasOwnProperty(e)}},{key:"remove",value:function(e){if(this.hasOwnProperty(e)){var t=this[e];this.keys.splice(t,1),this.values.splice(t,1),delete this[e];for(var n=0;n<this.keys.length;n++)this[this.keys[n]]=n}}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(96);var a=n(14);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type="Action",this.gesture=a.a.None,this.gesture=this.parseGesture(t),this.mouseButtons=this.parseMouseButtons(t)}var t,n,i;return t=e,(n=[{key:"parseGesture",value:function(e){if(null==e.Gesture)return a.a.Click;var t=a.a.Click;switch(e.Gesture.toUpperCase()){case"PRESSED":t=a.a.Pressed;break;case"RELEASED":t=a.a.Released;break;case"DATA":t=a.a.Data;break;case"NONE":t=a.a.None}return t}},{key:"parseMouseButtons",value:function(e){if(null==e.Button)return a.b.Left;for(var t=a.b.None,n=e.Button.split(/\s+/),r=0;r<n.length;r++)switch(n[r].toUpperCase()){case"LEFT":t|=a.b.Left;break;case"RIGHT":t|=a.b.Right}return t}},{key:"type",get:function(){return this._type}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(7),n(8);var a=n(100),r=n(13),i=n(4),o=n(111),s=n(43),u=n(36);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,f(t).call(this,[t.createSubPath(e,a)],n,!0,r,i,o))}var n,c,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,a["a"]),n=t,d=[{key:"createSubPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=new o.a;return a.isClosed=!0,a.segments=[],null!==n&&0!==n.x&&0!==n.y?(n.x=Math.min(n.x,.5*e.width),n.y=Math.min(n.y,.5*e.height),t.createRounded(a,e,n)):t.createNonRounded(a,e),a}},{key:"createNonRounded",value:function(e,t){var n,a;e.start=new i.a(t.left,t.top),n=new i.a(e.start.x,e.start.y),a=new s.a(n,new i.a(t.right,t.top)),e.segments.push(a),n=new i.a(a.end.x,a.end.y),a=new s.a(n,new i.a(t.right,t.bottom)),e.segments.push(a),n=new i.a(a.end.x,a.end.y),a=new s.a(n,new i.a(t.left,t.bottom)),e.segments.push(a),n=new i.a(a.end.x,a.end.y),a=new s.a(n,new i.a(t.left,t.top)),e.segments.push(a)}},{key:"createRounded",value:function(e,t,n){var a,r,o=n.x-.551784*n.x,c=n.y-.551784*n.y;n.x=Math.min(n.x,.5*t.width),n.x=Math.max(n.x,0),n.y=Math.min(n.y,.5*t.height),n.y=Math.max(n.y,0),e.start=new i.a(t.left+n.x,t.top),a=new s.a(new i.a(e.start.x,e.start.y),new i.a(t.right-n.x,t.top)),e.segments.push(a),r=new u.a(new i.a(a.end.x,a.end.y),new i.a(t.right-o,t.top),new i.a(t.right,t.top+c),new i.a(t.right,t.top+n.y)),e.segments.push(r),a=new s.a(new i.a(r.end.x,r.end.y),new i.a(t.right,t.bottom-n.y)),e.segments.push(a),r=new u.a(new i.a(a.end.x,a.end.y),new i.a(t.right,t.bottom-c),new i.a(t.right-o,t.bottom),new i.a(t.right-n.x,t.bottom)),e.segments.push(r),a=new s.a(new i.a(r.end.x,r.end.y),new i.a(t.left+n.x,t.bottom)),e.segments.push(a),r=new u.a(new i.a(a.end.x,a.end.y),new i.a(t.left+o,t.bottom),new i.a(t.left,t.bottom-c),new i.a(t.left,t.bottom-n.y)),e.segments.push(r),a=new s.a(new i.a(r.end.x,r.end.y),new i.a(t.left,t.top+n.y)),e.segments.push(a),r=new u.a(new i.a(a.end.x,a.end.y),new i.a(t.left,t.top+c),new i.a(t.left+o,t.top),new i.a(t.left+n.x,t.top)),e.segments.push(r)}}],(c=null)&&l(n.prototype,c),d&&l(n,d),t}()},function(e,t,n){"use strict";var a,r;n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),function(e){e[e.Flat=0]="Flat",e[e.Glossy=1]="Glossy"}(a||(a={})),function(e){e[e.None=0]="None",e[e.Box=1]="Box"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(38);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getScope",value:function(e){return"@"===e.charAt(0)?"@"===e.charAt(1)?a.a.Application:a.a.Page:a.a.Server}},{key:"isPageVar",value:function(t){return e.getScope(t)===a.a.Page}},{key:"isAppVar",value:function(t){return e.getScope(t)===a.a.Application}},{key:"isServerVar",value:function(t){return e.getScope(t)===a.a.Server}},{key:"isLocalVar",value:function(e){return this.isAppVar(e)||this.isPageVar(e)}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(22);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.R=t,this.G=n,this.B=a,this.A=r,this._colorString=e.toCssString(t,n,a,r)}var t,n,r;return t=e,r=[{key:"toCssString",value:function(t,n,a,r){var i=e._colorStringArray;return i[1]=t.toString(),i[3]=n.toString(),i[5]=a.toString(),i[7]=(r/255).toString(),i.join("")}}],(n=[{key:"toString",value:function(){return this._colorString}}])&&a(t.prototype,n),r&&a(t,r),e}();r._colorStringArray=["rgba(","0",", ","0",", ","0",", ","0",")"],r.Black=new r(0,0,0,255),r.White=new r(255,255,255,255)},function(e,t,n){"use strict";var a,r;n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),function(e){e[e.None=0]="None",e[e.IsDialog=1]="IsDialog",e[e.DimBackground=2]="DimBackground"}(a||(a={})),function(e){e[e.AllowBack=1]="AllowBack",e[e.AllowForward=2]="AllowForward"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(22),n(33),n(84),n(207),n(39);var a=n(131),r=n(23),i=n(20),o=n(0),s=n(1),u=n(27);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(){function e(){c(this,e),this._dataDictionary=null,this._typeDictionary=null,this._pageVariableDataDictionary=null,this._arrayBoundsDictionary=null}var t,n,h;return t=e,h=[{key:"initialize",value:function(t,n){e._instance?this.clearCache():e._instance=new e,this._instance._app=t,this._instance._dataClient=n,this._instance._dataDictionary=this._instance.loadDataDictionary(),this._instance._typeDictionary=this._instance.loadTypeDictionary()}},{key:"clearCache",value:function(){this._instance._dataDictionary=null,this._instance._arrayBoundsDictionary=null,this._instance._pageVariableDataDictionary=null,this._instance._typeDictionary=null}},{key:"loadPageVariables",value:function(e,t){this._instance.loadPageVariables(e,t)}},{key:"saveArrayBounds",value:function(){this._instance.saveArrayBounds()}},{key:"getArrayBounds",value:function(e){return this._instance.getArrayBounds(e)}},{key:"findSysTickCountVariable",value:function(){return this._instance.findSysTickCountVariable()}},{key:"getTypeForVariable",value:function(e){return this._instance.getTypeForVariable(e)}},{key:"getInitialValue",value:function(e){return this._instance.getInitialValue(e)}},{key:"prepareSubstituteValue",value:function(e,t){return this._instance.prepareSubstituteValue(e,t)}},{key:"isEnumeration",value:function(e){return this._instance.isEnumeration(e)}},{key:"pageVariableDictionary",get:function(){return this._instance._pageVariableDataDictionary}}],(n=[{key:"loadDataDictionary",value:function(){var e=this;if(null==this._dataDictionary){var t=this._dataClient.downloadScreen(i.a.getResourceUrl("data.dictionary.json"));if(t&&t.HmiVariables2){this._dataDictionary=new r.a;var n=t.HmiVariables2;Object.keys(n).forEach(function(t){return e._dataDictionary.add(t,n[t])})}}return this._dataDictionary}},{key:"loadTypeDictionary",value:function(){var e=this;if(null==this._typeDictionary){var t=this._dataClient.downloadScreen(i.a.getResourceUrl("type.dictionary.json"));if(t&&t.Types){this._typeDictionary=new r.a;for(var n=t.Types,a={},o=0;o<n.length;o++)a[n[o].Name]=n[o];Object.keys(a).forEach(function(t){return e._typeDictionary.add(t,a[t])})}}return this._typeDictionary}},{key:"loadPageVariables",value:function(e,t){var n=this._dataClient.downloadScreen(i.a.getResourceUrl(t));if(null!==n){var a=n.variables,o=n.variablePathPrefix;if(a){this._pageVariableDataDictionary=new r.a;for(var s=0;s<a.length;s++){var c=a[s];if(c.name||""===c.name&&o)if(o&&(c.name=o+c.name),u.a.isPageVar(c.name)){this._pageVariableDataDictionary.add(c.name,c);e.registerValueSource(c.name,c.type);if(c.type){var l=e.page.screenVariables.getValue(c.name);l&&l.initialize(c.initValue)}}else{var h=c.name;if(!this._dataDictionary.contains(h)){var f=this.getKindForType(c.type),_=this.createDataEntryObject({Kind:f,Type:c.type});this._dataDictionary.add(h,_)}}}}}}},{key:"saveArrayBounds",value:function(){var e=this;try{var t=this._dataDictionary.keys.filter(function(t){var n=e._dataDictionary.getValue(t);return"Array"===e._typeDictionary.getValue(n.Type).Kind});null==this._arrayBoundsDictionary&&(this._arrayBoundsDictionary=new r.a),t.forEach(function(t){var n=e._dataDictionary.getValue(t),a=e._typeDictionary.getValue(n.Type);e._arrayBoundsDictionary.contains(t)||e._arrayBoundsDictionary.add(t,a)})}catch(e){o.a.Log("ERROR: Error in saving array bounds.",s.a.Error)}}},{key:"getArrayBounds",value:function(e){try{var t=this._arrayBoundsDictionary.getValue(e).Dimensions[0];return{lowerBound:t.StartIndex,upperBound:t.Length-1}}catch(e){return o.a.Log("ERROR: Failed to get array bounds: ".concat(e),s.a.Error),null}}},{key:"findSysTickCountVariable",value:function(){if(this._dataDictionary)for(var e=0;e<this._dataDictionary.keys.length;e++){var t=this._dataDictionary.keys[e];if(a.a.isSysTickCountVariable(t))return t}return null}},{key:"getTypeForVariable",value:function(e){var t=null;if(u.a.isAppVar(e));else if(u.a.isPageVar(e)){if(null!==this._pageVariableDataDictionary){var n=this._pageVariableDataDictionary.getValue(e);null!==n?t=n.type:o.a.Log("WARNING: Unable to get page entry for variable name: ".concat(e),s.a.Warning)}}else if(null!==this._dataDictionary){var a=this._dataDictionary.getValue(e);if(null===a||a.Elementary)null!==a&&a.Elementary?t=a.Type:o.a.Log("WARNING: Unable to get data entry for variable name: ".concat(e),s.a.Warning);else{var i=new r.a,c=this.getElementaryTypeForVariable(a.Type,i);if(c){if(t=c.Type,a.Type!==c){this._dataDictionary.contains(e)&&this._dataDictionary.remove(a);var l=this.createDataEntryObject(c,a.InitValue,i);l.Elementary=!0,this._dataDictionary.add(e,l)}}else o.a.Log("WARNING: Unable to get type entry for variable name: ".concat(e),s.a.Warning)}}return t}},{key:"getElementaryTypeForVariable",value:function(e,t,n){var a=this._typeDictionary.getValue(e);if(a){var r=a.Kind.toString();switch(n=n||r,a.Kind){case"Elementary":return new f(n,a.Name);case"Array":return a.ElementType?this.getElementaryTypeForVariable(a.ElementType,t,n):null;case"Structure":return new f(n,a.Name);case"UserString":return new f(n,"STRING");case"Enumeration":return a.ElementType&&a.Values?(a.Values.forEach(function(e){t.add(e.Name,e.Value)}),this.getElementaryTypeForVariable(a.ElementType,t,n)):null;default:o.a.Log("WARNING: Unexpected Kind of type entry: ".concat(a.Kind),s.a.Warning)}}return null}},{key:"getInitialValue",value:function(e){var t;if(u.a.isPageVar(e)){if((t=this._pageVariableDataDictionary.getValue(e))&&t.initValue)return t.initValue}else if(u.a.isAppVar(e)){var n=this._app.getApplicationVariable(e);if(n&&n.initValue)return n.initValue}else if((t=this._dataDictionary.getValue(e))&&t.InitValue)return t.InitValue;return o.a.Log("DEBUG: No initial value found for variable: ".concat(e),s.a.Debug),null}},{key:"prepareSubstituteValue",value:function(e,t){var n=this._dataDictionary.getValue(e);if(n&&n.Values){var a=n.Values.getValue(t);if(null!=a)return a}return t}},{key:"createDataEntryObject",value:function(e,t,n){var a=e.Kind,r=e.Type;return n&&n.keys.length>0?{Kind:a,Type:r,Values:n}:t?{Kind:a,Type:r,InitValue:t}:{Kind:a,Type:r}}},{key:"isEnumeration",value:function(e){var t=this._dataDictionary.getValue(e);return!(!t||!t.Kind||"Enumeration"!==t.Kind)}},{key:"getKindForType",value:function(e){var t=this._typeDictionary.getValue(e);return t&&t.Kind?t.Kind:""}}])&&l(t.prototype,n),h&&l(t,h),e}();h._instance=null;var f=function e(t,n){c(this,e),this.Kind=t,this.Type=n}},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.None=0]="None",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(44),r=n(3),i=n(17),o=n(134);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type="Dynamic",this.node=t,this.dataSource=e.defaultDataValue,this.variableName=r.a.getString(n.Variable),n.Script){var s=n.Script,u=r.a.getString(s.Name),c=s.Parameters,l=[];if(c)for(var h=0;h<c.length;h++)c[h].Constant?l.push(new a.a(c[h].Constant)):c[h].Variable&&l.push(new i.a(c[h].Variable,c[h].Variable.type));this.dataSource=new o.a(n.ModuleName,u,l)}}var t,n,u;return t=e,(n=[{key:"run",value:function(e){}},{key:"type",get:function(){return this._type}}])&&s(t.prototype,n),u&&s(t,u),e}();u.defaultDataValue=new a.a("")},function(e,t,n){var a=n(59).f,r=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in r||n(55)&&a(r,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8),n(82);var a=n(13);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MAX_VALUE,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-Number.MAX_VALUE;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,s(t).call(this,e,n,a,r))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),n=t,(r=[{key:"clone",value:function(){return new t(this.left,this.top,this.right,this.bottom)}},{key:"reset",value:function(){this.left=Number.MAX_VALUE,this.right=-Number.MAX_VALUE,this.top=Number.MAX_VALUE,this.bottom=-Number.MAX_VALUE}},{key:"addPoint",value:function(e){this.left=Math.min(e.x,this.left),this.right=Math.max(e.x,this.right),this.top=Math.min(e.y,this.top),this.bottom=Math.max(e.y,this.bottom)}},{key:"addXY",value:function(e,t){this.left=Math.min(e,this.left),this.right=Math.max(e,this.right),this.top=Math.min(t,this.top),this.bottom=Math.max(t,this.bottom)}},{key:"addPoints",value:function(e){for(var t=0,n=e.length;t<n;t++)this.addPoint(e[t])}}])&&i(n.prototype,r),c&&i(n,c),t}()},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.LOW=0]="LOW",e[e.HIGH=1]="HIGH"}(a||(a={}))},function(e,t,n){"use strict";n(7),n(8);var a=n(141),r=n(99);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,u(t).call(this,e))).initCoefficients(e),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["a"]),n=t,(a=[{key:"initCoefficients",value:function(e){this._a=e[3].x-3*e[2].x+3*e[1].x-e[0].x,this._b=3*e[2].x-6*e[1].x+3*e[0].x,this._c=3*e[1].x-3*e[0].x,this._d=e[0].x,this._e=e[3].y-3*e[2].y+3*e[1].y-e[0].y,this._f=3*e[2].y-6*e[1].y+3*e[0].y,this._g=3*e[1].y-3*e[0].y,this._h=e[0].y}},{key:"interpolate",value:function(e,t){var n=e*e*e,a=e*e;t.x=this._a*n+this._b*a+this._c*e+this._d,t.y=this._e*n+this._f*a+this._g*e+this._h}},{key:"differentiate",value:function(e,t){var n=e*e;t.x=3*this._a*n+2*this._b*e+this._c,t.y=3*this._e*n+2*this._f*e+this._g}},{key:"differentiate2",value:function(e,t){t.x=6*this._a*e+2*this._b,t.y=6*this._e*e+2*this._f}},{key:"getUnitTangent",value:function(e,t){this.differentiate(e,t),t.normalize()}}])&&o(n.prototype,a),i&&o(n,i),t}(),h=n(3);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return v});var v=function(e){function t(e,n,a,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=d(this,p(t).call(this,e,r))).controlPoint1=n,i.controlPoint2=a,i.curve=new l([i.start,i.controlPoint1,i.controlPoint2,i.end]),i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a["a"]),n=t,i=[{key:"create",value:function(e,n){var a=h.a.getPoint(n.End);return new t(e,h.a.getPoint(n.ControlPoint1),h.a.getPoint(n.ControlPoint2),a)}}],(r=null)&&_(n.prototype,r),i&&_(n,i),t}()},function(e,t,n){"use strict";var a,r;n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),function(e){e[e.Fill=0]="Fill",e[e.Fit=1]="Fit",e[e.Stretch=2]="Stretch",e[e.Center=3]="Center"}(a||(a={})),function(e){e[e.Pixels=0]="Pixels",e[e.Percent=1]="Percent"}(r||(r={}))},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Application=0]="Application",e[e.Page=1]="Page",e[e.Server=2]="Server"}(a||(a={}))},function(e,t,n){for(var a=n(84),r=n(116),i=n(75),o=n(54),s=n(74),u=n(157),c=n(47),l=c("iterator"),h=c("toStringTag"),f=u.Array,_={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(_),p=0;p<d.length;p++){var g,v=d[p],y=_[v],m=o[v],b=m&&m.prototype;if(b&&(b[l]||s(b,l,f),b[h]||s(b,h,v),u[v]=f,y))for(g in a)b[g]||i(b,g,a[g],!0)}},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._value=t}var t,n,r;return t=e,(n=[{key:"onValueChanged",value:function(){void 0!==this.valueChanged&&this.valueChanged(this)}},{key:"hasValueChanged",value:function(e,t){return!(e===t)}},{key:"value",get:function(){return this._value},set:function(e){this.hasValueChanged(this._value,e)&&(this._value=e,this.onValueChanged())}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(0),r=n(1),i=n(5);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._domUrl=void 0,this._isValid=void 0,this._url=void 0,this._protocol=void 0,this._host=void 0,this._url=this.BuildUrl(t,n),this._protocol=this.GetUrlProtocol(this.url),this._host=this.GetUrlHost(this.url)}var t,n,s;return t=e,s=[{key:"HasTrailingForwardSlash",value:function(e){return e.charAt(e.length-1)===i.a.forwardSlash}},{key:"EnsureUrlTrailingForwardSlash",value:function(t){return!1===e.HasTrailingForwardSlash(t)?t+i.a.forwardSlash:t}},{key:"RemoveUrlTrailingForwardSlash",value:function(t){return!0===e.HasTrailingForwardSlash(t)?t.substring(0,t.length-1):t}},{key:"FormatDataUrl",value:function(e,t){if(e||(e=window&&window.location&&window.location.protocol?window.location.protocol:"http:"),!t){if(!(window&&window.location&&window.location.hostname))return;t=window.location.hostname,window.location.port&&(t=t+":"+window.location.port)}return e+"//"+t}},{key:"isDomURLSupported",get:function(){if(void 0===e._isDomUrlSupported){e._isDomUrlSupported=!1;try{var t=new URL("ehmi","http://phoenixcontact.com");e._isDomUrlSupported="http://phoenixcontact.com/ehmi"===t.href}catch(e){a.a.Log("WARNING: UrlEx window.URL object unavailable, so using the fall back approach instead.",r.a.Warning)}}return e._isDomUrlSupported}}],(n=[{key:"BuildUrl",value:function(t,n){var i=void 0;if(e.isDomURLSupported){this._isValid=!1;try{this._domUrl=new URL(n,t),this._isValid=!0}catch(e){if(e instanceof SyntaxError)return void a.a.Log("ERROR: UrlEx.BuildUrl) Caught 'SyntaxError' exception due to invalid URL: "+t+n,r.a.Error);e instanceof TypeError?(a.a.Log("WARNING: UrlEx.BuildUrl) Caught 'TypeError' exception.",r.a.Warning),e.message&&a.a.Log("            'TypeError.message="+e.message,r.a.Warning)):a.a.Log("WARNING: UrlEx.BuildUrl) Caught unexpected exception ('"+e+"'), so using the fall back approach instead.",r.a.Warning)}}return void 0!==(i=void 0!==this._domUrl?this._domUrl.href:t?e.EnsureUrlTrailingForwardSlash(t)+n:n)?(i=e.EnsureUrlTrailingForwardSlash(i),this._isValid=!0):this._isValid=!1,i}},{key:"GetUrlProtocol",value:function(e){var t=void 0;if(void 0!==this._domUrl)t=this._domUrl.protocol;else{var n=e.indexOf(":");-1!==n?t=e.substring(0,n+":".length):a.a.Log("ERROR: UrlEx.GetUrlProtocol) Unable to find protocol as invalid URL: "+e,r.a.Error)}return this._isValid=void 0!==t,t}},{key:"GetUrlHost",value:function(t){var n=void 0;if(void 0!==this._domUrl)n=this._domUrl.host;else{var i=t.indexOf("://");-1!==i?n=t.substring(i+"://".length):a.a.Log("ERROR: UrlEx.GetUrlHost) Unable to find host as invalid URL: "+t,r.a.Error)}return void 0!==n?(n=e.RemoveUrlTrailingForwardSlash(n),this._isValid=!0):this._isValid=!1,n}},{key:"isValid",get:function(){return this._isValid}},{key:"url",get:function(){return this._url}},{key:"protocol",get:function(){return this._protocol}},{key:"host",get:function(){return this._host}}])&&o(t.prototype,n),s&&o(t,s),e}();s._isDomUrlSupported=void 0},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Text=2]="Text"}(a||(a={}))},function(e,t,n){"use strict";n(7),n(8);var a=n(73),r=n(4),i=n(135);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,c(t).call(this,e)))._slope=new r.a,n._slope.x=e[1].x-e[0].x,n._slope.y=e[1].y-e[0].y,n._slope.normalize(),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,i["a"]),n=t,(a=[{key:"interpolate",value:function(e,t){t.x=(1-e)*this.controlPoints[0].x+e*this.controlPoints[1].x,t.y=(1-e)*this.controlPoints[0].y+e*this.controlPoints[1].y}},{key:"differentiate",value:function(e,t){t.x=0,t.y=0}},{key:"differentiate2",value:function(e,t){t.x=0,t.y=0}},{key:"getUnitTangent",value:function(e,t){t.x=this._slope.x,t.y=this._slope.y}}])&&s(n.prototype,a),o&&s(n,o),t}(),f=n(3);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return y});var y=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=p(this,g(t).call(this,e,n))).curve=new h([a.start,a.end]),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a["a"]),n=t,o=[{key:"create",value:function(e,n){return new t(e,f.a.getPoint(n.End))}}],(i=[{key:"approximateStroke",value:function(e){this.centerBounds.reset(),this.strokedBounds.reset(),this.innerOffsetPoints=[],this.outerOffsetPoints=[];for(var t=.5*e,n=new r.a,a=new r.a,i=0;i<=1;i++){var o=new r.a;this.curve.interpolate(i,o),this.curve.getUnitTangent(i,n),a.x=t*n.y,a.y=t*-n.x;var s=new r.a(o.x+a.x,o.y+a.y);this.outerOffsetPoints.push(s);var u=new r.a(o.x-a.x,o.y-a.y);this.innerOffsetPoints.push(u),this.centerBounds.addPoint(o),this.strokedBounds.addPoint(u),this.strokedBounds.addPoint(s)}this.strokedBounds.union(this.centerBounds)}}])&&d(n.prototype,i),o&&d(n,o),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(76);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this))).value=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(11);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=o(this,s(t).call(this,e,n)))._type="Group",a}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),n=t,(r=[{key:"onLoaded",value:function(){}}])&&i(n.prototype,r),c&&i(n,c),t}()},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.None=0]="None",e[e.BeginDrag=1]="BeginDrag",e[e.Drag=2]="Drag",e[e.EndDrag=3]="EndDrag"}(a||(a={}))},function(e,t,n){var a=n(148)("wks"),r=n(115),i=n(54).Symbol,o="function"==typeof i;(e.exports=function(e){return a[e]||(a[e]=o&&i[e]||(o?i:r)("Symbol."+e))}).store=a},function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(7),n(8);var a=n(32),r=n(3),i=n(17),o=n(68);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=c(this,l(t).call(this,e,n)))._type="RangeDynamic",a.isSmoothingEnabled=r.a.getBoolean(n.Smoothing,!1),a.hasCircularRange=r.a.getBoolean(n.CircularRange,!1),a}var n,s,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["a"]),n=t,(s=[{key:"getDataValue",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=a;if(this.isSmoothingEnabled&&this.dataSource instanceof i.a){var u=this.dataSource,c=e.smoothingWindow.getTargetTime(),l=u.getTimestampEntry(c);if(null!==l)s=this.hasCircularRange&&l.valueFrom>=t&&l.valueFrom<=n&&l.valueTo>=t&&l.valueTo<=n?this.wrapValue(l,c,t,n):o.a.lerp(c,l.timeFrom,l.timeTo,l.valueFrom,l.valueTo)}else s="string"==typeof this.dataSource.value?r.a.getNumber(this.dataSource.value,a):this.dataSource.value;return s}},{key:"wrapValue",value:function(e,t,n,a){var r=e.valueFrom,i=e.valueTo,s=.5*(n+a)+(i-r);s>a?i=n-(a-i):s<n&&(i=a+(i-n));var u=o.a.lerp(t,e.timeFrom,e.timeTo,r,i);return u>a?u=n+(u-a):u<n&&(u=a-(n-u)),u}}])&&u(n.prototype,s),f&&u(n,f),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(7),n(8);var a=n(24),r=n(53),i=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,u(t).call(this,e))).sourceType=r.a.Constant,n.sourceName=null,n.source=null,n.targetName=null,n.target=null,n._type="WriteValueAction",n.targetName=i.a.getString(e.DestinationVariable,null),i.a.getString(e.SourceType)){case"Constant":n.sourceType=r.a.Constant,n.sourceName=i.a.getString(e.SourceConstant,null);break;case"Variable":n.sourceType=r.a.Variable,n.sourceName=i.a.getString(e.SourceVariable,null)}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.None=0]="None",e[e.Application=1]="Application",e[e.Integrated=2]="Integrated"}(a||(a={}))},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Variable=0]="Variable",e[e.Constant=1]="Constant",e[e.ArrayVariable=2]="ArrayVariable"}(a||(a={}))},function(e,t,n){var a=n(66);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Constant=0]="Constant",e[e.Variable=1]="Variable"}(a||(a={}))},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports=!n(58)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var a=n(121),r=n(168),i=n(65),o=n(67),s=n(66),u=n(52);o(o.S,"Reflect",{get:function e(t,n){var o,c,l=arguments.length<3?t:arguments[2];return u(t)===l?t[n]:(o=a.f(t,n))?i(o,"value")?o.value:void 0!==o.get?o.get.call(l):void 0:s(c=r(t))?e(c,n,l):void 0}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(136);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n,r;function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i(this,o(c).call(this,e)))._x=n,t._y=a,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,a["a"]),t=c,(n=[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}}])&&s(t.prototype,n),r&&s(t,r),c}()},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var a=n(52),r=n(162),i=n(123),o=Object.defineProperty;t.f=n(55)?Object.defineProperty:function(e,t,n){if(a(e),t=i(t,!0),a(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(24),r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).call(this,n))).pageName=null,e._type="LoadPageAction",e.pageName=r.a.getString(n.Page),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(24);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=i(this,o(t).call(this,{})))._type="CustomAction",a.gesture=e,a.actionCallback=n,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(7),n(8);var a=n(4),r=n(98);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=s(this,u(t).call(this,e,n,r,i))).dragListeners=[],o.updatedLocation=new a.a,o.isDragging=!1,o.isScrollBarClicked=!1,o.height=0,o._type="ScrollBarThumb",o.height=o.bounds.height,o}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["a"]),n=t,(i=[{key:"addDragListener",value:function(e){this.dragListeners.push(e)}},{key:"implBeginDrag",value:function(e,t,n){return this.isDragging=!0,this.dragListeners[0].onListItemDragStart(this,e,t,n),!0}},{key:"implDrag",value:function(e,t,n){return this.dragListeners[0].onListItemDrag(this,e,t,n),!0}},{key:"implEndDrag",value:function(e,t,n){return this.dragListeners[0].onListItemEndDrag(this,e,t,n),this.isDragging=!1,!0}}])&&o(n.prototype,i),l&&o(n,l),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(7),n(8);var a=n(32),r=n(69),i=n(35),o=n(3);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=c(this,l(t).call(this,e,n)))._targetProperty=null,a._type="ButtonStateDynamic";var s=o.a.getBoolean(n.ChangeWhen);return a._converter=new r.a(s?i.a.HIGH:i.a.LOW,!1,!0),a._targetProperty=e.getTargetProperty("Variable"),a}var n,s,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["a"]),n=t,f=[{key:"appendNew",value:function(e){var t={Type:"ButtonStateDynamic",Variable:o.a.getString(e.Variable),TargetProperty:"Variable",ChangeWhen:!1};void 0===e.Dynamics&&(e.Dynamics=[]),e.Dynamics.push(t)}}],(s=[{key:"run",value:function(e){this._converter.convert(this.dataSource.value),this._targetProperty.value=this._converter.output}}])&&u(n.prototype,s),f&&u(n,f),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(60),r=n(19);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).call(this,n))).direction=r.a.Left,e._type="NavigationAction",e.direction=a,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),t}()},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var a=n(54),r=n(114),i=n(74),o=n(75),s=n(160),u=function(e,t,n){var c,l,h,f,_=e&u.F,d=e&u.G,p=e&u.S,g=e&u.P,v=e&u.B,y=d?a:p?a[t]||(a[t]={}):(a[t]||{}).prototype,m=d?r:r[t]||(r[t]={}),b=m.prototype||(m.prototype={});for(c in d&&(n=t),n)h=((l=!_&&y&&void 0!==y[c])?y:n)[c],f=v&&l?s(h,a):g&&"function"==typeof h?s(Function.call,h):h,y&&o(y,c,h,e&u.U),m[c]!=h&&i(m,c,f),g&&b[c]!=h&&(b[c]=h)};a.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(3);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var o=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sourceLow=t,this._sourceHigh=n,this._targetLow=a,this._targetHigh=r,this._rangeFactor=(r-a)/(n-t),isFinite(this._rangeFactor)||(this._rangeFactor=1)}return i(e,[{key:"output",get:function(){return this._output}}]),i(e,[{key:"convert",value:function(t){this._output=e.convert(t,this._sourceLow,this._sourceHigh,this._targetLow,this._targetHigh,this._rangeFactor)}}],[{key:"convert",value:function(e,t,n,r,i,o){var s=a.a.getNumber(e);return isNaN(s)&&(s=0),s<t?s=t:s>n&&(s=n),r+(s-t)*o}},{key:"lerp",value:function(t,n,a,r,i){var o=(i-r)/(a-n);return e.convert(t,n,a,r,i,o)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(3),r=n(35);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._activeState=t,this._assertedValue=n,this._deassertedValue=a}var t,n,o;return t=e,(n=[{key:"convert",value:function(e){var t=a.a.convertToBoolean(e);t&&this._activeState==r.a.HIGH||!t&&this._activeState==r.a.LOW?this._output=this._assertedValue:this._output=this._deassertedValue}},{key:"output",get:function(){return this._output}}])&&i(t.prototype,n),o&&i(t,o),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(9);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e,n,a,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=o(this,s(t).call(this,e,n,a,r))).element=null,i._isModified=!1,i._type="TextInputBase",i}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),n=t,(r=[{key:"hasHitRegion",get:function(){return!0}}])&&i(n.prototype,r),c&&i(n,c),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(24);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,o(t).call(this,n)))._type="LogInAction",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}();u.userNameTargetName="USERNAME",u.passwordTargetName="PASSWORD"},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(49);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,o(t).call(this,n)))._type="CloseDialogAction",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(4),r=n(34),i=n(21);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.curve=null,this.centerBounds=new r.a,this.strokedBounds=new r.a,this.innerOffsetPoints=null,this.outerOffsetPoints=null,this.start=t,this.end=n}var t,n,s;return t=e,s=[{key:"createSquareStartCap",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=.5*t,r=new a.a;e.curve.interpolate(0,r);var i=new a.a;e.curve.getUnitTangent(0,i);var o=new a.a(i.y,-i.x);o.scale(n,n);var s=new a.a;s.x=r.x+o.x,s.y=r.y+o.y,a.a.equals(e.outerOffsetPoints[0],s,1e-4)?s=e.outerOffsetPoints[0]:(e.outerOffsetPoints.unshift(s),e.strokedBounds.addPoint(s));var u=new a.a;u.x=s.x-n*i.x,u.y=s.y-n*i.y,e.outerOffsetPoints.unshift(u),e.strokedBounds.addPoint(u);var c=new a.a;c.x=r.x-o.x,c.y=r.y-o.y,a.a.equals(e.innerOffsetPoints[0],c,1e-4)?c=e.innerOffsetPoints[0]:(e.innerOffsetPoints.unshift(c),e.strokedBounds.addPoint(c));var l=new a.a;l.x=c.x-n*i.x,l.y=c.y-n*i.y,e.innerOffsetPoints.unshift(l),e.strokedBounds.addPoint(l)}},{key:"createSquareEndCap",value:function(e,t){var n=.5*t,r=new a.a;e.curve.interpolate(1,r);var i=new a.a;e.curve.getUnitTangent(1,i);var o=new a.a(i.y,-i.x);o.scale(n,n);var s=new a.a;s.x=r.x+o.x,s.y=r.y+o.y,a.a.equals(e.outerOffsetPoints[e.outerOffsetPoints.length-1],s,1e-4)?s=e.outerOffsetPoints[e.outerOffsetPoints.length-1]:(e.outerOffsetPoints.push(s),e.strokedBounds.addPoint(s));var u=new a.a;u.x=s.x+n*i.x,u.y=s.y+n*i.y,e.outerOffsetPoints.push(u),e.strokedBounds.addPoint(u);var c=new a.a;c.x=r.x-o.x,c.y=r.y-o.y,a.a.equals(e.innerOffsetPoints[e.innerOffsetPoints.length-1],c,1e-4)?c=e.innerOffsetPoints[e.innerOffsetPoints.length-1]:(e.innerOffsetPoints.push(c),e.strokedBounds.addPoint(c));var l=new a.a;l.x=c.x+n*i.x,l.y=c.y+n*i.y,e.innerOffsetPoints.push(l),e.strokedBounds.addPoint(l)}},{key:"createMiterPoint",value:function(e,t,n,r){var o=new a.a;e.curve.getUnitTangent(1,o);var s=new a.a;t.curve.getUnitTangent(0,s);var u=Math.atan2(o.y,o.x);u<0&&(u+=2*Math.PI);var c=Math.atan2(s.y,s.x);c<0&&(c+=2*Math.PI);var l=c-u;if(l<0&&(l+=2*Math.PI),Math.abs(l)>.001){var h,f,_;l>=0&&l<Math.PI?(h=e.outerOffsetPoints[e.outerOffsetPoints.length-1],f=t.outerOffsetPoints[0],_=e.outerOffsetPoints):(h=e.innerOffsetPoints[e.innerOffsetPoints.length-1],f=t.innerOffsetPoints[0],_=e.innerOffsetPoints);var d=new i.a(o.x,s.x,o.y,s.y),p=new a.a(f.x-h.x,f.y-h.y),g=new a.a;if(i.a.solve(d,p,g),!isNaN(g.x)&&!isNaN(g.y)){var v=new a.a(h.x+g.x*o.x,h.y+g.y*o.y),y=new a.a;e.curve.interpolate(1,y),a.a.distance(y,v)/(.5*n)<=r&&(_.push(v),e.strokedBounds.addPoint(v))}}}}],(n=[{key:"approximateStroke",value:function(e){}},{key:"hasOffsetCurve",get:function(){return null!=this.innerOffsetPoints&&null!=this.outerOffsetPoints}}])&&o(t.prototype,n),s&&o(t,s),e}()},function(e,t,n){var a=n(59),r=n(122);e.exports=n(55)?function(e,t,n){return a.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var a=n(54),r=n(74),i=n(65),o=n(115)("src"),s=Function.toString,u=(""+s).split("toString");n(114).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(i(n,"name")||r(n,"name",t)),e[t]!==n&&(c&&(i(n,o)||r(n,o,e[t]?""+e[t]:u.join(String(t)))),e===a?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._value=null,this.valueChangedCallbacks=[]}var t,n,r;return t=e,(n=[{key:"value",get:function(){return this._value},set:function(e){var t=this;this._value=e,this.valueChangedCallbacks.length>0&&(this.valueChangedCallbacks=this.valueChangedCallbacks.map(function(e){return e(t)}).filter(function(e){return null!=e}))}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});n(7),n(8);var a=n(4),r=n(48),i=n(92),o=n(3),s=n(81);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=l(this,h(t).call(this,e,n)))._targetId=null,r._position=new a.a,r.path=null,r.target=null,r._type="PathDynamic",r._targetId=o.a.getString(n.TargetId),r.lowRange=o.a.getNumber(n.LowRange),r.highRange=o.a.getNumber(n.HighRange),r.direction=t.getPathDirection(n.Direction),r.motionType=t.getMotionType(n.MotionType),r._tangent=null,r._alignment=null,r.motionType===s.a.Translation)?o.a.getBoolean(n.AlignToTangent,!1)&&(r._alignment=r._tangent=new a.a):r._alignment=new a.a;return r.pathOffset=o.a.getNumber(n.PathOffset),r.pathOffset=Math.min(Math.max(r.pathOffset,0),1),r._rangeFactor=1/(r.highRange-r.lowRange),isFinite(r._rangeFactor)||(r._rangeFactor=1),r}var n,u,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["a"]),n=t,_=[{key:"getMotionType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Translation;if(void 0===e)return t;switch(e){case"Rotation":return s.a.Rotation;case"Translation":default:return s.a.Translation}}},{key:"getPathDirection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.a.Forward;if(void 0===e)return t;switch(e){case"Reverse":return i.a.Reverse;case"Forward":default:return i.a.Forward}}}],(u=[{key:"run",value:function(e){var t=this.getDataValue(e,this.lowRange,this.highRange);if(t!==this._previousValue){this._previousValue=t,t<this.lowRange?t=this.lowRange:t>this.highRange&&(t=this.highRange);var n=(t-this.lowRange)*this._rangeFactor+this.pathOffset;if(n>1?n-=1:n<0&&(n+=1),this.direction===i.a.Reverse&&(n=1-n),this.path.solver.evaluate(n,this._position,this._tangent),this.motionType===s.a.Rotation){var a=this.target.location.value;this._alignment.x=this._position.x-a.x,this._alignment.y=this._position.y-a.y}else this.target.location.setPointValue(this._position.x,this._position.y);if(null!==this._alignment){var r=Math.atan(this._alignment.y/this._alignment.x);this._alignment.x<0&&(r+=this._alignment.y<0?-Math.PI:Math.PI),this.target.rotation.value=r}}}},{key:"targetId",get:function(){return this._targetId}}])&&c(n.prototype,u),_&&c(n,_),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(22);var a=n(28),r=n(3);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.color=r.a.getColor(t.Color,a.a.White)}var t,n,o;return t=e,(n=[{key:"createStyle",value:function(e,t){return this.color.toString()}}])&&i(t.prototype,n),o&&i(t,o),e}();o.White=new o({Color:"#FFFFFFFF"})},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(24);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,o(t).call(this,n)))._type="PageBackAction",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(24),r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).call(this,n))).pageName=null,e.dimBackground=!1,e._type="OpenDialogAction",e.pageName=r.a.getString(n.Page),e.dimBackground=r.a.getBoolean(n.DimBackground,!1),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Translation=0]="Translation",e[e.Rotation=1]="Rotation"}(a||(a={}))},function(e,t,n){"use strict";var a=n(54),r=n(65),i=n(113),o=n(159),s=n(123),u=n(58),c=n(124).f,l=n(121).f,h=n(59).f,f=n(183).trim,_=a.Number,d=_,p=_.prototype,g="Number"==i(n(150)(p)),v="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,a,r,i=(t=v?t.trim():f(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+t}for(var o,u=t.slice(2),c=0,l=u.length;c<l;c++)if((o=u.charCodeAt(c))<48||o>r)return NaN;return parseInt(u,a)}}return+t};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof _&&(g?u(function(){p.valueOf.call(n)}):"Number"!=i(n))?o(new d(y(t)),n,_):y(t)};for(var m,b=n(55)?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;b.length>E;E++)r(d,m=b[E])&&!r(_,m)&&h(_,m,l(d,m));_.prototype=p,p.constructor=_,n(75)(a,"Number",_)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var a=n(167),r=n(196),i=n(157),o=n(94);e.exports=n(197)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),i.Arguments=i.Array,a("keys"),a("values"),a("entries")},function(e,t,n){var a=n(67);a(a.P,"Array",{fill:n(205)}),n(167)("fill")},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"stringToBoolean",value:function(e){if(null!=e)switch(e.toLowerCase()){case"true":case"1":return!0}return!1}},{key:"booleanStringToNumber",value:function(e){if(null!=e)switch(e.toLowerCase()){case"true":return 1;case"false":return 0}return NaN}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(40);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,o(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(7),n(8);var a=n(24),r=n(3),i=n(14);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,u(t).call(this,n))).hitRegionWidth=0,e._type="UpdateFollowersAction",e.gesture=i.a.Click,e.hitRegionWidth=r.a.getNumber(n.HitRegionWidth,0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(7),n(8);var a=n(32),r=n(69),i=n(35),o=n(3);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=c(this,l(t).call(this,e,n))).visibilityIsAuthorized=!0,a._type="VisibilityDynamic";var s=o.a.getBoolean(n.ChangeWhen);return a._converter=new r.a(s?i.a.HIGH:i.a.LOW,!1,!0),a}var n,s,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["a"]),n=t,(s=[{key:"OnSecurityContextChanged",value:function(e){this.visibilityIsAuthorized=e.shouldShowNode(this.node)}},{key:"run",value:function(e){this.node.visibility.value=this.visibilityIsAuthorized&&this.GetConvertedValueFromDataSource()}},{key:"GetConvertedValueFromDataSource",value:function(){return this._converter.convert(this.dataSource.value),this._converter.output}}])&&u(n.prototype,s),f&&u(n,f),t}()},function(e,t,n){"use strict";n(7),n(8);var a=n(141),r=n(99);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,u(t).call(this,e))).initCoefficients(e),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["a"]),n=t,(a=[{key:"initCoefficients",value:function(e){this._a=e[2].x-2*e[1].x+e[0].x,this._b=2*e[1].x-2*e[0].x,this._c=e[0].x,this._d=e[2].y-2*e[1].y+e[0].y,this._e=2*e[1].y-2*e[0].y,this._f=e[0].y}},{key:"interpolate",value:function(e,t){var n=e*e;t.x=this._a*n+this._b*e+this._c,t.y=this._d*n+this._e*e+this._f}},{key:"differentiate",value:function(e,t){t.x=2*this._a*e+this._b,t.y=2*this._d*e+this._e}},{key:"differentiate2",value:function(e,t){t.x=2*this._a,t.y=2*this._d}},{key:"getUnitTangent",value:function(e,t){this.differentiate(e,t),t.normalize()}}])&&o(n.prototype,a),i&&o(n,i),t}(),h=n(3);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return v});var v=function(e){function t(e,n,a){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=d(this,p(t).call(this,e,a))).controlPoint=n,r.curve=new l([r.start,r.controlPoint,r.end]),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a["a"]),n=t,i=[{key:"create",value:function(e,n){var a=h.a.getPoint(n.End);return new t(e,h.a.getPoint(n.ControlPoint),a)}}],(r=null)&&_(n.prototype,r),i&&_(n,i),t}()},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Once=0]="Once",e[e.Continuous=1]="Continuous"}(a||(a={}))},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Forward=0]="Forward",e[e.Reverse=1]="Reverse"}(a||(a={}))},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.NewWindow=0]="NewWindow",e[e.NewWindowFullScreen=1]="NewWindowFullScreen",e[e.SameWindow=2]="SameWindow"}(a||(a={}))},function(e,t,n){var a=n(181),r=n(83);e.exports=function(e){return a(r(e))}},function(e,t,n){var a=n(125),r=Math.min;e.exports=function(e){return e>0?r(a(e),9007199254740991):0}},function(e,t,n){"use strict";var a=n(151),r=n(52),i=n(187),o=n(152),s=n(95),u=n(127),c=n(153),l=Math.min,h=[].push,f=!!function(){try{return new RegExp("x","y")}catch(e){}}();n(129)("split",2,function(e,t,n,_){var d;return d="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!a(e))return n.call(r,e,t);for(var i,o,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,_=void 0===t?4294967295:t>>>0,d=new RegExp(e.source,l+"g");(i=c.call(d,r))&&!((o=d.lastIndex)>f&&(u.push(r.slice(f,i.index)),i.length>1&&i.index<r.length&&h.apply(u,i.slice(1)),s=i[0].length,f=o,u.length>=_));)d.lastIndex===i.index&&d.lastIndex++;return f===r.length?!s&&d.test("")||u.push(""):u.push(r.slice(f)),u.length>_?u.slice(0,_):u}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,a){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r,a):d.call(String(r),n,a)},function(e,t){var a=_(d,e,this,t,d!==n);if(a.done)return a.value;var c=r(e),h=String(this),p=i(c,RegExp),g=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(f?"y":"g"),y=new p(f?c:"^(?:"+c.source+")",v),m=void 0===t?4294967295:t>>>0;if(0===m)return[];if(0===h.length)return null===u(y,h)?[h]:[];for(var b=0,E=0,D=[];E<h.length;){y.lastIndex=f?E:0;var S,P=u(y,f?h:h.slice(E));if(null===P||(S=l(s(y.lastIndex+(f?0:E)),h.length))===b)E=o(h,E,g);else{if(D.push(h.slice(b,E)),D.length===m)return D;for(var w=1;w<=P.length-1;w++)if(D.push(P[w]),D.length===m)return D;E=b=S}}return D.push(h.slice(b)),D}]})},function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(7),n(8);var a=n(24),r=n(3),i=n(14),o=n(91);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,l(t).call(this,n))).writeMode=o.a.Once,e.snapToTick=!1,e._type="FollowPathAction",e.gesture=i.a.Drag,e.writeMode=t.getWriteMode(n),e.snapToTick=r.a.getBoolean(n.SnapToTick,!1),e}var n,s,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["a"]),n=t,f=[{key:"getWriteMode",value:function(e){var t=o.a.Once;if(void 0!==e.WriteMode)switch(e.WriteMode){case"Continuous":t=o.a.Continuous;break;case"Once":default:t=o.a.Once}return t}}],(s=null)&&u(n.prototype,s),f&&u(n,f),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return _});n(7),n(8);var a=n(9),r=n(3),i=n(18),o=n(25),s=n(15);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e,n,s,u){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=l(this,h(t).call(this,e,n,s,u)))._type="Rectangle";var f=r.a.getRect(s.Geometry.Rect),_=r.a.getSize(s.CornerRadii),d=!i.a.IsNoFill(s.Fill);return c.path=new o.a(f,d,_,c.lineWidth,a.a.defaultRectangleMiterLimit,!0),c.fillStyle.value=i.a.createFillStyle(n,s.Fill,f),c}var n,u,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["a"]),n=t,(u=[{key:"draw",value:function(e,t){var n=this.screenMatrix;e.save(),e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.beginPath(),s.a.define(e,this.path),null!==this.fillStyle.value&&(e.fillStyle=this.fillStyle.value,e.transformFill()),this.lineWidth>0&&(e.lineJoin="miter",e.lineCap="square",e.miterLimit=2,e.strokeStyle=this.strokeStyle.value,e.lineWidth=this.lineWidth,e.setLineDash(this.dashSegments),e.lineDashOffset=this.dashOffset,e.stroke()),e.restore()}}])&&c(n.prototype,u),_&&c(n,_),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(135);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,o(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(4),r=n(34),i=n(36),o=n(90),s=n(73),u=n(31);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a,i,o,s){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.a.None,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.a.None;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.startArrowPoints=null,this.endArrowPoints=null,this._hitBounds=new r.a,this._fillBounds=new r.a,this._hasStrokeApproximation=!1,this.subPaths=t,this.hasInterior=n,this.isConvex=a,this.createPoints(),this.createStrokeApproximation(i,o),this.createArrowHeads(c,l,i),s||this.freeStrokeApproximation()}var t,n,l;return t=e,(n=[{key:"updateStrokeWidth",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.a.None,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.a.None;this._hitBounds=new r.a,this._fillBounds=new r.a,this.createStrokeApproximation(e,t),this.createArrowHeads(n,a,e)}},{key:"createPoints",value:function(){this.points=[];for(var e=0;e<this.subPaths.length;e++){var t=this.subPaths[e];this.points.push(t.start.clone());var n=t.segments.length;t.hasClosingSegment&&n--;for(var a=0;a<n;a++){var r=t.segments[a];if(r instanceof i.a){var s=r;this.points.push(s.controlPoint1.clone()),this.points.push(s.controlPoint2.clone())}else if(r instanceof o.a){var u=r;this.points.push(u.controlPoint.clone())}this.points.push(r.end.clone())}}}},{key:"createStrokeApproximation",value:function(e,t){for(var n=0;n<this.subPaths.length;n++){var a=this.subPaths[n];a.start;if(a.segments.length>0){for(var r=0;r<a.segments.length;r++){var i=a.segments[r];r>0&&a.segments[r-1],i.approximateStroke(e),r>0&&(s.a.createMiterPoint(a.segments[r-1],i,e,t),this._hitBounds.union(a.segments[r-1].strokedBounds)),i.end,this._fillBounds.union(i.centerBounds),this._hitBounds.union(i.strokedBounds)}a.isClosed?s.a.createMiterPoint(a.segments[a.segments.length-1],a.segments[0],e,t):(s.a.createSquareStartCap(a.segments[0],e),s.a.createSquareEndCap(a.segments[a.segments.length-1],e)),this._hitBounds.union(a.segments[0].strokedBounds),this._hitBounds.union(a.segments[a.segments.length-1].strokedBounds)}}this._hasStrokeApproximation=!0}},{key:"freeStrokeApproximation",value:function(){if(this._hasStrokeApproximation)for(var e=0;e<this.subPaths.length;e++)for(var t=this.subPaths[e],n=0;n<t.segments.length;n++)t.segments[n].innerOffsetPoints=null,t.segments[n].outerOffsetPoints=null;this._hasStrokeApproximation=!1}},{key:"createArrowHeads",value:function(e,t,n){if(0!=this.subPaths.length){var r=new a.a,i=new a.a,o=this.subPaths[0];if(e!=u.a.None&&!o.isClosed&&o.segments.length>0)this.startArrowPoints=new Array(3),(s=o.segments[0]).curve.interpolate(0,r),s.curve.getUnitTangent(0,i),i.scale(-1,-1),this.createArrowHeadPoints(this.startArrowPoints,r,i,n,e),this.hitBounds.addPoints(this.startArrowPoints);var s;o=this.subPaths[this.subPaths.length-1];if(t!=u.a.None&&!o.isClosed&&o.segments.length>0)this.endArrowPoints=new Array(3),(s=o.segments[o.segments.length-1]).curve.interpolate(1,r),s.curve.getUnitTangent(1,i),this.createArrowHeadPoints(this.endArrowPoints,r,i,n,t),this.hitBounds.addPoints(this.endArrowPoints)}}},{key:"createArrowHeadPoints",value:function(e,t,n,r,i){var o;switch(i){case u.a.Small:o=8/3*r;break;case u.a.Large:o=20/3*r;break;default:o=4*r}var s=(.5+4/3)*r,c=new a.a(.75*o,o),l=new a.a(t.x+n.x*s,t.y+n.y*s),h=new a.a(l.x-n.x*c.y,l.y-n.y*c.y),f=new a.a(.5*c.x*n.y,.5*c.x*-n.x);e[0]=l,e[1]=new a.a(h.x+f.x,h.y+f.y),e[2]=new a.a(h.x-f.x,h.y-f.y)}},{key:"hitBounds",get:function(){return this._hitBounds}},{key:"fillBounds",get:function(){return this._fillBounds}},{key:"hasStrokeApproximation",get:function(){return this._hasStrokeApproximation}}])&&c(t.prototype,n),l&&c(t,l),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(7),n(8),n(56);var a=n(98);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,n,a,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=o(this,u(t).call(this,e,n,a,r))).dragListeners=[],i.isSelected=!1,i._type="ListItem",i}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["a"]),n=t,(r=[{key:"addDragListener",value:function(e){this.dragListeners.push(e)}},{key:"getHasHitRegion",value:function(){return!this.isSelected&&s(u(t.prototype),"getHasHitRegion",this).call(this)}},{key:"implBeginDrag",value:function(e,n,a){var r=this;return!!this.dragListeners.some(function(t){return t.onListItemDragStart(r,e,n,a)})||s(u(t.prototype),"implBeginDrag",this).call(this,e,n,a)}},{key:"implDrag",value:function(e,n,a){var r=this;return!!this.dragListeners.some(function(t){return t.onListItemDrag(r,e,n,a)})||s(u(t.prototype),"implDrag",this).call(this,e,n,a)}},{key:"implEndDrag",value:function(e,n,a){var r=this;return!!this.dragListeners.some(function(t){return t.onListItemEndDrag(r,e,n,a)})||s(u(t.prototype),"implEndDrag",this).call(this,e,n,a)}}])&&i(n.prototype,r),l&&i(n,l),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(39);function a(e,t){var n=[];for(n.push(e);n.length>0;){var a=n.pop();if(!t(a))break;a.nodes.forEach(function(e){return n.push(e)})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(7),n(8);var a=n(32),r=n(69),i=n(35),o=n(3);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=c(this,l(t).call(this,e,n))).enabledIsAuthorized=!0,a._type="DisableDynamic";var s=o.a.getBoolean(n.ChangeWhen);return a._converter=new r.a(s?i.a.HIGH:i.a.LOW,!1,!0),a}var n,s,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["a"]),n=t,(s=[{key:"OnSecurityContextChanged",value:function(e){this.enabledIsAuthorized=e.shouldEnableNode(this.node)}},{key:"run",value:function(e){this.node.isEnabled.value=this.enabledIsAuthorized&&this.getConvertedEnabledFromDataSource()}},{key:"getConvertedEnabledFromDataSource",value:function(){return this._converter.convert(this.dataSource.value),this._converter.output}}])&&u(n.prototype,s),f&&u(n,f),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(24),r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).call(this,n))).targetName=null,e.target=null,e._type="ToggleValueAction",e.targetName=r.a.getString(n.Variable),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(24),r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).call(this,n))).increment=0,e.targetName=null,e.target=null,e._type="IncrementValueAction",e.targetName=r.a.getString(n.Variable,null),e.increment=r.a.getNumber(n.StepConstant,0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(7),n(8);var a=n(24),r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).call(this,n))).target=null,e.symbolInstance=null,e._type="MessageBoxAction",e.symbol=r.a.getString(n.Symbol,null),e.value1=r.a.getString(n.Value1,null),e.value2=r.a.getString(n.Value2,null),e.targetName=r.a.getString(n.ResultVariable,null),e.buttons=r.a.getNumber(n.Buttons,0),e.icon=r.a.getNumber(n.Icon,0),e.caption=r.a.getString(n.Caption,null),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(24);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,o(t).call(this,n)))._type="PageForwardAction",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(7),n(8);var a=n(60);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this,e)))._type="LogOutAction",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(7),n(8);var a=n(24),r=n(3),i=n(20),o=n(93);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,c(t).call(this,e))).windowLaunchOption=o.a.SameWindow,n._type="ExecuteCommandAction",n.commandType=r.a.getString(e.LaunchFileCommandType),n.commandType){case"OpenSupportFile":var a=r.a.getString(e.LaunchFileSupportFileName);null!=a&&(n.commandTarget=i.a.getResourceUrl(encodeURIComponent(a)));break;case"OpenProject":n.commandTarget=r.a.getString(e.LaunchFileProjectLocation),e.LaunchFileProjectAliasName&&(n.alias=r.a.getString(e.LaunchFileProjectAliasName));break;case"OpenUrl":n.commandTarget=r.a.getString(e.LaunchFileUrl);break;case"CloseDownApplication":break;case"RunCommandLine":n.commandTarget=e.LaunchFileRunCommandLine,e.LaunchFileRunCommandLineWorkingDirectory&&(n.workingDirectory=r.a.getString(e.LaunchFileRunCommandLineWorkingDirectory))}if(e.LaunchFileWindowBehavior)switch(r.a.getString(e.LaunchFileWindowBehavior)){case"SameWindow":n.windowLaunchOption=o.a.SameWindow;break;case"NewWindow":n.windowLaunchOption=o.a.NewWindow;break;case"NewWindowFullScreen":n.windowLaunchOption=o.a.NewWindowFullScreen}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,a["a"]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(7),n(8),n(85),n(209);var a=n(48),r=n(3),i=n(18),o=n(78),s=n(28);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function e(t,n,a,r){_(this,e),this.threshold=t,this.fill=n,this.style=a,this.blink=r},p=function(e){function t(e,n,a){var i;if(_(this,t),(i=l(this,h(t).call(this,n,a)))._targetProperty=null,i._type="FillDynamic",i._interpolate=r.a.getBoolean(a.Interpolate,!0),void 0!==a.Rate)switch(a.Rate.toUpperCase()){case"SLOW":i.blinkStatusVariableName="@BlinkSlowStatus";break;case"FAST":i.blinkStatusVariableName="@BlinkFastStatus";break;case"MEDIUM":i.blinkStatusVariableName="@BlinkStatus"}i._thresholds=i.getThresholds(e,n,a),i._thresholds.length>0&&(i._minimum=i._thresholds[0],i._maximum=i._thresholds[i._thresholds.length-1]);var o=r.a.getString(a.TargetProperty);return i._targetProperty=n.getTargetProperty(o),i._defaultFill=i._targetProperty.value,i}var n,u,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["a"]),n=t,(u=[{key:"getThresholds",value:function(e,t,n){var a=[],s=void 0!==n.Rate&&"NONE"!==n.Rate.toUpperCase(),u=!1;if(void 0!==n.ThresholdData){var c=n.ThresholdData;if(null!=c&&null!=c.length){for(var l=0;l<c.length;l++){var h=c[l],f=r.a.getNumber(h.Threshold),_=null,p=i.a.createFill(h.Value);null!==p&&(_=p.createStyle(e,t.path.fillBounds)),u=void 0!==h.Blink&&!0===h.Blink,a.push(new d(f,p,_,s&&u)),null!==p&&p instanceof o.a||(this._interpolate=!1)}a.sort(function(e,t){return e.threshold-t.threshold})}}return a}},{key:"run",value:function(e){if(0!=this._thresholds.length){var t,n=this.getDataValue(e,this._minimum.threshold,this._maximum.threshold),a=0,r=this._thresholds.length-1,i=!1;if(n<this._minimum.threshold)t=this._minimum.style,i=this._minimum.blink;else if(n>=this._maximum.threshold)t=this._maximum.style,i=this._maximum.blink;else{for(var o=r;o>=0;o--)if(n>=this._thresholds[o].threshold){a=o;break}var u=this._thresholds[a];if(i=u.blink,this._interpolate){var c=a+1;c>=r&&(c=r);var l=this._thresholds[c],h=(n-u.threshold)/(l.threshold-u.threshold),f=u.fill.color,_=l.fill.color,d=Math.round(f.R+h*(_.R-f.R)),p=Math.round(f.G+h*(_.G-f.G)),g=Math.round(f.B+h*(_.B-f.B)),v=Math.round(f.A+h*(_.A-f.A));t=s.a.toCssString(d,p,g,v)}else t=u.style}i&&0==this.blinkStateDataSource.value&&(t=this._defaultFill),this._targetProperty.value=t}}}])&&c(n.prototype,u),p&&c(n,p),t}()},function(e,t,n){"use strict";var a=n(4),r=n(3),i=n(36),o=n(43),s=n(90);function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"createPathSegment",value:function(e,t){var n=void 0;switch(null!=t.Type&&(n=r.a.getString(t.Type)),n){case"CubicBezierPathSegment":return i.a.create(e,t);case"LinePathSegment":return o.a.create(e,t);case"QuadraticBezierPathSegment":return s.a.create(e,t)}}}],(n=null)&&u(t.prototype,n),a&&u(t,a),e}();n.d(t,"a",function(){return l});var l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasClosingSegment=!1,this.start=r.a.getPoint(t.Start),this.isClosed=r.a.getBoolean(t.IsClosed),this.segments=[],null!=t.Segments){for(var n=this.start,i=0;i<t.Segments.length;i++){var s=c.createPathSegment(new a.a(n.x,n.y),t.Segments[i]);null!=s&&(this.segments.push(s),n=s.end)}if(this.isClosed){var u=this.segments[0],l=this.segments[this.segments.length-1];Math.abs(u.start.x-l.end.x)>.01&&Math.abs(u.start.y-l.end.y)>.01&&(this.segments.push(new o.a(l.end,u.start)),this.hasClosingSegment=!0)}}}},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return _});n(33),n(96);var a=n(23),r=n(30),i=n(17),o=n(51),s=n(44),u=n(132),c=n(27);function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function e(t){if(h(this,e),this.major=0,this.minor=0,this.revision=0,void 0!==t){var n=t.split(".",3);n.length>0&&(this.major=parseInt(n[0])),n.length>1&&(this.minor=parseInt(n[1])),n.length>2&&(this.revision=parseInt(n[2]))}},_=function(){function e(t,n,r){h(this,e),this.pathDynamics=[],this.pathMap=new a.a,this._localVariables=new a.a,this._symbolDefinitionName=null,this._parameters=null,this._constants=null,this._layer=0,this._app=t,this.page=n,this.version=r;for(var i=n.parent;null!==i;i=i.parent)this._layer++}var t,n,f;return t=e,(n=[{key:"registerValueSource",value:function(e,t,n,a){var r=n||e;if(!this.isValidName(r))return null;var i=null;if(null!==this._parameters&&this._parameters.contains(r)){var c=this._parameters.getValue(r);switch(c.type){case o.a.Constant:this.isValidName(c.name)&&null===(i=this._constants.getValue(c.name))&&(i=new s.a(c.source),this._constants.add(c.name,i));break;case o.a.ArrayVariable:if(this.isValidName(c.source)){var l=this.registerServerVariable(c.source,a);i=new u.a(l,c.lowerBound,c.index,c.memberName,t,a)}break;case o.a.Variable:default:this.isValidName(c.source)&&(i=this.registerVariableByName(c.source,t))}}else i=this.registerVariableByName(r,t);return i}},{key:"registerVariableByName",value:function(e,t){return c.a.isAppVar(e)?this._app.registerApplicationVariable(e,t):c.a.isPageVar(e)?this.registerScreenVariableName(e,t):this.registerServerVariable(e,t)}},{key:"isValidName",value:function(e){return null!=e&&""!==e}},{key:"registerScreenVariableName",value:function(e,t){var n=this._localVariables.getValue(e),a=this.page.screenVariables.getValue(e);return null===n&&(n=null!=a?a:new i.a(e,t),this._localVariables.add(e,n)),null==a&&this.page.screenVariables.add(e,n),n}},{key:"registerServerVariable",value:function(e,t){for(var n=null,a=this.page;null===n&&null!==a;)n=a.serverVariables.getValue(e),a=a.parent;return null===n&&(null===t&&(t=r.a.getTypeForVariable(e)),(n=new i.a(e,t)).initialize(r.a.getInitialValue(e)),n.isEnumeration=r.a.isEnumeration(e),n.roundOnWrite=this.shouldRoundforType(n.type),this.page.serverVariables.add(e,n)),n}},{key:"unregisterValueSource",value:function(e){return!!this.isValidName(e)&&(!c.a.isAppVar(e)&&(!c.a.isPageVar(e)&&this.unregisterServerVariable(e)))}},{key:"unregisterServerVariable",value:function(e){for(var t=null,n=this.page;null===t&&null!==n;)n.serverVariables.contains(e)?t=n.serverVariables.getValue(e):n=n.parent;return null!==t&&null!==n&&(n.serverVariables.remove(e),!0)}},{key:"shouldRoundforType",value:function(e){return null!=e&&["ULINT","UDINT","UINT","USINT","LINT","DINT","INT","SINT","LWORD","DWORD","WORD","BYTE"].some(function(t){return t===e})}},{key:"pushParameters",value:function(e,t){this._symbolDefinitionName=e,this._parameters=t,this._constants=new a.a}},{key:"popParameters",value:function(){this._symbolDefinitionName=null,this._parameters=null,this._constants=null}},{key:"getParameter",value:function(e){return null!==this._parameters?this._parameters.getValue(e):null}},{key:"getSymbolDefinitionName",value:function(){return this._symbolDefinitionName}},{key:"app",get:function(){return this._app}},{key:"parameters",get:function(){return this._parameters}},{key:"layer",get:function(){return this._layer}}])&&l(t.prototype,n),f&&l(t,f),e}()},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=e.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},function(e,t,n){var a=n(164),r=n(149);e.exports=Object.keys||function(e){return a(e,r)}},function(e,t,n){"use strict";var a=n(52),r=n(130),i=n(95),o=n(125),s=n(152),u=n(127),c=Math.max,l=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,_=/\$([$&`']|\d\d?)/g;n(129)("replace",2,function(e,t,n,d){return[function(a,r){var i=e(this),o=null==a?void 0:a[t];return void 0!==o?o.call(a,i,r):n.call(String(i),a,r)},function(e,t){var r=d(n,e,this,t);if(r.done)return r.value;var h=a(e),f=String(this),_="function"==typeof t;_||(t=String(t));var g=h.global;if(g){var v=h.unicode;h.lastIndex=0}for(var y=[];;){var m=u(h,f);if(null===m)break;if(y.push(m),!g)break;""===String(m[0])&&(h.lastIndex=s(f,i(h.lastIndex),v))}for(var b,E="",D=0,S=0;S<y.length;S++){m=y[S];for(var P=String(m[0]),w=c(l(o(m.index),f.length),0),C=[],O=1;O<m.length;O++)C.push(void 0===(b=m[O])?b:String(b));var R=m.groups;if(_){var k=[P].concat(C,w,f);void 0!==R&&k.push(R);var x=String(t.apply(void 0,k))}else x=p(P,f,w,C,R,t);w>=D&&(E+=f.slice(D,w)+x,D=w+P.length)}return E+f.slice(D)}];function p(e,t,a,i,o,s){var u=a+e.length,c=i.length,l=_;return void 0!==o&&(o=r(o),l=f),n.call(s,l,function(n,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(u);case"<":s=o[r.slice(1,-1)];break;default:var l=+r;if(0===l)return r;if(l>c){var f=h(l/10);return 0===f?r:f<=c?void 0===i[f-1]?r.charAt(1):i[f-1]+r.charAt(1):r}s=i[l-1]}return void 0===s?"":s})}})},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"degToRad",value:function(e){return.017453293*e}},{key:"radToDeg",value:function(e){return 57.29577951*e}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();r.PI2=6.283185307,r.PIBY2=1.570796326},function(e,t,n){"use strict";n(39),n(84);var a,r=n(23);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e[e.Any=0]="Any",e[e.All=1]="All"}(a||(a={})),n.d(t,"a",function(){return o});var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"All"==t.Scope?this.scopeOp=a.All:"Any"==t.Scope&&(this.scopeOp=a.Any),this.operator=t.Operator,null!=t.Role&&(this.role=t.Role),0==e.filters.values.length&&e.InitializeFuncitonMap(),this.compairsonCallback2=e.filters.getValue(t.Scope+"Are"+t.Operator)}var t,n,r;return t=e,r=[{key:"AnyAreEqual",value:function(e,t){return e.some(function(e){return e===t})}},{key:"AnyAreGreaterThan",value:function(e,t){return e.some(function(e){return e>t})}},{key:"AnyAreGreaterThanOrEqual",value:function(e,t){return e.some(function(e){return e>=t})}},{key:"AnyAreLessThan",value:function(e,t){return e.some(function(e){return e<t})}},{key:"AnyAreLessThanOrEqual",value:function(e,t){return e.some(function(e){return e<=t})}},{key:"AnyAreNotEqual",value:function(e,t){return e.some(function(e){return e!=t})}},{key:"AllAreEqual",value:function(e,t){return e.length>0&&e.every(function(e){return e===t})}},{key:"AllAreGreaterThan",value:function(e,t){return e.length>0&&e.every(function(e){return e>t})}},{key:"AllAreGreaterThanOrEqual",value:function(e,t){return e.length>0&&e.every(function(e){return e>=t})}},{key:"AllAreLessThan",value:function(e,t){return e.length>0&&e.every(function(e){return e<t})}},{key:"AllAreLessThanOrEqual",value:function(e,t){return e.length>0&&e.every(function(e){return e<=t})}},{key:"AllAreNotEqual",value:function(e,t){return e.length>0&&e.every(function(e){return e!=t})}},{key:"InitializeFuncitonMap",value:function(){e.filters.add("AnyAreEqual",e.AnyAreEqual),e.filters.add("AnyAreGreaterThan",e.AnyAreGreaterThan),e.filters.add("AnyAreGreaterThanOrEqual",e.AnyAreGreaterThanOrEqual),e.filters.add("AnyAreLessThan",e.AnyAreLessThan),e.filters.add("AnyAreLessThanOrEqual",e.AnyAreLessThanOrEqual),e.filters.add("AnyAreNotEqual",e.AnyAreNotEqual),e.filters.add("AllAreEqual",e.AllAreEqual),e.filters.add("AllAreGreaterThan",e.AllAreGreaterThan),e.filters.add("AllAreGreaterThanOrEqual",e.AllAreGreaterThanOrEqual),e.filters.add("AllAreLessThan",e.AllAreLessThan),e.filters.add("AllAreLessThanOrEqual",e.AllAreLessThanOrEqual),e.filters.add("AllAreNotEqual",e.AllAreNotEqual)}}],(n=[{key:"IsAuthorized",value:function(e){return this.compairsonCallback2(e,this.role)}}])&&i(t.prototype,n),r&&i(t,r),e}();o.filters=new r.a},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return PageLoader});var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(117),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(84),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(33),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__),_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(30),_engine_page_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(179),_data_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2),_util_parser_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3),_graphics_color_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(28),_pageLoaderContext_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(112),_security_accessControlExpression_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(119),_math_rect_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(13),_graphics_fillFactory_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(18),_graphics_solidFill_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(78),_nodes_visualNode_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9),_geometry_rectangleGeometry_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(25),_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(20),_nodes_group_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(45),_nodes_textInputBase_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(70),_util_hashTable_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(23),_data_parameter_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(174),_data_parameterEnums_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(51),_actions_toggleValueAction_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(104),_actions_incrementValueAction_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(105),_data_variable_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(17),_actions_writeValueAction_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(49),_data_constant_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(44),_data_writeRequestEnums_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(53),_actions_messageBoxAction_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(106),_actions_pageBackAction_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(79),_actions_pageForwardAction_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(107),_actions_navigationAction_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(64),_actions_loadPageAction_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(60),_actions_openDialogAction_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(80),_actions_customAction_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(61),_actions_followPathAction_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(97),_actions_logInAction_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(71),_actions_logOutAction_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(108),_actions_updateFollowersAction_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(88),_data_services_Common_js__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(0),_data_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(1),_actions_actionFactory_js__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(175),_dynamics_dynamicFactory_js__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(176),_data_expression_js__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(134),_dynamics_fillDynamic_js__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(110),_dynamics_rangeDynamic_js__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(48),_dynamics_pathDynamic_js__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(77),_dynamics_pathDynamicEnums_js__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(81),_geometry_pathSolver_js__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(140),_nodes_nodeTraverser_js__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(102),_dynamics_disableDynamic_js__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(103),_dynamics_visibilityDynamic_js__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(89),_actions_closeDialogAction_js__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(72),_actions_executeCommandAction_js__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(109),_util_variableScopeHelper_js__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(27),_util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(38),_nodes_listItem_js__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(101),_nodes_listBox_js__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(142);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var PageLoader=function(){function PageLoader(e,t,n){_classCallCheck(this,PageLoader),this._nodeCount=0,this._htmlElements=[],this._app=e,this._dataClient=t,this._renderContext=n}return _createClass(PageLoader,[{key:"downloadAsync",value:function(e,t,n){var a=this,r=null;this._dataClient.downloadScreen(e,function(e){var i=a._dataClient.status;i===_data_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_7__.a.OK&&(r=a.loadModel(e,t)),n(r,i)})}},{key:"download",value:function(e,t){var n=this._dataClient.downloadScreen(e);return null===n?null:this.loadModel(n,t)}},{key:"loadModel",value:function(e,t){var n=new _engine_page_js__WEBPACK_IMPORTED_MODULE_6__.a(t);n.name=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getString(e.Name),n.borderWidth=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getNumber(e.BorderWidth),n.borderColor=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getColor(e.BorderColor,_graphics_color_js__WEBPACK_IMPORTED_MODULE_9__.a.Black),n.marginColor=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getColor(e.MarginColor,_graphics_color_js__WEBPACK_IMPORTED_MODULE_9__.a.Black),n.pageLeft=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getString(e.PageLeft),n.pageRight=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getString(e.PageRight),n.pageUp=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getString(e.PageUp),n.pageDown=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getString(e.PageDown);var a=new _pageLoaderContext_js__WEBPACK_IMPORTED_MODULE_10__.a(this._app,n,new _pageLoaderContext_js__WEBPACK_IMPORTED_MODULE_10__.b(e.Version));e.AvailabilityAccessControl&&"Always"!==e.AvailabilityAccessControl.Scope&&(n.availabilityAccessControl=new _security_accessControlExpression_js__WEBPACK_IMPORTED_MODULE_11__.a(e.AvailabilityAccessControl)),_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.loadPageVariables(a,this.normalizeStringName(a.page.name)+".variables.json"),_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.saveArrayBounds();var r=_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.findSysTickCountVariable();if(r&&a.registerValueSource(r,_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.getTypeForVariable(r)),void 0!==e.Size?n.size=_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getSize(e.Size):n.computeSize(),null!=e.Objects){for(var i=0,o=e.Objects.length;i<o;i++){var s=this.loadObject(a,n.rootNode,e.Objects[i]);null!=s&&n.rootNode.nodes.push(s)}this.resolvePathDynamics(a),this.prepareNodeVisibility(n.rootNode.nodes),this.resolveObjectSecurity(n),this.resolveHtmlElements(n)}r&&_util_variableScopeHelper_js__WEBPACK_IMPORTED_MODULE_55__.a.isServerVar(r)&&a.page.serverVariables&&1===a.page.serverVariables.keys.length&&(a.unregisterValueSource(r)?(_data_services_Common_js__WEBPACK_IMPORTED_MODULE_40__.a.Log("DEBUG: Page loader unregistered value source: "+r),_data_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_41__.a.Debug):_data_services_Common_js__WEBPACK_IMPORTED_MODULE_40__.a.Log("ERROR: Page loader failed to unregister value source: "+r,_data_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_41__.a.Error));var u=new _math_rect_js__WEBPACK_IMPORTED_MODULE_12__.a(0,0,n.size.x,n.size.y);void 0!==e.Fill?n.fillStyle=_graphics_fillFactory_js__WEBPACK_IMPORTED_MODULE_13__.a.createFillStyle(this._renderContext,e.Fill,u):n.fillStyle=_graphics_solidFill_js__WEBPACK_IMPORTED_MODULE_14__.a.White.createStyle(this._renderContext,u);var c=a.layer>0?_nodes_visualNode_js__WEBPACK_IMPORTED_MODULE_15__.a.defaultDialogCornerRadius:null;return n.borderPath=new _geometry_rectangleGeometry_js__WEBPACK_IMPORTED_MODULE_16__.a(u,!1,c),void 0!==e.Image&&null!==e.Image&&this.loadPageBackgroundImage(a,e),n}},{key:"prepareNodeVisibility",value:function(e){e.forEach(function(e){e.dynamics.filter(function(e){return e instanceof _dynamics_visibilityDynamic_js__WEBPACK_IMPORTED_MODULE_52__.a}).length>0&&(e.visibility.value=!1)})}},{key:"loadPageBackgroundImage",value:function(e,t){var n=e.page,a={ID:"PageBkgImg",Type:"Image",Image:t.Image,ImageScaling:t.ImageScaling,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:n.size.x,Bottom:n.size.y}},Location:{X:0,Y:0}},r=this.loadObject(e,n.rootNode,a);n.rootNode.nodes.unshift(r)}},{key:"generateUid",value:function(e,t){return"L"+t.layer+"N"+ ++this._nodeCount+e.id}},{key:"loadObject",value:function(e,t,n){this.preProcessDynamics(e,n,n.Dynamics);var a=e.getSymbolDefinitionName();null==a&&(a=e.page.name);var r=a.toLowerCase().replace(/ /g,"")+"Module";"ListBox"===n.Type&&!n.ListItem.Parameters&&e.parameters&&this.handleNestedSymbolList(n,e,t);var i=this._app.nodeFactory.createNode(this._renderContext,n,t);if(_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_17__.a.LoadModule(r),null!==i){switch(this.loadActions(e,r,i,n,n.Actions),i.uid=this.generateUid(i,e),this.loadDynamicsFromNodeModel(e,r,i,n),this.processActions(e,i),n.Type){case"ListBox":case"Group":this.loadGroup(e,i,n);break;case"Path":case"GaugeScale":e.pathMap.add(i.id,i);break;case"SymbolInstance":this.loadSymbolInstance(e,i,n);break;case"TextInput":var o=i;o.isClipped(e.page.size),this._htmlElements.push([i,o.element])}this.configureTabStop(n,i)}return i.initVisual?i.initVisual(this._renderContext,n):i.init(n),i}},{key:"handleNestedSymbolList",value:function(e,t,n){var a=t.parameters,r=n.parent.id,i=e.ListItem,o=e.ID;i.Parameters=[];for(var s=0;s<a.values.length;s++){var u=a.values[s];u.name===e.SelectedIndexVariable?e.SelectedIndexVariable=u.source:u.model.TargetId!==o&&u.name!==i.Variable||(i.Parameters.push(u.model),"ParameterBindingConstant"===u.model.Type&&(u.model.Processed=!0))}var c=i.Variable;i.Variable=a.getValue(c).source;var l=_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.pageVariableDictionary.getValue("@".concat(r,".").concat(o,".SelectedIndex"));l&&(e.NestedSelectedIndex=l.name),this.getNestedListBounds(i)}},{key:"getNestedListBounds",value:function(e){var t=_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.getArrayBounds(e.Variable);t&&(e.LowerBound=t.lowerBound,e.UpperBound=t.upperBound)}},{key:"preProcessDynamics",value:function preProcessDynamics(context,model,modelDynamics){if(void 0!==modelDynamics&&modelDynamics.length>0)for(var assignValue=function assignValue(){var evalString="this."+modelDynamic.TargetProperty+"="+JSON.stringify(parameter.source);eval(evalString)},i=modelDynamics.length-1;i>=0;i--){var modelDynamic=modelDynamics[i];if(_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getBoolean(modelDynamic.IsEnabled,!0)){if("AssignmentDynamic"==modelDynamic.Type){var parameter=context.getParameter(modelDynamic.Variable);null!==parameter&&parameter.type===_data_parameterEnums_js__WEBPACK_IMPORTED_MODULE_22__.a.Constant&&(assignValue.apply(model),modelDynamics.splice(i,1))}}else modelDynamics.splice(i,1)}}},{key:"configureTabStop",value:function(e,t){var n,a=!1;switch(e.Type){case"Button":case"CheckBox":case"TextInput":a=!0}_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getBoolean(e.IsTabSelectable,a)&&(t instanceof _nodes_textInputBase_js__WEBPACK_IMPORTED_MODULE_19__.a?n=t.element:(n=document.createElement("a"),this._htmlElements.push([t,n])),n.tabIndex=t.tabIndex)}},{key:"resolveHtmlElements",value:function(e){this._htmlElements.sort(function(e,t){var n=e[1],a=t[1];return n.tabIndex===a.tabIndex?0:n.tabIndex>a.tabIndex?1:-1});for(var t=0;t<this._htmlElements.length;t++)e.addHtmlElement(this._htmlElements[t])}},{key:"loadGroup",value:function(e,t,n){if(void 0!==n.Objects){for(var a=0,r=n.Objects.length;a<r;a++){var i=this.loadObject(e,t,n.Objects[a]);null!=i&&t.nodes.push(i)}t.onLoaded()}}},{key:"loadSymbolInstance",value:function(e,t,n){var a=_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_17__.a.getResourceUrl(n.Symbol);if(null===a)return null;var r=this._dataClient.downloadScreen(a);if(null===r)return null;var i=null;if(void 0!==n.Parameters){i=new _util_hashTable_js__WEBPACK_IMPORTED_MODULE_20__.a;for(var o=0;o<n.Parameters.length;o++){var s=_data_parameter_js__WEBPACK_IMPORTED_MODULE_21__.a.createParameter(n.Parameters[o]);null!=s&&i.add(s.name,s)}}if(void 0!==r.Objects){var u=new _pageLoaderContext_js__WEBPACK_IMPORTED_MODULE_10__.a(e.app,e.page,new _pageLoaderContext_js__WEBPACK_IMPORTED_MODULE_10__.b(r.Version));u.pushParameters(r.Name,i);var c=t.nodes[0];c.uid=this.generateUid(c,u);for(var l=0,h=r.Objects.length;l<h;l++){var f=this.loadObject(u,c,r.Objects[l]);null!=f&&c.nodes.push(f)}if(void 0===r.Version){r.Version="1.0.0",u.version=new _pageLoaderContext_js__WEBPACK_IMPORTED_MODULE_10__.b("1.0.0");JSON.stringify(r)}this.resolvePathDynamics(u),this.prepareNodeVisibility(c.nodes),null!=i&&u.popParameters()}}},{key:"processActions",value:function(e,t){for(var n=e.page,a=0;a<t.actions.length;a++){var r=t.actions[a];if(r instanceof _actions_toggleValueAction_js__WEBPACK_IMPORTED_MODULE_23__.a||r instanceof _actions_incrementValueAction_js__WEBPACK_IMPORTED_MODULE_24__.a){var i=this.registerValueSource(r.targetName,e);null!==i&&i instanceof _data_variable_js__WEBPACK_IMPORTED_MODULE_25__.a&&(r.target=i)}else if(r instanceof _actions_writeValueAction_js__WEBPACK_IMPORTED_MODULE_26__.a&&null!==r.targetName){var o=this.registerValueSource(r.targetName,e);if(null!==o&&o instanceof _data_variable_js__WEBPACK_IMPORTED_MODULE_25__.a){var s=void 0;s=r.sourceType===_data_writeRequestEnums_js__WEBPACK_IMPORTED_MODULE_28__.a.Variable?this.registerValueSource(r.sourceName,e):new _data_constant_js__WEBPACK_IMPORTED_MODULE_27__.a(r.sourceName),r.source=s,r.target=o}this.registerListBoxCallback(t,e)}else if(r instanceof _actions_messageBoxAction_js__WEBPACK_IMPORTED_MODULE_29__.a){if(null!==r.targetName){var u=this.registerValueSource(r.targetName,e);null!==u&&u instanceof _data_variable_js__WEBPACK_IMPORTED_MODULE_25__.a&&(r.target=u)}}else if(r instanceof _actions_pageBackAction_js__WEBPACK_IMPORTED_MODULE_30__.a)n.pageBackObjects.push(t);else if(r instanceof _actions_pageForwardAction_js__WEBPACK_IMPORTED_MODULE_31__.a)n.pageForwardObjects.push(t);else if(r instanceof _actions_navigationAction_js__WEBPACK_IMPORTED_MODULE_32__.a){var c=r;n.pageNavigationSubscribers.AddNavListenerForDirection(t,c.direction),c.pageName=e.page.GetPageForDirection(c.direction),""==c.pageName&&(c.pageName=null)}else r instanceof _actions_loadPageAction_js__WEBPACK_IMPORTED_MODULE_33__.a||r instanceof _actions_openDialogAction_js__WEBPACK_IMPORTED_MODULE_34__.a||r instanceof _actions_closeDialogAction_js__WEBPACK_IMPORTED_MODULE_53__.a||r instanceof _actions_customAction_js__WEBPACK_IMPORTED_MODULE_35__.a||r instanceof _actions_followPathAction_js__WEBPACK_IMPORTED_MODULE_36__.a||r instanceof _actions_logInAction_js__WEBPACK_IMPORTED_MODULE_37__.a||r instanceof _actions_logOutAction_js__WEBPACK_IMPORTED_MODULE_38__.a||r instanceof _actions_updateFollowersAction_js__WEBPACK_IMPORTED_MODULE_39__.a||r instanceof _actions_executeCommandAction_js__WEBPACK_IMPORTED_MODULE_54__.a||_data_services_Common_js__WEBPACK_IMPORTED_MODULE_40__.a.Log("WARNING: processActions received unexpected Action type",_data_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_41__.a.Warning)}}},{key:"registerListBoxCallback",value:function(e,t){if(e instanceof _nodes_listItem_js__WEBPACK_IMPORTED_MODULE_57__.a&&e.parent instanceof _nodes_group_js__WEBPACK_IMPORTED_MODULE_18__.a&&e.parent.parent instanceof _nodes_listBox_js__WEBPACK_IMPORTED_MODULE_58__.a){var n=e.parent.parent,a=n.selectedIndexTarget;if(a&&0===a.valueChangedCallbacks.length&&a.name){var r,i=_util_variableScopeHelper_js__WEBPACK_IMPORTED_MODULE_55__.a.getScope(a.name);switch(i){case _util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Application:r=this._app.getApplicationVariable(a.name);break;case _util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Page:r=t.page.screenVariables.getValue(a.name);break;case _util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Server:r=t.page.serverVariables.getValue(a.name);break;default:_data_services_Common_js__WEBPACK_IMPORTED_MODULE_40__.a.Log("DEBUG: Could not find scope for variable: ".concat(a.name),_data_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_41__.a.Debug)}if(i===_util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Application||i===_util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Page)n.selectedIndexTarget=r;else if(i===_util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Server){var o=function(e){return n.initializeSelectedRow(e)};a.valueChangedCallbacks.push(o),r.valueChangedCallbacks.push(o),n.needsInitialization=!1}}}}},{key:"registerValueSource",value:function(e,t){var n,a=t.getParameter(e);if(a){var r=a.type;switch(r){case _data_parameterEnums_js__WEBPACK_IMPORTED_MODULE_22__.a.Variable:n=t.registerValueSource(e,_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.getTypeForVariable(a.source));break;case _data_parameterEnums_js__WEBPACK_IMPORTED_MODULE_22__.a.Constant:n=t.registerValueSource(e,null);break;case _data_parameterEnums_js__WEBPACK_IMPORTED_MODULE_22__.a.ArrayVariable:var i="".concat(a.source,"[").concat(a.lowerBound,"]");a.memberName&&(i+="."+a.memberName),n=t.registerValueSource(i,_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.getTypeForVariable(i),e,_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.getTypeForVariable(a.source));break;default:_data_services_Common_js__WEBPACK_IMPORTED_MODULE_40__.a.Log("WARNING: Unexpected Parameter Type: ".concat(r," during value source registration."),_data_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_41__.a.Warning)}}else n=t.registerValueSource(e,_data_dataTypeDictionary_js__WEBPACK_IMPORTED_MODULE_5__.a.getTypeForVariable(e));return n}},{key:"normalizeStringName",value:function(e){return e.toLowerCase().replace(/ /g,"")}},{key:"loadActions",value:function(e,t,n,a,r){if(null!=r)for(var i=0;i<r.length;i++){var o=_actions_actionFactory_js__WEBPACK_IMPORTED_MODULE_42__.a.createAction(r[i]);if(r[i].DataTrigger){this.preProcessDynamics(e,a,[r[i].DataTrigger]);var s=this.loadDynamic(e,t,n,r[i].DataTrigger);s&&(s.action=o)}null!=o&&n.actions.push(o)}}},{key:"loadDynamicsFromNodeModel",value:function(e,t,n,a){var r=a.Dynamics;if(void 0!==r&&r.length>0)for(var i=0;i<r.length;i++)this.loadDynamic(e,t,n,r[i])}},{key:"loadDynamic",value:function(e,t,n,a){if(_util_parser_js__WEBPACK_IMPORTED_MODULE_8__.a.getBoolean(a.IsEnabled,!0)){null==a.ModuleName?a.ModuleName=t:_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_17__.a.LoadModule(a.ModuleName);var r=_dynamics_dynamicFactory_js__WEBPACK_IMPORTED_MODULE_43__.a.createDynamic(this._renderContext,n,a);if(null!==r){if(n.dynamics.push(r),r.dataSource instanceof _data_expression_js__WEBPACK_IMPORTED_MODULE_44__.a)for(var i=r.dataSource,o=0;o<i.functionParameters.length;o++){var s=i.functionParameters[o];s&&s.name&&(i.functionParameters[o]=this.registerValueSource(s.name,e))}else r.dataSource=this.registerValueSource(r.variableName,e);if(r instanceof _dynamics_fillDynamic_js__WEBPACK_IMPORTED_MODULE_45__.a){var u=r;void 0!==u.blinkStatusVariableName&&(u.blinkStateDataSource=e.registerValueSource(u.blinkStatusVariableName,"BOOL"))}if(r instanceof _dynamics_rangeDynamic_js__WEBPACK_IMPORTED_MODULE_46__.a&&r.dataSource instanceof _data_variable_js__WEBPACK_IMPORTED_MODULE_25__.a){var c=r.dataSource,l=_util_variableScopeHelper_js__WEBPACK_IMPORTED_MODULE_55__.a.getScope(c.name);switch(l){case _util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Application:case _util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Page:r.isSmoothingEnabled=!1;break;case _util_variableScopeEnum_js__WEBPACK_IMPORTED_MODULE_56__.a.Server:c.allowTimestamping=c.allowTimestamping||r.isSmoothingEnabled,e.page.isSmoothingEnabled=e.page.isSmoothingEnabled||r.isSmoothingEnabled;break;default:_data_services_Common_js__WEBPACK_IMPORTED_MODULE_40__.a.Log("ERROR: Unexpected variable scope of ".concat(l," for variable name ").concat(c.name,"."),_data_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_41__.a.Error)}}e.page.dynamics.push(r),r instanceof _dynamics_pathDynamic_js__WEBPACK_IMPORTED_MODULE_47__.a&&e.pathDynamics.push(r)}return r}}},{key:"resolvePathDynamics",value:function(e){for(var t=e.pathDynamics,n=0;n<t.length;n++){var a=t[n],r=e.pathMap.getValue(a.targetId);if(null!==r){a.node.parent.removeChildNode(a.node);var i=new _nodes_group_js__WEBPACK_IMPORTED_MODULE_18__.a({},r);i.id="surrogate"+Math.floor(1e3*Math.random()).toString(),i.uid=this.generateUid(i,e),i.nodes.push(a.node),a.node.parent=i,r.nodes.push(i),a.motionType===_dynamics_pathDynamicEnums_js__WEBPACK_IMPORTED_MODULE_48__.a.Rotation?(i.location.value.x=a.node.location.value.x,i.location.value.y=a.node.location.value.y):i.location.value.x=i.location.value.y=0,a.node.location.value.x=a.node.location.value.y=0,null===r.solver&&(r.solver=new _geometry_pathSolver_js__WEBPACK_IMPORTED_MODULE_49__.a(r.path)),a.target=i,a.path=r}}}},{key:"resolveObjectSecurity",value:function(e){Object(_nodes_nodeTraverser_js__WEBPACK_IMPORTED_MODULE_50__.a)(e.rootNode,function(t){return t.nodes.filter(function(e){return e.enabledAccessControl||e.visibilityAccessControl}).forEach(function(t){t.enabledAccessControl&&0==e.dynamics.filter(function(e){return e.node===t&&e instanceof _dynamics_disableDynamic_js__WEBPACK_IMPORTED_MODULE_51__.a}).length&&e.enabledAccessControlNodes.push(t),t.visibilityAccessControl&&0==e.dynamics.filter(function(e){return e.node===t&&e instanceof _dynamics_visibilityDynamic_js__WEBPACK_IMPORTED_MODULE_52__.a}).length&&e.visibilityAccessControlNodes.push(t)}),!0})}}]),PageLoader}()},function(e,t,n){var a=n(146),r=n(122),i=n(94),o=n(123),s=n(65),u=n(162),c=Object.getOwnPropertyDescriptor;t.f=n(55)?c:function(e,t){if(e=i(e),t=o(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return r(!a.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var a=n(66);e.exports=function(e,t){if(!a(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!a(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var a=n(164),r=n(149).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},function(e,t){e.exports=!1},function(e,t,n){"use strict";var a=n(189),r=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},function(e,t,n){"use strict";var a=n(52);e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(190);var a=n(75),r=n(74),i=n(58),o=n(83),s=n(47),u=n(153),c=s("species"),l=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),_=!i(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),d=_?!i(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!t}):void 0;if(!_||!d||"replace"===e&&!l||"split"===e&&!h){var p=/./[f],g=n(o,f,""[e],function(e,t,n,a,r){return t.exec===u?_&&!r?{done:!0,value:p.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),v=g[0],y=g[1];a(String.prototype,e,v),r(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,n){var a=n(83);e.exports=function(e){return Object(a(e))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DataClient});var core_js_modules_es6_string_sub__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(155),core_js_modules_es6_string_sub__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_string_sub__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(192),core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(154),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(33),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__),_util_hashTable_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(23),_projectSettings_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(145),_security_securityContextEnums_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(50),_urlEx_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(41),_writeRequest_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(172),_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(0),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1),_security_authenticationSettings_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(173),_data_services_PxcDataAccessService_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(177),_data_services_TsVisitDataAccessService_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(178),_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(20),_engine_scriptModuleLoader_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(143),_data_services_DataAccessServiceBase_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(5),_data_services_XhrSupport_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(12),_writeRequestEnums_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(53),_arrayElementVariable_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(132),_lib_long_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(6);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var DataClient=function(){function DataClient(e,t,n,a,r,i,o,s,u,c,l,h,f){_classCallCheck(this,DataClient),this._queryProjectSettings=void 0,this._isProjectSettingsDownloaded=void 0,this._authenticationProtocol=_security_securityContextEnums_js__WEBPACK_IMPORTED_MODULE_7__.a.None,this._currentProjectSettings=void 0,this._dataUrl=void 0,this._downloadTimeout=3e4,this._dataRetryLimit=1,this._dataRetryCount=0,this._sessionRetryLimit=2,this._sessionRetryCount=0,this._sessionTimeout=5e3,this._recoveryCountdownSeconds=10,this._dataPollHandle=void 0,this._dataPollStartTime=void 0,this._dataPollTimeElapsed=void 0,this._dataPollInterval=250,this._dataPollIntervalTimeoutMultiplier=2,this._sessionPollHandle=void 0,this._isCreateSessionQueued=void 0,this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.OK,this._authenticationSettings=null,this.updateGroupMode=!1,this.resetSysTickCount(),this._pendingWriteQueue=[],this._pageCache=f||null,this._queryProjectSettings=new _projectSettings_js__WEBPACK_IMPORTED_MODULE_6__.a(e,t,n,a,r,i,o,s,u,c,l,h),this.resetIsProjectSettingsDownloaded(),this.updateProjectSettings()}return _createClass(DataClient,[{key:"resetSysTickCount",value:function(){this._sysTickCount=0}},{key:"resetIsProjectSettingsDownloaded",value:function(){this._isProjectSettingsDownloaded=!1}},{key:"updateCreateSessionQueuedStatus",value:function(){this._dataAccessService.sessionID||(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data Client resetting isCreateSessionQueued status.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._isCreateSessionQueued=void 0)}},{key:"createSession",value:function(e,t){var n=this;if(!this._currentProjectSettings.stationID)return!0;if(this._dataAccessService.sessionID)return!0;if(void 0!==this._isCreateSessionQueued)return this._isCreateSessionQueued;var a=function a(r){if(void 0!==r.status)switch(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Create Session response status code: "+r.status,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),r.status){case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.OK:n._dataAccessStatus=r.status,n._isCreateSessionQueued=!1,e&&e();break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.ProjectChanged:n._dataAccessStatus=r.status,n.onProjectChanged(),e&&e();break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DuplicateStationIDError:n._sessionRetryCount<n._sessionRetryLimit?(n._sessionRetryCount=n._sessionRetryCount+1,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Create Session retry ' ".concat(n._sessionRetryCount," ' of ' ").concat(n._sessionRetryLimit," ' due to Duplicate Station ID error."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),setTimeout(function(){return n._dataAccessService.CreateSession(n._currentProjectSettings.stationID,a,a)},n._sessionTimeout)):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Create Session failed due to Duplicate Station ID error, but retry limit ("+n._sessionRetryLimit+") already reached.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),n._dataAccessStatus=r.status,n._isCreateSessionQueued=!1,t&&t());break;default:n._dataAccessStatus=r.status,n._isCreateSessionQueued=!1,t&&t()}};return this._dataAccessService.CreateSession(this._currentProjectSettings.stationID,a,a)?(this._isCreateSessionQueued=!0,this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.Pending,!0):(this._isCreateSessionQueued=!1,this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.InternalError,!1)}},{key:"startSessionMaintenanceCycle",value:function(e,t){var n=this;if(!this._currentProjectSettings.stationID)return!0;if(this.updateCreateSessionQueuedStatus(),this._dataAccessService.sessionID){if(this.isSessionMaintenanceActive)return!0;var a=this._sessionTimeout/2;return this._sessionPollHandle=setInterval(function(){var a=n._dataAccessService.sessionID;a?n._dataAccessService.MaintainSession(a,e,t):n.createSession(e,t)},a),!0}var r=void 0;return(e||t)&&(r=function(){return n.startSessionMaintenanceCycle(e,t)}),this.createSession(r,t)}},{key:"stopSessionMaintenanceCycle",value:function(){this.isSessionMaintenanceActive&&(clearInterval(this._sessionPollHandle),this._sessionPollHandle=void 0)}},{key:"loadAuthenticationProtocol",value:function(){this._authenticationProtocol=_security_securityContextEnums_js__WEBPACK_IMPORTED_MODULE_7__.a.None;var e=this.downloadScreen(_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_16__.a.getResourceUrl("webserver.configuration.json"));return null!==e&&(e.WebServer.AuthenticationProtocol&&(this._authenticationProtocol=e.WebServer.AuthenticationProtocol),!0)}},{key:"updateProjectSettings",value:function(){return!(!this.loadAuthenticationProtocol()||(this._currentProjectSettings=this.loadProjectSettings(),!this.applyProjectSettings(this._currentProjectSettings)))&&(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's authentication settings server: "+this.authenticationSettings.authenticationServer,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's authentication settings protocol: "+this.authenticationSettings.serverProtocol,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's authentication settings timeout (ms): "+this.authenticationSettings.xhrTimeout,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's data URL: "+this.dataUrl.url,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's start page URL: "+this.startPageUrl,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's retry limit: "+this._dataRetryLimit,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's poll interval (ms): "+this._dataPollInterval,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's poll interval timeout multiplier: "+this._dataPollIntervalTimeoutMultiplier,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's download timeout (ms): "+this._downloadTimeout,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's session timeout (ms): "+this._sessionTimeout,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_engine_scriptModuleLoader_js__WEBPACK_IMPORTED_MODULE_17__.a.initialize(this.currentProjectSettings),!0)}},{key:"downloadProjectChecksum",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=t=_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_16__.a.getResourceUrl(DataClient.ProjectChecksumJsonFile);e&&0===this.currentProjectSettings.startPageURL.indexOf("file:")&&(t=this.currentProjectSettings.dataURL+"/ehmi/"+DataClient.ProjectChecksumJsonFile),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client loading project checksum using URL: "+t,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug);var n=this.downloadScreenFromServer(t);if(n){var a=new _projectSettings_js__WEBPACK_IMPORTED_MODULE_6__.a;return n.id&&(a.id=n.id),n.checksum&&(a.checksum=n.checksum),a}return null}},{key:"loadProjectSettings",value:function(){var e=new _projectSettings_js__WEBPACK_IMPORTED_MODULE_6__.a;this._currentProjectSettings=void 0,this._isProjectSettingsDownloaded=void 0;var t=this.downloadScreenFromServer(_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_16__.a.getResourceUrl(DataClient.ProjectJsonFile)),n=this.downloadProjectChecksum();return null===t||null===n?(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client failed to load project settings due to missing project settings and/or project checksum downloads.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._isProjectSettingsDownloaded=!1,null):t.id&&n.id&&t.id===n.id?(this._isProjectSettingsDownloaded=!0,this._queryProjectSettings.name?e.name=this._queryProjectSettings.name:t&&t.name&&(e.name=t.name),this._queryProjectSettings.id?e.id=this._queryProjectSettings.id:t&&t.id&&(e.id=t.id),this._queryProjectSettings.appId?e.appId=this._queryProjectSettings.appId:t&&t.appId&&(e.appId=t.appId),this._queryProjectSettings.appVersion?e.appVersion=this._queryProjectSettings.appVersion:t&&t.appVersion&&(e.appVersion=t.appVersion),this._queryProjectSettings.homePage?e.homePage=this._queryProjectSettings.homePage:t&&t.homePage&&(e.homePage=t.homePage),t&&t.files&&(e.files=t.files),this._queryProjectSettings.sessionTimeout?e.sessionTimeout=this._queryProjectSettings.sessionTimeout:t&&t.settings.sessionTimeout&&(e.sessionTimeout=t.settings.sessionTimeout),this._queryProjectSettings.dataURL?e.dataURL=this._queryProjectSettings.dataURL:t&&t.settings.dataURL&&(e.dataURL=t.settings.dataURL),this._queryProjectSettings.dataSource?e.dataSource=this._queryProjectSettings.dataSource:t&&t.settings.dataSource?e.dataSource=t.settings.dataSource:e.dataSource=DataClient.DataSourceType_eCLR,this._queryProjectSettings.dataRetries?e.dataRetries=this._queryProjectSettings.dataRetries:t&&t.settings.dataRetries&&(e.dataRetries=t.settings.dataRetries),this._queryProjectSettings.dataTimeout?e.dataTimeout=this._queryProjectSettings.dataTimeout:t&&t.settings.dataTimeout&&(e.dataTimeout=t.settings.dataTimeout),this._queryProjectSettings.dataPollInterval?e.dataPollInterval=this._queryProjectSettings.dataPollInterval:t&&t.settings.dataPollInterval&&(e.dataPollInterval=t.settings.dataPollInterval),this._queryProjectSettings.dataPollTimeoutMultiplier?e.dataPollTimeoutMultiplier=this._queryProjectSettings.dataPollTimeoutMultiplier:t&&t.settings.dataPollTimeoutMultiplier&&(e.dataPollTimeoutMultiplier=t.settings.dataPollTimeoutMultiplier),this._queryProjectSettings.dataDebug?e.dataDebug=this._queryProjectSettings.dataDebug:t&&t.settings.dataDebug&&(e.dataDebug=t.settings.dataDebug),this._queryProjectSettings.startPageURL?e.startPageURL=this._queryProjectSettings.startPageURL:t&&t.startPageURL?e.startPageURL=t.startPageURL:e.homePage&&(e.startPageURL=_util_moduleLoader_js__WEBPACK_IMPORTED_MODULE_16__.a.getResourceUrl(e.homePage)),this._queryProjectSettings.downloadTimeout?e.downloadTimeout=this._queryProjectSettings.downloadTimeout:t&&t.settings.downloadTimeout&&(e.downloadTimeout=t.settings.downloadTimeout),this._queryProjectSettings.stationID?e.stationID=this._queryProjectSettings.stationID:t&&t.settings.stationID&&(e.stationID=t.settings.stationID),this._queryProjectSettings.recoveryCountdown?e.recoveryCountdown=this._queryProjectSettings.recoveryCountdown:t&&t.settings.recoveryCountdown&&(e.recoveryCountdown=t.settings.recoveryCountdown),this._queryProjectSettings.checksum?e.checksum=this._queryProjectSettings.checksum:n&&n.checksum&&(e.checksum=n.checksum),e):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client failed to load project settings as detected missing or different project IDs: '".concat(t.id,"' vs '").concat(n.id,"'"),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._isProjectSettingsDownloaded=!1,null)}},{key:"applyProjectSettings",value:function(e){if(e){if(e.dataRetries&&!isNaN(e.dataRetries)&&e.dataRetries>=0&&(this._dataRetryLimit=e.dataRetries),e.dataPollInterval&&!isNaN(e.dataPollInterval)&&e.dataPollInterval>0&&(this._dataPollInterval=e.dataPollInterval),e.dataPollTimeoutMultiplier&&!isNaN(e.dataPollTimeoutMultiplier)&&e.dataPollTimeoutMultiplier>0&&(this._dataPollIntervalTimeoutMultiplier=e.dataPollTimeoutMultiplier),e.downloadTimeout&&!isNaN(e.downloadTimeout)&&e.downloadTimeout>0&&(this._downloadTimeout=e.downloadTimeout),e.sessionTimeout&&!isNaN(e.sessionTimeout)&&e.sessionTimeout>0&&(this._sessionTimeout=e.sessionTimeout),e.recoveryCountdown&&!isNaN(e.recoveryCountdown)&&e.recoveryCountdown>0&&(this._recoveryCountdownSeconds=e.recoveryCountdown),e.dataURL&&(this._dataUrl=new _urlEx_js__WEBPACK_IMPORTED_MODULE_8__.a(void 0,e.dataURL)),!this.dataUrl.isValid)throw Error("ERROR: Data client invalid data URL: "+e.dataURL);if(this._authenticationSettings=new _security_authenticationSettings_js__WEBPACK_IMPORTED_MODULE_13__.a(this._dataUrl.protocol,this._dataUrl.host,e.dataTimeout,this._authenticationProtocol),e.dataSource.toUpperCase()===DataClient.DataSourceType_eCLR.toUpperCase())this._dataAccessService=new _data_services_PxcDataAccessService_js__WEBPACK_IMPORTED_MODULE_14__.a(e.dataURL,e.dataTimeout,e.dataDebug,e.stationID,e.checksum);else{if(e.dataSource.toUpperCase()!==DataClient.DataSourceType_tsVisit.toUpperCase())throw new Error("ERROR: Data client invalid data source: "+e.dataSource);this._dataAccessService=new _data_services_TsVisitDataAccessService_js__WEBPACK_IMPORTED_MODULE_15__.a(e.dataURL,e.dataTimeout,e.dataDebug,e.stationID)}return!0}return!1}},{key:"getPageFromCache",value:function(e){return null!==this._pageCache?this._pageCache.getItem(e):null}},{key:"clearPageCache",value:function(){null!==this._pageCache&&this._pageCache.clearCache()}},{key:"downloadScreen",value:function(e,t){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's downloading screen ... ",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug);var n=!1;void 0!==t&&(n=!0),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Download Screen XHR parameters: projectUrl = '"+e+"', isAsynchronous = '"+n+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug);var a=null,r=this.getPageFromCache(e);return null!=r?(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Download Screen cache hit: projectUrl = '"+e+"', isAsynchronous = '"+n+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),a=JSON.parse(r),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.OK,void 0!==t&&t(a),a):this.downloadScreenFromServer(e,t)}},{key:"isProjectFileAvailable",value:function(e){if(this.currentProjectSettings&&this.currentProjectSettings.files){var t=null,n=e.lastIndexOf("/");if(t=-1!==n?e.substr(n+1):e)return t===DataClient.ProjectJsonFile||this.currentProjectSettings.files.some(function(e,n,a){if(e===t)return!0})}return!0}},{key:"downloadScreenFromServer",value:function downloadScreenFromServer(projectUrl,callback){var _this3=this,hmiScreen=null;if(this.isProjectFileAvailable(projectUrl)){var isAsynchronous=void 0!==callback,xhr=new XMLHttpRequest;xhr.ontimeout=function(e){if(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Download Screen XML HTTP Request timed out for projectUrl: "+projectUrl,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),_this3._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DownloadScreenError,!isAsynchronous)return null;callback(null)},xhr.onerror=function(e){var t=e.target;if(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Download Screen XML HTTP Request failed for projectUrl '"+projectUrl+"' with status code '"+t.status+"' and status text '"+t.statusText+"'.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),_this3._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DownloadScreenError,!isAsynchronous)return null;callback(null)},xhr.onload=function xhrOnLoad(ev){try{var xhr=ev.target;xhr.readyState&&xhr.readyState===_data_services_DataAccessServiceBase_js__WEBPACK_IMPORTED_MODULE_18__.a.httpRequestReadyState_Done&&xhr.status?xhr.status===_data_services_DataAccessServiceBase_js__WEBPACK_IMPORTED_MODULE_18__.a.httpRequestStatus_OK||xhr.status===_data_services_DataAccessServiceBase_js__WEBPACK_IMPORTED_MODULE_18__.a.httpRequestStatus_NotModified?""!==xhr.response?(this.cacheResponse(projectUrl,xhr),hmiScreen=eval("("+xhr.response+")"),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.OK):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+projectUrl+"', unexpected XHR response: '"+xhr.response+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DownloadScreenError):xhr.status===_data_services_DataAccessServiceBase_js__WEBPACK_IMPORTED_MODULE_18__.a.httpRequestStatus_NotFound?-1!==projectUrl.indexOf(".variables.json")?(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Download Screen unable to download project URL '"+projectUrl+"' due to Not Found status, but treating as okay.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.OK):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Download Screen failed to download project URL '"+projectUrl+"' due to Not Found status.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DownloadScreenError):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+projectUrl+"', unexpected XHR status = '"+xhr.status+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DownloadScreenError):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+projectUrl+"', unexpected XHR state: readyState = '"+xhr.readyState+"' and/or status = '"+xhr.status+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DownloadScreenError)}catch(e){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+projectUrl+"', caught exception: "+e,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.ExceptionError}finally{isAsynchronous&&callback(hmiScreen)}}.bind(this);try{xhr.open("GET",projectUrl,isAsynchronous),!1===_data_services_XhrSupport_js__WEBPACK_IMPORTED_MODULE_19__.a.DisableCaching(xhr)&&_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Download Screen failed to disable caching for the request: '"+projectUrl+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),isAsynchronous&&!1===_data_services_XhrSupport_js__WEBPACK_IMPORTED_MODULE_19__.a.EnableTimeout(xhr,this._downloadTimeout)&&_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Download Screen failed to enable timeout setting for the request: '"+projectUrl+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.Pending,xhr.send()}catch(e){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: dataClient.downloadScreen) Caught exception: "+e,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.ExceptionError}_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's downloaded screen.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}else _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Download Screen skipped downloading unavailable file at project URL: "+projectUrl,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug);return hmiScreen}},{key:"cacheResponse",value:function(e,t){if(null!==this._pageCache){var n=t.getResponseHeader("Content-Type");n&&n.match(/application\/json/i)&&this._pageCache.setItem(e,t.response)}}},{key:"registerGroup",value:function(e,t){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's registering group ... ",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataRetryCount=0;var n=function(a){var r=this,i=!1;if(void 0!==a.status)switch(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Register Group response status code: "+a.status,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),a.status){case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.OK:if(void 0!==a.groupIdentifier?void 0!==a.requestIdentifier&&e.sourceId!==a.requestIdentifier?_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Register Group for ".concat(a.requestIdentifier," does not match current layer: ").concat(e.sourceId," so skipping request."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning):e.name=a.groupIdentifier:(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Register Group failed due to missing name information.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.RegisterGroupError),void 0!==a.types)for(var o=0;o<a.types.length;o++){e.getVariable(a.types[o].name).type=a.types[o].type}null!==e.name&&(this._callback=t,this._readUrl=e.name,this._dataAccessStatus=a.status,i=!0,this.updateData(this._readUrl,this._callback));break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.ProjectChanged:_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Register Group failed due to Project Changed notification.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this.onProjectChanged(),this._dataAccessStatus=a.status;break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.AuthorizationError:_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Register Group failed due to Authorization Required error.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=a.status;break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DuplicateStationIDError:this._sessionRetryCount<this._sessionRetryLimit?(this._sessionRetryCount=this._sessionRetryCount+1,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Register Group retry '"+this._sessionRetryCount+"' of '"+this._sessionRetryLimit+"' due to Duplicate Station ID error.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),i=!0,setTimeout(function(){return r._dataAccessService.RegisterGroup(e.sourceId,e.getVariableNames(),n)},this._sessionTimeout)):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Register Group failed due to Duplicate Station ID error, but retry limit ("+this._sessionRetryLimit+") already reached.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=a.status);break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.ProjectUnloadedError:_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Register Group failed due to Project Unloaded error.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug);var s=this._currentProjectSettings,u=this.downloadProjectChecksum(!0);s&&u?(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Register Group successfully downloaded new project information with id  '".concat(u.id,"' and with checksum '").concat(u.checksum,"'."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),s.id!==u.id&&s.checksum!==u.checksum?(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("INFORMATION: Data client's Register Group detected remote project changed due to different project ID ('".concat(s.id,"' vs '").concat(u.id,"') and/or different project CRC ('").concat(s.checksum,"' vs '").concat(u.checksum,"')."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Information),this.onProjectChanged(),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.ProjectChanged):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Register Group successfully loaded project settings, but still the same project.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataRetryCount=this._dataRetryCount+1,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Register Group retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to Project Unloaded error and treating as Network Timeout error.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.NetworkTimeoutError)):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Register Group failed to get old project settings and/or download new project information.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataRetryCount=this._dataRetryCount+1,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Register Group retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to Project Unloaded error and treating as Network Timeout error.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.NetworkTimeoutError);break;default:this._dataRetryCount<this._dataRetryLimit?(this._dataRetryCount=this._dataRetryCount+1,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Register Group retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to status: "+a.status,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),i=!0,this._dataAccessService.RegisterGroup(e.sourceId,e.getVariableNames(),n)):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Register Group failed due to status '"+a.status+"', but retry limit ("+this._dataRetryLimit+") already reached.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=a.status,this._dataAccessStatus===_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.InternalError&&(this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.RegisterGroupError))}else _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Register Group failed due to missing status information.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.RegisterGroupError;i||t(null)}.bind(this);this._dataAccessService.RegisterGroup(e.sourceId,e.getVariableNames(),n),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's registered group.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}},{key:"unregisterGroup",value:function(e){if(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's unregistering group ... ",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),null!==e.name){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Unregister Group name: "+e.name,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataAccessService.UnregisterGroup(e.name,function(e){}),e.clear()}_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's unregistering group.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}},{key:"startUpdate",value:function(e,t){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's starting update ... ",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),e.hasVariables&&this.registerGroup(e,t),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's started update.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}},{key:"writeQueuedData",value:function(e){var t=this;if(this._pendingWriteQueue.length>0){var n=this._pendingWriteQueue.shift();this._dataAccessService.WriteValues([n.variable.writeName],[n.newValue],function(a){n.variable.writePendingCount--,t.writeQueuedData(e)})}else void 0!==e&&e()}},{key:"updateData",value:function(e,t){var n=this;_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's updating data ... ",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data read URL: "+e,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataRetryCount=0,this.removeDataPollTimer(),this._dataPollStartTime=this.getCurrentTime(),this._dataPollTimeElapsed=0;var a=5;a>this._dataPollInterval&&(a=1),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data poll timer interval (ms): "+a,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataPollHandle=setInterval(function(){var e=this.getCurrentTime()-this._dataPollStartTime;this._dataPollTimeElapsed=Math.floor(e/a)/10,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data poll time elapsed: "+this._dataPollTimeElapsed,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}.bind(this),a),this.writeQueuedData(void 0);var r=function(a){n.handleGroupRequestCallback(e,t,a)};this.updateGroupMode?this._dataAccessService.UpdateGroup(e,r):this._dataAccessService.ReadGroup(e,r),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's updated data.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}},{key:"updateDataRetry",value:function(e,t){void 0!==this?e==this._readUrl?this.updateData(e,t):_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data stopped as different read URLs: '"+e+"' vs '"+this._readUrl+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug):_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Update Data failed due to this being undefined.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error)}},{key:"onProjectChanged",value:function(){this.resetSysTickCount(),this.clearPageCache(),this.resetIsProjectSettingsDownloaded(),this.stopSessionMaintenanceCycle(),this.updateProjectSettings()}},{key:"handleGroupRequestCallback",value:function(e,t,n){var a=this,r=!1;if(void 0!==n.status)if(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data response status code: "+n.status,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),e==this._readUrl){var i=this._dataPollInterval*this._dataPollIntervalTimeoutMultiplier;if(this._dataPollTimeElapsed<=i?_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data poll time (ms) okay: "+this._dataPollTimeElapsed+" vs "+i,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug):(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Update Data encountered a data poll timeout (ms): "+this._dataPollTimeElapsed+" vs "+i,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DataPollTimeoutWarning),n.status===_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.OK)if(this.removeDataPollTimer(),void 0!==n.variables){r=!0;var o=!1;if(n.variables.length>0&&DataClient.isSysTickCountVariable(n.variables[0].name)){var s=this._sysTickCount;this._sysTickCount=parseInt(n.variables[0].value);var u=isNaN(this._sysTickCount)||isNaN(s),c=0===this._sysTickCount&&0===s,l=this._sysTickCount>s,h=s+this._sysTickCount;u||c||l||h<s?(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data Sys Tick Cnt okay: "+this._sysTickCount+" vs "+s,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),o=!0):_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Update Data unexpected Sys Tick Cnt: "+this._sysTickCount+" vs "+s,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning)}else _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Update Data response unexpectedly missing variable name: "+DataClient.VariableName_SysTickCount,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),o=!0;this._dataAccessStatus=n.status,o?t(n.variables):_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Update Data ignored variables information due to old data detected.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning);var f=this._dataPollInterval-this._dataPollTimeElapsed;f<0&&(f=0),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data poll delay (ms): "+f,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),setTimeout(function(){return a.updateDataRetry(e,t)},f)}else _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Update Data failed due to missing variables information.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.UpdateDataError;else if(this._dataRetryCount<this._dataRetryLimit){switch(n.status){case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.ProjectChanged:_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Update Data retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to Project Changed notification.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this.onProjectChanged(),this._dataAccessStatus=n.status,this._dataRetryCount=this._dataRetryLimit;break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.AuthorizationError:_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Update Data retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to Authorization Required error.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),this._dataAccessStatus=n.status,this._dataRetryCount=this._dataRetryLimit;break;case _services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.InvalidGroupIDError:this.resetSysTickCount(),this._dataAccessStatus=n.status,this._dataRetryCount=this._dataRetryLimit;break;default:this._dataRetryCount=this._dataRetryCount+1,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Data client's Update Data retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to status: "+n.status,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning)}this._dataAccessStatus!==_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.DataPollTimeoutWarning&&(r=!0);var _=function(n){a.handleGroupRequestCallback(e,t,n)};this.updateGroupMode?this._dataAccessService.UpdateGroup(e,_):this._dataAccessService.ReadGroup(e,_)}else _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Update Data failed due to status '"+n.status+"', but retry limit ("+this._dataRetryLimit+") already reached.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=n.status,this._dataAccessStatus===_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.InternalError&&(this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.UpdateDataError,_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Update Data stopped due to update data error status.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this.removeDataPollTimer(),r=!0)}else _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's Update Data stopped as different read URLs: '"+e+"' vs '"+this._readUrl+"'",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this.removeDataPollTimer(),r=!0;else _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("ERROR: Data client's Update Data failed due to missing status information.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Error),this._dataAccessStatus=_services_DataAccessServiceEnums_js__WEBPACK_IMPORTED_MODULE_10__.a.UpdateDataError;r||t(null)}},{key:"stopUpdate",value:function(e){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's stopping update ... ",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._readUrl=null,this.removeDataPollTimer(),null!=e&&this.unregisterGroup(e),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's stopped update.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}},{key:"writeVariable",value:function(e,t,n){if(e===_writeRequestEnums_js__WEBPACK_IMPORTED_MODULE_20__.a.Constant&&null!==(n=this.parseStrict(t,n.toString()))){_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's writing variables ... ",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),t.update(n);for(var a=n.toString(),r=null,i=0;i<this._pendingWriteQueue.length;i++){var o=this._pendingWriteQueue[i];if(o.variable.equals(t)){(r=o).newValue=a,r.sourceType=e;break}}null===r&&(r=new _writeRequest_js__WEBPACK_IMPORTED_MODULE_9__.a(e,t,a),this._pendingWriteQueue.push(r),t.writePendingCount++),this.writeQueuedData(void 0),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's wrote variables.",_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug)}}},{key:"removeDataPollTimer",value:function(){void 0!==this._dataPollHandle&&(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's removing data poll timer for data poll handle: "+this._dataPollHandle,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),clearInterval(this._dataPollHandle),_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's clearing data poll handle: "+this._dataPollHandle,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataPollHandle=void 0)}},{key:"getCurrentTime",value:function(){return Date.now()}},{key:"parseStrict",value:function(e,t,n){var a=n||(e instanceof _arrayElementVariable_js__WEBPACK_IMPORTED_MODULE_21__.a?e.memberType:e.type);if(!a)return _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Unable to parse value '".concat(t,"' due to invalid type: ").concat(e.type),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),t;try{switch(a){case"BOOL":switch(t.trim().toLowerCase()){case"0":case"false":return!1;case"1":case"true":return!0;default:try{var r=this.parseStrict(e,t,"USINT");return"number"!=typeof r?(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Unable to parse value '".concat(t,"' for type '").concat(a,"' due to invalid type."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),null):0<=r&&r<=1?0!==r:(_services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Unable to parse value '".concat(t,"' for type '").concat(a,"' due to range error."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),null)}catch(e){throw e}}case"USINT":case"UINT":case"UDINT":case"ULINT":case"BYTE":case"WORD":case"DWORD":case"LWORD":if(!/^[0-9]+$/.test(t.trim()))return _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Unable to parse value '".concat(t,"' for type '").concat(a,"' due to invalid character."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),null;var i=DataClient.longFromString(t,!0);switch(a){case"USINT":case"BYTE":if(i.and(DataClient.MASK_UINT8).ne(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.UZERO))throw RangeError();break;case"UINT":case"WORD":if(i.and(DataClient.MASK_UINT16).ne(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.UZERO))throw RangeError();break;case"UDINT":case"DWORD":if(i.and(DataClient.MASK_UINT32).ne(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.UZERO))throw RangeError();if(i.gt(DataClient.MAX_INT))return i;break;case"ULINT":case"LWORD":if(i.gt(DataClient.MAX_INT))return i}return i.toInt();case"SINT":case"INT":case"DINT":case"LINT":if(!/^(\-|\+)?[0-9]+$/.test(t.trim()))return _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Unable to parse value '".concat(t,"' for type '").concat(a,"' due to invalid character."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),null;var o=DataClient.longFromString(t,!1);switch(a){case"SINT":if(!(s=o.shr(7)).eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.ZERO)&&!s.eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.NEG_ONE))throw RangeError();break;case"INT":if(!(s=o.shr(15)).eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.ZERO)&&!s.eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.NEG_ONE))throw RangeError();break;case"DINT":if(!(s=o.shr(31)).eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.ZERO)&&!s.eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.NEG_ONE))throw RangeError();break;case"LINT":var s;if(!(s=o.shr(31)).eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.ZERO)&&!s.eq(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.NEG_ONE))return o}return o.toInt();case"REAL":case"LREAL":if(!/^(\-|\+)?([0-9]+(\.[0-9]*)?|\.[0-9]+)((e|E)(\-|\+)?[0-9]+)?$/.test(t.trim()))return _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Unable to parse value '".concat(t,"' for type '").concat(a,"' due to invalid character."),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),null;var u=parseFloat(t);if("number"!=typeof u||!isFinite(u))throw RangeError();if("REAL"==a){if(0==u)return u;if(!(1.175494351e-38<=Math.abs(u)&&Math.abs(u)<=3.402823466e38))throw RangeError()}return u;case"STRING":return t;case"TIME":case"LTIME_OF_DAY":case"LDATE_AND_TIME":case"LDATE":case"LTIME":throw Error(a+" not supported");default:throw Error("Unknown type:  "+a)}}catch(e){return _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("WARNING: Unable to parse value '".concat(t,"' as type '").concat(a,"' caused exception:  ").concat(e),_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Warning),t}}},{key:"sysTickCount",get:function(){return this._sysTickCount}},{key:"isProjectSettingsDownloaded",get:function(){return this._isProjectSettingsDownloaded}},{key:"authenticationProtocol",get:function(){return this._authenticationProtocol}},{key:"currentProjectSettings",get:function(){return this._currentProjectSettings}},{key:"dataUrl",get:function(){return this._dataUrl}},{key:"startPageUrl",get:function(){return this._currentProjectSettings&&this._currentProjectSettings.startPageURL?this._currentProjectSettings.startPageURL:void 0}},{key:"dataPollInterval",get:function(){return this._dataPollInterval}},{key:"RecoveryCountdown",get:function(){return this._recoveryCountdownSeconds}},{key:"isSessionMaintenanceActive",get:function(){return void 0!==this._sessionPollHandle}},{key:"isCreateSessionQueued",get:function(){return this._isCreateSessionQueued}},{key:"status",get:function(){return _services_Common_js__WEBPACK_IMPORTED_MODULE_11__.a.Log("DEBUG: Data client's returning data status code: "+this._dataAccessStatus,_services_CommonEnums_js__WEBPACK_IMPORTED_MODULE_12__.a.Debug),this._dataAccessStatus}},{key:"authenticationSettings",get:function(){return this._authenticationSettings}},{key:"access_token",set:function(e){this._dataAccessService.access_token=e},get:function(){return this._dataAccessService.access_token}}],[{key:"isSysTickCountVariable",value:function(e){return _util_hashTable_js__WEBPACK_IMPORTED_MODULE_5__.a.endsWith(e.toUpperCase(),DataClient.VariableName_SysTickCount.toUpperCase())}},{key:"longFromString",value:function(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)throw Error("floating point input");if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");for(var a=!1,r=-1,i=0;i<e.length;++i)if("+"==e[i]||"-"==e[i]){if(-1!=r)throw Error("interior sign");"-"==e[i]&&(a=!a)}else-1==r&&(r=i);e=e.substring(r);var o=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.fromNumber(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.pow_dbl(n,8),!0),s=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.UZERO;for(i=0;i<e.length;i+=8){var u=Math.min(8,e.length-i),c=parseInt(e.substring(i,i+u),n);if(u<8){var l=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.fromNumber(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.pow_dbl(n,u),!0);if(s.gt(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MAX_UNSIGNED_VALUE.div(l)))throw Error("input overflow");s=s.mul(l)}else{if(s.gt(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MAX_UNSIGNED_VALUE.div(o)))throw Error("input overflow");s=s.mul(o)}var h=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.fromNumber(c,!0);if(s.gt(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MAX_UNSIGNED_VALUE.sub(h)))throw Error("input overflow");s=s.add(h)}if(t)return a?s.neg():s;var f=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.fromValue(_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MIN_VALUE,!0);if(a&&s.eq(f))return _lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MIN_VALUE;if(s.gte(f))throw Error("input overflow");var _=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.fromValue(s,!1);return a?_.neg():_}}]),DataClient}();DataClient.VariableName_SysTickCount="ESM_DATA.ESM_INFOS[1].TICK_COUNT",DataClient.DataSourceType_eCLR="eCLR",DataClient.DataSourceType_tsVisit="tsVisit",DataClient.DataSourceTypesUppercase=[DataClient.DataSourceType_eCLR.toUpperCase(),DataClient.DataSourceType_tsVisit.toUpperCase()],DataClient.ProjectJsonFile="project.json",DataClient.ProjectChecksumJsonFile="project.checksum.json",DataClient.MASK_UINT8=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MAX_UNSIGNED_VALUE.xor(255),DataClient.MASK_UINT16=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MAX_UNSIGNED_VALUE.xor(65535),DataClient.MASK_UINT32=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.MAX_UNSIGNED_VALUE.xor(4294967295),DataClient.MAX_INT=_lib_long_js__WEBPACK_IMPORTED_MODULE_22__.a.fromNumber(2147483647)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(7),n(8),n(56),n(96),n(22),n(33);var a=n(17);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,n,a,r,i,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=o(this,u(t).call(this,e.name,s))).lowerBound=0,c.absoluteIndex=0,c.sourceArray=e,c.lowerBound=n,c.absoluteIndex=a,c.memberName=r,c.memberType=i,c.writeVariableName=e.name+"["+(c.lowerBound+c.absoluteIndex).toString()+"]",c.memberName&&(c.writeVariableName=c.writeName+"."+c.memberName),c}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["a"]),n=t,(r=[{key:"equals",value:function(e){if(s(u(t.prototype),"equals",this).call(this,e)){var n=e;return!!n&&(this.lowerBound==n.lowerBound&&this.absoluteIndex==n.absoluteIndex&&this.memberName==n.memberName)}return!1}},{key:"update",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.memberName?this.sourceArray.value[this.absoluteIndex][this.memberName]=e:this.sourceArray.value[this.absoluteIndex]=e}},{key:"writeName",get:function(){return this.writeVariableName}},{key:"value",get:function(){if(this.sourceArray){var e=this.sourceArray.value[this.absoluteIndex];if(this.memberName)for(var t=this.memberName.split("."),n=0;n<t.length;n++)e=e[t[n]];return e}return null},set:function(e){this.sourceArray&&(this.sourceArray[this.absoluteIndex].value=e)}}])&&i(n.prototype,r),l&&i(n,l),t}()},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=[],this.counter=0}var t,n,r;return t=e,(n=[{key:"append",value:function(e){this.data[this.counter++]=e}},{key:"toString",value:function(){return this.data.join("")}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(7),n(8),n(39);var a=n(76),r=n(17),i=n(20);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e,n,a){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u(this,c(t).call(this))).moduleName=e,r.functionSignature=n,r.functionParameters=a,r}var n,o,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,a["a"]),n=t,(o=[{key:"allowTimestamping",set:function(e){null!=this.functionParameters&&this.functionParameters.forEach(function(t,n,a){t instanceof r.a&&(t.allowTimestamping=e)})}},{key:"value",get:function(){var e=i.a.GetModuleInstance(this.moduleName);if(e){var t=e[this.functionSignature];if(t){var n=[];return null!=this.functionParameters&&this.functionParameters.forEach(function(e,t,a){return n.push(e.value)}),t.apply(null,n)}}},set:function(e){}}])&&s(n.prototype,o),h&&s(n,h),t}()},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controlPoints=t}var t,n,r;return t=e,(n=[{key:"interpolate",value:function(e,t){}},{key:"differentiate",value:function(e,t){}},{key:"differentiate2",value:function(e,t){}},{key:"getUnitTangent",value:function(e,t){}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){var e,t,n;function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._source=e,t&&(this.location=t)}return e=r,(t=[{key:"source",get:function(){return this._source}}])&&a(e.prototype,t),n&&a(e,n),r}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(7),n(8);var a=n(138),r=n(4);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,u(t).call(this,e))).createDistanceTable(),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["a"]),n=t,(i=[{key:"createDistanceTable",value:function(){this.distances=new Array(2),this.distances[0]=0,this.distances[1]=r.a.distance(this.curve.controlPoints[0],this.curve.controlPoints[1]),this.points=new Array(2),this.points[0]=this.curve.controlPoints[0],this.points[1]=this.curve.controlPoints[1]}},{key:"getParameter",value:function(e,t){return e/this.length}}])&&o(n.prototype,i),l&&o(n,l),t}()},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.distances=null,this.points=null,this.curve=t}var t,n,r;return t=e,(n=[{key:"getParameter",value:function(e,t){return 0}},{key:"length",get:function(){return this.distances[this.distances.length-1]}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(7),n(8);var a=n(138),r=n(4);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,u(t).call(this,e))).createDistanceTable(),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["a"]),n=t,(i=[{key:"estimateSampleCount",value:function(){for(var e=0,t=0;t<this.curve.controlPoints.length-1;t++)e+=r.a.distance(this.curve.controlPoints[t],this.curve.controlPoints[t+1]);var n=Math.sqrt(e*e+1);return 10+Math.ceil(n/50)}},{key:"createDistanceTable",value:function(){var e=new r.a,t=new r.a,n=0,a=this.estimateSampleCount();this.distances=new Array(a),this.points=new Array(a);for(var i=0;i<a;i++){var o=i/(a-1);this.curve.interpolate(o,e),i>0&&(n+=r.a.distance(t,e)),this.distances[i]=n,this.points[i]=e.clone(),t.x=e.x,t.y=e.y}}},{key:"getParameter",value:function(e,t){var n=0;if(!t)return e/this.length;var a=this.findIndexOfLargestValueSmallerThan(this.distances,e,0,this.distances.length-1);if(a>=this.distances.length-1)return 1;if(this.distances[a]==e)n=a/(this.distances.length-1);else{var r=this.distances[a];n=(a+(e-r)/(this.distances[a+1]-r))/(this.distances.length-1)}return n}},{key:"findIndexOfLargestValueSmallerThan",value:function(e,t,n,a){for(;;){if(t<e[n])return n;if(t>e[a])return a;if(a-n==1)return n;var r=Math.ceil(.5*(n+a));if(t>e[r])n=r;else{if(!(t<e[r]))return r;a=r}}}}])&&o(n.prototype,i),l&&o(n,l),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(82);var a=n(99),r=n(139),i=n(137),o=n(4);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._vecA=new o.a,this._vecB=new o.a,this._segmentDistance=[],this.curveSolvers=[];for(var n=0,s=0;s<t.subPaths.length;s++){var u=t.subPaths[s];if(u.segments.length>0)for(var c=0;c<u.segments.length;c++){var l,h=u.segments[c];n+=(l=h.curve instanceof a.a?new r.a(h.curve):new i.a(h.curve)).length,this._segmentDistance.push(n),this.curveSolvers.push(l)}}}var t,n,u;return t=e,(n=[{key:"evaluate",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.curveSolvers,r=this._segmentDistance,i=e*this.length,o=0,s=0,u=r.length;s<u;s++)if(i<=r[s]){o=s;break}var c=i;o>0&&(c=i-r[o-1]);var l=a[o].getParameter(c,!0),h=a[o].curve;h.interpolate(l,t),null!==n&&h.getUnitTangent(l,n)}},{key:"findClosestPoint",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Number.MAX_VALUE,a=0,r=this._vecA,i=this._vecB,s=0,u=this.curveSolvers.length;s<u;s++)for(var c=this.curveSolvers[s],l=c.points,h=l[0],f=1,_=l.length;f<_;f++){var d=l[f];r.x=e.x-h.x,r.y=e.y-h.y,i.x=d.x-h.x,i.y=d.y-h.y;var p=r.getLength(),g=i.getLength(),v=p*(o.a.dotProduct(r,i)/(p*g))/g;v<0?v=0:v>1&&(v=1);var y=i.x*v,m=i.y*v,b=h.x+y,E=h.y+m,D=e.x-b,S=e.y-E,P=D*D+S*S;P<n&&(a=c.distances[f-1],a+=Math.sqrt(y*y+m*m),s>0&&(a+=this._segmentDistance[s-1]),a/=this.length,n=P,null!==t&&(t.x=b,t.y=E)),h=d}return a}},{key:"length",get:function(){return this._segmentDistance[this._segmentDistance.length-1]}}])&&s(t.prototype,n),u&&s(t,u),e}()},function(e,t,n){"use strict";n(7),n(8);var a=n(73),r=n(4);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._d1=new r.a,this._d2=new r.a,this._normal=new r.a,this._unitNormal=new r.a,this._evolute=new r.a,this._offset=0,this._offsetSquared=0,this._curve=t,this._offset=.5*n,this._offsetSquared=this._offset*this._offset}var t,n,a;return t=e,(n=[{key:"getOffsetVectors",value:function(e,t,n,a){if(this._curve.differentiate(e,this._d1),this._unitNormal.x=this._normal.x=this._d1.y,this._unitNormal.y=this._normal.y=-this._d1.x,this._unitNormal.normalize(),n.x=this._unitNormal.x*this._offset,n.y=this._unitNormal.y*this._offset,t.x=-n.x,t.y=-n.y,a){this._curve.differentiate2(e,this._d2);var r=-(this._d1.x*this._d1.x+this._d1.y*this._d1.y)/(this._d1.x*this._d2.y-this._d2.x*this._d1.y);this._evolute.x=this._normal.x*r,this._evolute.y=this._normal.y*r;var i=this._evolute.x*this._evolute.x+this._evolute.y*this._evolute.y;this._offsetSquared>i&&(r<0?(t.x=this._evolute.x,t.y=this._evolute.y):(n.x=this._evolute.x,n.y=this._evolute.y))}}}])&&i(t.prototype,n),a&&i(t,a),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return f});var f=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=c(this,l(t).call(this,e,n))).maxOffsetPoints=50,a}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["a"]),n=t,(i=[{key:"approximateStroke",value:function(e){var t=new r.a,n=new r.a,a=new r.a;this.centerBounds.reset(),this.strokedBounds.reset(),this.estimatePointCount(e);var i=new o(this.curve,e);this.innerOffsetPoints=[],this.outerOffsetPoints=[];for(var s=0;s<this.maxOffsetPoints;s++){var u=s/(this.maxOffsetPoints-1);this.curve.interpolate(u,t),i.getOffsetVectors(u,n,a,!0);var c=new r.a(t.x+a.x,t.y+a.y);this.outerOffsetPoints.push(c);var l=new r.a(t.x+n.x,t.y+n.y);this.innerOffsetPoints.push(l),this.centerBounds.addPoint(t),this.strokedBounds.addPoint(c),this.strokedBounds.addPoint(l)}this.strokedBounds.union(this.centerBounds)}},{key:"estimatePointCount",value:function(e){for(var t=0,n=0;n<this.curve.controlPoints.length-1;n++)t+=r.a.distance(this.curve.controlPoints[n],this.curve.controlPoints[n+1]);var a=Math.sqrt(t*t+1);this.maxOffsetPoints=10+Math.floor(e/8)+Math.ceil(a/100)}}])&&u(n.prototype,i),s&&u(n,s),t}()},function(e,t,n){"use strict";n(7),n(8),n(39);var a=n(45),r=n(13),i=n(25),o=n(4),s=n(101),u=n(34),c=(n(33),n(17));function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rowItemNamePrefix="RowItemSymbolInstance",this.listItemNamePrefix="ROW",this.selectedIndexTarget=null,this.rowInitialLocations=[],this.lowerBound=0,this.upperBound=0}var t,n,a;return t=e,(n=[{key:"constructModel",value:function(e,t){var n=this;e.SelectedIndexVariable&&(this.selectedIndexTarget=new c.a(e.SelectedIndexVariable,null)),e.ListItem.LowerBound&&(this.lowerBound=parseInt(e.ListItem.LowerBound)),e.ListItem.UpperBound&&(this.upperBound=parseInt(e.ListItem.UpperBound));var a=this.upperBound-this.lowerBound+1;this.listItemHeight=e.ListItem.Height;var r=e.Geometry.Rect.Right-e.Geometry.Rect.Left;this.rowCount=Math.round(.5+(e.Geometry.Rect.Bottom-e.Geometry.Rect.Top)/(this.listItemHeight+e.RowPadding+e.HorizontalLineWidth)),this.rowCount=a>this.rowCount?a:this.rowCount;var i=e.Geometry.Rect.Left,s=e.Geometry.Rect.Top+e.RowPadding,u=r,l=this.listItemHeight;this.rowHeight=e.RowPadding+e.HorizontalLineWidth+this.listItemHeight,null==e.Objects&&(e.Objects=new Array);var h,f,_=this.createBackgroundFillFromModel(e);for(_&&e.Objects.push(_),h=0;h<this.rowCount;h++){var d={Type:"SymbolInstance",Symbol:e.ListItem.RowSymbol,Location:{X:0,Y:0},Rotation:0,ID:this.rowItemNamePrefix+h,IsTabSelectable:!1,TabOrder:0};if(this.rowInitialLocations.push(new o.a(i,s)),e.ListItem.Parameters){var p=new Array(e.ListItem.Parameters.length);e.ListItem.Parameters.forEach(function(t,a){"ParameterBindingField"===t.Type?p[a]={Type:"ParameterBindingArrayVariable",Source:e.ListItem.Variable,Index:h,LowerBound:n.lowerBound,Name:t.Name,MemberName:t.Source}:p[a]=t}),d.Parameters=p}var g={Type:"Group",Location:{X:i,Y:s},ID:"ListItemContiner"+h,Objects:[]},v=this.createListItemAtGeometryWithID(0,0,u,l,this.listItemNamePrefix+h);this.selectedIndexTarget&&this.selectedIndexTarget.name&&(v.Actions=[{Type:"WriteValueAction",SourceType:"Variable",SourceVariable:this.selectedRowVariableName,DestinationVariable:this.selectedIndexTarget.name}]),v.Dynamics=this.SelectedRowFillDynamicModel(h,this.selectedRowVariableName),g.Objects.push(d),g.Objects.push(v),e.Objects.push(g),e.HorizontalLineWidth>0&&g.Objects.push(this.createHorizontalLine(0,this.listItemHeight+1+e.HorizontalLineWidth/2,r,e.HorizontalLineColor,e.HorizontalLineWidth)),s=s+1+this.rowHeight}if(e.Dynamics&&(f=e.Dynamics.filter(function(e){return"FillDynamic"===e.Type&&"LineColor"===e.TargetProperty})),f||e.LineWidth&&e.LineWidth>0){var y=this.createBorderFromModel(e);f&&(y.Dynamics=f),e.Objects.push(y)}if(t&&e.Geometry.Rect.Right-e.Geometry.Rect.Left>15){var m=this.createScrollBar(e),b=this.createScrollBarPath(e),E=this.createScrollBarThumb(e);e.Objects.push(m),e.Objects.push(b),e.Objects.push(E)}return e}},{key:"createScrollBarThumb",value:function(e){return{Type:"Group",Location:{X:e.Geometry.Rect.Right-14,Y:e.Geometry.Rect.Top},ID:"ScrollBarThumbGroup",IsTabSelectable:!1,TabOrder:0,Objects:[{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,Y:0},Segments:[{Type:"LinePathSegment",End:{X:0,Y:20}}]}]},StartLineEndType:"None",EndLineEndType:"None",StartLineEndSize:"Medium",EndLineEndSize:"Medium",LineColor:"#FFCCD0D2",LineWidth:1,DashStyle:{Offset:0},FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:18,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:2,Y:0},Rotation:0,ID:"ThumbPath",IsTabSelectable:!1,TabOrder:0,Actions:[{Type:"UpdateFollowersAction",HitRegionWidth:20}]},{Type:"ScrollBarThumb",Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:8,Bottom:20}},Fill:{Type:"SolidFill",Color:"#FF7A7A7A"},Location:{X:2,Y:0},ID:"ScrollBarThumb",IsTabSelectable:!1,TabOrder:0}]}}},{key:"createScrollBarPath",value:function(e){return{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,Y:0},Segments:[{Type:"LinePathSegment",End:{X:0,Y:e.Geometry.Rect.Bottom}}]}]},StartLineEndType:"None",EndLineEndType:"None",StartLineEndSize:"Medium",EndLineEndSize:"Medium",LineColor:"#FFCCD0D2",LineWidth:1,DashStyle:{Offset:0},FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:18,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:e.Geometry.Rect.Right-14,Y:e.Geometry.Rect.Top},Rotation:0,ID:"ScrollBarPath",IsTabSelectable:!1,TabOrder:0,Actions:[{Type:"UpdateFollowersAction",HitRegionWidth:36}]}}},{key:"createScrollBar",value:function(e){return{Type:"Rectangle",CornerRadii:{Width:0,Height:0},Geometry:{Type:"Rectangle",Rect:{Left:e.Geometry.Rect.Right-14,Top:e.Geometry.Rect.Top,Right:e.Geometry.Rect.Right-2,Bottom:e.Geometry.Rect.Bottom}},LineColor:e.LineColor,LineWidth:e.LineWidth,DashStyle:e.DashStyle,Fill:{Type:"SolidFill",Color:"#80F1F1F1"},Location:{X:0,Y:0},ID:"ScrollBar",IsTabSelectable:!1,TabOrder:0}}},{key:"createBackgroundFillFromModel",value:function(e){var t,n;return e.Dynamics&&(n=e.Dynamics.filter(function(e){return("BlinkDynamic"===e.Type||"FillDynamic"==e.Type)&&"LineColor"!=e.TargetProperty})),(n||e.Fill)&&((t=this.createBorderFromModel(e)).Fill=e.Fill,t.LineWidth=0,n&&(t.Dynamics=n)),t}},{key:"constructArrayMember",value:function(e,t,n){return"."==n?e+"["+t+"]":e+"["+t+"]."+n}},{key:"createHorizontalLine",value:function(e,t,n,a,r){return{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,Y:0},Segments:[{Type:"LinePathSegment",End:{X:n,Y:0}}]}]},LineColor:a,LineWidth:r,DashStyle:{Offset:0},Location:{X:e,Y:t},Rotation:0,ID:"testLine",IsTabSelectable:!1,TabOrder:0}}},{key:"createBorderFromModel",value:function(e){return{Type:"Rectangle",CornerRadii:{Width:0,Height:0},Geometry:{Type:"Rectangle",Rect:{Left:e.Geometry.Rect.Left,Top:e.Geometry.Rect.Top,Right:e.Geometry.Rect.Right,Bottom:e.Geometry.Rect.Bottom}},LineColor:e.LineColor,LineWidth:e.LineWidth,DashStyle:e.DashStyle,Location:{X:0,Y:0},ID:"ListBoxBorder",IsTabSelectable:!1,TabOrder:0}}},{key:"createListItemAtGeometryWithID",value:function(e,t,n,a,r){return{Type:"ListItem",CornerRadii:{Width:0,Height:0},Fill:{Type:"SolidFill",Color:"#00000000"},Geometry:{Type:"Rectangle",Rect:{Left:e,Top:t,Right:n,Bottom:a}},DashStyle:{Offset:0},Location:{X:0,Y:0},ID:r,IsTabSelectable:!1,TabOrder:0}}},{key:"SelectedRowFillDynamicModel",value:function(e,t){return[{Type:"FillDynamic",TargetProperty:"Fill",Interpolate:!1,ThresholdData:[{Threshold:e-1,Value:{Type:"SolidFill",Color:"#00FFFFFF"}},{Threshold:e,Value:{Type:"SolidFill",Color:"#808ACCD1"}},{Threshold:e+1,Value:{Type:"SolidFill",Color:"#00FFFFFF"}}],Smoothing:!1,CircularRange:!1,Variable:t,IsEnabled:!0}]}}])&&l(t.prototype,n),a&&l(t,a),e}(),f=n(9),_=n(61),d=n(21),p=n(102),g=n(14),v=n(62),y=n(0),m=n(1);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function S(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return C});var C=function(e){function t(e,n,a){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=S(this,P(t).call(this,e,n)))._listItemNamePrefix=null,s._listItemHeight=0,s._rowHeight=0,s._rowCount=0,s._selectedRow=-1,s._yScrollOffset=0,s._topRowIndex=0,s.needsInitialization=!0,s.isInitialized=!1,s.selectedIndexTarget=null,s._selectedIndexVariable=null,s._rowInitialLocations=[],s._rowContent=[],s._rows=[],s._lowerBound=0,s._upperBound=0,s.scrollerCallback=function(e,t,n){var a=E(s.nodes.filter(function(e){return"ScrollBarThumbGroup"===e.id}),1)[0],r=E(a.nodes.filter(function(e){return e instanceof v.a}).map(function(e){return e}),1)[0];if(r)try{if(r.isDragging||r.isScrollBarClicked)a.location.setY(r.updatedLocation.y),r.isScrollBarClicked=!1;else if(t>0){var i=s._scroller.__clientHeight,u=t/s._scroller.__maxScrollTop,c=s._scroller.__clientHeight*u;c+r.height>=i?a.location.setY(i-r.height):a.location.setY(c)}else a.location.setY(0)}catch(e){y.a.Log("ERROR: Caught error in scrolling: ".concat(e),m.a.Error),a&&a.location.setY(0)}for(var l=0;l<s._rowCount;l++)s._rowContent[l].location.value=new o.a(s._rowInitialLocations[l].x+e,s._rowInitialLocations[l].y+-t)},s._boundsPoint=new o.a,s.OnRowClickCallback=function(e,t){var n=parseInt(e.id.substring(3),10);s._selectedRow!=n&&(s.selectRowItemAtIndex(s._selectedRow,!1),s._selectedRow=n,s.selectRowItemAtIndex(n,!0),s._selectedIndexVariable&&(s._selectedIndexVariable.value=n))},s._dragMouseStart=new o.a,s._dragInverse=new d.a,s.OnScrollBarCursorClick=function(e,t){},s.OnScrollBarClick=function(e,t){try{var n=new o.a;d.a.findInverse(e.screenMatrix,s._dragInverse),s._dragInverse.transformXY(e.newLocation.value.x,e.newLocation.value.y,n);var a=E(s.nodes.filter(function(e){return"ScrollBarThumbGroup"===e.id}),1),r=E(a[0].nodes.filter(function(e){return e instanceof v.a}).map(function(e){return e}),1)[0],i=r.height/2;n.y-r.height<0?r.updatedLocation.y=0:n.y+r.height>s.path.hitBounds.height?r.updatedLocation.y=s.path.hitBounds.height-r.height:r.updatedLocation.y=n.y-i,r.isScrollBarClicked=!0,s.calculateThumbScrolling(r)}catch(e){y.a.Log("ERROR: Caught error in scroll bar click handler: ".concat(e),m.a.Error)}},s._type="ListBox",s.screenClipRect=new u.a;var c="@"+s.id+".SelectedIndex";s._selectedRowVariableName=e.NestedSelectedIndex?e.NestedSelectedIndex:c;var l=new h;return l.selectedRowVariableName=s._selectedRowVariableName,l.constructModel(e,a),l.selectedIndexTarget&&(s.selectedIndexTarget=l.selectedIndexTarget),s._listItemHeight=l.listItemHeight,s._rowCount=l.rowCount,s._rowInitialLocations=l.rowInitialLocations,s._rowHeight=l.rowHeight,s._upperBound=l.upperBound,s._lowerBound=l.lowerBound,s._listItemNamePrefix=l.listItemNamePrefix,s._localRect=new r.a(e.Geometry.Rect.Left,e.Geometry.Rect.Top,e.Geometry.Rect.Right,e.Geometry.Rect.Bottom),s.path=new i.a(s._localRect,!1,new o.a,e.LineWidth,f.a.defaultRectangleMiterLimit,!1),s}var n,c,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,a["a"]),n=t,(c=[{key:"computeScreenClipRect",value:function(){var e=this.screenClipRect;e.reset();var t=this.path.hitBounds,n=t.left,a=t.top,r=t.right,i=t.bottom;if(r-n>0&&i-a>0){var o=this.screenMatrix,s=this._boundsPoint;o.transformXY(n,a,s),e.addXY(s.x,s.y),o.transformXY(r,a,s),e.addXY(s.x,s.y),o.transformXY(r,i,s),e.addXY(s.x,s.y),o.transformXY(n,i,s),e.addXY(s.x,s.y)}this.screenClipRect!==e&&this.callTraverseNode()}},{key:"getListItemContentByID",value:function(e){for(var t=this.nodes.filter(function(e){return e instanceof a.a}),n=0;n<t.length;n++){var r=t[n].nodes.filter(function(t){return t.id==e});if(r.length>0)return r[0]}}},{key:"onLoaded",value:function(){var e=this;this.nodes.filter(function(e){return e instanceof a.a}).forEach(function(t){e._rowContent.push(t)});for(var t=0;t<this._rowCount;t++){var n=this.getListItemContentByID(this._listItemNamePrefix+t);this._rows.push(n),n.actions.splice(0,0,new _.a(g.a.Click,this.OnRowClickCallback.bind(this))),n.addDragListener(this)}this.nodes.filter(function(e){return"ScrollBar"===e.id||"ScrollBarThumbGroup"===e.id||"ScrollBarPath"===e.id}).forEach(function(t){if(t instanceof a.a){var n=E(t.nodes.filter(function(e){return e instanceof v.a}).map(function(e){return e}),1)[0];n&&(n.addDragListener(e),n.actions.push(new _.a(g.a.Click,e.OnScrollBarCursorClick.bind(e))))}else t.actions.push(new _.a(g.a.Click,e.OnScrollBarClick.bind(e)))}),this._scroller=new Scroller(this.scrollerCallback.bind(this),{scrollingX:!0,scrollingY:!0,animating:!1}),this._scroller.setDimensions(this._localRect.width,this._localRect.height,this._localRect.width,this._rowCount*(1+this._rowHeight)),this.needsInitialization&&this.initializeSelectedRow(),this.callTraverseNode()}},{key:"initializeSelectedRow",value:function(e){if(this._selectedIndexVariable=this._rows[0].dynamics[0].dataSource,this.selectedIndexTarget&&this.selectedIndexTarget.value)this._selectedIndexVariable.value=this.selectedIndexTarget.value,this.scrollToSelectedIndex();else if(this.selectedIndexTarget&&e&&1===this.selectedIndexTarget.valueChangedCallbacks.length){this._selectedIndexVariable.value=e.value;var t=e.valueChangedCallbacks.indexOf(this.selectedIndexTarget.valueChangedCallbacks[0]);t>=0&&(e.valueChangedCallbacks[t]=null),this.scrollToSelectedIndex()}else this._selectedIndexVariable&&-1!==this._selectedIndexVariable.value&&(this._selectedIndexVariable.value=-1);this.isInitialized=!0}},{key:"scrollToSelectedIndex",value:function(){var e=(this._rowHeight+1)*this._selectedIndexVariable.value;this._scroller.scrollBy(0,e,!1)}},{key:"selectRowItemAtIndex",value:function(e,t){e>=0&&e<this._rows.length&&(this._rows[e].isSelected=t)}},{key:"calculateThumbScrolling",value:function(e){try{var t,n=this._scroller.__clientHeight,a=this._scroller.__maxScrollTop;if(e.updatedLocation.y+e.height>=n)t=a;else t=(a+a*(e.height/n))*(e.updatedLocation.y/n);this._scroller.scrollTo(0,t,!1)}catch(e){y.a.Log("ERROR: Caught error in scroll calculating handler: ".concat(e),m.a.Error)}}},{key:"onListItemDragStart",value:function(e,t,n,a){return!!d.a.findInverse(e.screenMatrix,this._dragInverse)&&(this._dragMouseStart.x=a.mouseCurrent.x,this._dragMouseStart.y=a.mouseCurrent.y,this._dragInverse.transformXY(this._dragMouseStart.x,this._dragMouseStart.y,a.dragPoint),!0)}},{key:"handleScroll",value:function(e,t,n,a){var r=a.mouseCurrent,i=r.x,u=r.y;if(this._dragInverse.transformXY(i,u,a.dragPoint),e instanceof s.a)this._scroller.scrollBy(0,-(u-this._dragMouseStart.y),!1);else try{var c=new o.a;this._dragInverse.transformXY(this._dragMouseStart.x,this._dragMouseStart.y,c);var l=a.dragPoint.y-c.y,h=e.parent.location.value.y+l;h<0?h=0:h+e.bounds.height>=this._scroller.__clientHeight&&(h=this._scroller.__clientHeight-e.bounds.height),e.updatedLocation.y=h,this.calculateThumbScrolling(e)}catch(e){y.a.Log("ERROR: Caught error in thumb scroll handler: ".concat(e),m.a.Error)}return this._dragMouseStart.x=i,this._dragMouseStart.y=u,!0}},{key:"onListItemDrag",value:function(e,t,n,a){return this.handleScroll(e,t,n,a)}},{key:"onListItemEndDrag",value:function(e,t,n,a){return this.handleScroll(e,t,n,a)}},{key:"callTraverseNode",value:function(){var e=this;Object(p.a)(this,function(t){return t.screenClipRect=e.screenClipRect,!0})}}])&&D(n.prototype,c),l&&D(n,l),t}()},function(e,t,n){"use strict";n(203),n(117),n(82);var a=n(3),r=n(86),i=n(6);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"accessToBit",value:function(t,n){return 0!=(1&e.shiftRight(t,n))}},{key:"accessToByte",value:function(t,n){return 255&e.shiftRight(t,8*n)}},{key:"accessToWord",value:function(t,n){return 65535&e.shiftRight(t,16*n)}},{key:"accessToDword",value:function(t,n){return e.convert32BitIntToUnsigned(4294967295&e.shiftRight(t,32*n))}},{key:"bitwiseAnd",value:function(t,n){if("boolean"==typeof t){if("boolean"==typeof n)return t&&n}else if(i.a.isLong(t))return t.and(e.getNumberForLong(n));return i.a.isLong(n)?n.and(e.getNumberForLong(t)):e.convert32BitIntToUnsigned(a.a.getNumber(t)&a.a.getNumber(n))}},{key:"bitwiseOr",value:function(t,n){if("boolean"==typeof t){if("boolean"==typeof n)return t||n}else if(i.a.isLong(t))return t.or(e.getNumberForLong(n));return i.a.isLong(n)?n.or(e.getNumberForLong(t)):e.convert32BitIntToUnsigned(a.a.getNumber(t)|a.a.getNumber(n))}},{key:"bitwiseXor",value:function(t,n){if("boolean"==typeof t){if("boolean"==typeof n)return t!=n}else if(i.a.isLong(t))return t.xor(e.getNumberForLong(n));return i.a.isLong(n)?n.xor(e.getNumberForLong(t)):e.convert32BitIntToUnsigned(a.a.getNumber(t)^a.a.getNumber(n))}},{key:"equals",value:function(t,n){return i.a.isLong(t)?t.equals(e.getNumberForLong(n)):i.a.isLong(n)?n.equals(e.getNumberForLong(t)):a.a.getNumber(t)==a.a.getNumber(n)}},{key:"notEquals",value:function(t,n){return i.a.isLong(t)?t.notEquals(e.getNumberForLong(n)):i.a.isLong(n)?n.notEquals(e.getNumberForLong(t)):a.a.getNumber(t)!=a.a.getNumber(n)}},{key:"lessThan",value:function(t,n){return i.a.isLong(t)?t.lessThan(e.getNumberForLong(n)):i.a.isLong(n)?n.greaterThan(e.getNumberForLong(t)):a.a.getNumber(t)<a.a.getNumber(n)}},{key:"lessThanOrEqual",value:function(t,n){return i.a.isLong(t)?t.lessThanOrEqual(e.getNumberForLong(n)):i.a.isLong(n)?n.greaterThanOrEqual(e.getNumberForLong(t)):a.a.getNumber(t)<=a.a.getNumber(n)}},{key:"modulo",value:function(t,n){if(i.a.isLong(n))return n.isZero()?NaN:(i.a.isLong(t)||(t=i.a.fromValue(e.getNumberForLong(t))),t.modulo(n));if(i.a.isLong(t)){var r=i.a.fromValue(e.getNumberForLong(n));if(r.isZero())return NaN;var o=t.modulo(r);return 0==o.getHighBits()?o.toInt():o}return a.a.getNumber(t)%a.a.getNumber(n)}},{key:"negate",value:function(e){return i.a.isLong(e)?e.toSigned().negate():-(e=a.a.getNumber(e))}},{key:"toNumber",value:function(e){return a.a.getNumber(e)}},{key:"getNumberForLong",value:function(e){if("number"!=typeof e){if("string"==typeof e){e=e.trim();var t=r.a.booleanStringToNumber(e);return 0==t||1==t?t:e}if(!i.a.isLong(e))return Number(e)}return e}},{key:"convert32BitIntToUnsigned",value:function(e){return e<0?e+4294967296:e}},{key:"shiftRight",value:function(e,t){return i.a.isLong(e)?e.shiftRight(t).toInt():(e=a.a.getNumber(e),t>31?i.a.fromValue(e,!0).shiftRight(t).toInt():e>>>t)}}],(n=null)&&o(t.prototype,n),s&&o(t,s),e}();function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return c});var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"initialize",value:function(t){this._projectSettings=t,exportGlobal(e._expressionHelperVarName,s),exportGlobal(e._longVarName,i.a)}},{key:"LoadScript",value:function(t){var n;try{var a=new XMLHttpRequest;if(a.open("GET",t,!1),a.send(),200==a.status){var r=a.responseText;if(this._projectSettings&&this._projectSettings.isPLCNextEng20190){var i=e.formatReplacementReference(e._expressionHelperVarName);r=e.replaceAll(r,"Pxc.Hmi.ExpressionHelper.",i),i=e.formatReplacementReference(e._longVarName),r=e.replaceAll(r,"Long.",i)}n=(0,eval)(r)}}catch(e){console.error("ERROR: Failed to load module '"+t+"' due to exception: "+e)}return n}},{key:"formatReplacementReference",value:function(e){return"importGlobal('"+e+"')."}}],(n=null)&&u(t.prototype,n),a&&u(t,a),e}();c._expressionHelperVarName="g_EH",c._longVarName="g_Long",c.replaceAll=function(e,t,n){return e.replace(new RegExp(t,"g"),n)}},function(e,t,n){"use strict";var a;n(7),n(8),n(117),n(22),n(155);!function(e){e[e.None=0]="None",e[e.Fixed=1]="Fixed",e[e.IsoDate=2]="IsoDate"}(a||(a={}));var r=n(32),i=n(17),o=n(3),s=n(86),u=n(6);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return d});var d=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,f(t).call(this,e,n)))._targetProperty=null,r.formatType=a.None,r.fixedDecimals=0,r._type="TextDynamic";var i=o.a.getString(n.TargetProperty);return r._targetProperty=e.getTargetProperty(i),r.parseFormat(n),r}var n,c,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["a"]),n=t,d=[{key:"longToFixed",value:function(e,t){var n=e.toString();if(t>0){n+=".";for(var a=0;a<20&&a<t;a++)n+="0"}return n}}],(c=[{key:"formatNumberToFixed",value:function(e){var t;null!=e&&(this.formatType===a.Fixed&&(t="string"==typeof e?parseFloat(e):e,isNaN(t)||(e=t.toFixed(this.fixedDecimals))));return e}},{key:"formatTIME",value:function(e){return null!=e&&"number"==typeof e?this.formatLTIME(u.a.fromNumber(e).mul(t.NS_TO_MS)).slice(1):e}},{key:"formatLTIMEOFDAY",value:function(e){if(null!=e&&u.a.isLong(e)){var n=e.rem(t.NS_TO_D);n.lt(u.a.ZERO)&&(n=t.NS_TO_D.add(n));var a=n.div(t.NS_TO_MS),r=a.toNumber();e="LTOD#"+new Date(r).toISOString().substr(11,8);var i=r%1e3*t.NS_TO_MS+n.sub(a.mul(t.NS_TO_MS)).toNumber();if(i>0){var o=Math.floor(i/t.NS_TO_MS);i-=o*t.NS_TO_MS;var s=Math.floor(i/t.NS_TO_US);i-=s*t.NS_TO_US,(o>0||s>0||i>0)&&(e+="."+("00"+o).slice(-3)),(s>0||i>0)&&(e+="_"+("00"+s).slice(-3)),i>0&&(e+="_"+("00"+i).slice(-3))}}return e}},{key:"formatLTIME",value:function(e){if(null!=e&&u.a.isLong(e)){var n=e,a=n.lt(u.a.ZERO);a&&(n=u.a.ZERO.sub(n));var r=n.div(t.NS_TO_D),i=(n=n.sub(r.mul(t.NS_TO_D))).div(t.NS_TO_H),o=(n=n.sub(i.mul(t.NS_TO_H))).div(t.NS_TO_M),s=(n=n.sub(o.mul(t.NS_TO_M))).div(t.NS_TO_S),c=n.sub(s.mul(t.NS_TO_S)).toNumber(),l=Math.floor(c/t.NS_TO_MS);c-=l*t.NS_TO_MS;var h=Math.floor(c/t.NS_TO_US);c-=h*t.NS_TO_US,e="",r.gt(u.a.ZERO)&&(e+=r+"d"),(r.gt(u.a.ZERO)||i.gt(u.a.ZERO))&&(e+=i+"h"),(r.gt(u.a.ZERO)||i.gt(u.a.ZERO)||o.gt(u.a.ZERO))&&(e+=o+"m"),(r.eq(u.a.ZERO)&&i.eq(u.a.ZERO)&&o.eq(u.a.ZERO)||s.gt(u.a.ZERO)||l>0||h>0||c>0)&&(e+=s.toString(),(l>0||h>0||c>0)&&(e+="."+("00"+l).slice(-3)),(h>0||c>0)&&(e+="_"+("00"+h).slice(-3)),c>0&&(e+="_"+("00"+c).slice(-3)),e+="s"),a&&(e="-"+e),e="LT#"+e}return e}},{key:"formatLDateAndTime",value:function(e){return null!=e&&u.a.isLong(e)&&(e="LDT#"+this.formatLDate(e).slice(3)+"-"+this.formatLTIMEOFDAY(e).slice(5)),e}},{key:"formatDateAndTime",value:function(e){return null!=e&&"number"==typeof e?this.formatLDateAndTime(u.a.fromNumber(e).mul(t.NS_TO_MS)).slice(1):e}},{key:"formatLDate",value:function(e){if(null!=e&&u.a.isLong(e)){var n=e.div(t.NS_TO_MS).toNumber();e="LD#"+new Date(n).toISOString().slice(0,10)}return e}},{key:"format64BitInt",value:function(e,n){if(null!=e&&this.formatType===a.Fixed){if("boolean"==typeof e&&(e=e?1:0),"number"==typeof e)return isNaN(e)||(e=e.toFixed(this.fixedDecimals)),e;if("string"==typeof e&&e.length>0){var r=s.a.booleanStringToNumber(e);if(!isNaN(r))return r.toFixed(this.fixedDecimals);e=u.a.fromString(e,n)}u.a.isLong(e)&&(e=t.longToFixed(e,this.fixedDecimals))}return e}},{key:"format64BitSignedInt",value:function(e){return this.format64BitInt(e,!1)}},{key:"format64BitUnsignedInt",value:function(e){return this.format64BitInt(e,!0)}},{key:"parseFormat",value:function(e){var t=o.a.getString(e.Format);null==t||0===t.length?this.formatType=a.None:-1!==(t=t.trim().toLowerCase()).indexOf("fixed",0)&&(this.formatType=a.Fixed,t=t.replace("fixed","").trim(),this.fixedDecimals=parseInt(t))}},{key:"run",value:function(e){var n=null;if(null!=this.dataSource&&(n=this.dataSource.value),null!=n){var r;if(this.formatValue)n=this.formatValue(n);else if(this.formatType===a.Fixed)if(u.a.isLong(n))n=t.longToFixed(n,this.fixedDecimals);else r="string"==typeof n?parseFloat(n):n,isNaN(r)||(n=r.toFixed(this.fixedDecimals));this._targetProperty.value=n}}},{key:"dataSource",set:function(e){if(this.dataValueSource=e,this.dataValueSource instanceof i.a)switch(this.dataValueSource.type){case"TIME":this.formatValue=this.formatTIME;break;case"DATE_AND_TIME":this.formatValue=this.formatDateAndTime;break;case"LINT":this.formatValue=this.format64BitSignedInt;break;case"LWORD":case"ULINT":this.formatValue=this.format64BitUnsignedInt;break;case"LREAL":case"REAL":this.formatValue=this.formatNumberToFixed;break;case"LDATE":this.formatValue=this.formatLDate;break;case"LTIME_OF_DAY":this.formatValue=this.formatLTIMEOFDAY;break;case"LTIME":this.formatValue=this.formatLTIME;break;case"LDATE_AND_TIME":this.formatValue=this.formatLDateAndTime}},get:function(){return this.dataValueSource}}])&&l(n.prototype,c),d&&l(n,d),t}();d.NS_TO_US=1e3,d.NS_TO_MS=1e3*d.NS_TO_US,d.NS_TO_S=u.a.fromNumber(1e3*d.NS_TO_MS),d.NS_TO_M=d.NS_TO_S.mul(60),d.NS_TO_H=d.NS_TO_M.mul(60),d.NS_TO_D=d.NS_TO_H.mul(24)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(41);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(t,n,r,i,o,s,u,c,l,h,f,_){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=void 0,this.id=void 0,this.appId=void 0,this.appVersion=void 0,this.homePage=void 0,this.files=void 0,this.sessionTimeout=void 0,this.dataURL=void 0,this.dataSource=void 0,this.dataRetries=void 0,this.dataTimeout=void 0,this.dataPollInterval=void 0,this.dataPollTimeoutMultiplier=void 0,this.dataDebug=void 0,this.recoveryCountdown=void 0,this.startPageURL=void 0,this.downloadTimeout=void 0,this.stationID=void 0,this.checksum=void 0,this.startPageURL=t,this.dataURL=a.a.FormatDataUrl(h,i),this.dataSource=n,this.dataRetries=r,this.dataTimeout=o,this.dataPollInterval=s,this.dataPollTimeoutMultiplier=u,this.dataDebug=c,this.downloadTimeout=l,this.stationID=f,this.recoveryCountdown=_}var t,n,i;return t=e,(n=[{key:"isPLCNextEng20190",get:function(){return this.appId&&this.appVersion&&this.appId===e.appId_PLCnextEngineer&&this.appVersion===e.appVersion_PLCnextEng2019_0}}])&&r(t.prototype,n),i&&r(t,i),e}();i.appId_PLCnextEngineer="5195d979-0d9f-4cf5-990b-94e1af0d4c03",i.appVersion_PLCnextEng2019_3="7.4.0.0",i.appVersion_PLCnextEng2019_0="7.3.0.0"},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var a=n(148)("keys"),r=n(115);e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t,n){var a=n(114),r=n(54),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:a.version,mode:n(126)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var a=n(52),r=n(185),i=n(149),o=n(147)("IE_PROTO"),s=function(){},u=function(){var e,t=n(163)("iframe"),a=i.length;for(t.style.display="none",n(186).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;a--;)delete u.prototype[i[a]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=a(e),n=new s,s.prototype=null,n[o]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t,n){var a=n(66),r=n(113),i=n(47)("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==r(e))}},function(e,t,n){"use strict";var a=n(188)(!0);e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},function(e,t,n){"use strict";var a,r,i=n(128),o=RegExp.prototype.exec,s=String.prototype.replace,u=o,c=(a=/a/,r=/b*/g,o.call(a,"a"),o.call(r,"a"),0!==a.lastIndex||0!==r.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(e){var t,n,a,r,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),c&&(t=u.lastIndex),a=o.call(u,e),c&&a&&(u.lastIndex=u.global?a.index+a[0].length:t),l&&a&&a.length>1&&s.call(a[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(a[r]=void 0)}),a}),e.exports=u},function(e,t,n){"use strict";var a=n(52),r=n(95),i=n(152),o=n(127);n(129)("match",1,function(e,t,n,s){return[function(n){var a=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=a(e),c=String(this);if(!u.global)return o(u,c);var l=u.unicode;u.lastIndex=0;for(var h,f=[],_=0;null!==(h=o(u,c));){var d=String(h[0]);f[_]=d,""===d&&(u.lastIndex=i(c,r(u.lastIndex),l)),_++}return 0===_?null:f}]})},function(e,t,n){"use strict";n(156)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){var a=n(67),r=n(58),i=n(83),o=/"/g,s=function(e,t,n,a){var r=String(i(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(a).replace(o,"&quot;")+'"'),s+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),a(a.P+a.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t){e.exports={}},function(e,t,n){var a=n(59).f,r=n(65),i=n(47)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,i)&&a(e,i,{configurable:!0,value:t})}},function(e,t,n){var a=n(66),r=n(180).set;e.exports=function(e,t,n){var i,o=t.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&a(i)&&r&&r(e,i),e}},function(e,t,n){var a=n(161);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports=!n(55)&&!n(58)(function(){return 7!=Object.defineProperty(n(163)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var a=n(66),r=n(54).document,i=a(r)&&a(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},function(e,t,n){var a=n(65),r=n(94),i=n(182)(!1),o=n(147)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),u=0,c=[];for(n in s)n!=o&&a(s,n)&&c.push(n);for(;t.length>u;)a(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var a=n(125),r=Math.max,i=Math.min;e.exports=function(e,t){return(e=a(e))<0?r(e+t,0):i(e,t)}},function(e,t,n){"use strict";var a=n(52),r=n(191),i=n(127);n(129)("search",1,function(e,t,n,o){return[function(n){var a=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=o(n,e,this);if(t.done)return t.value;var s=a(e),u=String(this),c=s.lastIndex;r(c,0)||(s.lastIndex=0);var l=i(s,u);return r(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]})},function(e,t,n){var a=n(47)("unscopables"),r=Array.prototype;null==r[a]&&n(74)(r,a,{}),e.exports=function(e){r[a][e]=!0}},function(e,t,n){var a=n(65),r=n(130),i=n(147)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),a(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var a=n(54),r=n(114),i=n(126),o=n(170),s=n(59).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=i?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,n){t.f=n(47)},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceType=t,this.variable=n,this.newValue=a}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(154);var a=n(50);var r=function e(t,n,r,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.authenticationProtocol=a.a.None,!t.match(/(http|https)/))throw Error("ERROR: Invalid authentication protocol: "+t);if(i==a.a.Integrated&&!t.match(/(https)/))throw Error("ERROR: Invalid authentication protocol: TLS required with clear text credentials.");this.authenticationServer=n,this.serverProtocol=t,this.xhrTimeout=r,i&&(this.authenticationProtocol=i)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(3),r=n(51);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.Variable,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;o(this,e),this.model=t,this.name=n,this.type=a,this.source=i,this.index=s,this.lowerBound=u,this.memberName=c},u=function(){function e(){o(this,e)}var t,n,u;return t=e,u=[{key:"createParameter",value:function(e){var t=null,n=a.a.getString(e.Name,null);if(null!==n){switch(t=new s(e,n),a.a.getString(e.Type)){case"ParameterBindingConstant":t.type=r.a.Constant,e.TargetId&&!e.Processed&&(t.name="".concat(e.TargetId,".").concat(n));break;case"ParameterBindingArrayVariable":(t=new s(e,n)).type=r.a.ArrayVariable,t.index=e.Index,t.lowerBound=e.LowerBound,"."!=e.MemberName&&(t.memberName=e.MemberName);break;case"ParameterBindingField":t.name="".concat(e.TargetId,".").concat(n);case"ParameterBindingVariable":default:t.type=r.a.Variable}void 0!==e.Source&&(t.source=e.Source)}return t}}],(n=null)&&i(t.prototype,n),u&&i(t,u),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var a=n(3),r=n(104),i=n(49),o=n(105),s=n(60),u=n(80),c=n(72),l=n(106),h=n(79),f=n(107),_=n(97),d=n(88),p=n(64),g=n(19),v=n(71),y=n(108),m=n(109);function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,E;return t=e,E=[{key:"createAction",value:function(e){var t=void 0;switch(null!=e&&(t=a.a.getString(e.Type)),t){case"ToggleValueAction":return new r.a(e);case"WriteValueAction":return new i.a(e);case"IncrementValueAction":return new o.a(e);case"LoadPageAction":return new s.a(e);case"OpenDialogAction":return new u.a(e);case"CloseDialogAction":return new c.a(e);case"MessageBoxAction":return new l.a(e);case"PageBackAction":return new h.a(e);case"PageForwardAction":return new f.a(e);case"FollowPathAction":return new _.a(e);case"UpdateFollowersAction":return new d.a(e);case"NavigateLeftAction":return new p.a(e,g.a.Left);case"NavigateRightAction":return new p.a(e,g.a.Right);case"NavigateUpAction":return new p.a(e,g.a.Up);case"NavigateDownAction":return new p.a(e,g.a.Down);case"NavigateHomeAction":return new p.a(e,g.a.Home);case"LogInAction":return new v.a(e);case"LogOutAction":return new y.a(e);case"LaunchFileAction":return new m.a(e)}}}],(n=null)&&b(t.prototype,n),E&&b(t,E),e}()},function(e,t,n){"use strict";var a=n(3),r=n(77),i=(n(7),n(8),n(48)),o=n(68),s=n(118);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=l(this,h(t).call(this,e,n)))._type="RotationDynamic",r._lowRange=a.a.getNumber(n.LowRange),r._highRange=a.a.getNumber(n.HighRange);var i=a.a.getNumber(n.StartAngle),u=a.a.getNumber(n.EndAngle);return r._converter=new o.a(r._lowRange,r._highRange,s.a.degToRad(i),s.a.degToRad(u)),r._initialValue=e.rotation.value,r._isRelative=a.a.getBoolean(n.Relative,!0),r}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i["a"]),n=t,(r=[{key:"run",value:function(e){var t=this._converter;t.convert(this.getDataValue(e,this._lowRange,this._highRange));var n=t.output;this._isRelative&&(n+=this._initialValue),this.node.rotation.value=n}}])&&c(n.prototype,r),u&&c(n,u),t}(),d=n(4);function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._output=new d.a,this._sourceLow=t,this._sourceHigh=n,this._targetStart=a,this._targetEnd=r;var i=n-t;this._rangeFactorX=(r.x-a.x)/i,this._rangeFactorY=(r.y-a.y)/i,isFinite(this._rangeFactorX)||(this._rangeFactorX=1),isFinite(this._rangeFactorY)||(this._rangeFactorY=1)}var t,n,r;return t=e,(n=[{key:"convert",value:function(e){var t=a.a.getNumber(e);isNaN(t)&&(t=0),t<this._sourceLow?t=this._sourceLow:t>this._sourceHigh&&(t=this._sourceHigh);var n=t-this._sourceLow;this._output.x=this._targetStart.x+n*this._rangeFactorX,this._output.y=this._targetStart.y+n*this._rangeFactorY}},{key:"output",get:function(){return this._output}}])&&p(t.prototype,n),r&&p(t,r),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=m(this,b(t).call(this,e,n)))._type="ScaleDynamic",r._lowRange=a.a.getNumber(n.LowRange),r._highRange=a.a.getNumber(n.HighRange);var i=a.a.getPoint(n.StartScale),o=a.a.getPoint(n.EndScale);return r._converter=new g(r._lowRange,r._highRange,i,o),r._initialValue=e.scale.value.clone(),r._isRelative=a.a.getBoolean(n.Relative,!0),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,i["a"]),n=t,(r=[{key:"run",value:function(e){this._converter.convert(this.getDataValue(e,this._lowRange,this._highRange,1));var t=this._converter.output,n=t.x,a=t.y;this._isRelative&&(n*=this._initialValue.x,a*=this._initialValue.y),this.node.scale.setPointValue(n,a)}}])&&y(n.prototype,r),o&&y(n,o),t}(),S=n(32);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=C(this,O(t).call(this,e,n)))._type="TranslationDynamic";var i=a.a.getNumber(n.LowRange),o=a.a.getNumber(n.HighRange),s=a.a.getPoint(n.StartOffset),u=a.a.getPoint(n.EndOffset);return r._initialValue=new d.a(e.location.value.x,e.location.value.y),r._converter=new g(i,o,s,u),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,S["a"]),n=t,(r=[{key:"run",value:function(e){this._converter.convert(this.dataSource.value);var t=this._initialValue,n=this._converter.output;this.node.location.setPointValue(t.x+n.x,t.y+n.y)}}])&&w(n.prototype,r),i&&w(n,i),t}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function L(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=L(this,A(t).call(this,e,n)))._type="HorizontalTranslationDynamic",r._lowRange=a.a.getNumber(n.LowRange),r._highRange=a.a.getNumber(n.HighRange);var i=a.a.getNumber(n.StartOffset),s=a.a.getNumber(n.EndOffset);return r._converter=new o.a(r._lowRange,r._highRange,i,s),r._initialValue=e.location.value.x,r._isRelative=a.a.getBoolean(n.Relative,!0),r}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,i["a"]),n=t,(r=[{key:"run",value:function(e){var t=this._converter;t.convert(this.getDataValue(e,this._lowRange,this._highRange));var n=t.output;this._isRelative&&(n+=this._initialValue),this.node.location.setX(n)}}])&&T(n.prototype,r),s&&T(n,s),t}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=j(this,F(t).call(this,e,n)))._type="VerticalTranslationDynamic",r._lowRange=a.a.getNumber(n.LowRange),r._highRange=a.a.getNumber(n.HighRange);var i=a.a.getNumber(n.StartOffset),s=a.a.getNumber(n.EndOffset);return r._converter=new o.a(r._lowRange,r._highRange,i,s),r._initialValue=e.location.value.y,r._isRelative=a.a.getBoolean(n.Relative,!0),r}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,i["a"]),n=t,(r=[{key:"run",value:function(e){var t=this._converter;t.convert(this.getDataValue(e,this._lowRange,this._highRange));var n=t.output;this._isRelative&&(n+=this._initialValue),this.node.location.setY(n)}}])&&U(n.prototype,r),s&&U(n,s),t}(),G=n(89),V=n(103),K=n(11);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function z(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=z(this,X(t).call(this,e,n))).action=null,a.active=!1,a._type="DataTriggerDynamic",a}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,S["a"]),n=t,(a=[{key:"run",value:function(e){if(this.dataSource.value){this.node;this.active||(this.active=!0,K.a.ActionExecuted(this.node,this.action))}else this.active&&(this.active=!1)}}])&&H(n.prototype,a),r&&H(n,r),t}(),Z=n(9),J=n(63),$=(n(22),n(69)),ee=n(35),te=n(18);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function re(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(e,n,r){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=re(this,ie(t).call(this,n,r)))._type="ColorDynamic",n instanceof Z.a){var o=n,s=a.a.getBoolean(r.ChangeWhen),u=te.a.createFillStyle(e,r.Fill,n.path.fillBounds),c=a.a.getColor(r.LineColor,Z.a.defaultLineColor);i._fillConverter=new $.a(s?ee.a.HIGH:ee.a.LOW,u,o.fillStyle.value),i._strokeConverter=new $.a(s?ee.a.HIGH:ee.a.LOW,c.toString(),o.strokeStyle.value)}return i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,S["a"]),n=t,(r=[{key:"run",value:function(e){this._fillConverter.convert(this.dataSource.value),this._strokeConverter.convert(this.dataSource.value);var t=this.node;t.fillStyle.value=this._fillConverter.output,t.strokeStyle.value=this._strokeConverter.output}}])&&ae(n.prototype,r),i&&ae(n,i),t}(),ue=n(28);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function he(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var pe,ge=function e(t,n,a){de(this,e),this.value=t,this.lineColor=n,this.fillColor=a},ve=function(e){function t(e,n){var r;return de(this,t),(r=he(this,fe(t).call(this,e,n)))._type="MultiColorDynamic",r._interpolate=a.a.getBoolean(n.Interpolate,!0),r._thresholds=r.getMultiColorThresholds(n),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,S["a"]),n=t,(r=[{key:"getMultiColorThresholds",value:function(e){var t=[];if(void 0!==e.ThresholdData){var n=e.ThresholdData;if(null!=n&&null!=n.length){for(var r=0;r<n.length;r++){var i=n[r],o=a.a.getNumber(i.Value),s=a.a.getColor(i.LineColor),u=new ue.a;null!=i.Fill&&"SolidFill"==i.Fill.Type&&(u=a.a.getColor(i.Fill.Color));var c=new ge(o,s,u);t.push(c)}t.sort(function(e,t){return e.value-t.value})}}return t}},{key:"run",value:function(e){if(0!=this._thresholds.length){var t,n,a=parseFloat(this.dataSource.value),r=0,i=this._thresholds.length-1;if(a<this._thresholds[0].value)t=this._thresholds[0].lineColor.toString(),n=this._thresholds[0].fillColor.toString();else if(a>=this._thresholds[i].value)t=this._thresholds[i].lineColor.toString(),n=this._thresholds[i].fillColor.toString();else{for(var o=i;o>=0;o--)if(a>=this._thresholds[o].value){r=o;break}if(this._interpolate){var s=r+1;s>=i&&(s=i);var u=(a-this._thresholds[r].value)/(this._thresholds[s].value-this._thresholds[r].value),c=this._thresholds[r].lineColor,l=this._thresholds[s].lineColor,h=Math.round(c.R+u*(l.R-c.R)),f=Math.round(c.G+u*(l.G-c.G)),_=Math.round(c.B+u*(l.B-c.B)),d=Math.round(c.A+u*(l.A-c.A));t=ue.a.toCssString(h,f,_,d);var p=this._thresholds[r].fillColor,g=this._thresholds[s].fillColor;h=Math.round(p.R+u*(g.R-p.R)),f=Math.round(p.G+u*(g.G-p.G)),_=Math.round(p.B+u*(g.B-p.B)),d=Math.round(p.A+u*(g.A-p.A));n=ue.a.toCssString(h,f,_,d)}else t=this._thresholds[r].lineColor.toString(),n=this._thresholds[r].fillColor.toString()}var v=this.node;v.fillStyle.value=n,v.strokeStyle.value=t}}}])&&le(n.prototype,r),i&&le(n,i),t}(),ye=n(110),me=n(144);n(56);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function De(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e,t,n){return(Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e[e.BlinkOff=0]="BlinkOff",e[e.BlinkOn=1]="BlinkOn",e[e.BlinkDisabled=2]="BlinkDisabled"}(pe||(pe={}));var Ce=function(e){function t(e,n,a){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=n.getTargetProperty(a.TargetProperty).value;return a.ThresholdData=new Array(3),a.ThresholdData[0]={Threshold:0,Value:a.OnColor},a.ThresholdData[1]={Threshold:1,Value:a.OffColor},a.ThresholdData[2]={Threshold:pe.BlinkDisabled},(r=De(this,Pe(t).call(this,e,n,a)))._type="BlinkDynamic",te.a.IsNoFill(i)||(r._thresholds[2].style=i),void 0===r.blinkStatusVariableName&&(r.blinkStatusVariableName="@BlinkStatus"),r}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,ye["a"]),n=t,(a=[{key:"getDataValue",value:function(e,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=Se(Pe(t.prototype),"getDataValue",this).call(this,e,n,a,r);return 0==(i="boolean"==typeof i?i?1:0:i)?i=pe.BlinkDisabled:null!=this.blinkStateDataSource&&(i=this.blinkStateDataSource.value),i}}])&&Ee(n.prototype,a),r&&Ee(n,r),t}();function Oe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return Re});var Re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createDynamic",value:function(e,t,n){var i=void 0;switch(null!=n&&(i=a.a.getString(n.Type)),i){case"PathDynamic":return new r.a(t,n);case"RotationDynamic":return new _(t,n);case"ScaleDynamic":return new D(t,n);case"TranslationDynamic":return new k(t,n);case"HorizontalTranslationDynamic":return new I(t,n);case"VerticalTranslationDynamic":return new W(t,n);case"VisibilityDynamic":return new G.a(t,n);case"DisableDynamic":return new V.a(t,n);case"DataTriggerDynamic":return new Q(t,n)}if(t instanceof Z.a)switch(i){case"ButtonStateDynamic":return new J.a(t,n);case"ColorDynamic":return new se(e,t,n);case"MultiColorDynamic":return new ve(t,n);case"FillDynamic":return new ye.a(e,t,n);case"TextDynamic":return new me.a(t,n);case"BlinkDynamic":return new Ce(e,t,n)}return null}}],(n=null)&&Oe(t.prototype,n),i&&Oe(t,i),e}()},function(e,t,n){"use strict";n(7),n(8),n(39),n(33),n(117);var a=n(5),r=n(2),i=n(0),o=n(1),s=n(41),u=n(12);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var f=function(){function e(t,n,s,u){c(this,e),this.serviceStatus=r.a.Pending,this.httpRequestMethod=a.a.httpRequestMethod_POST,this.sessionID="",this.timeout=0,this.sessionLocation=void 0,this._pxcDataAccessService=t,this._stationID=s,void 0!==u&&(this._timeout=u),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session desired timeout (ms): "+this._timeout,o.a.Debug),this.httpRequestUrl=g.PrepareSessionUrl(n,""),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session request URL: "+this.httpRequestUrl,o.a.Debug),this.httpRequestBody=g.PrepareStationRequestData(this._stationID,this._timeout),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session request body: "+this.httpRequestBody,o.a.Debug)}return h(e,[{key:"OnLoad",value:function(e,t){var n=!1;try{var s=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session received XHR ready state: "+s.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session received XHR status: "+s.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session received XHR response: "+s.response,o.a.Debug),s.readyState&&s.readyState===a.a.httpRequestReadyState_Done){var u=JSON.parse(s.response);if(void 0!==this._pxcDataAccessService&&this._pxcDataAccessService.CheckProjectCRC(u,this.commandName))this.serviceStatus=r.a.ProjectChanged;else switch(s.status){case a.a.httpRequestStatus_Created:i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session detected Created status.",o.a.Debug),this.sessionID=u.sessionID,this.timeout=u.timeout,this.serviceStatus=r.a.OK,n=!0;var c=s.getResponseHeader(a.a.httpRequestHeader_Location);null!=c?(i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session session location: "+c,o.a.Debug),this.sessionLocation=c):i.a.Log("WARNING: Phoenix Contact Data Access service's Create Session falling back to preparing session URL as session location unexpectedly unavailable.",o.a.Warning);break;case a.a.httpRequestStatus_BadRequest:case a.a.httpRequestStatus_NotFound:i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session detected Bad Request / Not Found status.",o.a.Debug),this.serviceStatus=r.a.SessionError;break;case a.a.httpRequestStatus_Conflict:i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session detected Conflict status.",o.a.Debug),this.serviceStatus=r.a.DuplicateStationIDError;break;case a.a.httpRequestStatus_Unauthorized:this.serviceStatus=r.a.AuthorizationError;break;default:i.a.Log("ERROR: PxcDataAccessService.PxcDataCreateSession.OnLoad) Unexpected XHR status: "+s.status,o.a.Error),this.serviceStatus=r.a.InternalError}}else i.a.Log("ERROR: PxcDataAccessService.PxcDataCreateSession.OnLoad) Unexpected XHR ready state: "+s.readyState,o.a.Error),this.serviceStatus=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.PxcDataCreateSession.OnLoad) Caught exception: "+e,o.a.Error),this.serviceStatus=r.a.ExceptionError,n=!1}return i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session prepared callback service status: "+this.serviceStatus,o.a.Debug),t(this.serviceStatus,this.sessionID,this.timeout,this.sessionLocation),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session resulting rc: "+n,o.a.Debug),n}},{key:"Send",value:function(e,t){var n=this;e.onload=function(e){return n.OnLoad(e,t)},e.send(this.httpRequestBody)}},{key:"commandName",get:function(){return e.CommandName}}]),e}();f.CommandName="CreateSession";var _=function(){function e(t,n,s){c(this,e),this.serviceStatus=r.a.Pending,this.httpRequestMethod=a.a.httpRequestMethod_POST,this._pxcDataAccessService=t,this.httpRequestUrl=n,i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session request URL: "+this.httpRequestUrl,o.a.Debug),this._sessionID=s}return h(e,[{key:"OnLoad",value:function(e,t){var n=!1;try{var s=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session received XHR ready state: "+s.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session received status: "+s.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session received response: "+s.response,o.a.Debug),s.readyState&&s.readyState===a.a.httpRequestReadyState_Done){var u=JSON.parse(s.response);if(void 0!==this._pxcDataAccessService&&this._pxcDataAccessService.CheckProjectCRC(u,this.commandName))this.serviceStatus=r.a.ProjectChanged;else switch(s.status){case a.a.httpRequestStatus_OK:i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session detected OK status.",o.a.Debug),this._sessionID===u.sessionID?(this.serviceStatus=r.a.OK,n=!0):i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session unexpected session ID: "+u.sessionID,o.a.Warning);break;case a.a.httpRequestStatus_BadRequest:case a.a.httpRequestStatus_NotFound:case a.a.httpRequestStatus_RequestTimeout:case a.a.httpRequestStatus_Gone:i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session detected Bad Request / Not Found / Request Timeout / Gone status.",o.a.Debug),this._pxcDataAccessService.HasExtendedStatus(s.response,this.commandName)?(this.serviceStatus=this._pxcDataAccessService.CheckExtendedStatus(s.response,this.commandName),this.serviceStatus===r.a.NetworkTimeoutError&&(n=!0)):this.serviceStatus=r.a.SessionError;break;default:i.a.Log("ERROR: PxcDataAccessService.PxcDataMaintainSession.OnLoad) Unexpected XHR status: "+s.status,o.a.Error),this.serviceStatus=r.a.InternalError}}else i.a.Log("ERROR: PxcDataAccessService.PxcDataMaintainSession.OnLoad) Unexpected XHR ready state: "+s.readyState,o.a.Error),this.serviceStatus=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.PxcDataMaintainSession.OnLoad) Caught exception: "+e,o.a.Error),this.serviceStatus=r.a.ExceptionError,n=!1}return i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared callback service status: "+this.serviceStatus,o.a.Debug),t(this.serviceStatus,this._sessionID),i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session resulting rc: "+n,o.a.Debug),n}},{key:"Send",value:function(e,t){var n=this;e.onload=function(e){return n.OnLoad(e,t)},e.send()}},{key:"commandName",get:function(){return e.CommandName}}]),e}();_.CommandName="MaintainSession";var d=function(){function e(t,n,s,u,l){c(this,e),this.serviceStatus=r.a.Pending,this.httpRequestMethod=a.a.httpRequestMethod_POST,this.sessionID="",this.timeout=void 0,this.sessionLocation=void 0,this._pxcDataAccessService=t,this.httpRequestUrl=n,i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session request URL: "+this.httpRequestUrl,o.a.Debug),this._oldSessionID=s,this._newStationID=u,void 0!==l&&(this.timeout=l),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session desired timeout (ms): "+this.timeout,o.a.Debug),this.httpRequestBody=g.PrepareStationRequestData(this._newStationID,this.timeout),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session request body: "+this.httpRequestBody,o.a.Debug)}return h(e,[{key:"OnLoad",value:function(e,t){var n=!1;try{var s=e.target;if(s.readyState&&s.readyState===a.a.httpRequestReadyState_Done){i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session received status: "+s.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session received response: "+s.response,o.a.Debug);var u=JSON.parse(s.response);if(void 0!==this._pxcDataAccessService&&this._pxcDataAccessService.CheckProjectCRC(u,this.commandName))this.serviceStatus=r.a.ProjectChanged;else switch(s.status){case a.a.httpRequestStatus_Created:i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session detected Created status.",o.a.Debug),this.sessionID=u.sessionID,this.timeout=u.timeout,this.serviceStatus=r.a.OK,n=!0;var c=s.getResponseHeader(a.a.httpRequestHeader_Location);void 0!==c?(i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session session location: "+c,o.a.Debug),this.sessionLocation=c):i.a.Log("WARNING: Phoenix Contact Data Access service's Reassign Session falling back to preparing session URL as session location unexpectedly unavailable.",o.a.Warning);break;case a.a.httpRequestStatus_BadRequest:case a.a.httpRequestStatus_NotFound:case a.a.httpRequestStatus_RequestTimeout:case a.a.httpRequestStatus_Gone:i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session detected Bad Request / Not Found / Request Timeout / Gone status.",o.a.Debug),this.serviceStatus=r.a.SessionError;break;case a.a.httpRequestStatus_Conflict:i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session detected Conflict status.",o.a.Debug),this.serviceStatus=r.a.DuplicateStationIDError;break;default:i.a.Log("ERROR: PxcDataAccessService.PxcDataReassignSession.OnLoad) Unexpected XHR status: "+s.status,o.a.Error),this.serviceStatus=r.a.InternalError}}else i.a.Log("ERROR: PxcDataAccessService.PxcDataReassignSession.OnLoad) Unexpected XHR ready state: "+s.readyState,o.a.Error),this.serviceStatus=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.PxcDataReassignSession.OnLoad) Caught exception: "+e,o.a.Error),this.serviceStatus=r.a.ExceptionError,n=!1}return i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared callback service status: "+this.serviceStatus,o.a.Debug),t(this.serviceStatus,this.sessionID,this.timeout,this.sessionLocation),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session resulting rc: "+n,o.a.Debug),n}},{key:"Send",value:function(e,t){var n=this;e.onload=function(e){return n.OnLoad(e,t)},e.send(this.httpRequestBody)}},{key:"commandName",get:function(){return e.CommandName}}]),e}();d.CommandName="ReassignSession";var p=function(){function e(t,n,s){c(this,e),this.serviceStatus=r.a.Pending,this.httpRequestMethod=a.a.httpRequestMethod_DELETE,this._pxcDataAccessService=t,this.httpRequestUrl=n,i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session request URL: "+this.httpRequestUrl,o.a.Debug),this._sessionID=s}return h(e,[{key:"OnLoad",value:function(e,t){var n=!1;try{var s=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session received XHR ready state: "+s.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session received XHR status: "+s.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session received XHR response: "+s.response,o.a.Debug),s.readyState&&s.readyState===a.a.httpRequestReadyState_Done&&s.status)switch(s.status){case a.a.httpRequestStatus_NoContent:i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session detected No Content status.",o.a.Debug),this.serviceStatus=r.a.OK,n=!0;break;case a.a.httpRequestStatus_BadRequest:case a.a.httpRequestStatus_NotFound:case a.a.httpRequestStatus_RequestTimeout:case a.a.httpRequestStatus_Gone:i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session detected Bad Request / Not Found / Request Timeout / Gone status.",o.a.Debug),this.serviceStatus=r.a.SessionError;break;default:i.a.Log("ERROR: PxcDataAccessService.PxcDataDeleteSession.OnLoad) Unexpected XHR status: "+s.status,o.a.Error),this.serviceStatus=r.a.InternalError}else i.a.Log("ERROR: PxcDataAccessService.PxcDataDeleteSession.OnLoad) Unexpected XHR ready state: "+s.readyState,o.a.Error),this.serviceStatus=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.PxcDataDeleteSession.OnLoad) Caught exception: "+e,o.a.Error),this.serviceStatus=r.a.ExceptionError,n=!1}return i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared callback service status: "+this.serviceStatus,o.a.Debug),t(this.serviceStatus),i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session resulting rc: "+n,o.a.Debug),n}},{key:"Send",value:function(e,t){var n=this;e.onload=function(e){return n.OnLoad(e,t)},e.send()}},{key:"commandName",get:function(){return e.CommandName}}]),e}();p.CommandName="DeleteSession";var g=function(){function e(){c(this,e)}return h(e,null,[{key:"PrepareSessionUrl",value:function(e,t){return s.a.EnsureUrlTrailingForwardSlash(e+t)}},{key:"PrepareStationRequestData",value:function(e,t){var n="stationID="+e;return void 0!==t&&(n+="&timeout="+t),n}}]),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return D});var D=function(e){function t(e,n,a,r,u){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=m(this,b(t).call(this,n,a,r))).runSessionTestsMode=!1,c.useAltVariablesMode=!1,c.useAltGroupMode=!1,c.useAltFormatMode=!1,c.skipSessionAspects=!1,c.skipProjectCrcChecks=!1,c.skipExtendedStatusChecks=!1,c.serverGroups=[],c.localGroupNumber=0,c.localGroups=[],c.isApiSupported=void 0,c.pxcApi=t.pxcApiUrlLatest,c.needsMaintenance=!0,c.needsReassignment=!0,c.nameSessionIDString="sessionID",i.a.Log("DEBUG: Phoenix Contact Data Access service's constructing ... ",o.a.Debug);var l=e||s.a.FormatDataUrl();return c.UpdateResourceLocations(l),c.ApplyProjectCRC(u,""),i.a.Log("DEBUG: Phoenix Contact Data Access service's project checksum: "+c.projectCRC,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's constructed.",o.a.Debug),c}var n,c,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a["a"]),n=t,l=[{key:"GetProjectCRC",value:function(e,t){return void 0!==e&&void 0!==e.projectCRC?e.projectCRC:void i.a.Log("WARNING: Phoenix Contact Data Access service unable to get the project CRC for command: "+t,o.a.Warning)}},{key:"GetExtendedStatus",value:function(e,t){return void 0!==e&&void 0!==e.error?e.error:void i.a.Log("WARNING: Phoenix Contact Data Access service unable to get the extended status for command: "+t,o.a.Warning)}},{key:"IsAvailableSupport",value:function(e){return void 0!==e&&e!==t.emptyString}},{key:"PrepareVariablePrefixData",value:function(e,n,a,r){var s=t.emptyString,c=r||t.DetermineVariablePrefix(e,n);switch(a){case u.a.jsonMimeType:s+=t.doubleQuoteSymbolString+t.pathPrefixString+t.doubleQuoteSymbolString+t.colonSymbolString+t.spaceSymbolString+t.doubleQuoteSymbolString+c+t.doubleQuoteSymbolString+t.commaSymbolString+t.spaceSymbolString;break;case u.a.plainTextMimeType:s+=t.pathPrefixString+t.equalSymbolString+c+t.ampersandSymbolString;break;default:return void i.a.Log("ERROR: Phoenix Contact Data Access Service's "+n+" failed as unexpected MIME type: "+a,o.a.Error)}return s}},{key:"PrepareVarsRequestData",value:function(e,n,a,r){for(var s=t.emptyString,c=r||t.DetermineVariablePrefix(e,n),l=0;l<e.length;l++){var h=t.DetermineVariableName(e[l],c,n);switch(a){case u.a.jsonMimeType:h=t.PrepareJsonString(h,!1);break;case u.a.plainTextMimeType:break;default:return void i.a.Log("ERROR: Phoenix Contact Data Access Service's "+n+" failed as unexpected MIME type: "+a,o.a.Error)}s+=h,l+1!==e.length&&(s+=t.commaSymbolString)}return s}},{key:"DetermineVariablePrefix",value:function(e,n){for(var a=t.emptyString,r=0;r<e.length;r++)if(a===t.emptyString)if(0===e[r].indexOf(t.defaultVariablePrefix_MONAPLUS))a=t.defaultVariablePrefix_MONAPLUS;else if(0===e[r].indexOf(t.defaultVariablePrefix_PLCNEXTRev1))a=t.defaultVariablePrefix_PLCNEXTRev1;else{if(0!==e[r].indexOf(t.defaultVariablePrefix_PLCNEXTRev2)){i.a.Log("WARNING: Phoenix Contact Data Access service's "+n+" encountered an unexpected item variable name: "+e[r],o.a.Warning),a=t.emptyString;break}a=t.defaultVariablePrefix_PLCNEXTRev2}else if(0!==e[r].indexOf(a)){a=t.emptyString;break}return i.a.Log("DEBUG: Phoenix Contact Data Access service's "+n+" determined variable prefix: "+a,o.a.Debug),a}},{key:"DetermineVariableName",value:function(e,n,a){var r=e;return n!==t.emptyString&&0===r.toUpperCase().indexOf(n.toUpperCase())&&(r=r.substr(n.length)),i.a.Log("DEBUG: Phoenix Contact Data Access service's "+a+" determined variable name: "+r,o.a.Debug),r}},{key:"PrepareJsonValue",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"!=typeof e?e:t.PrepareJsonString(e,n)}},{key:"PrepareJsonString",value:function(e,t){var n=JSON.stringify(e);return t&&'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),n}}],(c=[{key:"CreateSession",value:function(e,t,n,r){var s=this;i.a.Log("DEBUG: Phoenix Contact Data Access service's creating session.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session supplied station ID: "+e,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session supplied session timeout (ms): "+r,o.a.Debug);var c=new f(this,this.sessionsUrlPrefix,e,r),l=new XMLHttpRequest;l.open(c.httpRequestMethod,c.httpRequestUrl,!0);return this.PrepareXhr(l,u.a.jsonMimeType,c.commandName,function(e){return function(e){return n&&n(e),!1}(e)}),!1===u.a.SetContentType(l,u.a.plainTextMimeType)&&i.a.Log("WARNING: Phoenix Contact Data Access service's Create Session failed to set the content MIME type.",o.a.Warning),c.Send(l,function(e,r,u,c){var l=s.OnSessionCreated(e,r,u,c);if(!1===l){if(n){var h=s.PrepareStatusCallbackData(e);i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session prepared reject's callback data status: "+h.status,o.a.Debug),n(h)}}else if(t){h=a.a.PrepareSessionCreationCallbackData(e,r,u);i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session prepared resolve's callback data status: "+h.status,o.a.Debug),t(h)}return l}),!0}},{key:"OnSessionCreated",value:function(e,t,n,a){var s=!1;switch(i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session status: "+e,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session session ID: "+t,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session timeout (ms): "+n,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session session location: "+a,o.a.Debug),e){case r.a.ExceptionError:case r.a.InternalError:case r.a.SessionError:case r.a.DuplicateStationIDError:case r.a.AuthorizationError:case r.a.ProjectChanged:break;case r.a.OK:this.ApplySessionInfo(t,n,a),s=!0;break;default:i.a.Log("WARNING: Phoenix Contact Data Access service's Create Session unexpected status: "+e,o.a.Warning)}return this.SetStatus(e),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session current service status: "+this.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session current session ID: "+this.sessionID,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Create Session current session timeout (ms): "+this.sessionTimeout,o.a.Debug),s}},{key:"MaintainSession",value:function(e,t,n){var s=this;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's maintaining session.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session supplied session ID: "+e,o.a.Debug),e===this.sessionID){var c=new _(this,this.sessionUrl,e),l=new XMLHttpRequest;l.open(c.httpRequestMethod,c.httpRequestUrl,!0);return this.PrepareXhr(l,u.a.jsonMimeType,c.commandName,function(e){return function(e){return n&&n(e),!1}(e)}),c.Send(l,function(e,r){var u=s.OnSessionMaintained(e,r);if(0==u){if(n){var c=s.PrepareStatusCallbackData(e);i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared reject's callback data status: "+c.status,o.a.Debug),n(c)}}else if(t){c=a.a.PrepareSessionMaintenanceCallbackData(e,r);i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared resolve's callback data status: "+c.status,o.a.Debug),t(c)}return u}),!0}if(n){i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session unexpected mismatch with current session ID: "+this.sessionID,o.a.Warning);var h=this.PrepareStatusCallbackData(r.a.SessionError);i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared reject's callback data status: "+h.status,o.a.Debug),n(h)}return!1}},{key:"OnSessionMaintained",value:function(e,t){var n=!1;switch(i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session status: "+e,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session session ID: "+t,o.a.Debug),e){case r.a.ExceptionError:case r.a.InternalError:case r.a.ProjectChanged:break;case r.a.NetworkTimeoutError:n=!0;break;case r.a.SessionError:this.IsSessionIDAvailable()?(i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session cleared session information.",o.a.Debug),this.ClearSessionInfo(),i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session failed due to session not being found and treating as update data error.",o.a.Debug),e=r.a.UpdateDataError,n=!0):(i.a.Log("ERROR: Phoenix Contact Data Access service's Maintain Session unexpectedly missing session ID and treating as internal error.",o.a.Error),e=r.a.InternalError);break;case r.a.OK:n=!0;break;default:i.a.Log("WARNING: Phoenix Contact Data Access service's Maintain Session unexpected status: "+e,o.a.Warning)}return this.SetStatus(e),i.a.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session current service status: "+this.status,o.a.Debug),n}},{key:"ReassignSession",value:function(e,t,n,s,c){var l=this;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's reassigning session.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current station ID: "+this.stationID,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current session ID: "+this.sessionID,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current session timeout (ms): "+this.sessionTimeout,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session old session ID: "+e,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new station ID: "+t,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new session timeout (ms): "+c,o.a.Debug),e===this.sessionID){var h=new d(this,this.sessionUrl,e,t,c),f=new XMLHttpRequest;f.open(h.httpRequestMethod,h.httpRequestUrl,!0),!1===u.a.SetContentType(f,u.a.plainTextMimeType)&&i.a.Log("WARNING: Phoenix Contact Data Access service's Reassign Session failed to set the content MIME type.",o.a.Warning);return this.PrepareXhr(f,u.a.jsonMimeType,h.commandName,function(e){return function(e){return s&&s(e),!1}(e)}),h.Send(f,function(e,t,r,u){var c=l.OnSessionReassigned(e,t,r,u);if(!1===c){if(s){var h=l.PrepareStatusCallbackData(e);i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared reject's callback data status: "+h.status,o.a.Debug),s(h)}}else if(n){h=a.a.PrepareSessionCreationCallbackData(e,t,r);i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared resolve's callback data status: "+h.status,o.a.Debug),n(h)}return c}),!0}if(s){i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session unexpected mismatch with current session ID: "+this.sessionID,o.a.Warning);var _=this.PrepareStatusCallbackData(r.a.SessionError);i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared reject's callback data status: "+_.status,o.a.Debug),s(_)}return!1}},{key:"OnSessionReassigned",value:function(e,t,n,a){var s=!1;switch(i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session status: "+e,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new, session ID: "+t,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new, timeout: "+n,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new, session location: "+a,o.a.Debug),e){case r.a.ExceptionError:case r.a.InternalError:case r.a.DuplicateStationIDError:case r.a.ProjectChanged:break;case r.a.SessionError:this.IsSessionIDAvailable()?(i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session cleared session information.",o.a.Debug),this.ClearSessionInfo(),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session failed due to session not being found and treating as update data error.",o.a.Debug),e=r.a.UpdateDataError,s=!0):(i.a.Log("ERROR: Phoenix Contact Data Access service's Reassign Session unexpectedly missing session ID and treating as internal error.",o.a.Error),e=r.a.InternalError);break;case r.a.OK:this.ApplySessionInfo(t,n,a),s=!0;break;default:i.a.Log("WARNING: Phoenix Contact Data Access service's Reassign Session unexpected status: "+e,o.a.Warning)}return this.SetStatus(e),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current service status: "+this.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current session ID: "+this.sessionID,o.a.Debug),s}},{key:"DeleteSession",value:function(e,t,n){var a=this;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's deleting session.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session session ID: "+e,o.a.Debug),e===this.sessionID){var s=new p(this,this.sessionUrl,e),c=new XMLHttpRequest;c.open(s.httpRequestMethod,s.httpRequestUrl,!0);return this.PrepareXhr(c,u.a.jsonMimeType,s.commandName,function(e){return function(e){return n&&n(e),!1}(e)}),s.Send(c,function(e){var r=a.OnSessionDeleted(e);if(!1===r){if(n){var s=a.PrepareStatusCallbackData(e);i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared reject's callback data status: "+s.status,o.a.Debug),n(s)}}else if(t){s=a.PrepareStatusCallbackData(e);i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared resolve's callback data status: "+s.status,o.a.Debug),t(s)}return r}),!0}if(n){i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session unexpected mismatch with current session ID: "+this.sessionID,o.a.Warning);var l=this.PrepareStatusCallbackData(r.a.SessionError);i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared reject's callback data status: "+l.status,o.a.Debug),n(l)}return!1}},{key:"OnSessionDeleted",value:function(e){var t=!1;switch(i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session status: "+e,o.a.Debug),e){case r.a.ExceptionError:case r.a.InternalError:break;case r.a.SessionError:e=r.a.OK;case r.a.OK:this.ClearSessionInfo(),t=!0;break;default:i.a.Log("WARNING: Phoenix Contact Data Access service's Delete Session unexpected status: "+e,o.a.Warning)}return this.SetStatus(e),i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session current service status: "+this.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Delete Session current session ID: "+this.sessionID,o.a.Debug),t}},{key:"RegisterGroup",value:function(e,t,n){var i=this,o=a.a.commandRegisterGroup;if(void 0===this.isApiSupported&&(this.UpdateResourceLocations(this.dataHostBase),void 0===this.isApiSupported&&this.status===r.a.NetworkTimeoutError)){var s=this.PrepareStatusCallbackData();return n(s),!1}return!!this.QueueCreateSession(function(){return i.RegisterGroup(e,t,n)},n)||(this.useAltGroupMode?this.RegisterAlternativeGroup(t,o,n):this.RegisterServerGroup(e,t,o,n))}},{key:"RegisterServerGroup",value:function(e,t,n,r){var i=this,o=new XMLHttpRequest;r&&v(r)===a.a.function&&(o.onload=function(a){return i.OnRegisterGroupLoad(a,e,t,n,r)});var s=this.RegisterGroupInternal(o,t,n,r);if(!1===s){var u=this.PrepareStatusCallbackData();r(u)}return s}},{key:"OnRegisterGroupLoad",value:function(e,t,n,u,c){var l=!1,h=r.a.Pending,f=void 0,_=void 0;try{var d=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group received ready state: "+d.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group received status: "+d.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group received response: "+d.response,o.a.Debug),d.readyState&&d.readyState===a.a.httpRequestReadyState_Done){var p=JSON.parse(d.response);if(this.CheckProjectCRC(p,u))h=r.a.ProjectChanged;else switch(d.status){case a.a.httpRequestStatus_Created:if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Created status.",o.a.Debug),void 0!==p.id){_=p.id;var g=s.a.EnsureUrlTrailingForwardSlash(this.groupsUrlPrefix+_),v=d.getResponseHeader(a.a.httpRequestHeader_Location);if(null!=v){i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group server group location: "+v,o.a.Debug),v.toUpperCase()!==g.toUpperCase()&&i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group encountered an unexpected location '"+v+"' for server group: "+_,o.a.Debug);var y=p.variables.length,m=n.length;y!==m&&i.a.Log("WARNING: Phoenix Contact Data Access service's Register Group encountered variables count mistmatch ('"+y+"' vs '"+m+"') for server group: "+_,o.a.Warning),!0===(l=this.AddServerGroup(_,v))&&(f=this.PrepareGroupRegistrationCallbackData(_,t)),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group callback data: "+f,o.a.Debug)}else i.a.Log("WARNING: Phoenix Contact Data Access service's Register Group falling back to local group due to missing location for sever group: "+_,o.a.Warning)}else i.a.Log("ERROR: Phoenix Contact Data Access service's Register Group failed as missing identifier information.",o.a.Error),h=r.a.InternalError;break;case a.a.httpRequestStatus_Forbidden:if(!this.HasExtendedStatus(d.response,u)){i.a.Log("ERROR: Unexpected status: ".concat(h," for command: ").concat(u,", treating as internal error."),o.a.Error),h=r.a.InternalError;break}if((h=this.CheckExtendedStatus(d.response,u))===r.a.NetworkTimeoutError){l=!0;break}case a.a.httpRequestStatus_Unauthorized:i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Unauthorized status.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group failed due to group not being authorized and treating as authorization error.",o.a.Debug),h=r.a.AuthorizationError,l=!0;break;case a.a.httpRequestStatus_NotFound:case a.a.httpRequestStatus_RequestTimeout:case a.a.httpRequestStatus_Gone:i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Not Found / Request Timeout / Gone status.",o.a.Debug),this.HasExtendedStatus(d.response,u)?h=this.CheckExtendedStatus(d.response,u):this.IsSessionIDAvailable()?(i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group cleared session information.",o.a.Debug),this.ClearSessionInfo(),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group failed due to session not being found and treating as register group error.",o.a.Debug),h=r.a.RegisterGroupError,l=!0):(i.a.Log("ERROR: Phoenix Contact Data Access service's Register Group unexpectedly missing session ID and treating as internal error.",o.a.Error),h=r.a.InternalError);break;case a.a.httpRequestStatus_BadRequest:if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Bad Request status.",o.a.Debug),!this.useAltFormatMode)return i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group falling back to alternative, text format mode due to default, JSON format mode received Bad Request.",o.a.Debug),this.useAltFormatMode=!0,this.RegisterGroupInternal(d,n,u,c);i.a.Log("ERROR: Phoenix Contact Data Access service's Register Group unexpectedly failed for alternative, text format mode and treating as internal error.",o.a.Error),h=r.a.InternalError;break;case a.a.httpRequestStatus_NotImplemented:i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Not Implemented status.",o.a.Debug);case a.a.httpRequestStatus_BadGateway:case a.a.httpRequestStatus_ServiceUnavailable:i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group received Bad Gateway / Service Unavailable response: "+d.response,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group failed due to eCLR being unavailable and treating as network timeout.",o.a.Debug),h=r.a.NetworkTimeoutError;break;default:i.a.Log("ERROR: PxcDataAccessService.OnRegisterGroupLoad) Unexpected XHR status: "+d.status,o.a.Error),h=r.a.InternalError}}else i.a.Log("ERROR: PxcDataAccessService.OnRegisterGroupLoad) Unexpected XHR ready state: "+d.readyState,o.a.Error),h=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.OnRegisterGroupLoad) Caught exception: "+e,o.a.Error),h=r.a.ExceptionError}return f||(f=this.PrepareStatusCallbackData(h)),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group prepared callback data status: "+f.status,o.a.Debug),c(f),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group resulting rc: "+l,o.a.Debug),l}},{key:"RegisterGroupInternal",value:function(e,n,s,c){var l=!1;try{i.a.Log("DEBUG: Phoenix Contact Data Access service's registering group.",o.a.Debug);var h=this.groupsUrlPrefix;i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group request URL: "+h,o.a.Debug);var f=void 0,_=void 0;if(this.useAltFormatMode)i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group using the alternative, format mode.",o.a.Debug),f=u.a.plainTextMimeType,_=this.AddSessionIDQuery(t.emptyString),_+=this.GetVariablesDataRequest(n,s,f),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group request body: "+_,o.a.Debug);else{i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group using the default, format mode.",o.a.Debug),f=u.a.jsonMimeType;var d=this.CreateSessionIDData(),p=this.GetVariablesDataRequest(n,s,f);_=t.leftCurlyBraceSymbol+t.spaceSymbolString+d+p+t.spaceSymbolString+t.rightCurlyBraceSymbol,i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group prepared group registration data: "+_,o.a.Debug),JSON.parse(_),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group request body: "+_,o.a.Debug)}e.open(a.a.httpRequestMethod_POST,h,!0),this.PrepareXhr(e,u.a.jsonMimeType,s,c),!1===u.a.SetContentType(e,f)&&i.a.Log("WARNING: Phoenix Contact Data Access service's Register Group failed to set the content MIME type.",o.a.Warning),e.send(_),l=!0}catch(e){i.a.Log("ERROR: PxcDataAccessService.RegisterGroup) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError)}return l}},{key:"ReadGroup",value:function(e,t,n){var r=this,i=a.a.commandReadGroup,o=function(){return r.ReadGroup(e,t,n)};if(this.QueueCreateSession(o,t))return!0;if(this.runSessionTestsMode){if(this.IsSessionIDAvailable()&&this.needsReassignment)return this.needsReassignment=!1,s=this.ReassignSession(this.sessionID,"99",o,t);if(this.IsSessionIDAvailable()&&this.needsMaintenance)return this.needsMaintenance=!1,s=this.MaintainSession(this.sessionID,o,t);this.needsMaintenance=!0}var s,u=new XMLHttpRequest;if(t&&v(t)===a.a.function&&(u.onload=function(a){return r.OnReadGroupLoad(a,e,i,t,n)}),!1===(s=this.ReadGroupInternal(u,e,i,t,n))){var c=this.PrepareStatusCallbackData();t(c)}return s}},{key:"OnReadGroupLoad",value:function(e,t,n,s,u){var c=!1,l=r.a.Pending,h=void 0;try{var f=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group received XHR ready state: "+f.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group received XHR status: "+f.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group received XHR response: "+f.response,o.a.Debug),f.readyState&&f.readyState===a.a.httpRequestReadyState_Done)switch(f.status){case a.a.httpRequestStatus_OK:i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected OK status.",o.a.Debug),l=(h=this.PrepareGroupRequestCallbackData(f.response,n,u)).status,c=!0;break;case a.a.httpRequestStatus_Unauthorized:i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected Unauthorized status.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group failed due to group not being authorized and treating as authorization error.",o.a.Debug),l=r.a.AuthorizationError,c=!0;break;case a.a.httpRequestStatus_Forbidden:if(!this.HasExtendedStatus(f.response,n)){i.a.Log("ERROR: Unexpected status: ".concat(l," for command: ").concat(n,", treating as internal error."),o.a.Error);break}if((l=this.CheckExtendedStatus(f.response,n))===r.a.NetworkTimeoutError){c=!0;break}case a.a.httpRequestStatus_NotFound:case a.a.httpRequestStatus_RequestTimeout:case a.a.httpRequestStatus_Gone:i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected Not Found / Request Timeout / Gone status.",o.a.Debug),this.HasExtendedStatus(f.response,n)?l=this.CheckExtendedStatus(f.response,n):this.IsSessionIDAvailable()?(i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group cleared session information.",o.a.Debug),this.ClearSessionInfo(),i.a.Log("WARNING: Phoenix Contact Data Access service's Read Group failed due to group being unavailable and treating as update data error.",o.a.Warning),l=r.a.UpdateDataError,c=!0):(i.a.Log("ERROR: Phoenix Contact Data Access service's Read Group failed due to group being unavailable and treating as invalid group ID error for command: "+n,o.a.Error),l=r.a.InvalidGroupIDError,c=!0);break;case a.a.httpRequestStatus_BadRequest:if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected Bad Request status.",o.a.Debug),this.useAltGroupMode&&!this.useAltFormatMode)return i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group falling back to alternative, text format mode due to default, JSON format mode received Bad Request.",o.a.Debug),this.useAltFormatMode=!0,this.ReadGroupInternal(f,t,n,s,u);i.a.Log("ERROR: Phoenix Contact Data Access service's Read Group unexpectedly failed for default, group mode and/or alternative, text format mode and treating as internal error.",o.a.Error),l=r.a.InternalError;break;case a.a.httpRequestStatus_BadGateway:case a.a.httpRequestStatus_ServiceUnavailable:i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group received Bad Gateway / Service Unavailable response: "+f.response,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group failed due to eCLR being unavailable and treating as network timeout.",o.a.Debug),l=r.a.NetworkTimeoutError;break;default:i.a.Log("ERROR: PxcDataAccessService.OnReadGroupLoad) Unexpected XHR status = "+f.status,o.a.Error),l=r.a.InternalError}else i.a.Log("ERROR: PxcDataAccessService.OnReadGroupLoad) Unexpected XHR ready state: "+f.readyState,o.a.Error),l=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.OnReadGroupLoad) Caught exception: "+e,o.a.Error),l=r.a.ExceptionError}return h||(h=this.PrepareStatusCallbackData(l)),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group prepared callback data status: "+h.status,o.a.Debug),s(h),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group resulting rc: "+c,o.a.Debug),c}},{key:"ReadGroupInternal",value:function(e,t,n,s,c){var l=!1;if(this.useAltGroupMode){var h=this.GetGroupVariableNames(t);void 0!==h?(this.ReadVariablesInternal(e,h,n,s),l=!0):this.SetStatus(r.a.InternalError)}else{var f=this.FindServerGroup(t);if(-1!==f)try{i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group found server group: "+t,o.a.Debug);var _=this.serverGroups[f].location;i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group location: "+_,o.a.Debug);var d=this.AddSessionIDQuery(_+"?");i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Group request URL: "+d,o.a.Debug),e.open(a.a.httpRequestMethod_GET,d,!0),this.PrepareXhr(e,u.a.jsonMimeType,n,s),e.send(),l=!0}catch(e){i.a.Log("ERROR: PxcDataAccessService.ReadGroupInternal) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError)}else i.a.Log("ERROR: Phoenix Contact Data Access service's Read Group failed as unable to find server group: "+t,o.a.Error),this.SetStatus(r.a.InternalError)}return l}},{key:"UpdateGroup",value:function(e,t){var n=this,r=a.a.commandUpdateGroup,i=new XMLHttpRequest;t&&v(t)===a.a.function&&(i.onload=function(a){return n.OnUpdateGroupLoad(a,r,t,e)});var o=this.UpdateGroupInternal(i,e,r,t);if(!1===o){var s=this.PrepareStatusCallbackData();t(s)}return o}},{key:"OnUpdateGroupLoad",value:function(e,t,n,s){var u=!1,c=r.a.Pending,l=void 0;try{var h=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group received XHR ready state: "+h.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group received XHR status: "+h.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group received XHR response: "+h.response,o.a.Debug),h.readyState&&h.readyState===a.a.httpRequestReadyState_Done)switch(h.status){case a.a.httpRequestStatus_OK:i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group detected OK status.",o.a.Debug),c=(l=this.PrepareGroupRequestCallbackData(h.response,t,!0,s)).status,u=!0;break;case a.a.httpRequestStatus_Unauthorized:i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group detected Unauthorized status.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group failed due to group not being authorized and treating as authorization error.",o.a.Debug),c=r.a.AuthorizationError,u=!0;break;default:i.a.Log("ERROR: PxcDataAccessService.OnUpdateGroupLoad) Unexpected XHR status = "+h.status,o.a.Error),c=r.a.InternalError}else i.a.Log("ERROR: PxcDataAccessService.OnUpdateGroupLoad) Unexpected XHR ready state: "+h.readyState,o.a.Error),c=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.OnUpdateGroupLoad) Caught exception: "+e,o.a.Error),c=r.a.ExceptionError}return l||(l=this.PrepareStatusCallbackData(c)),i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group prepared callback data status: "+l.status,o.a.Debug),n(l),i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group resulting rc: "+u,o.a.Debug),u}},{key:"UpdateGroupInternal",value:function(e,t,n,s){var c=!1;try{if(i.a.Log("DEBUG: Phoenix Contact Data Access service's updating group: "+name,o.a.Debug),this.useAltGroupMode)return this.ReadGroupInternal(e,t,n,s,!0);var l=this.FindServerGroup(t);if(-1!==l){var h=this.serverGroups[l].location;i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group location: "+h,o.a.Debug);var f=this.AddSessionIDQuery(h+"?");i.a.Log("DEBUG: Phoenix Contact Data Access service's Update Group request URL: "+f,o.a.Debug),e.open(a.a.httpRequestMethod_GET,f,!0),this.PrepareXhr(e,u.a.jsonMimeType,n,s),e.send(),c=!0}i.a.Log("ERROR: Phoenix Contact Data Access service's Update Group failed as unable to find server group: "+t,o.a.Error),this.SetStatus(r.a.InternalError)}catch(e){i.a.Log("ERROR: PxcDataAccessService.UpdateGroupInternal) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError)}return c}},{key:"UnregisterGroup",value:function(e,t){var n=this,s=a.a.commandUnregisterGroup,u=function(){return n.UnregisterGroup(e,t)};if(this.QueueCreateSession(u,t))return!0;if(this.runSessionTestsMode&&this.IsSessionIDAvailable())return l=this.DeleteSession(this.sessionID,u,t);if(this.useAltGroupMode){i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group removing alternative, local group: "+e,o.a.Debug),this.SetStatus(r.a.Pending),!0===(l=this.RemoveLocalGroup(e))&&this.SetStatus(r.a.OK);var c=this.PrepareStatusCallbackData();return i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group prepared local group callback data status: "+c.status,o.a.Debug),t(c),l}var l,h=new XMLHttpRequest;if(t&&v(t)===a.a.function&&(h.onload=function(a){return n.OnUnregisterGroupLoad(a,e,s,t)}),!1===(l=this.UnregisterGroupInternal(h,e,s,t))){c=this.PrepareStatusCallbackData();t(c)}return l}},{key:"OnUnregisterGroupLoad",value:function(e,t,n,s){var u=!1,c=r.a.Pending;try{var l=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group received XHR ready state: "+l.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group received XHR status: "+l.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group received XHR response: "+l.response,o.a.Debug),l.readyState&&l.readyState===a.a.httpRequestReadyState_Done)switch(this.useAltGroupMode||(i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group removed 'old' server group ID: "+t,o.a.Debug),this.RemoveServerGroup(t)),l.status){case a.a.httpRequestStatus_NoContent:i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group detected No Content status.",o.a.Debug),c=r.a.OK,u=!0;break;case a.a.httpRequestStatus_Unauthorized:i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group detected Unauthorized status.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group failed due to group not being authorized and treating as authorization error.",o.a.Debug),c=r.a.AuthorizationError,u=!0;break;case a.a.httpRequestStatus_NotFound:case a.a.httpRequestStatus_RequestTimeout:case a.a.httpRequestStatus_Gone:i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group detected Not Found / Request Timeout/ Gone status status.",o.a.Debug),this.useAltGroupMode&&!this.useAltVariablesMode?(i.a.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Local group mode's unexpected XHR status = "+l.status,o.a.Error),c=r.a.InternalError):(i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group failed due to server group not being found, but treating as okay.",o.a.Debug),c=r.a.OK,u=!0);break;default:i.a.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Unexpected XHR status = "+l.status,o.a.Error),c=r.a.InternalError}else i.a.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Unexpected XHR ready state: "+l.readyState,o.a.Error),c=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Caught exception: "+e,o.a.Error),c=r.a.ExceptionError}var h=this.PrepareStatusCallbackData(c);return i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group prepared server group callback data status: "+h.status,o.a.Debug),s(h),i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group resulting rc: "+u,o.a.Debug),u}},{key:"UnregisterGroupInternal",value:function(e,t,n,s){var c=!1;n=a.a.commandUnregisterGroup;try{var l=this.FindServerGroup(t);if(-1!==l){i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group deleting server group: "+t,o.a.Debug);var h=this.serverGroups[l].location;i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group location: "+h,o.a.Debug);var f=this.AddSessionIDQuery(h+"?");i.a.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group request URL: "+f,o.a.Debug),e.open(a.a.httpRequestMethod_DELETE,f,!0),this.PrepareXhr(e,u.a.jsonMimeType,n,s),e.send(),c=!0}else i.a.Log("ERROR: Phoenix Contact Data Access service's Unregister Group failed for group '"+t+"' as unable to find its server group.",o.a.Error),this.SetStatus(r.a.InternalError)}catch(e){i.a.Log("ERROR: PxcDataAccessService.UnregisterGroup) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError)}return c}},{key:"ReadVariables",value:function(e,t){var n=this,r=a.a.commandReadVariables;if(this.QueueCreateSession(function(){return n.ReadVariables(e,t)},t))return!0;var i=new XMLHttpRequest;t&&v(t)===a.a.function&&(i.onload=function(a){return n.OnReadVariablesLoad(a,e,r,t)});var o=this.ReadVariablesInternal(i,e,r,t);if(!1===o){var s=this.PrepareStatusCallbackData();t(s)}return o}},{key:"OnReadVariablesLoad",value:function(e,t,n,s){var u=!1,c=r.a.Pending,l=void 0;try{var h=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables received XHR ready state: "+h.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables received XHR status: "+h.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables received XHR response: "+h.response,o.a.Debug),h.readyState&&h.readyState===a.a.httpRequestReadyState_Done)switch(h.status){case a.a.httpRequestStatus_OK:i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected OK status.",o.a.Debug),c=(l=this.PrepareVarsCallbackData(h.response,n)).status,u=!0;break;case a.a.httpRequestStatus_Unauthorized:i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected Unauthorized status.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables failed due to group not being authorized and treating as authorization error.",o.a.Debug),c=r.a.AuthorizationError,u=!0;break;case a.a.httpRequestStatus_NotFound:i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected Not Found status.",o.a.Debug),this.HasExtendedStatus(h.response,n)?c=this.CheckExtendedStatus(h.response,n):(i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables failed and treating as update data error.",o.a.Debug),c=r.a.UpdateDataError,u=!0);break;case a.a.httpRequestStatus_BadRequest:if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected Bad Request status.",o.a.Debug),!this.useAltFormatMode)return i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables falling back to alternative, text format mode due to default, JSON format mode received Bad Request.",o.a.Debug),this.useAltFormatMode=!0,this.ReadVariablesInternal(h,t,n,s);i.a.Log("ERROR: Phoenix Contact Data Access service's Read Variables unexpectedly failed for alternative, text format mode and treating as internal error.",o.a.Error),c=r.a.InternalError;break;default:i.a.Log("ERROR: PxcDataAccessService.OnReadVariablesLoad) Unexpected XHR status = "+h.status,o.a.Error),c=r.a.InternalError}else i.a.Log("ERROR: PxcDataAccessService.OnReadVariablesLoad) Unexpected XHR ready state: "+h.readyState,o.a.Error),c=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.OnReadVariablesLoad) Caught exception: "+e,o.a.Error),c=r.a.ExceptionError}return l||(l=this.PrepareStatusCallbackData(c)),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables prepared callback data status: "+l.status,o.a.Debug),s(l),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables resulting rc: "+u,o.a.Debug),u}},{key:"ReadVariablesInternal",value:function(e,n,s,c){var l=!1;try{var h=void 0,f=void 0;if(this.useAltFormatMode)i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the alternative, format mode.",o.a.Debug),h=u.a.plainTextMimeType,f=this.AddSessionIDQuery(t.emptyString),f+=this.GetVariablesDataRequest(n,s,h);else{i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the default, format mode.",o.a.Debug),h=u.a.jsonMimeType;var _=this.CreateSessionIDData(),d=this.GetVariablesDataRequest(n,s,h);f=t.leftCurlyBraceSymbol+t.spaceSymbolString+_+d+t.spaceSymbolString+t.rightCurlyBraceSymbol,i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables prepared read variables data: "+f,o.a.Debug),JSON.parse(f),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request body: "+f,o.a.Debug)}if(this.useAltVariablesMode){i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the alternative, GET-based mode.",o.a.Debug);var p=this.varsUrlPrefix+t.questionMarkSymbolString+f;i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request URL: "+p,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request body: "+f,o.a.Debug),e.open(a.a.httpRequestMethod_GET,p,!0),this.PrepareXhr(e,u.a.jsonMimeType,s,c),e.send()}else{i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the default, POST-based mode.",o.a.Debug);p=this.varsUrlPrefix;i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request URL: "+p,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request body: "+f,o.a.Debug),e.open(a.a.httpRequestMethod_POST,p,!0),this.PrepareXhr(e,u.a.jsonMimeType,s,c),!1===u.a.SetContentType(e,h)&&i.a.Log("WARNING: Phoenix Contact Data Access service's Read Variables failed to set the content MIME type.",o.a.Warning),e.send(f)}l=!0}catch(e){i.a.Log("ERROR: PxcDataAccessService.ReadVariablesInternal) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError)}return l}},{key:"WriteValues",value:function(e,n,r){var i=this,o=a.a.commandWriteValues;if(this.QueueCreateSession(function(){return i.WriteValues(e,n,r)},r))return!0;var s=new XMLHttpRequest;r&&v(r)===a.a.function&&(s.onload=function(e){return i.OnWriteItemsLoad(e,o,r)});var u=this.WriteItemsInternal(s,t.valueTypeConstant,e,n,o,r);if(!1===u){var c=this.PrepareStatusCallbackData();r(c)}return u}},{key:"WriteVariables",value:function(e,n,r,i){var o=this;r=a.a.commandWriteVariables;if(this.QueueCreateSession(function(){return o.WriteValues(e,n,i)},i))return!0;var s=new XMLHttpRequest;i&&v(i)===a.a.function&&(s.onload=function(e){return o.OnWriteItemsLoad(e,r,i)});var u=this.WriteItemsInternal(s,t.valueTypeVariable,e,n,r,i);if(!1===u){var c=this.PrepareStatusCallbackData();i(c)}return u}},{key:"OnWriteItemsLoad",value:function(e,t,n){var s=!1,u=r.a.Pending;try{var c=e.target;if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items received XHR ready state: "+c.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items received XHR status: "+c.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items received XHR response: "+c.response,o.a.Debug),c.readyState&&c.readyState===a.a.httpRequestReadyState_Done){var l=JSON.parse(c.response);if(this.CheckProjectCRC(l,t))u=r.a.ProjectChanged;else switch(c.status){case a.a.httpRequestStatus_OK:i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items detected OK status.",o.a.Debug),u=r.a.OK,s=!0;break;case a.a.httpRequestStatus_Unauthorized:i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items detected Unauthorized status.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items failed due to group not being authorized and treating as authorization error.",o.a.Debug),u=r.a.AuthorizationError,s=!0;break;case a.a.httpRequestStatus_NotFound:case a.a.httpRequestStatus_RequestTimeout:case a.a.httpRequestStatus_Gone:if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items detected Not Found / Request Timeout / Gone status.",o.a.Debug),this.HasExtendedStatus(c.response,t))u=this.CheckExtendedStatus(c.response,t);else{if(this.IsSessionIDAvailable()){i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items cleared session information.",o.a.Debug),this.ClearSessionInfo(),i.a.Log("ERROR: Phoenix Contact Data Access service's Write Items failed due to session not being found and treating as update data error.",o.a.Warning),u=r.a.UpdateDataError,s=!0;break}i.a.Log("ERROR: Phoenix Contact Data Access service's Write Items unexpectedly missing session ID and treating as internal error.",o.a.Warning),u=r.a.InternalError}default:i.a.Log("ERROR: PxcDataAccessService.OnWriteItemsLoad) Unexpected XHR status = "+c.status,o.a.Error),u=r.a.InternalError}}else i.a.Log("ERROR: PxcDataAccessService.OnWriteItemsLoad) Unexpected XHR ready state: "+c.readyState,o.a.Error),u=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.OnWriteItemsLoad) Caught exception: "+e,o.a.Error),u=r.a.ExceptionError}var h=this.PrepareStatusCallbackData(u);return i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items prepared callback data status: "+h.status,o.a.Debug),n(h),i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items resulting rc: "+s,o.a.Debug),s}},{key:"WriteItemsInternal",value:function(e,n,s,c,l,h){var f=!1;try{if(s.length===c.length){var _=this.varsUrlPrefix;i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items request URL: "+_,o.a.Debug);for(var d=u.a.jsonMimeType,p=this.CreateSessionIDData(),g=t.DetermineVariablePrefix(s,l),v=t.PrepareVariablePrefixData(s,l,d,g),y=t.doubleQuoteSymbolString+"variables"+t.doubleQuoteSymbolString+t.colonSymbolString+t.spaceSymbolString+t.leftSquareBracket+t.spaceSymbolString,m=0;m<s.length&&s.length===c.length;m++){var b=t.DetermineVariableName(s[m],g,l);i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items supplied value '"+c[m]+"' for item: "+b,o.a.Debug);var E=c[m];"string"==typeof E&&(E=E.replace(/^[ ]+/g,t.emptyString)),E=t.PrepareJsonString(E,!0),i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items writing value '"+E+"' to item: "+b,o.a.Debug),y+=t.leftCurlyBraceSymbol+t.spaceSymbolString+t.doubleQuoteSymbolString+"path"+t.doubleQuoteSymbolString+t.colonSymbolString+t.spaceSymbolString+t.doubleQuoteSymbolString+b+t.doubleQuoteSymbolString+t.commaSymbolString+t.spaceSymbolString+t.doubleQuoteSymbolString+"value"+t.doubleQuoteSymbolString+t.colonSymbolString+t.spaceSymbolString+t.doubleQuoteSymbolString+E+t.doubleQuoteSymbolString+t.commaSymbolString+t.spaceSymbolString+t.doubleQuoteSymbolString+"valueType"+t.doubleQuoteSymbolString+t.colonSymbolString+t.spaceSymbolString+t.doubleQuoteSymbolString+n+t.doubleQuoteSymbolString+t.spaceSymbolString+t.rightCurlyBraceSymbol,m+1!==s.length&&(y+=t.commaSymbolString+t.spaceSymbolString)}y+=t.spaceSymbolString+t.rightSquareBracket;var D=t.leftCurlyBraceSymbol+t.spaceSymbolString+p+v+y+t.spaceSymbolString+t.rightCurlyBraceSymbol;i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items prepared write variables data: "+D,o.a.Debug),JSON.parse(D),i.a.Log("DEBUG: Phoenix Contact Data Access service's Write Items request body: "+D,o.a.Debug),e.open(a.a.httpRequestMethod_PUT,_,!0),this.PrepareXhr(e,d,l,h),!1===u.a.SetContentType(e,d)&&i.a.Log("WARNING: Phoenix Contact Data Access service's Write Items failed to set the content MIME type.",o.a.Warning),e.send(D),f=!0}else i.a.Log("ERROR: Phoenix Contact Data Access service's Write Items failed due to unequal array sizes: items '"+s.length+"' vs. values '"+c.length+"'",o.a.Error),this.SetStatus(r.a.InternalError)}catch(e){i.a.Log("ERROR: PxcDataAccessService.WriteItemsInternal) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError)}return f}},{key:"ApplyProjectCRC",value:function(e,t){var n=!1;return void 0!==e&&(void 0!==this.projectCRC?this.projectCRC!==e&&(i.a.Log("INFORMATION: Phoenix Contact Data Access service detected project changed for command '".concat(t,"' due to different project CRC: '").concat(this.projectCRC,"' vs '").concat(e,"'"),o.a.Information),this.projectCRC=e,n=!0):this.projectCRC=e),n}},{key:"CheckProjectCRC",value:function(e,n){if(this.skipProjectCrcChecks)return i.a.Log("DEBUG: Phoenix Contact Data Access service skipped checking the project CRC for command: "+n,o.a.Debug),!1;var a=t.GetProjectCRC(e,n);return this.ApplyProjectCRC(a,n)}},{key:"HasExtendedStatus",value:function(e,n){var a=!1;if(this.skipExtendedStatusChecks)i.a.Log("DEBUG: Phoenix Contact Data Access service skipped finding the extended status for command: "+n,o.a.Debug);else{try{if(e){var r=JSON.parse(e);a=this.HasExtendedStatusSupport(r,n)}}catch(e){i.a.Log("DEBUG: PxcDataAccessService.HasExtendedStatus) Caught exception '"+e+"' for command: "+n,o.a.Debug)}a||(this.pxcApi===t.pxcApiUrlUnversioned?i.a.Log("DEBUG: Phoenix Contact Data Access service unable to find the extended status for command: "+n,o.a.Debug):i.a.Log("WARNING: Phoenix Contact Data Access service unable to find the extended status for command: "+n,o.a.Warning))}return a}},{key:"HasExtendedStatusSupport",value:function(e,n){return void 0!==t.GetExtendedStatus(e,n)}},{key:"CheckExtendedStatusSupport",value:function(e,n){var s=r.a.InternalError;if(this.skipExtendedStatusChecks)i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed as skipping enabled for command: "+n,o.a.Error);else try{i.a.Log("DEBUG: Phoenix Contact Data Access service's checking extended status for command: "+n,o.a.Debug);var u=t.GetExtendedStatus(e,n);if(void 0!==u&&void 0!==u.details){var c=u.details;switch(n){case a.a.commandReadGroup:case a.a.commandReadVariables:case a.a.commandRegisterGroup:case a.a.commandWriteValues:case a.a.commandWriteVariables:case _.CommandName:1!==c.length&&i.a.Log("WARNING: Phoenix Contact Data Access service's checking of extended status encountered an unexpected number of details: "+c.length,o.a.Warning);for(var l=0;l<c.length;l++){var h=c[l];if(void 0===h||void 0===h.domain||void 0===h.reason){i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to invalid details for command: "+n,o.a.Error);break}var f=h.domain,d=h.reason;switch(i.a.Log("DEBUG: Phoenix Contact Data Access service's checking of extended status received current domain: "+f,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's checking of extended status received current reason: "+d,o.a.Debug),f){case t.projectDomain:switch(d){case"unloaded":n===a.a.commandRegisterGroup?(i.a.Log("ERROR: Phoenix Contact Data Access service's project unavailable and treating as project unloaded error for command: "+n,o.a.Error),s=r.a.ProjectUnloadedError):(i.a.Log("ERROR: Phoenix Contact Data Access service's project unavailable and treating as network timeout error for command: "+n,o.a.Error),s=r.a.NetworkTimeoutError);break;default:i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+f+"' encountered unexpected reason '"+d+"' and treating as internal error for command: "+n,o.a.Error)}break;case t.sessionsDomain:switch(d){case"duplicateSessionID":i.a.Log("ERROR: Phoenix Contact Data Access service's duplicate session ID and treating as session error for command: "+n,o.a.Error),s=r.a.SessionError;break;case"invalidSessionID":i.a.Log("WARNING: Phoenix Contact Data Access service's invalid session ID, but treating as network timeout for command: "+n,o.a.Warning),s=r.a.NetworkTimeoutError,i.a.Log("DEBUG: Phoenix Contact Data Access service cleared session information for command: "+n,o.a.Debug),this.ClearSessionInfo();break;case"disabledSessionID":i.a.Log("WARNING: Phoenix Contact Data Acess service's session ID unavailable due to disabled station for command: ".concat(n,", treating as network timeout and retrying until station is enabled."),o.a.Warning),s=r.a.NetworkTimeoutError;break;case"serviceUnavailable":i.a.Log("ERROR: Phoenix Contact Data Access service's session ID unavailable and treating as session error for command: "+n,o.a.Error),s=r.a.SessionError;break;case"invalidRequest":i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+f+"' encountered invalid request and treating as internal error for command: "+n,o.a.Error);break;default:i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+f+"' encountered unexpected reason '"+d+"' and treating as internal error for command: "+n,o.a.Error)}break;case t.groupsDomain:switch(d){case"invalidGroupID":n===a.a.commandRegisterGroup?(i.a.Log("ERROR: Phoenix Contact Data Access service's invalid group ID and treating as register group error for command: "+n,o.a.Error),s=r.a.RegisterGroupError):(i.a.Log("ERROR: Phoenix Contact Data Access service's invalid group ID and treating as invalid group ID error for command: "+n,o.a.Error),s=r.a.InvalidGroupIDError);break;case"invalidRequest":case"missingGroupID":case"missingPaths":i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+f+"' encountered invalid request and treating as internal error for command: "+n,o.a.Error);break;default:i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+f+"' encountered unexpected reason '"+d+"' and treating as internal error for command: "+n,o.a.Error)}break;case t.varsDomain:switch(d){case"invalidNames":n===a.a.commandRegisterGroup?(i.a.Log("ERROR: Phoenix Contact Data Access service's invalid variable names and treating as register group error for command: "+n,o.a.Error),s=r.a.RegisterGroupError):(i.a.Log("Error: Phoenix Contact Data Access service's invalid variable names and treating as update data error for command: "+n,o.a.Error),s=r.a.UpdateDataError);break;case"invalidRequest":i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+f+"' encountered invalid request and treating as internal error for command: "+n,o.a.Error);break;default:i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+f+"' encountered unexpected reason '"+d+"' and treating as internal error for command: "+n,o.a.Error)}break;default:return void i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to unexpected domain '"+f+"' and treating as internal error for command: "+n,o.a.Error)}}break;default:i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to unexpected command: "+n,o.a.Error)}}else i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed as unable to get extended status for command: "+n,o.a.Error)}catch(e){i.a.Log("ERROR: PxcDataAccessService.CheckExtendedStatusSupport) Caught exception: "+e,o.a.Error),s=r.a.ExceptionError}return i.a.Log("DEBUG: Phoenix Contact Data Access service's checking of extended status resulting data access status: "+s,o.a.Debug),s}},{key:"CheckExtendedStatus",value:function(e,t){try{if(e){var n=JSON.parse(e);return this.CheckExtendedStatusSupport(n,t)}return i.a.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed as unable to get extended status for command: "+t,o.a.Error),r.a.InternalError}catch(e){return i.a.Log("ERROR: PxcDataAccessService.CheckExtendedStatus) Caught exception '"+e+"' for command: "+t,o.a.Error),r.a.ExceptionError}}},{key:"IsApiSupported",value:function(){var e=!1,t=new XMLHttpRequest;try{if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported trying PxC API URL prefix: "+this.pxcApiUrlPrefix,o.a.Debug),t.open(a.a.httpRequestMethod_GET,this.pxcApiUrlPrefix,!1),t.send(),i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported received XHR ready state: "+t.readyState,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported received XHR status: "+t.status,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported received XHR response: "+t.response,o.a.Debug),t.readyState&&t.readyState===a.a.httpRequestReadyState_Done)switch(t.status){case a.a.httpRequestStatus_OK:i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected OK status.",o.a.Debug),this.SetStatus(r.a.OK),e=!0;break;case a.a.httpRequestStatus_Unauthorized:i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected Unauthorized status and treating as internal error.",o.a.Debug),this.SetStatus(r.a.InternalError);break;case a.a.httpRequestStatus_NotFound:i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected Not Found status, but treating as okay.",o.a.Debug),this.SetStatus(r.a.OK);break;case a.a.httpRequestStatus_BadGateway:case a.a.httpRequestStatus_ServiceUnavailable:i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected Bad Gateway / Service Unavailable status.",o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported failed due to API service being unavailable and treating as network timeout.",o.a.Debug),this.SetStatus(r.a.NetworkTimeoutError);break;default:i.a.Log("ERROR: PxcDataAccessService.IsApiSupported) Unexpected XHR status = "+t.status,o.a.Error),this.SetStatus(r.a.InternalError)}else i.a.Log("ERROR: PxcDataAccessService.IsApiSupported) Unexpected XHR ready state: "+t.readyState,o.a.Error),this.SetStatus(r.a.InternalError)}catch(e){"NetworkError"===e.name?(i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported failed due to Network Error exception and treating as network timeout.",o.a.Debug),this.SetStatus(r.a.NetworkTimeoutError)):(i.a.Log("ERROR: PxcDataAccessService.IsApiSupported) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError))}return e}},{key:"UpdateResourceLocations",value:function(e){if(this.dataHostBase=e,this.UpdateApiLocation(e),!1===this.IsApiSupported()){if(this.status===r.a.NetworkTimeoutError)return!1;this.isApiSupported=!1,i.a.Log("DEBUG: Phoenix Contact Data Access service's falling back to legacy, unversioned API.",o.a.Debug),this.pxcApi=t.pxcApiUrlUnversioned,this.UpdateApiLocation(e),i.a.Log("DEBUG: Phoenix Contact Data Access service's alternative, GET request mode enabled for Read Variables as default, POST request unsupported.",o.a.Debug),this.useAltVariablesMode=!0,i.a.Log("DEBUG: Phoenix Contact Data Access service's alternative, local group mode enabled for Register Group as default, server groups unsupported.",o.a.Debug),this.useAltGroupMode=!0,i.a.Log("DEBUG: Phoenix Contact Data Access service's alternative, text format mode enabled for Read Variables & Register Group as default, JSON format unsupported.",o.a.Debug),this.useAltFormatMode=!0,i.a.Log("DEBUG: Phoenix Contact Data Access service's skip session aspects enabled as unsupported.",o.a.Debug),this.skipSessionAspects=!0,i.a.Log("DEBUG: Phoenix Contact Data Access service's skip project CRC checks enabled as unsupported.",o.a.Debug),this.skipProjectCrcChecks=!0,i.a.Log("DEBUG: Phoenix Contact Data Access service's skip extended status checks enabled as unsupported.",o.a.Debug),this.skipExtendedStatusChecks=!0}else this.isApiSupported=!0;return i.a.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported state: "+this.isApiSupported,o.a.Debug),this.UpdateSessionsLocation(),this.UpdateGroupsLocation(),this.UpdateVariablesLocation(),i.a.Log("DEBUG: Phoenix Contact Data Access service's data host base: "+this.dataHostBase,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's PxC API URL prefix: "+this.pxcApiUrlPrefix,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's sessions URL prefix: "+this.sessionsUrlPrefix,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's groups URL prefix: "+this.groupsUrlPrefix,o.a.Debug),i.a.Log("DEBUG: Phoenix Contact Data Access service's vars URL prefix: "+this.varsUrlPrefix,o.a.Debug),!0}},{key:"UpdateApiLocation",value:function(e){this.pxcApiUrlPrefix=this.UpdateLocationSupport(e,this.pxcApi);var t=void 0!==this.pxcApiUrlPrefix;return this.pxcApiUrlPrefix||i.a.Log("ERROR: Phoenix Contact Data Access service unable to update API URL.",o.a.Error),t}},{key:"UpdateSessionsLocation",value:function(){this.sessionsUrlPrefix=this.UpdateLocationSupport(this.pxcApiUrlPrefix,t.sessionsVirtualDirectory);var e=void 0!==this.sessionsUrlPrefix;return e||i.a.Log("ERROR: Phoenix Contact Data Access service unable to update sessions URL prefix.",o.a.Error),e}},{key:"UpdateGroupsLocation",value:function(){this.groupsUrlPrefix=this.UpdateLocationSupport(this.pxcApiUrlPrefix,t.groupsVirtualDirectory);var e=void 0!==this.groupsUrlPrefix;return e||i.a.Log("ERROR: Phoenix Contact Data Access service unable to update groups URL prefix.",o.a.Error),e}},{key:"UpdateVariablesLocation",value:function(){this.varsUrlPrefix=this.UpdateLocationSupport(this.pxcApiUrlPrefix,t.varsVirtualDirectory);var e=void 0!==this.varsUrlPrefix;return e||i.a.Log("ERROR: Phoenix Contact Data Access service unable to update variables URL prefix.",o.a.Error),e}},{key:"UpdateLocationSupport",value:function(e,t){var n=new s.a(e,t);return n.isValid?n.url:(i.a.Log("ERROR: Phoenix Contact Data Access service failed as invalid URL ('"+e+"', '"+t+"'), and treating as internal error.",o.a.Error),void this.SetStatus(r.a.InternalError))}},{key:"QueueCreateSession",value:function(e,t){if(this.IsStationIDAvailable())return void 0===this.sessionID&&this.CreateSession(this.stationID,e,t);i.a.Log("DEBUG: Phoenix Contact Data Access service skipped Create Session as station ID unavailable.",o.a.Debug)}},{key:"IsStationIDAvailable",value:function(){return!this.skipSessionAspects&&t.IsAvailableSupport(this.stationID)}},{key:"IsSessionIDAvailable",value:function(){return t.IsAvailableSupport(this.sessionID)}},{key:"ApplySessionInfo",value:function(e,t,n){if(this._sessionID=e,this._sessionTimeout=t,this._sessionUrl=n,this.IsSessionIDAvailable()){var a=g.PrepareSessionUrl(this.sessionsUrlPrefix,e);void 0!==this.sessionUrl?this.sessionUrl.toUpperCase()!==a.toUpperCase()&&i.a.Log("DEBUG: Phoenix Contact Data Access service's Apply Session Info encountered an unexpected URL '"+this.sessionUrl+"' for session ID: "+this.sessionID,o.a.Debug):this._sessionUrl=a}}},{key:"ClearSessionInfo",value:function(){this.ApplySessionInfo(void 0,void 0,void 0)}},{key:"AddSessionIDQuery",value:function(e){return this.IsSessionIDAvailable()?e+this.nameSessionIDString+t.equalSymbolString+this.sessionID+t.ampersandSymbolString:e}},{key:"CreateSessionIDData",value:function(){return this.IsSessionIDAvailable()?t.doubleQuoteSymbolString+this.nameSessionIDString+t.doubleQuoteSymbolString+t.colonSymbolString+t.spaceSymbolString+t.doubleQuoteSymbolString+this.sessionID+t.doubleQuoteSymbolString+t.commaSymbolString+t.spaceSymbolString:t.emptyString}},{key:"RegisterAlternativeGroup",value:function(e,t,n){var a=!1,s=r.a.Pending,u=void 0;try{this.SetStatus(r.a.Pending),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Group using the alternative, local group mode.",o.a.Debug);var c=this.GetNewLocalGroupIdentifier();-1===this.FindLocalGroup(c)?(this.AddLocalGroup(c,e),s=(u=this.PrepareGroupRegistrationCallbackData(c)).status,a=!0):(i.a.Log("ERROR: Phoenix Contact Data Access service's Register Alternative Group failed for local group '"+c+"' as it already exists.",o.a.Error),s=r.a.InternalError)}catch(e){i.a.Log("ERROR: PxcDataAccessService.RegisterAlternativeGroup) Caught exception: "+e,o.a.Error),s=r.a.ExceptionError}return u||(u=this.PrepareStatusCallbackData(s)),i.a.Log("DEBUG: Phoenix Contact Data Access service's Register Alternative Group prepared local group callback data status: "+u.status,o.a.Debug),n(u),a}},{key:"GetNewLocalGroupIdentifier",value:function(){return String(this.localGroupNumber++)}},{key:"FindServerGroup",value:function(e){return this.FindGroup(e,this.serverGroups)}},{key:"FindLocalGroup",value:function(e){return this.FindGroup(e,this.localGroups)}},{key:"AddServerGroup",value:function(e,t){return this.serverGroups.push(new a.c(e,t)),!0}},{key:"AddLocalGroup",value:function(e,t){this.localGroups.push(new a.b(e,t))}},{key:"RemoveServerGroup",value:function(e){return this.RemoveGroup(e,this.serverGroups)}},{key:"RemoveLocalGroup",value:function(e){return this.RemoveGroup(e,this.localGroups)}},{key:"RemoveGroup",value:function(e,t){return-1!==this.FindGroup(e,t)?(t=t.filter(function(t){return t.id!==e}),!0):(i.a.Log("ERROR: Phoenix Contact Data Access service's Remove Group failed for group '"+e+"' as unable to find it.",o.a.Error),this.SetStatus(r.a.InternalError),!1)}},{key:"FindGroup",value:function(e,t){for(var n=-1,a=!1,r=0;r<t.length&&!a;r++)if(t[r].id===e){n=r,a=!0;break}return n}},{key:"GetGroupVariableNames",value:function(e){var t=this.FindLocalGroup(e);if(-1!==t){i.a.Log("DEBUG: Phoenix Contact Data Access service's Get Group Variable Names found alternative, local group: "+e,o.a.Debug);var n=[];return this.localGroups[t].items.forEach(function(t){void 0!==t.Name?n.push(t.Name):i.a.Log("ERROR: Phoenix Contact Data Access service's Get Group Variable Names failed for local group '"+e+"' as unexpected item name.",o.a.Error)},this),n}i.a.Log("ERROR: Phoenix Contact Data Access service's Get Group Variable Names failed as unable to find local group: "+e,o.a.Error)}},{key:"FindGroupVariableData",value:function(e,t){for(var n=-1,a=!1,r=0;r<this.localGroups[e].items.length&&!a;r++)if(this.localGroups[e].items[r].Name===t){n=r,a=!0;break}return n}},{key:"GetVariablesDataRequest",value:function(e,n,a,r){var s=t.emptyString,c=a||u.a.plainTextMimeType,l=r||t.DetermineVariablePrefix(e,n),h=t.PrepareVariablePrefixData(e,n,c,l),f=t.PrepareVarsRequestData(e,n,c,l);if(void 0!==f)switch(c){case u.a.plainTextMimeType:f=t.pathsString+t.equalSymbolString+f;break;case u.a.jsonMimeType:f=t.doubleQuoteSymbolString+t.pathsString+t.doubleQuoteSymbolString+t.colonSymbolString+t.spaceSymbolString+t.leftSquareBracket+t.spaceSymbolString+f+t.spaceSymbolString+t.rightSquareBracket;break;default:return void i.a.Log("ERROR: Phoenix Contact Data Access Service's "+n+" failed as unexpected MIME type: "+c,o.a.Error)}else i.a.Log("ERROR: Phoenix Contact Data Access Service's "+n+" failed as variables names data unexpectedly missing.",o.a.Error);return s=h+f,i.a.Log("DEBUG: Phoenix Contact Data Access service's "+n+" resulting variables names data: "+s,o.a.Debug),s}},{key:"PrepareVarsCallbackData",value:function(e,t,n,s){var u=r.a.Pending,c=void 0;try{void 0===n&&(n=!0);var l=!1;if(void 0!==s&&(l=!0,i.a.Log("DEBUG: Phoenix Contact Data Access service's Prepare Variables Callback Data supplied group update name '"+s+"', so enabled group update mode.",o.a.Debug)),e){var h=JSON.parse(e);if(this.CheckProjectCRC(h,t))u=r.a.ProjectChanged;else{var f=void 0;if(void 0!==h.variables?f=h.variables:void 0!==h.length&&h.length>0&&(i.a.Log("DEBUG: Phoenix Contact Data Access service's Prepare Variables Callback Data using the unnamed variables array as a workaround.",o.a.Debug),f=h),void 0!==f){for(var _=[],d=0;d<f.length;d++){var p=f[d];if(void 0===p||void 0===p.path||void 0===p.value){i.a.Log("ERROR: Phoenix Contact Data Access service's Prepare Variables Callback Data failed as unexpected variable: "+p,o.a.Error),u=r.a.InternalError,_=void 0;break}var g=p.path,v=p.value;if(l){var y;y=this.useAltGroupMode?this.localGroups:this.serverGroups;var m=this.FindGroup(s,y);if(-1!==m){var b=this.FindGroupVariableData(m,g);if(-1!==b){var E=y[m].items[b];E.Value=v,E.NewData&&_.push(a.a.PrepareVarCallbackData(E.Name,E.Value))}}}else n?_.push(a.a.PrepareVarCallbackData(g,v)):_.push(v)}_&&(c=this.PrepareVarsCallbackDataSupport(_))}else i.a.Log("ERROR: Phoenix Contact Data Access service's Prepare Variables Callback Data failed as missing variables information.",o.a.Error),u=r.a.InternalError}}else i.a.Log("ERROR: Phoenix Contact Data Access service's Prepare Variables Callback Data failed as unexpected response: "+e,o.a.Error),u=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.PrepareVarsCallbackData) Caught exception: "+e,o.a.Error),u=r.a.ExceptionError}return c||(c=this.PrepareStatusCallbackData(u)),c}},{key:"PrepareGroupRequestCallbackData",value:function(e,n,s,u){var c=r.a.Pending,l=void 0;try{void 0===s&&(s=!0);if(void 0!==u&&(!0,i.a.Log("DEBUG: Phoenix Contact Data Access service's Prepare Group Request Callback Data supplied group update name '"+u+"', so enabled group update mode.",o.a.Debug)),this.useAltGroupMode)i.a.Log("DEBUG: Phoenix Contact Data Access service's Prepare Group Request Callback Data using the alternative mode.",o.a.Debug),l=this.PrepareVarsCallbackData(e,n,s,u);else if(i.a.Log("DEBUG: Phoenix Contact Data Access service's Prepare Group Request Callback Data using the standard mode.",o.a.Debug),void 0!==e&&e!==t.emptyString){var h,f=JSON.parse(e);if(this.CheckProjectCRC(f,n))c=r.a.ProjectChanged;else if(void 0!==f.variablePathPrefix&&(h=f.variablePathPrefix),void 0!==f.variables){for(var _=[],d=0;d<f.variables.length;d++){var p=f.variables[d];if(void 0===p||void 0===p.path||void 0===p.value){i.a.Log("ERROR: Phoenix Contact Data Access service's Prepare Group Request Callback Data failed as unexpected variable: "+p,o.a.Error),c=r.a.InternalError,_=void 0;break}var g=h+p.path,v=p.value;s?_.push(a.a.PrepareVarCallbackData(g,v)):_.push(v)}_&&(l=this.PrepareVarsCallbackDataSupport(_))}else i.a.Log("ERROR: Phoenix Contact Data Access service's Prepare Group Request Callback Data failed as missing variables information.",o.a.Error),c=r.a.InternalError}else i.a.Log("ERROR: Phoenix Contact Data Access service's Prepare Group Request Callback Data failed due to unexpected response: "+e,o.a.Error),c=r.a.InternalError}catch(e){i.a.Log("ERROR: PxcDataAccessService.PrepareGroupCallbackData) Caught exception: "+e,o.a.Error),c=r.a.ExceptionError}return l||(l=this.PrepareStatusCallbackData(c)),l}}])&&y(n.prototype,c),l&&y(n,l),t}();D.defaultVariablePrefix_MONAPLUS="ProConOS_eCLR.ResGlobalVars.",D.defaultVariablePrefix_PLCNEXTRev1="Arp.Plc.Eclr/:",D.defaultVariablePrefix_PLCNEXTRev2="Arp.Plc.Eclr/",D.ampersandSymbolString="&",D.colonSymbolString=":",D.commaSymbolString=",",D.leftCurlyBraceSymbol="{",D.rightCurlyBraceSymbol="}",D.leftSquareBracket="[",D.rightSquareBracket="]",D.equalSymbolString="=",D.questionMarkSymbolString="?",D.singleQuoteSymbolString="'",D.doubleQuoteSymbolString='"',D.spaceSymbolString=" ",D.emptyString="",D.pathPrefixString="pathPrefix",D.pathsString="paths",D.valueTypeConstant="Constant",D.valueTypeVariable="Variable",D.pxcApiBaseUrl="_pxc_api/",D.pxcApiUrlUnversioned=D.pxcApiBaseUrl,D.pxcApiUrlLatest=D.pxcApiBaseUrl+"api/",D.pxcApiUrlv1_0=D.pxcApiBaseUrl+"v1.0/",D.pxcApiUrlv1_1=D.pxcApiBaseUrl+"v1.1/",D.projectDomain="project",D.sessionsDomain="sessions",D.groupsDomain="groups",D.varsDomain="variables",D.sessionsVirtualDirectory=D.sessionsDomain+"/",D.groupsVirtualDirectory=D.groupsDomain+"/",D.varsVirtualDirectory=D.varsDomain+"/"},function(e,t,n){"use strict";n(7),n(8),n(33),n(39);var a=n(5),r=n(2),i=n(0),o=n(1);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var l=function(){function e(t,n,a,r,i,o,u){s(this,e),this.debug=!1,this.reconnectInterval=5e3,this.timeoutInterval=1e4,this.forcedClose=!1,this.timedOut=!1,this.protocols=[],this.onopen=function(e){this.log("ReconnectingWebSocket","this.onopen",this.url)},this.onclose=function(e){this.log("ReconnectingWebSocket","this.onclose",this.url)},this.onconnecting=function(){this.log("ReconnectingWebSocket","this.onconnecting",this.url)},this.onmessage=function(e){this.log("ReconnectingWebSocket","this.onmessage",this.url)},this.onerror=function(e){this.log("ReconnectingWebSocket","this.onerror",this.url)},this.log("ReconnectingWebSocket, ctor, url="+t),this.url=t,this.protocols=u,this.readyState=WebSocket.CONNECTING,null!=n&&(this.onopen=n),null!=a&&(this.onclose=a),null!=r&&(this.onconnecting=r),null!=i&&(this.onmessage=i),null!=o&&(this.onerror=o),this.connect(!1)}return c(e,[{key:"connect",value:function(e){var t=this;this.ws=new WebSocket(this.url,this.protocols),this.onconnecting(),this.log("ReconnectingWebSocket, attempt-connect "+this.url);var n=this.ws,a=setTimeout(function(){t.log("ReconnectingWebSocket, connection-timeout "+t.url),t.timedOut=!0,n.close(),t.timedOut=!1},this.timeoutInterval);this.ws.onopen=function(n){clearTimeout(a),t.log("ReconnectingWebSocket, onopen "+t.url),t.readyState=WebSocket.OPEN,e=!1,t.onopen(n)},this.ws.onclose=function(n){clearTimeout(a),t.ws=null,t.forcedClose?(t.readyState=WebSocket.CLOSED,t.onclose(n)):(t.readyState=WebSocket.CONNECTING,t.onconnecting(),e||t.timedOut||(t.log("ReconnectingWebSocket, onclose "+t.url),t.onclose(n)),setTimeout(function(){t.connect(!0)},t.reconnectInterval))},this.ws.onmessage=function(e){t.onmessage(e)},this.ws.onerror=function(e){t.log("ReconnectingWebSocket, onerror "+t.url+e),t.onerror(e)}}},{key:"send",value:function(e){if(this.ws)return this.log("ReconnectingWebSocket, send "+this.url),this.ws.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"}},{key:"close",value:function(){return!!this.ws&&(this.forcedClose=!0,this.ws.close(),!0)}},{key:"refresh",value:function(){return!!this.ws&&(this.ws.close(),!0)}},{key:"log",value:function(t){(this.debug||e.debugAll)&&i.a.Log(t)}}]),e}();l.debugAll=!0;var h=function e(){s(this,e)};h.Read=1,h.Write=2,h.SubscribeDataChanged=3,h.UnSubscribeDataChanged=4,h.LoadAllVariables=5,h.LoadResponse=6,h.ReadResponse=7,h.DataChanged=8;var f=function e(){s(this,e)},_=function(){function e(){s(this,e),this.variables=[],this.variablesMap={}}return c(e,[{key:"Length",value:function(){return this.variables.length}},{key:"GetVariables",value:function(){var e=[];return this.variables.forEach(function(t){var n=new f;n.FullName=t.FullName,n.PathExpression=t.PathExpression,n.Value=t.Value,n.ApplicationTypeCode=t.ApplicationTypeCode,n.VariableAcces=t.VariableAcces,e.push(n)}),e}},{key:"FindVariable",value:function(e){var t=this.variablesMap[e.toUpperCase()];return void 0!==t?t:null}},{key:"Clear",value:function(){this.variablesMap={},this.variables=[]}},{key:"AddVariable",value:function(e,t,n,a,r){var i=new f;return i.FullName=e,i.PathExpression=t,i.Value=n,i.ApplicationTypeCode=a,i.VariableAcces=r,this.variables.push(i),this.variablesMap[e.toUpperCase()]=i,i}}]),e}(),d=function(){function e(t){s(this,e),this.variables=new _;var n="ws://"+t+":"+e.tsVisitPort+"/";this.webSocketClient=new l(n,this.onopen.bind(this),null,null,this.onmessage.bind(this),null,e.serviceName)}return c(e,[{key:"ReadVariables",value:function(e){var t=this,n=[];return e.forEach(function(e){var a=t.variables.FindVariable(e);null!==a?n.push(a.Value):n.push("")}),n}},{key:"WriteVariables",value:function(e){for(var t=[],n=0;n<e.length;n++){var a=this.variables.FindVariable(e[n].name);if(null!=a){var r=new f;r.FullName=a.FullName,r.PathExpression=a.PathExpression,r.Value=e[n].value,r.ApplicationTypeCode=a.ApplicationTypeCode,r.VariableAcces=a.VariableAcces,t.push(r)}}this.write(t)}},{key:"onopen",value:function(e){this.variables.Length()>0?(this.variables.Clear(),this.loadAllVariables()):this.loadAllVariables()}},{key:"onmessage",value:function(e){var t=JSON.parse(e.data);if(i.a.Log("receivedData. length="+t.ProcessDatas.length+", Action="+t.Action),t.Action==h.LoadResponse){i.a.Log("Action.LoadResponse"),this.variables.Clear();for(var n=0;n<t.ProcessDatas.length;n++){var a=t.ProcessDatas[n];this.variables.AddVariable(a.FullName,a.PathExpression,a.Value,a.ApplicationTypeCode,a.VariableAcces)}this.subscribe(this.variables.GetVariables())}else if(t.Action==h.DataChanged){i.a.Log("Action.DataChanged");for(n=0;n<t.ProcessDatas.length;n++){var r=(a=t.ProcessDatas[n]).Value;i.a.Log("variable="+a.FullName+", value="+r);var o=this.variables.FindVariable(a.FullName);null!=o&&(o.Value=a.Value)}}else t.Action==h.UnSubscribeDataChanged?(i.a.Log("Action.UnSubscribeDataChanged"),this.variables.Clear(),this.loadAllVariables()):t.Action==h.SubscribeDataChanged&&i.a.Log("Action.SubscribeDataChanged")}},{key:"fillTransportObject",value:function(e,t){for(var n=[],a=0;a<t.length;a++){var r={PathExpression:t[a].PathExpression};n.push(r)}return{Action:e,ProcessDatas:n}}},{key:"fillTransportObjectWithValue",value:function(e,t){for(var n=[],a=0;a<t.length;a++){var r={PathExpression:t[a].PathExpression,Value:t[a].Value};n.push(r)}return{Action:e,ProcessDatas:n}}},{key:"loadAllVariables",value:function(){var e=this.fillTransportObject(h.LoadAllVariables,[]);this.send(e)}},{key:"subscribe",value:function(e){var t=this.fillTransportObject(h.SubscribeDataChanged,e);i.a.Log("subscribe: action="+t.Action+", length="+t.ProcessDatas.length),this.send(t)}},{key:"unsubscribe",value:function(e){var t=this.fillTransportObject(h.UnSubscribeDataChanged,e);i.a.Log("unsubscribe: action="+t.Action+", length="+t.ProcessDatas.length),this.send(t)}},{key:"write",value:function(e){var t=this.fillTransportObjectWithValue(h.Write,e);this.send(t)}},{key:"send",value:function(e){var t=JSON.stringify(e);i.a.Log("send: jsonString="+t),this.webSocketClient.send(t)}}]),e}();d.serviceName="ProcessVariableServiceProvider",d.tsVisitPort=8181;var p=n(12),g=n(41);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return D});var D=function(e){function t(e,n,a,r){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=m(this,b(t).call(this,n,a,r))).useAltGroupMode=!1,s.serverGroups=[],s.localGroupNumber=0,s.localGroups=[],i.a.Log("DEBUG: Ts Visit Data Access Service's constructing ... ",o.a.Debug);var u=e||g.a.FormatDataUrl(),c=u;s.groupsUrlPrefix=g.a.EnsureUrlTrailingForwardSlash(c+t.groupsVirtualDirectory),i.a.Log("DEBUG: Ts Visit Data Access Service's groups URL prefix: "+s.groupsUrlPrefix,o.a.Debug);var l=u;s.varsUrlPrefix=g.a.EnsureUrlTrailingForwardSlash(l+t.varsVirtualDirectory);var h=window.location.hostname;return s.tsVisitProtocol=new d(h),i.a.Log("DEBUG: Ts Visit Data Access Service's vars URL prefix: "+s.varsUrlPrefix,o.a.Debug),i.a.Log("DEBUG: Ts Visit Data Access Service's constructed.",o.a.Debug),s}var n,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a["a"]),n=t,(s=[{key:"CreateSession",value:function(e,t,n,a){return!1}},{key:"MaintainSession",value:function(e,t,n){return!1}},{key:"ReassignSession",value:function(e,t,n,a,r){return!1}},{key:"DeleteSession",value:function(e,t,n){return!1}},{key:"RegisterGroup",value:function(e,t,n){var a=this;if(this.useAltGroupMode)return this.RegisterAlternativeGroup(t,n);var r=new XMLHttpRequest;n&&"function"==typeof n&&(r.onload=function(e){return a.OnRegisterGroupLoad(e,t,n)});var i=this.RegisterGroupInternal(r,t,n);if(!1===i){var o=this.PrepareStatusCallbackData();n(o)}return i}},{key:"OnRegisterGroupLoad",value:function(e,t,n){var s=!1,u=[],c=void 0;try{var l=e.target;if(l.readyState&&l.readyState===a.a.httpRequestReadyState_Done&&l.status&&l.status===a.a.httpRequestStatus_Created){i.a.Log("DEBUG: Ts Visit Data Access Service's Register Group server group response: "+l.response,o.a.Debug);var h=JSON.parse(l.response);if(void 0!==h&&void 0!==h.id){c=h.id;var f=this.groupsUrlPrefix+c,_=l.getResponseHeader(a.a.httpRequestHeader_Location);void 0!==_?(i.a.Log("DEBUG: Ts Visit Data Access Service's Register Group server group location: "+_,o.a.Debug),_.toUpperCase()!==f.toUpperCase()&&i.a.Log("WARNING: Ts Visit Data Access Service's Register Group encountered an unexpected location '"+_+"' for server group: "+c,o.a.Warning),this.serverGroups.push(new a.c(c,_)),u=this.PrepareGroupRegistrationCallbackData(c),s=!0):i.a.Log("WARNING: Ts Visit Data Access Service's Register Group falling back to local group due to missing location for sever group: "+c,o.a.Warning)}else i.a.Log("WARNING: Ts Visit Data Access Service's Register Group falling back to local group due to unexpected server group response: "+l.response,o.a.Warning)}if(!1===s)return this.RegisterAlternativeGroup(t,n)}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.OnRegisterGroupLoad) Caught exception: "+e,o.a.Error),u=this.PrepareStatusCallbackData(r.a.ExceptionError)}return i.a.Log("DEBUG: Ts Visit Data Access Service's Register Group prepared callback data status: "+u.status,o.a.Debug),n(u),s}},{key:"RegisterGroupInternal",value:function(e,n,s){try{i.a.Log("DEBUG: Ts Visit Data Access Service's registering group.",o.a.Debug);for(var u=t.pathPrefixString,c=t.defaultVariablePrefix,l=0;l<n.length;l++)if(0!==n[l].indexOf(c)){i.a.Log("WARNING: Ts Visit Data Access Service's Register Group encountered an unexpected item variable name: "+n[l],o.a.Warning),c="";break}u+=c;var h=t.pathsString;for(l=0;l<n.length;l++){var f=n[l];""!==c&&0===f.toUpperCase().indexOf(c.toUpperCase())&&(f=f.substr(c.length)),h+=f,l+1<n.length&&(h+=",")}var _=u+"&"+h;return e.open(a.a.httpRequestMethod_POST,this.groupsUrlPrefix,!0),this.PrepareXhr(e,p.a.jsonMimeType,"RegisterGroup",s),!1===p.a.SetContentType(e,p.a.plainTextMimeType)&&i.a.Log("WARNING: Ts Visit Data Access Service's Register Group failed to set the content MIME type.",o.a.Warning),e.send(_),!0}catch(e){return i.a.Log("ERROR: TsVisitDataAccessService.RegisterGroup) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError),!1}}},{key:"ReadGroup",value:function(e,t,n){var a=this,r=new XMLHttpRequest;t&&"function"==typeof t&&(r.onload=function(e){return a.OnReadGroupLoad(e,t,n)});var i=this.ReadGroupInternal(r,e,t,n);if(!1===i){var o=this.PrepareStatusCallbackData();t(o)}return i}},{key:"OnReadGroupLoad",value:function(e,t,n){var s=!1,u=[];try{if((c=e.target).readyState&&c.readyState===a.a.httpRequestReadyState_Done&&c.status&&c.status===a.a.httpRequestStatus_OK){var c=e.target;i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group received OK response: "+c.response,o.a.Debug),u=this.PrepareGroupRequestCallbackData(c.response,n),s=!0}else c.readyState&&c.readyState===a.a.httpRequestReadyState_Done&&c.status&&c.status===a.a.httpRequestStatus_NotFound?(i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group received Not Found response: "+c.response,o.a.Debug),i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group failed due to group not being found and treating as update data error.",o.a.Debug),u=this.PrepareStatusCallbackData(r.a.UpdateDataError)):c.readyState&&c.readyState===a.a.httpRequestReadyState_Done&&c.status&&c.status===a.a.httpRequestStatus_ServiceUnavailable?(i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group received Service Unavailable response: "+c.response,o.a.Debug),i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group failed due to eCLR being unavailable and treating as network timeout.",o.a.Debug),u=this.PrepareStatusCallbackData(r.a.NetworkTimeoutError)):(i.a.Log("ERROR: TsVisitDataAccessService.OnReadGroupLoad) Unexpected XHR state: readyState = '"+c.readyState+"', status = '"+c.status+"'",o.a.Error),u=this.PrepareStatusCallbackData(r.a.InternalError))}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.OnReadGroupLoad) Caught exception: "+e,o.a.Error),u=this.PrepareStatusCallbackData(r.a.ExceptionError)}return i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group prepared callback data status: "+u.status,o.a.Debug),t(u),s}},{key:"ReadGroupInternal",value:function(e,t,n,s){if(this.useAltGroupMode){if(-1!==(c=this.FindLocalGroup(t))){i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group found alternative/local group: "+t,o.a.Debug);var u=[];return this.localGroups[c].items.forEach(function(e){void 0!==e.Name?u.push(e.Name):i.a.Log("ERROR: Ts Visit Data Access Service's Read Group failed for local group '"+t+"' as unexpected item name.",o.a.Error)},this),this.ReadVariablesInternal(e,u,n),!0}return i.a.Log("ERROR: Ts Visit Data Access Service's Read Group failed as unable to find local group: "+t,o.a.Error),this.SetStatus(r.a.InternalError),!1}var c;if(-1===(c=this.FindServerGroup(t)))return i.a.Log("ERROR: Ts Visit Data Access Service's Read Group failed as unable to find server group: "+t,o.a.Error),this.SetStatus(r.a.InternalError),!1;try{i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group found server group: "+t,o.a.Debug);var l=this.serverGroups[c].location;return i.a.Log("DEBUG: Ts Visit Data Access Service's Read Group location: "+l,o.a.Debug),e.open(a.a.httpRequestMethod_GET,l,!0),this.PrepareXhr(e,p.a.jsonMimeType,"ReadGroup",n),e.send(),!0}catch(e){return i.a.Log("ERROR: TsVisitDataAccessService.ReadGroupInternal) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError),!1}}},{key:"UpdateGroup",value:function(e,t){var n=this,a=new XMLHttpRequest;t&&"function"==typeof t&&(a.onload=function(a){return n.OnUpdateGroupLoad(a,t,e)});var r=this.UpdateGroupInternal(a,e,t);if(!1===r){var i=this.PrepareStatusCallbackData();t(i)}return r}},{key:"OnUpdateGroupLoad",value:function(e,t,n){var s=!1,u=[];try{if((c=e.target).readyState&&c.readyState===a.a.httpRequestReadyState_Done&&c.status&&c.status===a.a.httpRequestStatus_OK){var c=e.target;i.a.Log("DEBUG: Ts Visit Data Access Service's Update Group response: "+c.response,o.a.Debug),u=this.PrepareGroupRequestCallbackData(c.response,!0,n),s=!0}else i.a.Log("ERROR: TsVisitDataAccessService.OnUpdateGroupLoad) Unexpected XHR state: readyState = '"+c.readyState+"', status = '"+c.status+"'",o.a.Error),u=this.PrepareStatusCallbackData(r.a.InternalError)}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.OnUpdateGroupLoad) Caught exception: "+e,o.a.Error),u=this.PrepareStatusCallbackData(r.a.ExceptionError)}return i.a.Log("DEBUG: Ts Visit Data Access Service's Update Group prepared callback data status: "+u.status,o.a.Debug),t(u),s}},{key:"UpdateGroupInternal",value:function(e,t,n){try{if(i.a.Log("DEBUG: Ts Visit Data Access Service's updating group: "+name,o.a.Debug),this.useAltGroupMode)return this.ReadGroupInternal(e,t,n,!0);var s=this.FindServerGroup(t);if(-1!==s){var u=this.serverGroups[s].location;return i.a.Log("DEBUG: Ts Visit Data Access Service's Update Group location: "+u,o.a.Debug),e.open(a.a.httpRequestMethod_GET,u,!0),this.PrepareXhr(e,p.a.jsonMimeType,"UpdateGroup",n),e.send(),!0}return i.a.Log("ERROR: Ts Visit Data Access Service's Update Group failed as unable to find server group: "+t,o.a.Error),this.SetStatus(r.a.InternalError),!1}catch(e){return i.a.Log("ERROR: TsVisitDataAccessService.UpdateGroupInternal) Caught exception: "+e,o.a.Error),this.SetStatus(r.a.ExceptionError),!1}}},{key:"UnregisterGroup",value:function(e,t){var n=this;if(this.useAltGroupMode){i.a.Log("DEBUG: Ts Visit Data Access Service's Unregister Group removing alternative/local group: "+e,o.a.Debug),this.SetStatus(r.a.Pending),!0===(s=this.RemoveLocalGroup(e))&&this.SetStatus(r.a.OK);var a=this.PrepareStatusCallbackData();return i.a.Log("DEBUG: Ts Visit Data Access Service's Unregister Group prepared local group callback data status: "+a.status,o.a.Debug),t(a),s}var s,u=new XMLHttpRequest;if(t&&"function"==typeof t&&(u.onload=function(e){return n.OnUnregisterGroupLoad(e,t)}),!1===(s=this.UnregisterGroupInternal(u,e,t))){a=this.PrepareStatusCallbackData();t(a)}return s}},{key:"OnUnregisterGroupLoad",value:function(e,t){var n=!1,s=[];try{if((u=e.target).readyState&&u.readyState===a.a.httpRequestReadyState_Done&&u.status&&u.status===a.a.httpRequestStatus_NoContent){var u=e.target;i.a.Log("DEBUG: Ts Visit Data Access Service's Unregister Group server group response: "+u.response,o.a.Debug),s=this.PrepareStatusCallbackData(r.a.OK),n=!0}else i.a.Log("ERROR: TsVisitDataAccessService.OnUnregisterGroupLoad) Unexpected XHR state: readyState = '"+u.readyState+"', status = '"+u.status+"'",o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError)}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.OnUnregisterGroupLoad) Caught exception: "+e,o.a.Error),s=this.PrepareStatusCallbackData(r.a.ExceptionError)}return i.a.Log("DEBUG: Ts Visit Data Access Service's Unregister Group prepared server group callback data status: "+s.status,o.a.Debug),t(s),n}},{key:"UnregisterGroupInternal",value:function(e,t,n){try{var s=this.FindServerGroup(t);if(-1!==s){i.a.Log("DEBUG: Ts Visit Data Access Service's Unregistering Group deleting server group: "+t,o.a.Debug);var u=this.serverGroups[s].location;return i.a.Log("DEBUG: Ts Visit Data Access Service's Unregister Group location: "+u,o.a.Debug),e.open(a.a.httpRequestMethod_DELETE,u,!0),this.PrepareXhr(e,p.a.jsonMimeType,"UnregisterGroup",n),e.send(),!0}return i.a.Log("ERROR: Ts Visit Data Access Service's Unregister Group failed for group '"+t+"' as unable to find its server group.",o.a.Error),this.PrepareStatusCallbackData(r.a.InternalError),!1}catch(e){return i.a.Log("ERROR: TsVisitDataAccessService.UnregisterGroup) Caught exception: "+e,o.a.Error),this.PrepareStatusCallbackData(r.a.ExceptionError),!1}}},{key:"ReadVariables",value:function(e,t){var n=this,a=new XMLHttpRequest;t&&"function"==typeof t&&(a.onload=function(a){return n.OnReadVariablesLoad(a,e,t)});var r=this.ReadVariablesInternal(a,e,t);if(!1===r){var i=this.PrepareStatusCallbackData();t(i)}return r}},{key:"OnReadVariablesLoad",value:function(e,t,n){var s=!1,u=[];try{var c=e.target;c.readyState&&c.readyState===a.a.httpRequestReadyState_Done&&c.status&&c.status===a.a.httpRequestStatus_OK?(u=this.PrepareVarsCallbackData(c.response),s=!0):(i.a.Log("ERROR: TsVisitDataAccessService.OnReadVariablesLoad) Unexpected XHR state: readyState = '"+c.readyState+"', status = '"+c.status+"'",o.a.Error),u=this.PrepareStatusCallbackData(r.a.InternalError))}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.OnReadVariablesLoad) Caught exception: "+e,o.a.Error),u=this.PrepareStatusCallbackData(r.a.ExceptionError)}return i.a.Log("DEBUG: Ts Visit Data Access Service's Read Variables prepared callback data status: "+u.status,o.a.Debug),n(u),s}},{key:"ReadVariablesInternal",value:function(e,n,a){try{for(var s=t.defaultVariablePrefix,u=0;u<n.length;u++)if(0!==n[u].indexOf(s)){i.a.Log("WARNING: Ts Visit Data Access Service's Read Variables encountered an unexpected variable name: "+n[u],o.a.Warning),s="";break}var c=[];for(u=0;u<n.length;u++){var l=n[u];""!==s&&0===l.toUpperCase().indexOf(s.toUpperCase())&&(l=l.substr(s.length)),i.a.Log("DEBUG: Ts Visit Data Access Service's Read Variables item: "+l,o.a.Debug),c.push(l)}var h=this.tsVisitProtocol.ReadVariables(c),f=[];for(u=0;u<n.length;u++){var _={name:s+c[u],value:h[u]};f.push(_)}return a({status:r.a.OK,variables:f}),!0}catch(e){return i.a.Log("ERROR: TsVisitDataAccessService.ReadVariablesInternal) Caught exception: "+e,o.a.Error),this.PrepareStatusCallbackData(r.a.ExceptionError),!1}}},{key:"WriteValues",value:function(e,n,a){var r=this,i=new XMLHttpRequest;a&&"function"==typeof a&&(i.onload=function(e){return r.OnWriteItemsLoad(e,a)});var o=this.WriteItemsInternal(i,t.valueTypeConstant,e,n,a);if(!1===o){var s=this.PrepareStatusCallbackData();a(s)}return o}},{key:"WriteVariables",value:function(e,n,a){var r=this,i=new XMLHttpRequest;a&&"function"==typeof a&&(i.onload=function(e){return r.OnWriteItemsLoad(e,a)});var o=this.WriteItemsInternal(i,t.valueTypeVariable,e,n,a);if(!1===o){var s=this.PrepareStatusCallbackData();a(s)}return o}},{key:"OnWriteItemsLoad",value:function(e,t){var n=!1,s=[];try{if((u=e.target).readyState&&u.readyState===a.a.httpRequestReadyState_Done&&u.status&&u.status===a.a.httpRequestStatus_OK){var u=e.target;i.a.Log("DEBUG: Ts Visit Data Access Service's Write Items response: "+u.response,o.a.Debug),s=this.PrepareStatusCallbackData(r.a.OK),n=!0}else i.a.Log("ERROR: TsVisitDataAccessService.OnWriteItemsLoad) Unexpected XHR state: readyState = '"+u.readyState+"', status = '"+u.status+"'",o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError)}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.OnWriteItemsLoad) Caught exception: "+e,o.a.Error),s=this.PrepareStatusCallbackData(r.a.ExceptionError)}return i.a.Log("DEBUG: Ts Visit Data Access Service's Write Items prepared callback data status: "+s.status,o.a.Debug),t(s),n}},{key:"WriteItemsInternal",value:function(e,n,a,s,u){try{if(a.length!=s.length)return i.a.Log("ERROR: Ts Visit Data Access Service's Write Items failed due to unequal array sizes: items '"+a.length+"' vs. values '"+s.length+"'",o.a.Error),this.PrepareStatusCallbackData(r.a.InternalError),!1;for(var c=t.defaultVariablePrefix,l=0;l<a.length;l++)if(0!==a[l].indexOf(c)){i.a.Log("WARNING: Ts Visit Data Access Service's Write Items encountered an unexpected variable name: "+a[l],o.a.Warning),c="";break}'"'+c+'"';var h=[];for(l=0;l<a.length&&a.length==s.length;l++){var f=a[l];""!==c&&0===f.toUpperCase().indexOf(c.toUpperCase())&&(f=f.substr(c.length)),i.a.Log("Ts Visit Data Access Service's Write Items writing value '"+s[l]+"' to item: "+f,o.a.Debug),h.push({name:f,value:s[l]})}this.tsVisitProtocol.WriteVariables(h);var _=[];for(l=0;l<h.length;l++){var d={name:c+h[l].name,value:h[l].value};_.push(d)}var p={status:r.a.OK,variables:_};return setTimeout(function(){u(p)},1e3),!0}catch(e){return i.a.Log("ERROR: TsVisitDataAccessService.WriteItemsInternal) Caught exception: "+e,o.a.Error),this.PrepareStatusCallbackData(r.a.ExceptionError),!1}}},{key:"RegisterAlternativeGroup",value:function(e,t){var n=!1,s=[];try{this.SetStatus(r.a.Pending),this.useAltGroupMode=!0,i.a.Log("DEBUG: Ts Visit Data Access Service's alternative/local group mode enabled for Register Group as server groups unsupported.",o.a.Debug);var u=this.GetNewLocalGroupIdentifier();if(-1===this.FindLocalGroup(u)){this.localGroups.push(new a.b(u,e));s=this.PrepareGroupRegistrationCallbackData(u);n=!0}else{i.a.Log("ERROR: Ts Visit Data Access Service's Register Alternative Group failed for local group '"+u+"' as it already exists.",o.a.Error);s=this.PrepareStatusCallbackData(r.a.InternalError)}}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.RegisterAlternativeGroup) Caught exception: "+e,o.a.Error);s=this.PrepareStatusCallbackData(r.a.ExceptionError)}return i.a.Log("DEBUG: Ts Visit Data Access Service's Register Alternative Group prepared local group callback data status: "+s.status,o.a.Debug),t(s),n}},{key:"GetNewLocalGroupIdentifier",value:function(){return String(this.localGroupNumber++)}},{key:"FindServerGroup",value:function(e){return this.FindGroup(e,this.serverGroups)}},{key:"FindLocalGroup",value:function(e){return this.FindGroup(e,this.localGroups)}},{key:"RemoveServerGroup",value:function(e){return this.RemoveGroup(e,this.serverGroups)}},{key:"RemoveLocalGroup",value:function(e){return this.RemoveGroup(e,this.localGroups)}},{key:"RemoveGroup",value:function(e,t){return-1!==this.FindGroup(e,t)?(t=t.filter(function(t){return t.id!==e}),!0):(i.a.Log("ERROR: Ts Visit Data Access Service's Remove Group failed for group '"+e+"' as unable to find it.",o.a.Error),this.PrepareStatusCallbackData(r.a.InternalError),!1)}},{key:"FindGroup",value:function(e,t){for(var n=-1,a=!1,r=0;r<t.length&&!a;r++)if(t[r].id===e){n=r,a=!0;break}return n}},{key:"FindGroupVariableData",value:function(e,t){for(var n=-1,a=!1,r=0;r<this.localGroups[e].items.length&&!a;r++)if(this.localGroups[e].items[r].Name===t){n=r,a=!0;break}return n}},{key:"PrepareVarsCallbackData",value:function(e,t,n){var s=[];try{void 0===t&&(t=!0);var u=!1;if(void 0!==n&&(u=!0,i.a.Log("DEBUG: Ts Visit Data Access Service's Prepare Variables Callback Data supplied group update name '"+n+"', so enabled group update mode.",o.a.Debug)),void 0!==e&&""!==e){var c=JSON.parse(e);if(void 0!==c){var l=void 0;if(void 0!==c.variables?l=c.variables:void 0!==c.length&&c.length>0&&(i.a.Log("DEBUG: Ts Visit Data Access Service's Prepare Variables Callback Data using the unnamed variables array as a workaround.",o.a.Debug),l=c),void 0!==l){for(var h=[],f=0;f<l.length;f++){var _=l[f];if(void 0===_||void 0===_.path||void 0===_.value)return i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as unexpected variable: "+_,o.a.Error),this.PrepareStatusCallbackData(r.a.InternalError);var d=_.path,p=_.value;if(u){var g;g=this.useAltGroupMode?this.localGroups:this.serverGroups;var v=this.FindGroup(n,g);if(-1!==v){var y=this.FindGroupVariableData(v,d);if(-1!==y){var m=g[v].items[y];m.Value=p,m.NewData&&h.push(a.a.PrepareVarCallbackData(m.Name,m.Value))}}}else t?h.push(a.a.PrepareVarCallbackData(d,p)):h.push(p)}s=this.PrepareVarsCallbackDataSupport(h)}else i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as missing variables information.",o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError)}else i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as unexpected response.",o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError)}else i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as missing response information.",o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError)}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.PrepareVarsCallbackData) Caught exception: "+e,o.a.Error),s=this.PrepareStatusCallbackData(r.a.ExceptionError)}return s}},{key:"PrepareGroupRequestCallbackData",value:function(e,t,n){var s=[];try{void 0===t&&(t=!0);if(void 0!==n&&(!0,i.a.Log("DEBUG: Ts Visit Data Access Service's Prepare Group Request Callback Data supplied group update name '"+n+"', so enabled group update mode.",o.a.Debug)),this.useAltGroupMode)i.a.Log("DEBUG: Ts Visit Data Access Service's Prepare Group Request Callback Data using the alternative mode.",o.a.Debug),s=this.PrepareVarsCallbackData(e,t,n);else if(i.a.Log("DEBUG: Ts Visit Data Access Service's Prepare Group Request Callback Data using the standard mode.",o.a.Debug),void 0!==e&&""!==e){var u,c=JSON.parse(e);if(void 0!==c)if(void 0!==c.variablePathPrefix&&(u=c.variablePathPrefix),void 0!==c.variables){for(var l=[],h=0;h<c.variables.length;h++){var f=c.variables[h];if(void 0===f||void 0===f.path||void 0===f.value)return i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed as unexpected variable: "+f,o.a.Error),this.PrepareStatusCallbackData(r.a.InternalError);var _=u+f.path,d=f.value;t?l.push(a.a.PrepareVarCallbackData(_,d)):l.push(d)}s=this.PrepareVarsCallbackDataSupport(l)}else i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed as missing variables information.",o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError);else i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed due to unexpected response: "+e,o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError)}else i.a.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed due to missing response.",o.a.Error),s=this.PrepareStatusCallbackData(r.a.InternalError)}catch(e){i.a.Log("ERROR: TsVisitDataAccessService.PrepareGroupCallbackData) Caught exception: "+e,o.a.Error),s=this.PrepareStatusCallbackData(r.a.ExceptionError)}return s}}])&&y(n.prototype,s),u&&y(n,u),t}();D.defaultVariablePrefix="ProConOS_eCLR.ResGlobalVars.",D.pathPrefixString="pathPrefix=",D.pathsString="paths=",D.valueTypeConstant="Constant",D.valueTypeVariable="Variable",D.groupsVirtualDirectory="/_pxc_api/groups/",D.varsVirtualDirectory="/_pxc_api/variables/"},function(e,t,n){"use strict";n(84),n(39);var a=n(19),r=n(4),i=n(28),o=(n(7),n(8),n(45));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this,{},null)))._type="RootNode",e.uid=e.id="@Root",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o["a"]),t}(),f=n(21),_=n(34),d=n(23),p=n(9),g=n(29);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}n.d(t,"a",function(){return E});var b=function(){function e(){v(this,e),this.pageNavigationObjects=[];for(var t=0;t<4;t++)this.pageNavigationObjects[t]=[]}return m(e,[{key:"AddNavListenerForDirection",value:function(e,t){t!=a.a.Home&&this.pageNavigationObjects[t].push(e)}},{key:"EnableNavListenersForDirectionIfSet",value:function(e,t,n){var a=null!=t&&""!=t;null!=n?this.pageNavigationObjects[e].forEach(function(e,t,r){e.isEnabled.value=a&&n.shouldEnableNode(e)}):this.pageNavigationObjects[e].forEach(function(e,t,n){e.isEnabled.value=a})}}]),e}(),E=function(){function e(t){v(this,e),this.name="",this.size=new r.a(1,1),this.borderWidth=0,this.borderColor=new i.a,this.marginColor=new i.a,this.rootNode=new h,this.pageLeft="",this.pageRight="",this.pageUp="",this.pageDown="",this.dynamics=[],this.isSmoothingEnabled=!1,this.pageBackObjects=[],this.pageForwardObjects=[],this.pageNavigationSubscribers=new b,this.location=new r.a,this.scale=new r.a(1,1),this.screenMatrix=new f.a,this.screenBounds=new _.a,this.showOptions=g.b.None,this.serverVariables=new d.a,this.screenVariables=new d.a,this.visibilityAccessControlNodes=[],this.enabledAccessControlNodes=[],this._elementNodeMap=new d.a,this._boundsPoint=new r.a,this._zoomToFitSize=new r.a,this.parent=t}return m(e,[{key:"computeSize",value:function(){var e=new _.a;!function e(t,n){t instanceof p.a&&n.union(t.bounds);for(var a=0,r=t.nodes.length;a<r;a++)e(t.nodes[a],n)}(this.rootNode,e),this.size.x=e.width,this.size.y=e.height}},{key:"updateNavigationState",value:function(e,t){var n=this;this.pageBackObjects.forEach(function(a,r,i){n.enableNodeWithSecurityCheck(a,0!=(e&g.a.AllowBack),t)}),this.pageForwardObjects.forEach(function(a,r,i){n.enableNodeWithSecurityCheck(a,0!=(e&g.a.AllowForward),t)}),this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.a.Left,this.pageLeft,t),this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.a.Right,this.pageRight,t),this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.a.Up,this.pageUp,t),this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.a.Down,this.pageDown,t)}},{key:"enableNodeWithSecurityCheck",value:function(e,t,n){t&&null!=n&&(t=n.shouldEnableNode(e)),e.isEnabled.value=t}},{key:"getElements",value:function(){for(var e=new Array(this._elementNodeMap.values.length),t=0,n=this._elementNodeMap.values.length;t<n;t++){var a=this._elementNodeMap.values[t];e[t]=a[1]}return e}},{key:"addHtmlElement",value:function(e){var t=e[0];e[1].setAttribute("id",t.uid),this._elementNodeMap.add(t.uid,e)}},{key:"getNodeForElement",value:function(e){var t=this._elementNodeMap.getValue(e.id);return null!==t?t[0]:null}},{key:"getElementForNode",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;null!==n;){var a=this._elementNodeMap.getValue(n.uid);if(null!==a)return a[1];n=t?n.parent:null}return null}},{key:"getVisualNodeCount",value:function(){var e=0;return function t(n){n instanceof p.a&&e++;for(var a=0;a<n.nodes.length;a++)t(n.nodes[a])}(this.rootNode),e}},{key:"computeScreenMatrix",value:function(e){var t=this.screenMatrix;t.identity(),t.postMultiply(e),t.translate(this.location.x,this.location.y),t.scale(this.scale.x,this.scale.y),this.computeScreenBounds()}},{key:"computeScreenBounds",value:function(){var e=this.screenBounds;e.reset();var t=this.screenMatrix,n=this._boundsPoint;t.transformXY(0,0,n),e.addXY(n.x,n.y),t.transformXY(this.size.x,this.size.y,n),e.addXY(n.x,n.y)}},{key:"scalePage",value:function(t,n,a,r){var i=this.size.x*e.maxPageScale,o=this.size.x;r&&(this.resetZoomToFitSize(n,a),o=this._zoomToFitSize.x);var s=this.size.x*t;s<o?s=o:s>i&&(s=i),this.scale.x=this.scale.y=s/this.size.x}},{key:"translatePage",value:function(e,t,n,a){var r=this.size.x*this.scale.x,i=this.size.y*this.scale.y,o=0,s=0;s=i<a?o=(a-i)/2:a-i,t>o?t=o:t<s&&(t=s);var u=0,c=0;c=r<n?u=(n-r)/2:n-r,e>u?e=u:e<c&&(e=c),this.location.x=e,this.location.y=t}},{key:"centerOnCanvas",value:function(e,t,n){var a=this.size.x,r=this.size.y;n&&(this.resetZoomToFitSize(e,t),a=this._zoomToFitSize.x,r=this._zoomToFitSize.y),this.location.x=.5*e-.5*a,this.location.y=.5*t-.5*r,this.scale.x=this.scale.y=a/this.size.x}},{key:"centerOnPage",value:function(e){var t=e.size.x*e.scale.x,n=e.size.y*e.scale.y;this.scale.x=e.scale.x,this.scale.y=e.scale.y;var a=this.size.x*this.scale.x,r=this.size.y*this.scale.y;this.location.x=e.location.x+.5*(t-a),this.location.y=e.location.y+.5*(n-r)}},{key:"resetZoomToFitSize",value:function(e,t){var n=this.size.x,a=this.size.y,r=this.size.x/this.size.y;e/t>r?(n=t*r,a=t):(n=e,a=e/r),this._zoomToFitSize.x=n,this._zoomToFitSize.y=a}},{key:"GetPageForDirection",value:function(e){switch(e){case a.a.Left:return this.pageLeft;case a.a.Right:return this.pageRight;case a.a.Up:return this.pageUp;case a.a.Down:return this.pageDown}}},{key:"SetPageForDirection",value:function(e,t){switch(e){case a.a.Left:this.pageLeft=t;break;case a.a.Right:this.pageRight=t;break;case a.a.Up:this.pageUp=t;break;case a.a.Down:this.pageDown=t}}}]),e}();E.maxPageScale=5},function(e,t,n){var a=n(66),r=n(52),i=function(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{(a=n(160)(Function.call,n(121).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){var a=n(113);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},function(e,t,n){var a=n(94),r=n(95),i=n(165);e.exports=function(e){return function(t,n,o){var s,u=a(t),c=r(u.length),l=i(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var a=n(67),r=n(83),i=n(58),o=n(184),s="["+o+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(e,t,n){var r={},s=i(function(){return!!o[e]()||"​"!="​"[e]()}),u=r[e]=s?t(h):o[e];n&&(r[n]=u),a(a.P+a.F*s,"String",r)},h=l.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=l},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var a=n(59),r=n(52),i=n(116);e.exports=n(55)?Object.defineProperties:function(e,t){r(e);for(var n,o=i(t),s=o.length,u=0;s>u;)a.f(e,n=o[u++],t[n]);return e}},function(e,t,n){var a=n(54).document;e.exports=a&&a.documentElement},function(e,t,n){var a=n(52),r=n(161),i=n(47)("species");e.exports=function(e,t){var n,o=a(e).constructor;return void 0===o||null==(n=a(o)[i])?t:r(n)}},function(e,t,n){var a=n(125),r=n(83);e.exports=function(e){return function(t,n){var i,o,s=String(r(t)),u=a(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):i:e?s.slice(u,u+2):o-56320+(i-55296<<10)+65536}}},function(e,t,n){var a=n(113),r=n(47)("toStringTag"),i="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:i?a(t):"Object"==(o=a(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){"use strict";var a=n(153);n(67)({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var a=n(67),r=n(95),i=n(193),o="".endsWith;a(a.P+a.F*n(194)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,a=r(t.length),s=void 0===n?a:Math.min(r(n),a),u=String(e);return o?o.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){var a=n(151),r=n(83);e.exports=function(e,t,n){if(a(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var a=n(47)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){n(55)&&"g"!=/./g.flags&&n(59).f(RegExp.prototype,"flags",{configurable:!0,get:n(128)})},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var a=n(126),r=n(67),i=n(75),o=n(74),s=n(157),u=n(198),c=n(158),l=n(168),h=n(47)("iterator"),f=!([].keys&&"next"in[].keys()),_=function(){return this};e.exports=function(e,t,n,d,p,g,v){u(n,t,d);var y,m,b,E=function(e){if(!f&&e in w)return w[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},D=t+" Iterator",S="values"==p,P=!1,w=e.prototype,C=w[h]||w["@@iterator"]||p&&w[p],O=C||E(p),R=p?S?E("entries"):O:void 0,k="Array"==t&&w.entries||C;if(k&&(b=l(k.call(new e)))!==Object.prototype&&b.next&&(c(b,D,!0),a||"function"==typeof b[h]||o(b,h,_)),S&&C&&"values"!==C.name&&(P=!0,O=function(){return C.call(this)}),a&&!v||!f&&!P&&w[h]||o(w,h,O),s[t]=O,s[D]=_,p)if(y={values:S?O:E("values"),keys:g?O:E("keys"),entries:R},v)for(m in y)m in w||i(w,m,y[m]);else r(r.P+r.F*(f||P),t,y);return y}},function(e,t,n){"use strict";var a=n(150),r=n(122),i=n(158),o={};n(74)(o,n(47)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=a(o,{next:r(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var a=n(115)("meta"),r=n(66),i=n(65),o=n(59).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(58)(function(){return u(Object.preventExtensions({}))}),l=function(e){o(e,a,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:a,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,a)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[a].i},getWeak:function(e,t){if(!i(e,a)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[a].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!i(e,a)&&l(e),e}}},function(e,t,n){var a=n(116),r=n(171),i=n(146);e.exports=function(e){var t=a(e),n=r.f;if(n)for(var o,s=n(e),u=i.f,c=0;s.length>c;)u.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,n){var a=n(113);e.exports=Array.isArray||function(e){return"Array"==a(e)}},function(e,t,n){var a=n(94),r=n(124).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(a(e))}},function(e,t,n){var a=n(54),r=n(159),i=n(59).f,o=n(124).f,s=n(151),u=n(128),c=a.RegExp,l=c,h=c.prototype,f=/a/g,_=/a/g,d=new c(f)!==f;if(n(55)&&(!d||n(58)(function(){return _[n(47)("match")]=!1,c(f)!=f||c(_)==_||"/a/i"!=c(f,"i")}))){c=function(e,t){var n=this instanceof c,a=s(e),i=void 0===t;return!n&&a&&e.constructor===c&&i?e:r(d?new l(a&&!i?e.source:e,t):l((a=e instanceof c)?e.source:e,a&&i?u.call(e):t),n?this:h,c)};for(var p=function(e){e in c||i(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},g=o(l),v=0;g.length>v;)p(g[v++]);h.constructor=c,c.prototype=h,n(75)(a,"RegExp",c)}n(204)("RegExp")},function(e,t,n){"use strict";var a=n(54),r=n(59),i=n(55),o=n(47)("species");e.exports=function(e){var t=a[e];i&&t&&!t[o]&&r.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var a=n(130),r=n(165),i=n(95);e.exports=function(e){for(var t=a(this),n=i(t.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,c=void 0===u?n:r(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";n(156)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){var a=n(130),r=n(116);n(208)("keys",function(){return function(e){return r(a(e))}})},function(e,t,n){var a=n(67),r=n(114),i=n(58);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),a(a.S+a.F*i(function(){n(1)}),"Object",o)}},function(e,t,n){"use strict";n(156)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n.r(t);n(82),n(96),n(166),n(154);var a=n(131),r=(n(7),n(8),n(22),n(42));function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"frontCanvas",get:function(){return this._frontCanvas}},{key:"backCanvas",get:function(){return this._backCanvas}}]),o(e,[{key:"changeCursor",value:function(e){switch(e){case r.a.Pointer:this.frontCanvas.style.cursor="pointer";break;case r.a.Default:default:this.frontCanvas.style.cursor="default"}}}]),e}();function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getSubElementById",value:function(e,t){for(var n=0;n<e.childElementCount;n++){var a=e.children[n];if(a.id==t)return a}return null}}],(n=null)&&u(t.prototype,n),a&&u(t,a),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,f(t).call(this)))._surfaceElement=window.document.getElementById("canvasArea"),e._frontCanvas=c.getSubElementById(e._surfaceElement,"frontCanvas"),e._backCanvas=document.createElement("canvas"),e._modalOverlay=window.document.getElementById("modalOverlay"),e._preloader=window.document.getElementById("preloader"),e._noConnection=window.document.getElementById("noConnection"),e._retryCounter=window.document.getElementById("retryCounter"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,s),d(t,[{key:"surfaceElement",get:function(){return this._surfaceElement}}]),d(t,[{key:"hideAllOverlays",value:function(){this._preloader.style.visibility="hidden",this._modalOverlay.style.visibility="hidden",this._noConnection.style.visibility="hidden"}},{key:"showPreloader",value:function(){this._modalOverlay.style.visibility="visible",this._preloader.style.visibility="visible",this._noConnection.style.visibility="hidden"}},{key:"showNoDataConnection",value:function(e){this._modalOverlay.style.visibility="visible",this._preloader.style.visibility="hidden",this._noConnection.style.visibility="visible",this._retryCounter.textContent=e.toString()}},{key:"updateRetryCounter",value:function(e){this._retryCounter.textContent=e.toString()}},{key:"isActive",value:function(){return"hidden"!=this._preloader.style.visibility||"hidden"!=this._modalOverlay.style.visibility||"hidden"!=this._noConnection.style.visibility}},{key:"showStatusMessage",value:function(e){this.hideAllOverlays(),this.frontCanvas.style.visibility="hidden";var t=document.getElementById("pageCaption");t.textContent=ErrorStrings.pageCaption,(t=document.getElementById("messageCaption")).textContent=e,window.document.getElementById("errorMessage").style.visibility="visible"}}]),t}(),v=n(4),y=(n(56),n(3)),m=n(45);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){function t(e,n){var a,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(a=!(i=E(t).call(this,e,n))||"object"!==b(i)&&"function"!=typeof i?S(r):i)._type="SymbolInstance";var o=1,s=1,u=0,c=0;void 0!==e.ScaleTransform&&(o=y.a.getNumber(e.ScaleTransform.ScaleX,1),s=y.a.getNumber(e.ScaleTransform.ScaleY,1),u=y.a.getNumber(e.ScaleTransform.CenterX,0),c=y.a.getNumber(e.ScaleTransform.CenterY,0));var l=new m.a({},S(S(a)));return l.id="surrogate"+Math.floor(1e3*Math.random()).toString(),l.scale.value=new v.a(o,s),l.location.value=new v.a(u,c),a.nodes.push(l),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,m["a"]),t}(),w=n(98),C=n(9),O=n(18),R=n(100),k=n(111),x=n(36);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function A(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(e,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,M(t).call(this,[t.createSubPath(e)],n,!0,a,0,r))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,R["a"]),n=t,r=[{key:"createSubPath",value:function(e){var t=.5*e.width,n=.5*e.height,a=e.left+t,r=e.top+n,i=a-t,o=a+t,s=r-n,u=r+n,c=.551784*e.width*.5,l=.551784*e.height*.5,h=new k.a;h.isClosed=!0,h.segments=[],h.start=new v.a(a,s);var f=new x.a(new v.a(h.start.x,h.start.y),new v.a(a+c,s),new v.a(o,r-l),new v.a(o,r));return h.segments.push(f),f=new x.a(new v.a(f.end.x,f.end.y),new v.a(o,r+l),new v.a(a+c,u),new v.a(a,u)),h.segments.push(f),f=new x.a(new v.a(f.end.x,f.end.y),new v.a(a-c,u),new v.a(i,r+l),new v.a(i,r)),h.segments.push(f),f=new x.a(new v.a(f.end.x,f.end.y),new v.a(i,r-l),new v.a(a-c,s),new v.a(a,s)),h.segments.push(f),h}}],(a=null)&&L(n.prototype,a),r&&L(n,r),t}(),U=n(15);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e,t,n){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K,q=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=N(this,G(t).call(this,e,n,a,r)))._type="Ellipse";var o=y.a.getRect(a.Geometry.Rect),s=!O.a.IsNoFill(a.Fill);return i.path=new B(o,s,i.lineWidth,!0),i.fillStyle.value=O.a.createFillStyle(n,a.Fill,o),i}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,C["a"]),n=t,(a=[{key:"initVisual",value:function(e,n){return W(G(t.prototype),"initVisual",this).call(this,e,n),this.hasHitRegion||this.path.freeStrokeApproximation(),this}},{key:"draw",value:function(e,t){e.save();var n=this.screenMatrix;e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.beginPath(),U.a.define(e,this.path),null!==this.fillStyle.value&&(e.fillStyle=this.fillStyle.value,e.transformFill()),this.lineWidth>0&&(e.strokeStyle=this.strokeStyle.value,e.lineCap="square",e.lineWidth=this.lineWidth,e.setLineDash(this.dashSegments),e.lineDashOffset=this.dashOffset,e.stroke()),e.restore()}}])&&F(n.prototype,a),r&&F(n,r),t}(),H=(n(39),n(85),n(11)),z=n(31),X=n(88);!function(e){e[e.None=0]="None",e[e.DrawBoundingBoxes=1]="DrawBoundingBoxes",e[e.DoubleBufferedHost=2]="DoubleBufferedHost",e[e.DrawFps=4]="DrawFps",e[e.DrawButtonShadows=8]="DrawButtonShadows",e[e.Optimize=16]="Optimize",e[e.DrawForeground=32]="DrawForeground",e[e.DrawBackground=64]="DrawBackground",e[e.DrawDebugSelection=128]="DrawDebugSelection",e[e.DrawAnimationPoints=256]="DrawAnimationPoints",e[e.DrawHitRegions=512]="DrawHitRegions",e[e.ZoomToFit=1024]="ZoomToFit",e[e.DrawHighDpi=2048]="DrawHighDpi",e[e.DrawDialogDimmer=4096]="DrawDialogDimmer",e[e.DrawDialogShadows=8192]="DrawDialogShadows"}(K||(K={}));var Y=n(137),Q=n(139),Z=n(77),J=n(14),$=n(62);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ae(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e,t,n){return(re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ie(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=ae(this,ie(t).call(this,e,n,a,r))).solver=null,i._startArrowSize=z.a.None,i._endArrowSize=z.a.None,i.dragData=null,i._type="Path",i.loadArrowSizes(a);var o=i.lineWidth,s=i.loadSubPaths(a.Geometry);return i.path=new R.a(s,!O.a.IsNoFill(a.Fill),!1,o,C.a.defaultPathMiterLimit,!0,i._startArrowSize,i._endArrowSize),i.fillStyle.value=O.a.createFillStyle(n,a.Fill,i.path.fillBounds),i}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,C["a"]),n=t,(a=[{key:"initVisual",value:function(e,n){re(ie(t.prototype),"initVisual",this).call(this,e,n);var a=this.strokeWidth;return a!=this.lineWidth&&(this.path.updateStrokeWidth(a,C.a.defaultPathMiterLimit,this._startArrowSize,this._endArrowSize),this.fillStyle.value=O.a.createFillStyle(e,n.Fill,this.path.fillBounds)),this.hasHitRegion&&a>0||this.path.freeStrokeApproximation(),this}},{key:"needPathStrokeApproximation",value:function(){return!0}},{key:"loadSubPaths",value:function(e){var t=[];if(null!=e.SubPaths)for(var n=0;n<e.SubPaths.length;n++)t.push(new k.a(e.SubPaths[n]));return t}},{key:"loadArrowSizes",value:function(e){this._startArrowSize=z.a.None,this._endArrowSize=z.a.None,"None"!=y.a.getString(e.StartLineEndType,C.a.defaultLineEndType)&&(this._startArrowSize=this.parseArrowSize(y.a.getString(e.StartLineEndSize,C.a.defaultLineEndSize))),"None"!=y.a.getString(e.EndLineEndType,C.a.defaultLineEndType)&&(this._endArrowSize=this.parseArrowSize(y.a.getString(e.EndLineEndSize,C.a.defaultLineEndSize)))}},{key:"parseArrowSize",value:function(e){switch(e){case"Small":return z.a.Small;case"Large":return z.a.Large}return z.a.Medium}},{key:"draw",value:function(e,t){var n=this.screenMatrix;e.save(),e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.beginPath(),U.a.define(e,this.path),null!==this.fillStyle.value&&(e.fillStyle=this.fillStyle.value,e.transformFill()),this.lineWidth>0&&(e.strokeStyle=this.strokeStyle.value,e.lineWidth=this.lineWidth,e.lineCap="square",e.lineJoin="miter",e.miterLimit=C.a.defaultPathMiterLimit,e.setLineDash(this.dashSegments),e.lineDashOffset=this.dashOffset,e.stroke()),this._startArrowSize==z.a.None&&this._endArrowSize==z.a.None||(e.beginPath(),U.a.defineArrowHeads(e,this.path),e.fillStyle=this.strokeStyle.value,e.fill()),t&K.DrawAnimationPoints&&null!==this.solver&&this.drawChords(e),e.restore()}},{key:"drawChords",value:function(e){e.save(),e.setTransform(1,0,0,1,0,0);var t=new v.a,n=new v.a;e.lineWidth=1,e.strokeStyle="rgba(255, 255, 0, 1.0)";for(var a=0;a<this.solver.curveSolvers.length;a++){var r=this.solver.curveSolvers[a];if(r instanceof Y.a){e.beginPath();var i=this.solver.curveSolvers[a].curve;t.x=i.controlPoints[0].x,t.y=i.controlPoints[0].y,this.screenMatrix.transformPoint(t,n),e.moveTo(n.x,n.y),t.x=i.controlPoints[1].x,t.y=i.controlPoints[1].y,this.screenMatrix.transformPoint(t,n),e.lineTo(n.x,n.y),e.stroke()}else if(r instanceof Q.a){var o=this.solver.curveSolvers[a].curve;o.interpolate(0,t),this.screenMatrix.transformPoint(t,n),e.beginPath(),e.moveTo(n.x,n.y);for(var s=1;s<=r.distances.length;s++)o.interpolate(s/r.distances.length,t),this.screenMatrix.transformPoint(t,n),e.lineTo(n.x,n.y);e.stroke(),o.interpolate(0,t),this.screenMatrix.transformPoint(t,n),e.beginPath(),e.rect(n.x-2,n.y-2,4,4);for(s=1;s<=r.distances.length;s++)o.interpolate(s/r.distances.length,t),this.screenMatrix.transformPoint(t,n),e.rect(n.x-2,n.y-2,4,4);e.fillStyle="rgba(255, 0, 255, 1.0)",e.fill()}}e.restore()}},{key:"implBeginDrag",value:function(e,n,a){return"ThumbPath"===this.id?te(this.parent.nodes.filter(function(e){return e instanceof $.a}).map(function(e){return e}),1)[0].implBeginDrag(e,n,a):re(ie(t.prototype),"implBeginDrag",this).call(this,e,n,a)}},{key:"implDrag",value:function(e,n,a){return"ThumbPath"===this.id?te(this.parent.nodes.filter(function(e){return e instanceof $.a}).map(function(e){return e}),1)[0].implDrag(e,n,a):re(ie(t.prototype),"implDrag",this).call(this,e,n,a)}},{key:"implEndDrag",value:function(e,n,a){return"ThumbPath"===this.id?te(this.parent.nodes.filter(function(e){return e instanceof $.a}).map(function(e){return e}),1)[0].implEndDrag(e,n,a):re(ie(t.prototype),"implEndDrag",this).call(this,e,n,a)}},{key:"onPointerDown",value:function(e){if(e.source!==this)return!0;if(null!==this.getAction(function(e){return e instanceof X.a})){var n=[];this.getFollowers(this,n);for(var a=0;a<n.length;a++)n[a].onBeginDrag(e.x,e.y),n[a].onEndDrag(e.x,e.y);return!0}return re(ie(t.prototype),"onPointerDown",this).call(this,e)}},{key:"onPointerUp",value:function(e){return e.source!==this||re(ie(t.prototype),"onPointerUp",this).call(this,e)}},{key:"onPointerTap",value:function(e){return e.source!==this||re(ie(t.prototype),"onPointerTap",this).call(this,e)}},{key:"onPointerOver",value:function(e){if(e.source!==this)return!0;if(this.hasActions(!1)){var t=this.getAction(function(e){return e.gesture===J.a.Click});return this.isEnabled.value&&null!==t&&null!==H.a.CursorChanged&&H.a.CursorChanged(this,r.a.Pointer),!0}return!1}},{key:"onPointerOut",value:function(e){return e.source!==this||re(ie(t.prototype),"onPointerOut",this).call(this,e)}},{key:"getFollowers",value:function(e,t){for(var n=0;n<e.nodes.length;n++){var a=e.nodes[n];null!==a.getDynamic(function(e){return e instanceof Z.a})?t.push(a):this.getFollowers(a,t)}}},{key:"drawDragData",value:function(e){e.setTransform(this.screenMatrix.m11,this.screenMatrix.m12,this.screenMatrix.m21,this.screenMatrix.m22,this.screenMatrix.dx,this.screenMatrix.dy),null!==this.dragData&&(e.lineWidth=1,e.strokeStyle="green",e.moveTo(this.dragData.dragPoint.x,this.dragData.dragPoint.y),e.lineTo(this.dragData.closestPoint.x,this.dragData.closestPoint.y),e.stroke())}},{key:"strokeWidth",get:function(){var e=this.lineWidth,t=this.getAction(function(e){return e instanceof X.a});return null!==t&&t.hitRegionWidth>this.lineWidth&&(e=t.hitRegionWidth),e}}])&&ne(n.prototype,a),i&&ne(n,i),t}(),ue=n(13),ce=n(37);function le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var he=function(){function e(t,n,a){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledCanvas=void 0,this._area=n,this._scaling=a,this._imageElement=window.document.createElement("img"),this._imageElement.onload=function(e){r.calcBlitRectangles(),r._isLoaded=!0,null!==i&&i()},this._isLoaded=!1,this._imageElement.src=t}var t,n,a;return t=e,(n=[{key:"createDisableCanvas",value:function(){var e=window.document.createElement("canvas");e.width=this._destRect.width,e.height=this._destRect.height;var t=e.getContext("2d");t.drawImage(this._imageElement,this._sourceRect.left,this._sourceRect.top,this._sourceRect.width,this._sourceRect.height,0,0,e.width,e.height);var n=null;try{n=t.getImageData(0,0,e.width,e.height)}catch(e){return null}for(var a=n.width,r=n.height,i=n.data,o=0;o<r;o++)for(var s=o*a*4,u=0;u<a;u++,s+=4){var c=.21*i[s]+.72*i[s+1]+.07*i[s+2];c=32893/98685*(c-128)+128,c+=60,c=Math.max(0,Math.min(c,255)),i[s]=c,i[s+1]=c,i[s+2]=c}return t.putImageData(n,0,0),e}},{key:"draw",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._isLoaded)if(e.beginPath(),t){var n=this._sourceRect.left>this._imageElement.width?this._imageElement.width-1:this._sourceRect.left,a=this._sourceRect.top>this._imageElement.height?this._imageElement.height-1:this._sourceRect.top,r=n+this._sourceRect.width>=this._imageElement.width?this._imageElement.width-n:this._sourceRect.width,i=a+this._sourceRect.height>=this._imageElement.height?this._imageElement.height-a:this._sourceRect.height;r>0&&i>0&&e.drawImage(this._imageElement,n,a,r,i,this._destRect.left,this._destRect.top,this._destRect.width,this._destRect.height)}else null!=this.disabledCanvas&&e.drawImage(this.disabledCanvas,0,0,this._disabledCanvas.width,this._disabledCanvas.height,this._destRect.left,this._destRect.top,this._destRect.width,this._destRect.height)}},{key:"calcBlitRectangles",value:function(){switch(this._scaling){case ce.b.Stretch:this._sourceRect=new ue.a(0,0,this._imageElement.width,this._imageElement.height),this._destRect=new ue.a(0,0,this._area.x,this._area.y);break;case ce.b.Fit:var e,t;(r=this._area.x/this._area.y)>=(i=this._imageElement.width/this._imageElement.height)?(t=this._area.y,e=this._area.y*i):(t=this._area.x/i,e=this._area.x);var n=.5*this._area.x-.5*e,a=.5*this._area.y-.5*t;this._sourceRect=new ue.a(0,0,this._imageElement.width,this._imageElement.height),this._destRect=new ue.a(n,a,n+e,a+t);break;case ce.b.Fill:var r,i;(r=this._area.x/this._area.y)>=(i=this._imageElement.width/this._imageElement.height)?(u=this._imageElement.width,c=this._imageElement.width/r):(u=this._imageElement.height*r,c=this._imageElement.height);var o=.5*this._imageElement.width-.5*u,s=.5*this._imageElement.height-.5*c;this._sourceRect=new ue.a(o,s,o+u,s+c),this._destRect=new ue.a(0,0,this._area.x,this._area.y);break;case ce.b.Center:var u=Math.min(this._imageElement.width,this._area.x),c=Math.min(this._imageElement.height,this._area.y);o=.5*this._imageElement.width-.5*u,s=.5*this._imageElement.height-.5*c;this._sourceRect=new ue.a(o,s,o+u,s+c);n=.5*this._area.x-.5*u,a=.5*this._area.y-.5*c;this._destRect=new ue.a(n,a,n+u,a+c)}}},{key:"imageElement",get:function(){return this._imageElement}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"disabledCanvas",get:function(){return void 0===this._disabledCanvas&&(this._disabledCanvas=this.createDisableCanvas()),this._disabledCanvas}}])&&le(t.prototype,n),a&&le(t,a),e}(),fe=n(25),_e=n(20);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ye(e,t,n){return t&&ve(e.prototype,t),n&&ve(e,n),e}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=pe(this,ge(t).call(this,e,n,a,r)))._type="Image";var o=y.a.getRect(a.Geometry.Rect);i.path=new fe.a(o,!0),i.fillStyle.value=O.a.createFillStyle(n,a.Fill,o);var s=_e.a.getResourceUrl(a.Image),u=y.a.getImageScaling(a.ImageScaling);return i._imageRegion=new he(s,new v.a(o.width,o.height),u,function(){return i.resetAnimationWatchDog()}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,C["a"]),ye(t,[{key:"imageRegion",get:function(){return this._imageRegion}}]),ye(t,[{key:"draw",value:function(e,t){var n=this.screenMatrix;e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.save(),e.beginPath(),U.a.define(e,this.path),e.clip();var a=this.path.fillBounds;e.translate(a.left,a.top),this._imageRegion.draw(e),e.restore()}}]),t}();function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(e,n,a,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=De(this,Se(t).call(this,e,n,a,r)))._type="Line",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,se),t}(),Ce=(n(206),n(21)),Oe=n(10);function Re(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ke=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._horizontalAlignment=Oe.a.Center,this._verticalAlignment=Oe.c.Middle,this._textDirection=Oe.b.LeftToRight,this._fontColor=null,this._textPosition=new v.a(0,0),this._text="",this._textLines=[],this._area=t,this._font=n,this._textHeight=n.size,this.horizontalAlignment=Oe.a.Center,this.verticalAlignment=Oe.c.Middle}var t,n,a;return t=e,a=[{key:"convertToHorizontalAlignmentString",value:function(e){switch(e){case Oe.a.Left:return"left";case Oe.a.Right:return"right";case Oe.a.Center:default:return"center"}}},{key:"convertToVerticalAlignmentString",value:function(e){switch(e){case Oe.c.Top:return"top";case Oe.c.Bottom:return"bottom";case Oe.c.Middle:default:return"middle"}}},{key:"measureTextLine",value:function(e,t,n,a){e.save(),e.font=n.toString();var r=e.measureText(t).width,i=n.size;if(a.left=0,a.top=0,a.right=r,a.bottom=i,r<1||i<1)e.restore();else{if(void 0!==e.getImageData){if(e.canvas.width<r||e.canvas.height<i)return void e.restore();e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,i),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.fillText(t,.5*r,.5*i);for(var o=e.getImageData(0,0,r,i),s=!1,u=0;u<i&&!s;u++)for(var c=0;c<r&&!s;c++){var l=4*(c+u*r);if(0!==o.data[l+3]){a.top=u,s=!0;break}}s=!1;for(u=i-1;u>=0&&!s;u--)for(c=0;c<r&&!s;c++){l=4*(c+u*r);if(0!==o.data[l+3]){a.bottom=u,s=!0;break}}}e.restore()}}}],(n=[{key:"draw",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t!==this._text&&this.parseText(t),e.save(),e.textBaseline=this._verticalAlignmentString,e.textAlign=this._horizontalAlignmentString,e.font=this._font.toString(),e.fillStyle=n?this.fontFillStyle.value:C.a.disabledLineColor;for(var a=this._textPosition.x,r=this._textPosition.y,i=0;i<this._textLines.length;i++){0==this._textAngle?e.fillText(this._textLines[i],a,r):(e.translate(a,r),e.rotate(this._textAngle),e.fillText(this._textLines[i],0,0),e.rotate(-this._textAngle),e.translate(-a,-r));var o=this._font.size*this._font.lineSpacing;switch(this.textDirection){case Oe.b.LeftToRight:r+=o;break;case Oe.b.TopToBottom:a-=o;break;case Oe.b.BottomToTop:a+=o}}e.restore()}},{key:"parseText",value:function(e){null==e||null==e?e="":"string"!=typeof e&&(e=String(e)),this._textLines=e.split("\n");var t,n,a,r=(this._textLines.length-1)*this._textHeight*this._font.lineSpacing;switch(this.textDirection){case Oe.b.LeftToRight:switch(t=0,this.horizontalAlignment){case Oe.a.Left:n=0;break;case Oe.a.Right:n=this._area.x;break;case Oe.a.Center:n=.5*this._area.x}switch(this.verticalAlignment){case Oe.c.Top:a=0;break;case Oe.c.Bottom:a=this._area.y-r;break;case Oe.c.Middle:a=.5*(this._area.y-r)}break;case Oe.b.TopToBottom:switch(t=.5*Math.PI,this.horizontalAlignment){case Oe.a.Left:a=0;break;case Oe.a.Right:a=this._area.y;break;case Oe.a.Center:a=.5*this._area.y}switch(this.verticalAlignment){case Oe.c.Top:n=this._area.x;break;case Oe.c.Bottom:n=r;break;case Oe.c.Middle:n=.5*(this._area.x+r)}break;case Oe.b.BottomToTop:switch(t=3*Math.PI*.5,this.horizontalAlignment){case Oe.a.Left:a=this._area.y;break;case Oe.a.Right:a=0;break;case Oe.a.Center:a=.5*this._area.y}switch(this.verticalAlignment){case Oe.c.Top:n=0;break;case Oe.c.Bottom:n=this._area.x-r;break;case Oe.c.Middle:n=.5*(this._area.x-r)}}this._text=e,this._textAngle=t,this._textPosition.x=n,this._textPosition.y=a}},{key:"horizontalAlignment",get:function(){return this._horizontalAlignment},set:function(t){this._horizontalAlignment=t,this._horizontalAlignmentString=e.convertToHorizontalAlignmentString(t)}},{key:"verticalAlignment",get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment=t,this._verticalAlignmentString=e.convertToVerticalAlignmentString(t)}},{key:"textDirection",get:function(){return this._textDirection},set:function(e){this._textDirection=e}},{key:"textHeight",get:function(){return this._textHeight}},{key:"fontFillStyle",get:function(){return this._fontColor},set:function(e){this._fontColor=e}},{key:"font",get:function(){return this._font}}])&&Re(t.prototype,n),a&&Re(t,a),e}(),xe=n(140);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ae(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ue=function e(t){Be(this,e),this.length=y.a.getNumber(t.Length),this.width=y.a.getNumber(t.Width),this.offset=y.a.getNumber(t.Offset)},je=function e(t){Be(this,e),this.referenceRect=new ue.a,this.anchor=y.a.getString(t.Anchor),this.pathSide=y.a.getString(t.PathSide),this.offset=y.a.getNumber(t.Offset)},Fe=function e(){Be(this,e),this.start=new v.a,this.end=new v.a},Ne=function e(){Be(this,e),this.matrix=new Ce.a},We=function(e){function t(e,n,a,r){var i;return Be(this,t),(i=Ae(this,Me(t).call(this,e,n,a,r)))._tickCount=0,i._majorTicks=[],i._minorTicks=[],i._labels=[],i._majorTickWidth=1,i._minorTickWidth=1,i._type="GaugeScale",n.font=i.font.toString(),i.createScale(n,a),i}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,se),n=t,(a=[{key:"createScale",value:function(e,t){var n=y.a.getNumber(t.GaugeScaleSettings.MinValue),a=y.a.getNumber(t.GaugeScaleSettings.MaxValue),r=y.a.getNumber(t.GaugeScaleSettings.MajorTicks.Interval),i=y.a.getNumber(t.GaugeScaleSettings.MinorTicks.Count),o=new Ue(t.GaugeScaleSettings.MajorTicks.Geometry),s=new Ue(t.GaugeScaleSettings.MinorTicks.Geometry);this._labelSettings=new je(t.GaugeScaleSettings.Labels),ke.measureTextLine(e,"0",this.font,this._labelSettings.referenceRect),this._tickCount=(a-n)/(r/(i+1));for(var u=new xe.a(this.path),c=new v.a,l=new v.a,h=new v.a,f=0,_=this.tickCount;f<=_;f++){var d=new Fe,p=f%(i+1)==0,g=f/this.tickCount;u.evaluate(g,c,l),h.x=-l.y,h.y=l.x;var m=p?o.length:s.length,b=-.5*m;if(b+=p?o.offset:s.offset,d.start.x=c.x+b*h.x,d.start.y=c.y+b*h.y,d.end.x=d.start.x+m*h.x,d.end.y=d.start.y+m*h.y,p){var E=Math.round(n+this._majorTicks.length*r),D=this.createLabel(e,E,c,l,h);this._labels.push(D),this._majorTicks.push(d)}else this._minorTicks.push(d)}this._minorTickWidth=s.width,this._majorTickWidth=o.width}},{key:"createLabel",value:function(e,t,n,a,r){var i=new Ne;i.text=t.toFixed(0),i.width=e.measureText(i.text).width,i.matrix.identity(),i.matrix.translate(n.x,n.y);var o=0;switch("Horizontal"!==this._labelSettings.anchor&&((o=Math.atan2(a.y,a.x))<0&&(o+=2*Math.PI),i.matrix.rotate(o)),this._labelSettings.anchor){case"Left":case"Top":case"Right":case"Bottom":"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(e,i,this._labelSettings.anchor):this.transformRightSideLabel(e,i,this._labelSettings.anchor);break;case"TopOrBottom":o>=.5*Math.PI&&o<1.5*Math.PI?"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(e,i,"Top"):this.transformRightSideLabel(e,i,"Bottom"):"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(e,i,"Bottom"):this.transformRightSideLabel(e,i,"Top");break;case"LeftOrRight":o>=0&&o<Math.PI?"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(e,i,"Left"):this.transformRightSideLabel(e,i,"Right"):"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(e,i,"Right"):this.transformRightSideLabel(e,i,"Left");break;default:case"Horizontal":this.transformHorizontalLabel(e,i,r)}return i}},{key:"transformRightSideLabel",value:function(e,t,n){var a=.5*t.width,r=.5*this._labelSettings.referenceRect.height,i=t.matrix;switch(i.translate(0,this._labelSettings.offset),n){case"Left":i.translate(0,a),i.rotate(.5*Math.PI);break;case"Top":i.translate(0,r),i.rotate(0);break;case"Right":i.translate(0,a),i.rotate(.5*-Math.PI);break;case"Bottom":i.translate(0,r),i.rotate(Math.PI)}}},{key:"transformLeftSideLabel",value:function(e,t,n){var a=-.5*t.width,r=-.5*this._labelSettings.referenceRect.height,i=t.matrix;switch(i.translate(0,this._labelSettings.offset),n){case"Left":i.translate(0,a),i.rotate(.5*-Math.PI);break;case"Top":i.translate(0,r),i.rotate(-Math.PI);break;case"Right":i.translate(0,a),i.rotate(.5*Math.PI);break;case"Bottom":i.translate(0,r),i.rotate(0)}}},{key:"transformHorizontalLabel",value:function(e,t,n){var a=t.width,r=this._labelSettings.referenceRect.height,i=new v.a(n.x,n.y);"Right"==this._labelSettings.pathSide&&i.scale(-1,-1);var o,s,u=new v.a(.5*a,.5*r),c=Math.sqrt(a*a*.25+r*r*.25),l=new v.a(u.x+c*i.x,u.y+c*i.y);l.x<=0?(s=new v.a(0,0),o=new v.a(0,1)):l.x>=a?(s=new v.a(a,0),o=new v.a(0,1)):l.y<=0?(s=new v.a(0,0),o=new v.a(1,0)):(s=new v.a(0,r),o=new v.a(1,0));var h=new Ce.a(o.x,i.x,o.y,i.y),f=new v.a(l.x-s.x,l.y-s.y),_=new v.a;Ce.a.solve(h,f,_);var d=0;if(!isNaN(_.x)&&!isNaN(_.y)){var p=new v.a(s.x+_.x*o.x,s.y+_.y*o.y);d+=v.a.distance(u,p)}t.matrix.translate(-i.x*d,-i.y*d),t.matrix.translate(n.x*this._labelSettings.offset,n.y*this._labelSettings.offset)}},{key:"draw",value:function(e,t){e.save(),e.strokeStyle=this.strokeStyle.value;var n=this.screenMatrix;if(e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.beginPath(),U.a.define(e,this.path),this.lineWidth>0&&(e.lineWidth=this.lineWidth,e.lineCap="square",e.lineJoin="miter",e.miterLimit=C.a.defaultPathMiterLimit,e.setLineDash(this.dashSegments),e.lineDashOffset=this.dashOffset,e.stroke()),e.lineDashOffset=0,e.setLineDash([]),this._majorTickWidth>0){e.beginPath(),e.lineCap="butt",e.lineWidth=this._majorTickWidth;for(var a=0,r=this._majorTicks.length;a<r;a++){var i=this._majorTicks[a];e.moveTo(i.start.x,i.start.y),e.lineTo(i.end.x,i.end.y)}e.stroke()}if(this._minorTickWidth>0){e.beginPath(),e.lineWidth=this._minorTickWidth;for(a=0,r=this._minorTicks.length;a<r;a++){i=this._minorTicks[a];e.moveTo(i.start.x,i.start.y),e.lineTo(i.end.x,i.end.y)}e.stroke()}e.beginPath(),e.font=this.font.toString(),e.fillStyle=this.fontFillStyle.value,e.textAlign="center",e.textBaseline="middle",e.save();for(a=0,r=this._labels.length;a<r;a++){var o=this._labels[a],s=o.matrix;e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),e.fillText(o.text,0,0)}e.restore(),t&K.DrawAnimationPoints&&null!==this.solver&&this.drawChords(e),e.restore()}},{key:"tickCount",get:function(){return this._tickCount}}])&&Le(n.prototype,a),r&&Le(n,r),t}(),Ge=n(40);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ke(this,qe(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,Ge["a"]),t}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qe(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $e=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Qe(this,Ze(t).call(this,e,n,a,r)))._type="TextLabel",i.text=new ze(y.a.getString(a.Text,null)),i.text.value=y.a.getString(a.Text,null),i.text.valueChanged=function(e){i.resetAnimationWatchDog()};var o=y.a.getRect(a.Geometry.Rect);i.path=new fe.a(o,!0,null,i.lineWidth,C.a.defaultRectangleMiterLimit,!0),i.fillStyle.value=O.a.createFillStyle(n,a.Fill,i.path.fillBounds);var s=i.lineWidth,u=Math.max(0,o.width-s),c=Math.max(0,o.height-s),l=.5*s;return i._clipRect=new ue.a(l,l,l+u,l+c),i._clipRect.translate(o.left,o.top),i._textRegion=new ke(new v.a(u,c),i.font),i._textRegion.fontFillStyle=i.fontFillStyle,i._textRegion.horizontalAlignment=y.a.getHorizontalAlignment(a.HorizontalTextAlignment,Oe.a.Left),i._textRegion.verticalAlignment=y.a.getVerticalAlignment(a.VerticalTextAlignment),i._textRegion.textDirection=y.a.getTextDirection(a.TextDirection,Oe.b.LeftToRight),i}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,C["a"]),n=t,r=[{key:"drawLabel",value:function(e,t,n,a,r,i){e.save(),e.beginPath(),e.rect(n.left,n.top,n.width,n.height),null!==t.fillStyle.value&&(e.fillStyle=t.fillStyle.value,e.transformFill()),t.lineWidth>0&&(e.lineJoin="miter",e.lineCap="square",e.miterLimit=2,e.strokeStyle=t.strokeStyle.value,e.lineWidth=t.lineWidth,e.setLineDash(t.dashSegments),e.lineDashOffset=t.dashOffset,e.stroke()),e.beginPath(),e.rect(a.left,a.top,a.width,a.height),e.clip(),e.translate(a.left,a.top),r.draw(e,i),e.restore()}}],(a=[{key:"draw",value:function(e,n){var a=this.screenMatrix;e.setTransform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),t.drawLabel(e,this,this.path.fillBounds,this._clipRect,this._textRegion,this.text.value)}}])&&Ye(n.prototype,a),r&&Ye(n,r),t}(),et=(n(33),n(16)),tt=n(87),nt=n(63),at=n(26),rt=n(17),it=n(49),ot=n(44);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ct(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e,t,n){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ht(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _t=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=ct(this,ht(t).call(this,e,n,a,r))).textWhenDown=new ze(null),i.buttonValue=new tt.a(!1),i.fillWhenDownStyle=new Ge.a(null),i._textRect=new ue.a,i._imageRect=new ue.a,i._isMouseDown=!1,i._isMouseOver=!1,i._isLatching=!1,i._isLatched=!1,i._gradient=null,i._type="Button",i.initGeometry(n,a);var o=i.path.fillBounds;i.initFillStyle(n,a,o),i.initImage(a,o.width,o.height,i._imageRect),i.initText(n,a,o.width,o.height,i._imageRect,i._textRect),i._imageRect.translate(o.left,o.top),i._textRect.translate(o.left,o.top),i._isLatching=y.a.getBoolean(a.IsLatching),i._valueWhenPressed=y.a.getBoolean(a.ValueWhenPressed,!0),i._isLatching&&(i._isLatched=!i._valueWhenPressed),null!==y.a.getString(a.Variable,null)&&nt.a.appendNew(a);var s=function(e){i.resetAnimationWatchDog()};return i.text.valueChanged=s,i.textWhenDown.valueChanged=s,i.fillWhenDownStyle.valueChanged=s,i.buttonValue.valueChanged=function(e){i.onButtonValueChanged(e)},i}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,C["a"]),n=t,i=[{key:"getImageAreaUnits",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.a.Pixels;if(null==e)return t;switch(e){case"Percent":return ce.a.Percent;case"Pixels":default:return ce.a.Pixels}}}],(a=[{key:"initGeometry",value:function(e,t){y.a.getSize(t.Size);var n=y.a.getSize(t.CornerRadii);this.guiStyle===at.b.Glossy&&(this.lineWidth=1);var a=y.a.getRect(t.Geometry.Rect);if(this.path=new fe.a(a,!0,n,this.lineWidth,C.a.defaultRectangleMiterLimit,!0),this.guiStyle===at.b.Glossy){var r=C.a.defaultShadowOffset.x+C.a.defaultShadowBlur,i=C.a.defaultShadowOffset.y+C.a.defaultShadowBlur;this._buttonBounds=this.path.hitBounds.clone(),this._buttonBounds.addXY(this._buttonBounds.right+r,this._buttonBounds.bottom+i)}else this._buttonBounds=this.path.hitBounds;var o=y.a.getNumber(t.Margin);a.left+=o,a.top+=o,a.right-=o,a.bottom-=o,this._marginPath=new fe.a(a,!0,new v.a(n.x-o,n.y-o))}},{key:"initFillStyle",value:function(e,t,n){this.fillStyle.value=O.a.createFillStyle(e,t.Fill,n),void 0!==t.FillWhenDown&&(this.fillWhenDownStyle.value=O.a.createFillStyle(e,t.FillWhenDown,n)),this.guiStyle===at.b.Glossy&&this.createGradient(e,this.path.fillBounds)}},{key:"initImage",value:function(e,n,a,r){var i=this;if(null!=e.Image){var o=y.a.getSize(e.ImageArea),s=y.a.getNumber(e.Margin);t.getImageAreaUnits(e.ImageAreaWidthUnits)===ce.a.Percent&&(o.x=o.x/100*(n-2*s-this.lineWidth)),t.getImageAreaUnits(e.ImageAreaHeightUnits)===ce.a.Percent&&(o.y=o.y/100*(a-2*s-this.lineWidth));var u=.5*this.lineWidth,c=new v.a;switch(y.a.getPlacement(e.ImagePlacement)){case et.b.Left:c.x=s+u,c.y=.5*(a-o.y);break;case et.b.Right:c.x=n-s-o.x-u,c.y=.5*(a-o.y);break;case et.b.Top:c.x=.5*(n-o.x),c.y=s+u;break;case et.b.Bottom:c.x=.5*(n-o.x),c.y=a-s-o.y-u;break;case et.b.Center:default:c.x=.5*(n-o.x),c.y=.5*(a-o.y)}r.left=c.x,r.top=c.y,r.right=c.x+o.x,r.bottom=c.y+o.y;var l=_e.a.getResourceUrl(e.Image),h=y.a.getImageScaling(e.ImageScaling);this._imageRegion=new he(l,o,h,function(){return i.resetAnimationWatchDog()})}}},{key:"initText",value:function(e,t,n,a,r,i){var o=new v.a,s=new v.a,u=y.a.getNumber(t.Margin),c=y.a.getPlacement(t.ImagePlacement),l=.5*this.lineWidth;switch(s.x=u+l,s.y=u+l,c){case et.b.Left:r.width>0&&(s.x=r.left+r.width+u);break;case et.b.Top:r.height>0&&(s.y=r.top+r.height+u)}switch(o.x=n-2*u-this.lineWidth,o.y=a-2*u-this.lineWidth,c){case et.b.Left:case et.b.Right:r.width>0&&(o.x-=r.width+u);break;case et.b.Top:case et.b.Bottom:r.height>0&&(o.y-=r.height+u)}o.x=Math.max(o.x,0),o.y=Math.max(o.y,0),i.left=s.x,i.top=s.y,i.right=s.x+o.x,i.bottom=s.y+o.y,this._textRegion=new ke(o,this.font),this._textRegion.fontFillStyle=this.fontFillStyle,this._textRegion.horizontalAlignment=y.a.getHorizontalAlignment(t.HorizontalTextAlignment),this._textRegion.verticalAlignment=y.a.getVerticalAlignment(t.VerticalTextAlignment),this._textRegion.textDirection=y.a.getTextDirection(t.TextDirection),this.text=new ze(y.a.getString(t.Text,null)),this.textWhenDown.value=y.a.getString(t.TextWhenDown,null)}},{key:"createGradient",value:function(e,t){var n=t.left+.5*t.width;this._gradient=e.createLinearGradient(n,t.top,n,t.bottom),this._gradient.addColorStop(0,"rgba(255, 255, 255, 0.9)"),this._gradient.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),this._gradient.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),this._gradient.addColorStop(1,"rgba(255, 255, 255, 0)")}},{key:"computeFocusRect",value:function(e){var t=this.path.hitBounds,n=t.left,a=t.top,r=t.right,i=t.bottom;e[0].x=n,e[0].y=a,e[1].x=r,e[1].y=a,e[2].x=r,e[2].y=i,e[3].x=n,e[3].y=i,this.screenMatrix.transformPointsInPlace(e)}},{key:"onButtonValueChanged",value:function(e){this._isLatching&&(this._isLatched=e.value===this._valueWhenPressed,this.resetAnimationWatchDog())}},{key:"onPointerOver",value:function(e){return this.isEnabled.value&&(this._isMouseOver=!0,this.resetAnimationWatchDog(),null!==H.a.CursorChanged&&H.a.CursorChanged(this,r.a.Pointer)),!0}},{key:"onPointerOut",value:function(e){return this.isEnabled.value&&(this._isMouseOver=!1,this.resetAnimationWatchDog()),null!==H.a.CursorChanged&&H.a.CursorChanged(this,r.a.Default),!0}},{key:"onPointerDown",value:function(e){var t=this.executeActions(J.a.Pressed);if(this.isEnabled.value){if(this._isMouseDown=!0,!this._isLatching&&this._isMouseOver&&null!==H.a.ActionExecuted){var n=this.getDynamic(function(e){return e instanceof nt.a});if(null!==n&&n.dataSource instanceof rt.a){var a=this._valueWhenPressed?"1":"0",r=n.dataSource,i=new it.a({DestinationVariable:r.name,SourceType:"Constant",SourceConstant:a});i.target=n.dataSource,i.source=new ot.a(a),H.a.ActionExecuted(this,i)}}this.resetAnimationWatchDog()}return t}},{key:"onPointerUp",value:function(e){var t=this.executeActions(J.a.Released);if(this.isEnabled.value){if(this._isMouseDown=!1,!this._isLatching&&null!==H.a.ActionExecuted){var n=this.getDynamic(function(e){return e instanceof nt.a});if(null!==n&&n.dataSource instanceof rt.a){var a=this._valueWhenPressed?"0":"1",r=n.dataSource,i=new it.a({DestinationVariable:r.name,SourceType:"Constant",SourceConstant:a});i.target=n.dataSource,i.source=new ot.a(a),H.a.ActionExecuted(this,i)}}this.resetAnimationWatchDog()}return t}},{key:"onPointerTap",value:function(e){var t=this.executeActions(J.a.Click);if(this.isEnabled.value&&this._isLatching&&(this._isLatched=!this._isLatched,null!==H.a.ActionExecuted)){var n=this.getDynamic(function(e){return e instanceof nt.a});if(null!==n&&n.dataSource instanceof rt.a){var a=(this._isLatched?this._valueWhenPressed:!this._valueWhenPressed)?"1":"0",r=n.dataSource,i=new it.a({DestinationVariable:r.name,SourceType:"Constant",SourceConstant:a});i.target=n.dataSource,i.source=new ot.a(a),H.a.ActionExecuted(this,i)}}return t}},{key:"draw",value:function(e,t){var n=et.a.Normal;this._isLatching?this._isLatched||this._isMouseDown&&this._isMouseOver?n=et.a.Pressed:this._isMouseOver&&(n=et.a.MouseOver):this._isMouseOver&&(n=this._isMouseDown?et.a.Pressed:et.a.MouseOver),this.drawButton(e,t,n)}},{key:"drawButton",value:function(e,t,n){var a=this.screenMatrix;e.setTransform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),this.drawBackground(e,t,n),void 0!==this._imageRegion&&this.drawImage(e),this.drawText(e,n===et.a.Pressed),this.guiStyle===at.b.Glossy?this.drawGlossyBorder(e,n):this.lineWidth>0&&this.drawFlatBorder(e,n),this.drawShading(e,n)}},{key:"drawBackground",value:function(e,t,n){e.beginPath(),U.a.define(e,this.path),e.save(),this.guiStyle!==at.b.Glossy||0==(t&K.DrawButtonShadows)||!this.isEnabled.value||n!=et.a.Normal&&n!=et.a.MouseOver||(e.shadowOffsetX=C.a.defaultShadowOffset.x,e.shadowOffsetY=C.a.defaultShadowOffset.y,e.shadowColor=C.a.defaultShadowColor,e.shadowBlur=C.a.defaultShadowBlur);var a=null;null!==(a=this.isEnabled.value?n==et.a.Pressed&&null!==this.fillWhenDownStyle.value?this.fillWhenDownStyle.value:this.fillStyle.value:C.a.disabledFillColor)&&(e.fillStyle=a,e.transformFill()),e.restore(),this.guiStyle==at.b.Glossy&&this.isEnabled.value&&(e.fillStyle=this._gradient,e.fill())}},{key:"drawImage",value:function(e){e.save();var t=this._imageRect;e.beginPath(),e.rect(t.left,t.top,t.width,t.height),e.clip(),e.beginPath(),U.a.define(e,this._marginPath),e.clip(),e.translate(t.left,t.top),this._imageRegion.draw(e,this.isEnabled.value),e.restore()}},{key:"drawText",value:function(e,t){e.save();var n=this._textRect;e.beginPath(),e.rect(n.left,n.top,n.width,n.height),e.clip(),e.beginPath(),U.a.define(e,this._marginPath),e.clip(),e.translate(n.left,n.top);var a=this.text.value;t&&null!=this.textWhenDown.value&&(a=this.textWhenDown.value),this._textRegion.draw(e,a,this.isEnabled.value),e.restore()}},{key:"drawFlatBorder",value:function(e,t){e.save(),e.beginPath();var n=this.screenMatrix;this.dashSegments.length>0||this.strokeStyle.value instanceof CanvasGradient?(e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),U.a.define(e,this.path)):(e.setTransform(1,0,0,1,0,0),U.a.defineSnapped(e,this.path,n)),this.isEnabled.value?e.strokeStyle=this.strokeStyle.value:e.strokeStyle=C.a.disabledLineColor,e.lineJoin="miter",e.lineCap="square",e.miterLimit=2,e.lineWidth=this.lineWidth,e.setLineDash(this.dashSegments),e.lineDashOffset=this.dashOffset,e.stroke(),e.restore()}},{key:"drawGlossyBorder",value:function(e,t){e.save(),e.setTransform(1,0,0,1,0,0),e.beginPath(),U.a.defineSnapped(e,this.path,this.screenMatrix),e.lineWidth=1,this.isEnabled.value?t==et.a.Pressed?(e.clip(),e.strokeStyle="rgba(20, 20, 20, 0.6)",e.shadowColor="rgba(100, 100, 100, 1)",e.shadowOffsetX=.5,e.shadowOffsetY=.5,e.shadowBlur=3):this.guiStyle==at.b.Glossy?e.strokeStyle="rgba(0, 0, 0, 0.1)":e.strokeStyle=this.strokeStyle.value:e.strokeStyle=C.a.disabledLineColor,e.stroke(),e.restore()}},{key:"drawShading",value:function(e,t){e.beginPath(),U.a.defineOuterStroke(e,this.path);var n="rgba(0, 0, 0, 0)";this.isEnabled.value&&t===et.a.MouseOver?n="rgba(255, 255, 255, 0.3)":t==et.a.Pressed&&null===this.fillWhenDownStyle.value&&(n="rgba(0, 0, 0, 0.1)"),e.fillStyle=n,e.fill()}},{key:"getTargetProperty",value:function(e){var n=lt(ht(t.prototype),"getTargetProperty",this).call(this,e);if(null===n)switch(e){case"TextWhenDown":return this.textWhenDown;case"FillWhenDown":return this.fillWhenDownStyle;case"Variable":return this.buttonValue}return n}},{key:"hasHitRegion",get:function(){return!0}},{key:"bounds",get:function(){return this._buttonBounds}}])&&ut(n.prototype,a),i&&ut(n,i),t}();function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function gt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e,t,n){return(vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yt(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=gt(this,yt(t).call(this,e,n,a,r))).checkBoxValue=new tt.a(!1),i._textRect=new ue.a,i._textRegion=null,i._isMouseDown=!1,i._isMouseOver=!1,i._isLatched=!1,i._boxFillStyle=null,i._innerGradient=null,i._outerGradient=null,i._type="CheckBox";var o=y.a.getRect(a.Geometry.Rect);i.path=new fe.a(o,!0,null,i.lineWidth,C.a.defaultRectangleMiterLimit,!0),i.fillStyle.value=O.a.createFillStyle(n,a.Fill,o),i._outerBoxSize=i.font.size*t.outerBoxScale,i._boxMargins=[.2*i._outerBoxSize,.25*i._outerBoxSize,.2*i._outerBoxSize,.2*i._outerBoxSize],i._valueWhenChecked=y.a.getBoolean(a.ValueWhenChecked,!0),i._isLatched=!i._valueWhenChecked;var s=Math.max(0,o.width-i.lineWidth),u=Math.max(0,o.height-i.lineWidth),c=.5*i.lineWidth;i._clipRect=new ue.a(c,c,c+s,c+u),i._clipRect.translate(o.left,o.top),null!==y.a.getString(a.Variable,null)&&nt.a.appendNew(a);var l=i.path.fillBounds;return i.initText(n,a,l.width,l.height,i._textRect),i._textRect.translate(l.left,l.top),i.initBox(n,a,l),i.checkBoxValue.valueChanged=function(e){i.onCheckBoxValueChanged(e)},i.text.valueChanged=function(e){i.resetAnimationWatchDog()},i}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,C["a"]),n=t,(a=[{key:"initText",value:function(e,n,a,r,i){var o=new v.a,s=new v.a,u=.5*this.lineWidth;switch(y.a.getPlacement(n.TextPlacement)){case et.b.Left:s.x=u+t.padding;break;case et.b.Right:default:s.x=u+t.padding+this._outerBoxSize+t.textMargin}s.y=u,o.x=a-(this.lineWidth+t.textMargin+this._outerBoxSize+2*t.padding),o.y=r-this.lineWidth,o.x=Math.max(o.x,0),o.y=Math.max(o.y,0),i.left=s.x,i.top=s.y,i.right=s.x+o.x,i.bottom=s.y+o.y,this._textRegion=new ke(o,this.font),this._textRegion.fontFillStyle=this.fontFillStyle,this._textRegion.horizontalAlignment=y.a.getHorizontalAlignment(n.HorizontalTextAlignment),this._textRegion.verticalAlignment=y.a.getVerticalAlignment(n.VerticalTextAlignment),this._textRegion.textDirection=y.a.getTextDirection(n.TextDirection),this.text=new ze(y.a.getString(n.Text,null)),this.text.value=y.a.getString(n.Text,null)}},{key:"initBox",value:function(e,n,a){this._outerBoxPosition=new v.a(a.left,a.top),this._outerBoxPosition.y+=.5*(a.height-this._outerBoxSize);var r=.5*this.lineWidth;switch(y.a.getPlacement(n.TextPlacement)){case et.b.Left:this._outerBoxPosition.x+=a.width-this._outerBoxSize-t.padding-r;break;case et.b.Right:default:this._outerBoxPosition.x+=r+t.padding}var i=new ue.a(this._outerBoxPosition.x,this._outerBoxPosition.y,this._outerBoxPosition.x+this._outerBoxSize,this._outerBoxPosition.y+this._outerBoxSize);if(this.guiStyle==at.b.Glossy){this._outerBoxPath=new fe.a(i,!0,new v.a(t.outerBoxRadius,t.outerBoxRadius)),this._snappedBorder=new fe.a(i,!0,new v.a(t.outerBoxRadius,t.outerBoxRadius));var o=new ue.a(i.left+t.innerBoxMargin,i.top+t.innerBoxMargin,i.right-t.innerBoxMargin,i.bottom-t.innerBoxMargin);this._innerBoxPath=new fe.a(o,!0,new v.a(t.innerBoxRadius,t.innerBoxRadius));var s=new ue.a(i.left+t.innerBoxMargin,i.top+t.innerBoxMargin,i.right-t.innerBoxMargin,i.bottom-t.innerBoxMargin);this.createInnerGradient(e,s),this.createOuterGradient(e,i)}else this._outerBoxPath=new fe.a(i,!0,new v.a),this._snappedBorder=new fe.a(i,!0,new v.a);this._boxFillStyle=O.a.createFillStyle(e,n.BoxBackgroundFill,i)}},{key:"onCheckBoxValueChanged",value:function(e){this._isLatched=e.value===this._valueWhenChecked,this.resetAnimationWatchDog()}},{key:"onPointerOver",value:function(e){return this.isEnabled.value&&(this._isMouseOver=!0,this.resetAnimationWatchDog(),null!==H.a.CursorChanged&&H.a.CursorChanged(this,r.a.Pointer)),!0}},{key:"onPointerOut",value:function(e){return this.isEnabled.value&&(this._isMouseOver=!1,this.resetAnimationWatchDog()),null!==H.a.CursorChanged&&H.a.CursorChanged(this,r.a.Default),!0}},{key:"onPointerDown",value:function(e){var t=this.executeActions(J.a.Pressed);return this.isEnabled.value&&(this._isMouseDown=!0,this.resetAnimationWatchDog()),t}},{key:"onPointerUp",value:function(e){var t=this.executeActions(J.a.Released);return this.isEnabled.value&&(this._isMouseDown=!1,this.resetAnimationWatchDog()),t}},{key:"onPointerTap",value:function(e){var t=this.executeActions(J.a.Click);if(this.isEnabled.value&&(this._isLatched=!this._isLatched,null!==H.a.ActionExecuted)){var n=this.getDynamic(function(e){return e instanceof nt.a});if(null!==n&&n.dataSource instanceof rt.a){var a=(this._isLatched?this._valueWhenChecked:!this._valueWhenChecked)?"1":"0",r=n.dataSource,i=new it.a({DestinationVariable:r.name,SourceType:"Constant",SourceConstant:a});i.target=n.dataSource,i.source=new ot.a(a),H.a.ActionExecuted(this,i)}}return t}},{key:"draw",value:function(e,t){var n=this.screenMatrix,a=this._clipRect;U.a.snapPoints(n,this._outerBoxPath.points,this._snappedBorder.points),e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),this.drawBackground(e),e.save(),e.beginPath(),e.rect(a.left,a.top,a.width,a.height),e.clip(),this.guiStyle!=at.b.Flat&&this.isEnabled.value?this.drawGlossyBox(e,t):this.drawFlatBox(e),this._isLatched&&this.drawCheckMark(e,this._outerBoxPosition,this._outerBoxSize,this._boxMargins),this.drawText(e),e.restore()}},{key:"drawBackground",value:function(e){e.save(),e.beginPath();var t=this.path.fillBounds;e.rect(t.left,t.top,t.width,t.height),null!==this.fillStyle.value&&(e.fillStyle=this.fillStyle.value,e.transformFill()),this.lineWidth>0&&(e.lineJoin="miter",e.lineCap="square",e.miterLimit=2,e.strokeStyle=this.strokeStyle.value,e.lineWidth=this.lineWidth,e.setLineDash(this.dashSegments),e.lineDashOffset=this.dashOffset,e.stroke()),e.restore()}},{key:"drawFlatBox",value:function(e){e.save(),e.beginPath(),U.a.define(e,this._outerBoxPath);var n=this.isEnabled.value?this._boxFillStyle:C.a.disabledFillColor;null!==n&&(e.fillStyle=n,e.transformFill()),e.setTransform(1,0,0,1,0,0),e.beginPath(),U.a.define(e,this._snappedBorder),e.lineWidth=t.boxLineWidth,e.strokeStyle=this.isEnabled.value?this.strokeStyle.value:C.a.disabledLineColor,e.stroke(),e.restore()}},{key:"drawGlossyBox",value:function(e,t){this.drawGlossyBackground(e,t),this.drawGlossyShading(e),this.drawGlossyBorder(e)}},{key:"drawGlossyBackground",value:function(e,t){if(e.save(),e.beginPath(),null!==this.fillStyle.value){var n=this.path.fillBounds;e.rect(n.left,n.top,n.width,n.height),e.fillStyle=this.fillStyle.value,e.transformFill()}e.beginPath(),U.a.define(e,this._outerBoxPath),0==(t&K.DrawButtonShadows)||this._isMouseDown&&this._isMouseOver||(e.shadowOffsetX=C.a.defaultShadowOffset.x,e.shadowOffsetY=C.a.defaultShadowOffset.y,e.shadowColor=C.a.defaultShadowColor,e.shadowBlur=C.a.defaultShadowBlur),null!==this._boxFillStyle&&(e.fillStyle=this._boxFillStyle,e.transformFill()),e.restore(),e.fillStyle=this._outerGradient,e.fill(),e.beginPath(),U.a.define(e,this._innerBoxPath),null!==this._boxFillStyle&&(e.fillStyle=this._boxFillStyle,e.transformFill()),e.fillStyle=this._innerGradient,e.fill()}},{key:"drawGlossyShading",value:function(e){e.beginPath(),U.a.define(e,this._outerBoxPath);var t="rgba(0, 0, 0, 0)";this._isMouseDown&&this._isMouseOver?t="rgba(0, 0, 0, 0.1)":this._isMouseOver&&(t="rgba(255, 255, 255, 0.3)"),e.fillStyle=t,e.fill()}},{key:"drawGlossyBorder",value:function(e){e.save(),e.setTransform(1,0,0,1,0,0),e.beginPath(),U.a.define(e,this._snappedBorder),e.lineWidth=t.boxLineWidth,e.strokeStyle=this._boxFillStyle,e.stroke(),this._isMouseDown&&this._isMouseOver&&(e.save(),e.clip(),e.lineWidth=1,e.strokeStyle="rgba(20, 20, 20, 0.6)",e.shadowColor="rgba(100, 100, 100, 1)",e.shadowOffsetX=.5,e.shadowOffsetY=.5,e.shadowBlur=3,e.stroke(),e.restore()),e.restore()}},{key:"drawText",value:function(e){e.save();var t=this._textRect;e.beginPath(),e.rect(t.left,t.top,t.width,t.height),e.clip(),e.translate(t.left,t.top),this._textRegion.draw(e,this.text.value,this.isEnabled.value),e.restore()}},{key:"drawCheckMark",value:function(e,t,n,a){var r=.15*n,i=new Array(3);i[0]=new v.a(t.x+a[0],t.y+.5*n),i[1]=new v.a(t.x+.5*n,t.y+n-a[1]),i[2]=new v.a(t.x+n-a[2],t.y+a[3]),e.beginPath(),e.moveTo(i[0].x,i[0].y),e.lineTo(i[1].x,i[1].y),e.lineTo(i[2].x,i[2].y),e.lineWidth=r,e.lineCap="butt",e.strokeStyle=this.isEnabled.value?this.fontFillStyle.value:C.a.disabledLineColor,e.stroke()}},{key:"createInnerGradient",value:function(e,t){var n=t.left,a=t.top,r=t.right,i=t.bottom;this._innerGradient=e.createLinearGradient(n,a,r,i),this._innerGradient.addColorStop(0,"rgba(255, 255, 255, 0)"),this._innerGradient.addColorStop(.5,"rgba(255, 255, 255, 0.4)"),this._innerGradient.addColorStop(1,"rgba(255, 255, 255, 0.9)")}},{key:"createOuterGradient",value:function(e,t){var n=t.left,a=t.top,r=t.right,i=t.bottom;this._outerGradient=e.createLinearGradient(n,a,r,i),this._outerGradient.addColorStop(0,"rgba(255, 255, 255, 0.8)"),this._outerGradient.addColorStop(1,"rgba(255, 255, 255, 0)")}},{key:"getTargetProperty",value:function(e){var n=vt(yt(t.prototype),"getTargetProperty",this).call(this,e);if(null===n)switch(e){case"Variable":return this.checkBoxValue}return n}},{key:"hasHitRegion",get:function(){return!0}}])&&pt(n.prototype,a),i&&pt(n,i),t}();bt.boxLineWidth=1,bt.outerBoxRadius=1,bt.padding=2,bt.textMargin=6,bt.innerBoxMargin=1,bt.innerBoxRadius=0,bt.outerBoxScale=.9;var Et=n(142),Dt=n(101);function St(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"initialize",value:function(t){e._app=t}},{key:"createNodeSupport",value:function(e,t,n,a,r){switch(t){case"Group":return new m.a(a,r);case"SymbolInstance":return new P(a,r);case"Rectangle":return new w.a(e,n,a,r);case"Ellipse":return new q(e,n,a,r);case"Path":return new se(e,n,a,r);case"HmiImage":case"Image":return new be(e,n,a,r);case"Line":return new we(e,n,a,r);case"GaugeScale":return new We(e,n,a,r);case"HmiText":case"Text":return new $e(e,n,a,r);case"Button":return new _t(e,n,a,r);case"CheckBox":return new bt(e,n,a,r);case"ListBox":return new Et.a(a,r,this._app.hasScrollBar);case"ListItem":return new Dt.a(e,n,a,r);case"ScrollBarThumb":return new $.a(e,n,a,r);default:return null}}},{key:"getObjectType",value:function(e){var t=void 0;return void 0!==e&&(t=y.a.getString(e.Type)),t}}],(n=null)&&St(t.prototype,n),a&&St(t,a),e}(),wt=n(70);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e){var t,n,a;function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=Ot(this,Rt(r).call(this,e.value)))._inputElement=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(r,Ge["a"]),t=r,(n=[{key:"value",get:function(){return this._inputElement.value},set:function(e){document.activeElement!==this._inputElement&&this.hasValueChanged(this._inputElement.value,e)&&(this._inputElement.value=e,this.onValueChanged())}}])&&kt(t.prototype,n),a&&kt(t,a),r}();function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mt(e,t){return!t||"object"!==Lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function It(e,t,n){return(It="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bt(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Mt(this,Bt(t).call(this,e,n,a,r)))._isClipped=!1,i._lastMatrix=new Ce.a,i._type="TextInput";var o=y.a.getRect(a.Geometry.Rect);i.path=new fe.a(o,!0,null,i.lineWidth,C.a.defaultRectangleMiterLimit,!1),i.fillStyle.value=O.a.createFillStyle(n,a.Fill,o),i._textAlign=y.a.getString(a.HorizontalTextAlignment,"Left").toLowerCase();var s=y.a.getString(a.Text,null);a.PasswordInputType?i.createPasswordElement(s,o):i.createElement(s,o),i.setElementColors(i.isEnabled.value),i.focusStyle=at.a.None,i.text=new Tt(i.element),i.text.valueChanged=function(e){i.resetAnimationWatchDog()};var u=i.lineWidth+2*t._padding,c=Math.max(0,o.width-u),l=Math.max(0,o.height-u),h=.5*u;return i._clipRect=new ue.a(h,h,h+c,h+l),i._clipRect.translate(o.left,o.top),i._textRegion=new ke(new v.a(c,l),i.font),i._textRegion.fontFillStyle=i.fontFillStyle,i._textRegion.horizontalAlignment=y.a.getHorizontalAlignment(a.HorizontalTextAlignment,Oe.a.Left),i._textRegion.textDirection=Oe.b.LeftToRight,i}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,wt["a"]),n=t,(a=[{key:"onVisibilityChanged",value:function(e){It(Bt(t.prototype),"onVisibilityChanged",this).call(this,e),null!=this.element&&(this.element.style.visibility=this.isVisible?"visible":"hidden")}},{key:"onFocus",value:function(){return!0}},{key:"onBlur",value:function(){return this._isModified&&t.InputSubmitted(this.element),this._isModified=!1,this.resetAnimationWatchDog(),null!==H.a.Blurred&&H.a.Blurred(this),!0}},{key:"onKeyPress",value:function(e){switch(e.key){case"Escape":case"Esc":this._isModified=!1;break;default:this._isModified=!0}return"Enter"!=e.key&&"Escape"!=e.key&&"Esc"!=e.key||this.element.blur(),!0}},{key:"onPointerOver",value:function(e){return!0}},{key:"onPointerOut",value:function(e){return!0}},{key:"onPointerDown",value:function(e){return!0}},{key:"onPointerUp",value:function(e){return!0}},{key:"onPointerTap",value:function(e){return!0}},{key:"draw",value:function(e,t){var n=this.screenMatrix;e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),void 0!==this.screenClipRect?this.symbolListChecker(this.screenClipRect,this.screenBounds,this.element.style,e):null===this.element.parentElement||this._isClipped?(this.element.style.visibility="hidden",$e.drawLabel(e,this,this.path.fillBounds,this._clipRect,this._textRegion,this.text.value)):this.updateElement(e)}},{key:"symbolListChecker",value:function(e,t,n,a){t.top<e.top||t.bottom>e.bottom?(n.visibility="hidden",$e.drawLabel(a,this,this.path.fillBounds,this._clipRect,this._textRegion,this.text.value)):this.updateElement(a)}},{key:"updateElement",value:function(e){var t=this._lastMatrix,n=this.screenMatrix,a=this.element,r=a.style;if(!n.equals(t,1e-5)){t.setMatrixFrom(n);var i=e.getInvPixelRatio();Ce.a.preMultiply(n,i,0,0,i,0,0),r.transform=n.toCssString()}a.disabled!==!this.isEnabled.value&&(a.disabled=!this.isEnabled.value),this.setElementColors(this.isEnabled.value),"visible"!==r.visibility&&(r.visibility="visible")}},{key:"createElement",value:function(e,t){this.createElementWithType(e,t,"text")}},{key:"createPasswordElement",value:function(e,t){this.createElementWithType(e,t,"password")}},{key:"createElementWithType",value:function(e,n,a){var r=this;this.element=document.createElement("input"),this.element.setAttribute("type",a),this.element.value=e,this.element.tabIndex=-1;var i=this.element.style;i.position="fixed",i.fontFamily=this.font.family,i.fontStyle=this.font.style,i.fontWeight=this.font.weight.toString(),i.fontSize=this.font.size+"px",i.textAlign=this._textAlign;var o=.5*this.lineWidth;i.outline="none",i.border=this.lineWidth+"px solid",i.margin="0",i.padding=t._padding+"px";var s=this.lineWidth+2*t._padding;i.width=n.width-s+"px",i.height=n.height-s+"px";var u=n.left-o,c=n.top-o;i.left=u+"px",i.top=c+"px",i.transformOrigin=-u+"px "+-c+"px",i.visibility="hidden",this.element.onchange=function(){r._isModified=!0,r.onBlur()}}},{key:"setElementColors",value:function(e){var t=this.element.style,n=e?this.fillStyle.value:C.a.disabledFillColor;t.backgroundColor!==n&&(t.backgroundColor=n);var a=e?this.fontFillStyle.value:C.a.disabledLineColor;t.color!==a&&(t.color=a);var r=e?this.strokeStyle.value:C.a.disabledLineColor;t.borderColor!==r&&(t.borderColor=r)}},{key:"isClipped",value:function(e){var t=this.location.value,n=this.bounds;return this._isClipped=t.y<0||t.y+n.bottom>e.y||t.x<0||t.x+n.right>e.x}}])&&At(n.prototype,a),r&&At(n,r),t}();jt._padding=0;n(117);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Wt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e,t,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vt(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qt=function(e){function t(e,n,a,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Wt(this,Vt(t).call(this,e,n,a,r)))._selectionStart=0,i._selectionEnd=0,i._selectionColor="rgba(179, 212, 253, 0.8)",i._cursorOn=!1,i._isMouseDown=!1,i._scrollOffset=0,i._cursorOffset=0,i._editText="",i._undoText=null,i._redoText=null,i._isObfuscated=!1,i._type="TextInput",i.element=document.createElement("input"),i.element.id=i.id,i._isObfuscated=a.PasswordInputType,i.text=new ze(y.a.getString(a.Text,null)),i.text.value=y.a.getString(a.Text,""),i.text.valueChanged=function(e){i.resetAnimationWatchDog()};var o=y.a.getRect(a.Geometry.Rect);i.path=new fe.a(o,!0,null,i.lineWidth,C.a.defaultRectangleMiterLimit,!0),i.fillStyle.value=O.a.createFillStyle(n,a.Fill,i.path.fillBounds);var s=Math.max(0,o.width-(i.lineWidth+2*t.PADDING)),u=Math.max(0,o.height-i.lineWidth),c=.5*i.lineWidth+t.PADDING,l=.5*i.lineWidth;return i._clipRect=new ue.a(c,l,c+s,l+u),i._clipRect.translate(o.left,o.top),i._textRegion=new ke(new v.a(s,u),i.font),i._textRegion.fontFillStyle=i.fontFillStyle,i._textRegion.horizontalAlignment=y.a.getHorizontalAlignment(a.HorizontalTextAlignment,Oe.a.Left),i._textRegion.verticalAlignment=y.a.getVerticalAlignment(a.VerticalTextAlignment),i._textRegion.textDirection=y.a.getTextDirection(a.TextDirection,Oe.b.LeftToRight),i.disableCursor(),i}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(t,wt["a"]),n=t,(a=[{key:"obfuscateText",value:function(e){return e.replace(/./g,function(e,t,n){return"*"})}},{key:"draw",value:function(e,t){var n=this.screenMatrix;e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),this.drawTextInput(e,this,this.path.fillBounds,this._clipRect)}},{key:"enableCursor",value:function(){var e=this;this.disableCursor(),this._cursorOn=!0,this._cursorInterval=setInterval(function(){e._cursorOn=!e._cursorOn,e.resetAnimationWatchDog()},500),this.resetAnimationWatchDog()}},{key:"disableCursor",value:function(){this._cursorOn=!1,0!=this._cursorInterval&&clearInterval(this._cursorInterval),this.resetAnimationWatchDog()}},{key:"drawTextInput",value:function(e,t,n,a){var r,i;e.save(),this.isEnabled.value?(r=this.fillStyle.value,i=this.strokeStyle.value):(r=C.a.disabledFillColor,i=C.a.disabledLineColor),e.beginPath(),e.rect(n.left,n.top,n.width,n.height),null!==t.fillStyle.value&&(e.fillStyle=r,e.transformFill()),t.lineWidth>0&&(e.lineJoin="miter",e.lineCap="square",e.miterLimit=2,e.strokeStyle=i,e.lineWidth=t.lineWidth,e.setLineDash(t.dashSegments),e.lineDashOffset=t.dashOffset,e.stroke()),e.font=this._textRegion.font.toString(),e.translate(a.left,a.top),e.save(),e.beginPath(),e.rect(0,0,a.width,a.height),e.clip();var o=this.activeText;if(this.hasFocus&&this.scrollIntoView(e),this.isEnabled.value&&this.hasRangeSelection&&this.drawSelectionRect(e,a),e.translate(-this._scrollOffset,0),this._textRegion.draw(e,o,this.isEnabled.value),e.translate(this._scrollOffset,0),e.restore(),this.isEnabled.value&&this._cursorOn){var s=this._cursorOffset,u=.5*(a.height-this._textRegion.textHeight)-2;e.fillStyle=this._textRegion.fontFillStyle.value,e.fillRect(s,u,1,this._textRegion.textHeight+4)}e.restore()}},{key:"scrollIntoView",value:function(e){var t=this.activeText,n=e.measureText(t.substr(0,this._selectionEnd)).width,a=e.measureText(t).width,r=this._clipRect.width;switch(a<r&&(this._scrollOffset=0),this._textRegion.horizontalAlignment){case Oe.a.Center:this._cursorOffset=.5*(r-a)+n-this._scrollOffset;break;case Oe.a.Right:this._cursorOffset=r-a+n-this._scrollOffset;break;default:this._cursorOffset=n-this._scrollOffset}this._cursorOffset>r?(this._scrollOffset+=this._cursorOffset-r,this._cursorOffset=r):this._cursorOffset<0&&(this._scrollOffset+=this._cursorOffset,this._cursorOffset=0)}},{key:"drawSelectionRect",value:function(e,t){var n=this.activeText,a=Math.min(this._selectionStart,this._selectionEnd),r=Math.max(this._selectionStart,this._selectionEnd),i=e.measureText(n).width,o=this._clipRect.width,s=e.measureText(n.substring(0,a)).width-this._scrollOffset;switch(this._textRegion.horizontalAlignment){case Oe.a.Center:s+=.5*(o-i);break;case Oe.a.Right:s+=o-i}var u=.5*(t.height-this._textRegion.textHeight)-2,c=e.measureText(n.substring(a,r)).width,l=this._textRegion.textHeight+4;e.fillStyle=this._selectionColor,e.fillRect(s,u,c,l)}},{key:"onKeyDown",value:function(e){if(!this.isEnabled.value)return!1;var t=this.editText,n=Math.min(this._selectionStart,this._selectionEnd),a=Math.max(this._selectionStart,this._selectionEnd);switch(e.code){case"Tab":break;case"Escape":this.selectNone();break;case"ArrowLeft":this._selectionEnd>0&&this._selectionEnd--,e.shiftKey||(this._selectionStart=this._selectionEnd);break;case"ArrowRight":this._selectionEnd<t.length&&this._selectionEnd++,e.shiftKey||(this._selectionStart=this._selectionEnd);break;case"Home":this._selectionEnd=0,e.shiftKey||(this._selectionStart=this._selectionEnd);break;case"End":this._selectionEnd=t.length,e.shiftKey||(this._selectionStart=this._selectionEnd);break;case"Delete":if(this.hasRangeSelection)this.editText=this.deleteRange(t,n,a),this._isModified=!0;else if(t.length>0&&n<=t.length){var r=t.substr(0,n),i=t.substr(n+1);this.editText=r+i,this._isModified=!0}this._selectionStart=n,this._selectionEnd=this._selectionStart;break;case"Backspace":if(this.hasRangeSelection)this.editText=this.deleteRange(t,n,a),this._selectionStart=n,this._selectionEnd=this._selectionStart,this._isModified=!0;else if(n>0){r=t.substr(0,n-1),i=t.substr(n);this.editText=r+i,this._isModified=!0,this._selectionStart=n-1,this._selectionEnd=this._selectionStart}break;default:if(this.isWritingCode(e)){this.hasRangeSelection&&(t=this.deleteRange(t,n,a));r=t.substr(0,n),i=t.substr(n);this.editText=r+e.key+i,this._isModified=!0,this._selectionStart=n+1,this._selectionEnd=this._selectionStart}else if(e.ctrlKey)switch(e.code){case"KeyX":this.execCut(t,n,a);break;case"KeyC":this.execCopy(t,n,a);break;case"KeyV":this.execPaste(t,n,a);break;case"KeyZ":this.undo();break;case"KeyY":this.redo()}}return this.enableCursor(),this.resetAnimationWatchDog(),!0}},{key:"undo",value:function(){if(this.editText!=this.textValue){var e=this.editText;this.editText=this._undoText,this._redoText=e,this._selectionStart=this.editText.length,this._selectionEnd=this._selectionStart}}},{key:"redo",value:function(){null!==this._redoText&&(this.editText=this._redoText,this._selectionStart=this.editText.length,this._selectionEnd=this._selectionStart)}},{key:"execCut",value:function(e,t,n){this.element.value=this.editText.slice(t,n),this.element.select(),window.document.execCommand("cut"),this.hasRangeSelection&&(this.editText=this.deleteRange(e,t,n)),this._selectionStart=t,this._selectionEnd=this._selectionStart,this._isModified=!0}},{key:"execCopy",value:function(e,t,n){this.element.value=this.editText.slice(t,n),this.element.select(),window.document.execCommand("copy")}},{key:"execPaste",value:function(e,t,n){var a=this;window.document.execCommand("paste");var r=this;setTimeout(function(){a.hasRangeSelection&&(e=a.deleteRange(e,t,n)),r.element.value=r.element.value.replace(/\s/g," ");var i=e.substr(0,t),o=e.substr(t);a.editText=i+r.element.value+o,r._selectionStart=t+r.element.value.length,r._selectionEnd=r._selectionStart,r.element.value="",a._isModified=!0})}},{key:"onKeyUp",value:function(e){return!0}},{key:"onKeyPress",value:function(e){if(!this.isEnabled.value)return!1;switch(e.code){case"Escape":this._isModified=!1;break;case"Tab":break;default:this._isModified=!0}return"Enter"!=e.code&&"Escape"!=e.code||this.element.blur(),!0}},{key:"isWritingCode",value:function(e){if((e.ctrlKey||e.altKey)&&!e.altGraphKey)return!1;if("Dead"==e.key||"Compose"==e.key||"Unidentified"==e.key)return!1;if("Key"==e.code.substr(0,3)||"Digit"==e.code.substr(0,5)||"Numpad"==e.code.substr(0,6))return!0;switch(e.code){case"Backquote":case"Backslash":case"BracketLeft":case"BracketRight":case"Comma":case"Equal":case"IntlBackslash":case"IntlRo":case"IntlYen":case"Minus":case"Period":case"Quote":case"Semicolon":case"Slash":case"Space":return!0}return!1}},{key:"deleteRange",value:function(e,t,n){var a=e.substr(0,Math.min(t,n)),r=e.substr(Math.max(t,n));return e=a+r}},{key:"selectAll",value:function(){this._selectionStart=0,this._selectionEnd=this.activeText.length,this._scrollOffset=0}},{key:"selectNone",value:function(){this._selectionStart=0,this._selectionEnd=0,this._scrollOffset=0}},{key:"onFocus",value:function(){return Gt(Vt(t.prototype),"onFocus",this).call(this),this.isEnabled.value&&(this.editText=this.textValue,null===this.editText&&(this.editText=""),this._undoText=this.editText,this._redoText=null,this.selectAll(),this.enableCursor()),!0}},{key:"onBlur",value:function(){return Gt(Vt(t.prototype),"onBlur",this).call(this),this._isModified&&(this.text.value=this.editText,t.InputSubmitted&&t.InputSubmitted(this.element),this._undoText=null,this._redoText=null,this._isModified=!1),this.selectNone(),this.disableCursor(),!0}},{key:"onPointerDown",value:function(e){if(this._isMouseDown=!0,this.isEnabled.value){this.element.focus();var t=this.getHitPosition(e.x,e.y),n=this.getCharIndexFromPosition(t);this._selectionStart=n,this._selectionEnd=this._selectionStart,this.enableCursor(),this.resetAnimationWatchDog()}return!0}},{key:"onPointerUp",value:function(e){return this._isMouseDown=!1,this.isEnabled.value&&this.enableCursor(),!0}},{key:"onBeginDrag",value:function(e,t){return!0}},{key:"onEndDrag",value:function(e,t){return!0}},{key:"onDrag",value:function(e,t){if(this.isEnabled.value){var n=this.getHitPosition(e,t);this._selectionEnd=this.getCharIndexFromPosition(n),this.disableCursor(),this.resetAnimationWatchDog()}return!0}},{key:"onPointerOver",value:function(e){return this.isEnabled.value&&(this.resetAnimationWatchDog(),null!==H.a.CursorChanged&&H.a.CursorChanged(this,r.a.Text)),!0}},{key:"getHitPosition",value:function(e,t){var n=new Ce.a;if(!Ce.a.findInverse(this.screenMatrix,n))return 0;var a=e*this._app.renderer.pixelRatio,r=t*this._app.renderer.pixelRatio,i=new v.a;return n.transformXY(a,r,i),i.x}},{key:"getCharIndexFromPosition",value:function(e){var t=0,n=this._app.renderer.foregroundContext;n.save(),n.font=this._textRegion.font.toString();var a=this.activeText,r=n.measureText(a).width,i=this._clipRect.width,o=0;switch(this._textRegion.horizontalAlignment){case Oe.a.Center:o=this._clipRect.left+.5*(i-r);break;case Oe.a.Right:o=this._clipRect.right-r;break;case Oe.a.Left:o=this._clipRect.left}o-=this._scrollOffset,t=a.length;for(var s=1,u=a.length;s<=u;s++){var c=a.substr(0,s);if(o+n.measureText(c).width>e){t=s-1;break}}return n.restore(),t}},{key:"isClipped",value:function(e){return!1}},{key:"hasFocus",get:function(){return this.element==window.document.activeElement}},{key:"hasRangeSelection",get:function(){return Math.abs(this._selectionEnd-this._selectionStart)>0}},{key:"editText",get:function(){return this._editText},set:function(e){this._editText=e,this._redoText=null}},{key:"textValue",get:function(){var e=this.text.value;return null==e?null:("string"!=typeof e&&(e=String(e)),e)}},{key:"activeText",get:function(){var e=null;return null===(e=this._isObfuscated?this.obfuscateText(this.editText):this.hasFocus?this.editText:this.textValue)?"":e}}])&&Nt(n.prototype,a),i&&Nt(n,i),t}();qt.PADDING=5;var Ht=n(0),zt=n(1);function Xt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Yt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"createTextInput",value:function(e,t,n,a){return arguments.length>4&&void 0!==arguments[4]&&arguments[4]?(Ht.a.Log("INFORMATION: Creating custom text input elements.",zt.a.Information),new qt(e,t,n,a)):new jt(e,t,n,a)}}],(n=null)&&Xt(t.prototype,n),a&&Xt(t,a),e}();function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Jt(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $t(e,t,n){return($t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=en(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jt(this,en(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(t,Pt),n=t,r=[{key:"initialize",value:function(e){$t(en(t),"initialize",this).call(this,e)}},{key:"createNode",value:function(e,t,n){var a=Pt.getObjectType(t);switch(a){case"TextInput":return Yt.createTextInput(this._app,e,t,n,this._app.isCustomTextInput);default:return Pt.createNodeSupport(this._app,a,e,t,n)}}}],(a=null)&&Zt(n.prototype,a),r&&Zt(n,r),t}();function an(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderOptions=K.DrawHighDpi|K.DrawButtonShadows|K.DrawBackground|K.DrawForeground|K.DrawDialogShadows|K.DrawDialogDimmer|K.Optimize|K.ZoomToFit,this.logClockEvents=!1,this._minRenderIntervalmsec=0}var t,n,a;return t=e,(n=[{key:"setMaxFPS",value:function(e){e>0&&(this._minRenderIntervalmsec=1e3/e,this._minRenderIntervalmsec<=0&&(this._minRenderIntervalmsec=1e3))}},{key:"zoomToFit",get:function(){return 0!=(this.renderOptions&K.ZoomToFit)}},{key:"minRenderIntervalMsec",get:function(){return this._minRenderIntervalmsec}}])&&an(t.prototype,n),a&&an(t,a),e}();function on(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var sn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._numSamples=0,this._range=0}var t,n,a;return t=e,(n=[{key:"clear",value:function(){this._numSamples=0,this._max=-Number.MAX_VALUE,this._min=Number.MAX_VALUE}},{key:"push",value:function(e){this._numSamples++,1===this._numSamples?(this._oldMean=this._newMean=e,this._oldVariance=0,this._min=e,this._max=e):(this._newMean=this._oldMean+(e-this._oldMean)/this._numSamples,this._newVariance=this._oldVariance+(e-this._oldMean)*(e-this._newMean),this._oldMean=this._newMean,this._oldVariance=this._newVariance,e<this._min&&(this._min=e),e>this._max&&(this._max=e))}},{key:"numSamples",get:function(){return this._numSamples}},{key:"max",get:function(){return this._max}},{key:"min",get:function(){return this._min}},{key:"range",get:function(){return this._max-this._min}},{key:"mean",get:function(){return this._numSamples>0?this._newMean:0}},{key:"variance",get:function(){return this._numSamples>1?this._newVariance/(this._numSamples-1):0}},{key:"standardDeviation",get:function(){return Math.sqrt(this.variance)}}])&&on(t.prototype,n),a&&on(t,a),e}();function un(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var cn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stallStats=new sn,this._lastServerTime=-1,this._numSamples=0,this._dataPollInterval=n,n=Math.max(n,1),this._window=0,this._updateCount=0,this._updateLimit=0,this._maxUpdateLimit=Math.ceil(e._maxTestPeriod/n),this._minGap=Number.MAX_VALUE,this._clock=t}var t,n,a;return t=e,(n=[{key:"getTargetTime",value:function(){return this._clock.time-this._window}},{key:"calibrate",value:function(){var t=this._clock.serverTime-(this._clock.time-this._window);if(t<0?this._stallStats.push(-t):t<this._minGap&&(this._minGap=t),this._numSamples++,this._lastServerTime!==this._clock.serverTime&&(this._updateCount++,this._updateCount>=this._updateLimit)){var n=this._stallStats.numSamples/this._numSamples,a=0;if(n>e._stallPercentageLimit?(this._window+=this._stallStats.mean+.5*e._slopAllowance,a=1,this._updateLimit=0):this._minGap>e._slopAllowance?(this._window-=this._minGap+.5*e._slopAllowance,a=2,this._updateLimit=0):this._updateLimit<this._maxUpdateLimit&&this._updateLimit++,this._clock.isLoggingEnabled){var r="dataUpdates="+this._updateCount+" numSamples="+this._numSamples+" stalls="+(100*n).toFixed(2)+"% stallAvg="+this._stallStats.mean.toFixed(2)+" overshoot="+this._minGap.toFixed(2)+" window="+this._window.toFixed(2)+" clockdrift="+this._clock.drift.toFixed(2);switch(a){case 1:r+=" STALL CORRECTION";break;case 2:r+=" OVERSHOOT CORRECTION"}console.log(r)}this._stallStats.clear(),this._minGap=Number.MAX_VALUE,this._updateCount=0,this._numSamples=0}this._lastServerTime=this._clock.serverTime}},{key:"dataPollInterval",get:function(){return this._dataPollInterval}}])&&un(t.prototype,n),a&&un(t,a),e}();function ln(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}cn._maxTestPeriod=2e3,cn._slopAllowance=50,cn._stallPercentageLimit=.03;var hn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._time=0,this._drift=0,this._serverTime=-1,this._prevSysTickCount=-1,this._lastTick=-1,this._lastTick=Date.now(),this._isLoggingEnabled=n,this._smoothingWindow=new cn(this,t)}var t,n,a;return t=e,(n=[{key:"synchronize",value:function(t){this.tick();var n=t;(n<=0||n===this._prevSysTickCount)&&(n=Date.now()),this._drift=this._time-n,Math.abs(this._drift)>e._driftTolerance&&(this._isLoggingEnabled&&console.log("DRIFT CORRECTION drift="+this._drift),this._time=n,this._lastTick=Date.now(),this._drift=0),this._prevSysTickCount=t,this._serverTime=n}},{key:"tick",value:function(){var e=Date.now(),t=e-this._lastTick;this._time+=t,this._lastTick=e}},{key:"time",get:function(){return this._time}},{key:"drift",get:function(){return this._drift}},{key:"serverTime",get:function(){return this._serverTime}},{key:"isLoggingEnabled",get:function(){return this._isLoggingEnabled}},{key:"smoothingWindow",get:function(){return this._smoothingWindow}}])&&ln(t.prototype,n),a&&ln(t,a),e}();hn._driftTolerance=25;var fn=n(29),_n=(n(84),n(23));function dn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var pn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this._hasData=!1,this._layers=[],this._layerIdentifiers=[],this._keyMap=new _n.a}var t,n,a;return t=e,(n=[{key:"getVariable",value:function(e){return this._keyMap.getValue(e)}},{key:"getVariableNames",value:function(){return this._keyMap.keys.slice(0,this._keyMap.keys.length)}},{key:"pushLayer",value:function(e,t){this._layers.push(e),this._layerIdentifiers.push(t),this.resetKeyMap()}},{key:"popLayer",value:function(){var e=this._layers.pop();return void 0===e&&(e=null),this._layerIdentifiers.pop(),this.resetKeyMap(),e}},{key:"resetKeyMap",value:function(){this._keyMap=new _n.a;for(var e=0;e<this._layers.length;e++)for(var t=this._layers[e],n=0;n<t.keys.length;n++)this._keyMap.add(t.keys[n],t.values[n])}},{key:"clear",value:function(){this.name=null,this._hasData=!1}},{key:"update",value:function(e,t){for(var n=0,a=e.length;n<a;n++){var r=this._keyMap.getValue(e[n].name);if(null!==r&&0==r.writePendingCount){var i=void 0===e[n].value||null===e[n].value?"":e[n].value;r.update(i,t)}}this._hasData=!0}},{key:"sourceId",get:function(){return this._layerIdentifiers.length>0?this._layerIdentifiers[0]:null}},{key:"variables",get:function(){return this._keyMap.values}},{key:"hasData",get:function(){return this._hasData}},{key:"hasVariables",get:function(){return this.variables.length>0}}])&&dn(t.prototype,n),a&&dn(t,a),e}();function gn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.focusedNode=null,this.selectedDebugVisual=null,this._dimmerLayer=-1,this._isSmoothingEnabled=!1,this.pageStack=[],this.dataGroup=new pn}var t,n,a;return t=e,(n=[{key:"pushPage",value:function(e){this.pageStack.push(e),this.dataGroup.pushLayer(e.serverVariables,e.name),this.updateOptionState()}},{key:"popPage",value:function(){this.pageStack.length;var e=this.pageStack.pop();return void 0===e?e=null:(this.dataGroup.popLayer(),this.updateOptionState()),e}},{key:"clearStack",value:function(){for(;this.pageStack.length>0;)this.popPage()}},{key:"updateOptionState",value:function(){this._dimmerLayer=-1,this._isSmoothingEnabled=!1;for(var e=0;e<this.pageStack.length;e++){var t=this.pageStack[e];0!=(t.showOptions&fn.b.DimBackground)&&(this._dimmerLayer=e),this._isSmoothingEnabled=this._isSmoothingEnabled||t.isSmoothingEnabled}}},{key:"getTotalVisualNodeCount",value:function(){for(var e=0,t=0;t<this.pageStack.length;t++)e+=this.pageStack[t].getVisualNodeCount();return e}},{key:"runDynamics",value:function(e){this._isSmoothingEnabled&&e.smoothingWindow.calibrate();var t=0;this.isTopPageLoginDialog()&&(t=this.pageStack.length-1);for(var n=0+t,a=this.pageStack.length;n<a;n++){var r=this.pageStack[n];if(r)for(var i=0,o=r.dynamics.length;i<o;i++)r.dynamics[i].run(e)}}},{key:"zoom",value:function(e,t,n,a){var r=this.rootPage;r.scalePage(e,t,n,a);for(var i=1;i<this.pageStack.length;i++){this.pageStack[i].centerOnPage(r)}}},{key:"pan",value:function(e,t,n,a){var r=this.rootPage;r.translatePage(e,t,n,a);for(var i=1;i<this.pageStack.length;i++){this.pageStack[i].centerOnPage(r)}}},{key:"centerPages",value:function(e,t,n){if(null!==this.rootPage){var a=this.rootPage;a.centerOnCanvas(e,t,n);for(var r=1;r<this.pageStack.length;r++){this.pageStack[r].centerOnPage(a)}}}},{key:"isTopPageLoginDialog",value:function(){return!!this.havePages&&this.isLoginDialog(this.topPage.name)}},{key:"isLoginDialog",value:function(e){return"LOGIN"===e.toUpperCase()}},{key:"dimmerLayer",get:function(){return this._dimmerLayer}},{key:"isPageReady",get:function(){return this.pageStack.length>0&&this.dataGroup.hasData}},{key:"havePages",get:function(){return this.pageStack.length>0}},{key:"rootPage",get:function(){return this.pageStack.length>0?this.pageStack[0]:null}},{key:"topPage",get:function(){return this.pageStack.length>0?this.pageStack[this.pageStack.length-1]:null}}])&&gn(t.prototype,n),a&&gn(t,a),e}();function yn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var mn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=null,this._count=0,this._interval=t}var t,n,a;return t=e,(n=[{key:"start",value:function(e,t){var n=this;this.reset(),this._count=e,this._id=setInterval(function(){n._count--,t(n._count),0===n._count&&clearInterval(n._id)},this._interval)}},{key:"reset",value:function(){null!==this._id&&clearInterval(this._id),this._id=null,this._count=0}},{key:"isExpired",get:function(){return null!==this._id&&0===this._count}}])&&yn(t.prototype,n),a&&yn(t,a),e}(),bn=n(2),En=n(30),Dn=n(50);function Sn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pn(e,t,n){return t&&Sn(e.prototype,t),n&&Sn(e,n),e}function wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Cn=function e(){wn(this,e),this.authProtocol=Dn.a.None};var On,Rn,kn=function(){function e(){wn(this,e),this.userRoles=[],this.rolesChangedListeners=new Array}return Pn(e,[{key:"addRolesChangedListener",value:function(e){this.rolesChangedListeners.push(e)}},{key:"canShowPage",value:function(e){return!e.availabilityAccessControl||e.availabilityAccessControl.IsAuthorized(this.userRoles)}},{key:"shouldEnableNode",value:function(e){return!e.enabledAccessControl||e.enabledAccessControl.IsAuthorized(this.userRoles)}},{key:"shouldShowNode",value:function(e){return!e.visibilityAccessControl||e.visibilityAccessControl.IsAuthorized(this.userRoles)}},{key:"updateRoles",value:function(e){var t=this;this.userRoles.length=0,e&&e.forEach(function(e){return t.userRoles.push(e)}),this.rolesChangedListeners.forEach(function(e){return e.OnSecurityContextChanged(t)})}}]),e}();!function(e){e[e.Success=0]="Success",e[e.BadCredentials=1]="BadCredentials",e[e.ServerError=2]="ServerError",e[e.CommunicationError=3]="CommunicationError",e[e.BadToken=4]="BadToken"}(On||(On={})),function(e){e[e.None=0]="None",e[e.LogInPending=1]="LogInPending",e[e.LogInCompleted=2]="LogInCompleted",e[e.LogOutPending=3]="LogOutPending",e[e.LogOutCompleted=4]="LogOutCompleted",e[e.Error=5]="Error"}(Rn||(Rn={}));var xn=n(89),Tn=n(103),Ln=n(102);function An(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Mn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageList=t}var t,n,a;return t=e,a=[{key:"UpdateRoleInformationForPage",value:function(e,t){e.dynamics.filter(function(e){return e instanceof xn.a}).forEach(function(e){e.OnSecurityContextChanged(t)}),e.dynamics.filter(function(e){return e instanceof Tn.a}).forEach(function(e){e.OnSecurityContextChanged(t)}),e.enabledAccessControlNodes.forEach(function(e){var n=t.shouldEnableNode(e);Object(Ln.a)(e,function(e){return e.isEnabled.value=n,!0})}),e.visibilityAccessControlNodes.forEach(function(e){e.visibility.value=t.shouldShowNode(e)})}}],(n=[{key:"OnSecurityContextChanged",value:function(t){this.pageList.forEach(function(n){e.UpdateRoleInformationForPage(n,t)})}}])&&An(t.prototype,n),a&&An(t,a),e}(),In=n(12),Bn=n(5);function Un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Fn(e,t,n){return t&&jn(e.prototype,t),n&&jn(e,n),e}var Nn=function(){function e(t){Un(this,e),this._xhrTimeout=1e3,void 0!==t&&t>0&&(this._xhrTimeout=t)}return Fn(e,[{key:"GetResource",value:function(e,t,n,a){}},{key:"PutResource",value:function(e,t,n,a){}},{key:"PostResource",value:function(e,t,n,a){var r=new Wn(200);r.xhr.onload=function(){n(r,a)},r.xhr.ontimeout=function(){n(r,a)},r.xhr.open("POST",e,!0),r.xhr.timeout=this._xhrTimeout,!1===In.a.SetContentType(r.xhr,In.a.plainTextMimeType)&&Ht.a.Log("WARNING: Failed to set the content MIME type.",zt.a.Warning),r.xhr.send(JSON.stringify(t))}}]),e}(),Wn=function(){function e(t){Un(this,e),this.xhr=new XMLHttpRequest,this._successStatus=200,this._successStatus=t}return Fn(e,[{key:"Succeeded",value:function(){return this.xhr.readyState===Bn.a.httpRequestReadyState_Done&&this.status===this._successStatus}},{key:"getResponseHeader",value:function(e){return this.xhr.getResponseHeader(e)}},{key:"status",get:function(){return this.xhr.status}},{key:"data",get:function(){return JSON.parse(this.xhr.responseText)}}]),e}();function Gn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Vn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.status=Rn.None,this._clientState="",this._authenticationToken=null,this._authServer=null,this._authProtcol=null,this._authenticationProtocol=Dn.a.None,this.ObtainAccessToken=function(e,t,a,r){var i=n.buildPassword(t),o={code:n._authenticationToken,grant_type:"authorization_code",username:e,password:i};n._authservice.PostResource(n.urlStart()+"/_pxc_api/auth/access-token",o,function(e,t){var n=t;if(e.Succeeded())null!=e.data.access_token?(n._authenticationToken=void 0,a(0,e.data.access_token,e.data.roles,r)):a(1,null,[],r);else{var i=On.CommunicationError;if(401==e.status){var o=e.getResponseHeader("WWW-Authenticate");null!=o&&(-1!=o.search("invalid_token")?(i=On.BadToken,n._authenticationToken=void 0):-1!=o.search("invalid_grant")&&(i=On.BadCredentials))}a(i,null,[],r)}},n)},this._authservice=new Nn(t.xhrTimeout),this._authServer=t.authenticationServer,this._authProtcol=t.serverProtocol,":"!=this._authProtcol.charAt(this._authProtcol.length-1)&&(this._authProtcol+=":"),this._authenticationProtocol=t.authenticationProtocol,this.refreshClientState()}var t,n,a;return t=e,(n=[{key:"clearStatus",value:function(){this.status=Rn.None}},{key:"refreshClientState",value:function(){try{if(sjcl.random.isReady()){var e=sjcl.random.randomWords(4);this._clientState=Math.abs(e[0]).toString(16)+Math.abs(e[1]).toString(16),Math.abs(e[2]).toString(16),Math.abs(e[3]).toString(16)}}catch(e){sjcl.Exception}}},{key:"logInAsync",value:function(e,t,n,a){var r=this;if(null==this._authenticationToken){this.ObtainAuthenticationToken(function(i,o){i.Succeeded()&&null!=i.data.code?(r._authenticationToken=i.data.code,r.ObtainAccessToken(e,t,n,a)):n(1,null,[],a)}.bind(this),a)}else this.ObtainAccessToken(e,t,n,a)}},{key:"buildPassword",value:function(e){if(this._authenticationProtocol==Dn.a.Application){var t=String.fromCharCode(112,120,99,104,109,105)+e,n=sjcl.hash.sha256.hash(sjcl.codec.utf8String.toBits(t));t="";var a=sjcl.bitArray.concat(sjcl.codec.utf8String.toBits(this._authenticationToken),n);return sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(a))}return e}},{key:"urlStart",value:function(){return this._authProtcol+"//"+this._authServer}},{key:"ObtainAuthenticationToken",value:function(e,t){this.refreshClientState();var n={response_type:"code",state:this._clientState,scope:"variables"};this._authservice.PostResource(this.urlStart()+"/_pxc_api/auth/auth-token",n,function(n,a){var r=a;n.Succeeded()&&null!=n.data.code&&(r._authenticationToken=n.data.code),e(n,t)},this)}},{key:"logOutAsync",value:function(){this.status=Rn.LogOutCompleted}}])&&Gn(t.prototype,n),a&&Gn(t,a),e}(),Kn=n(120),qn=n(72),Hn=n(80),zn=n(79),Xn=n(61);function Yn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Qn=function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.OnRowClickCallback=function(e,t){var n=a._engine.settings.renderOptions;if(e instanceof bt){var r=e,i=!r.checkBoxValue.value;switch(r.id){case"optBBox":i?n|=K.DrawBoundingBoxes:n&=~K.DrawBoundingBoxes;break;case"optAnimationPoints":i?n|=K.DrawAnimationPoints:n&=~K.DrawAnimationPoints;break;case"optHitRegions":i?n|=K.DrawHitRegions:n&=~K.DrawHitRegions;break;case"optFps":i?n|=K.DrawFps:n&=~K.DrawFps;break;case"optDebugSelection":i?n|=K.DrawDebugSelection:n&=~K.DrawDebugSelection;break;case"optButtonShadows":i?n|=K.DrawButtonShadows:n&=~K.DrawButtonShadows;break;case"optDialogShadows":i?n|=K.DrawDialogShadows:n&=~K.DrawDialogShadows;break;case"optDialogDimmer":i?n|=K.DrawDialogDimmer:n&=~K.DrawDialogDimmer;break;case"optOptimize":i?n|=K.Optimize:n&=~K.Optimize;break;case"optZoomToFit":i?n|=K.ZoomToFit:n&=~K.ZoomToFit;break;case"optHighDpi":i?n|=K.DrawHighDpi:n&=~K.DrawHighDpi;break;case"optForeground":i?n|=K.DrawForeground:n&=~K.DrawForeground;break;case"optBackground":i?n|=K.DrawBackground:n&=~K.DrawBackground}a._engine.setRenderOptions(n)}},this._engine=t;for(var r=this._engine.settings.renderOptions,i=0;i<n.rootNode.nodes.length;i++){var o=n.rootNode.nodes[i];if(o instanceof bt){var s=o;s.actions.push(new Xn.a(J.a.Click,this.OnRowClickCallback.bind(this)));var u=!1;switch(s.id){case"optZoomToFit":u=0!=(r&K.ZoomToFit);break;case"optHighDpi":u=0!=(r&K.DrawHighDpi);break;case"optButtonShadows":u=0!=(r&K.DrawButtonShadows);break;case"optDialogShadows":u=0!=(r&K.DrawDialogShadows);break;case"optOptimize":u=0!=(r&K.Optimize);break;case"optDialogDimmer":u=0!=(r&K.DrawDialogDimmer);break;case"optFps":u=0!=(r&K.DrawFps);break;case"optBBox":u=0!=(r&K.DrawBoundingBoxes);break;case"optAnimationPoints":u=0!=(r&K.DrawAnimationPoints);break;case"optHitRegions":u=0!=(r&K.DrawHitRegions);break;case"optDebugSelection":u=0!=(r&K.DrawDebugSelection);break;case"optForeground":u=0!=(r&K.DrawForeground);break;case"optBackground":u=0!=(r&K.DrawBackground)}if(n.screenVariables.contains("@RenderOptions."+s.id))n.screenVariables.getValue("@RenderOptions."+s.id).update(u)}}}var t,n,a;return t=e,a=[{key:"dispose",value:function(){this._model=null}},{key:"model",get:function(){if(!this._initialized){this._model.Name="@RenderOptions";for(var e=0;e<this._model.Objects.length;e++){var t=this._model.Objects[e];t.Variable="@RenderOptions."+t.ID}this._initialized=!0}return this._model}}],(n=null)&&Yn(t.prototype,n),a&&Yn(t,a),e}();Qn._initialized=!1,Qn._model={Name:"@RenderOptions",Objects:[{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Zoom-To-Fit",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:4},Rotation:0,ID:"optZoomToFit",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"High DPI",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:24.5},Rotation:0,ID:"optHighDpi",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Button Shadows",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:45},Rotation:0,ID:"optButtonShadows",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Dialog Shadows",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:65.5},Rotation:0,ID:"optDialogShadows",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Optimize",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:86},Rotation:0,ID:"optOptimize",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:144,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Dialog Dimmer",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:13,Y:147.5},Rotation:0,ID:"optDialogDimmer",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"FPS",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:177},Rotation:0,ID:"optFps",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"B-Boxes",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:197.5},Rotation:0,ID:"optBBox",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Animation Points",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:218},Rotation:0,ID:"optAnimationPoints",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Hit Regions",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:238.5},Rotation:0,ID:"optHitRegions",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:147,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Axes/Border",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:259},Rotation:0,ID:"optDebugSelection",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:126,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Foreground",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:31,Y:106.5},Rotation:0,ID:"optForeground",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:126,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Background",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:31,Y:127},Rotation:0,ID:"optBackground",IsTabSelectable:!0,TabOrder:0},{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,Y:0},Segments:[{Type:"LinePathSegment",End:{X:142,Y:0}}]}]},StartLineEndType:"None",EndLineEndType:"None",StartLineEndSize:"Medium",EndLineEndSize:"Medium",Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:1,DashStyle:{Offset:0},FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:18,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:14,Y:176},Rotation:0,ID:"Shape1",IsTabSelectable:!1,TabOrder:0},{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,Y:0},Segments:[{Type:"LinePathSegment",End:{X:142,Y:0}}]}]},StartLineEndType:"None",EndLineEndType:"None",StartLineEndSize:"Medium",EndLineEndSize:"Medium",Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:1,DashStyle:{Offset:0},FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:18,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:15,Y:290},Rotation:0,ID:"Shape2",IsTabSelectable:!1,TabOrder:0},{Type:"Button",IsLatching:!1,FillWhenDown:{Type:"SolidFill",Color:"#FF8ACCD1"},ImpulseTime:0,ValueWhenPressed:!0,ImagePlacement:"Left",ImageArea:{Width:50,Height:50},ImageAreaWidthUnits:"Percent",ImageAreaHeightUnits:"Percent",TextDirection:"LeftToRight",Margin:0,CornerRadii:{Width:0,Height:0},ImageScaling:"Fill",Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:144,Bottom:27}},Fill:{Type:"SolidFill",Color:"#FFECEDED"},LineColor:"#FFCCD0D2",LineWidth:1,DashStyle:{Offset:0},Text:"Close",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Center",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:15,Y:300},Rotation:0,ID:"Button2",IsTabSelectable:!0,TabOrder:0,Actions:[{Type:"CloseDialogAction",SourceType:"Constant",Gesture:"Click"}]}],Size:{Width:172,Height:340},BorderWidth:1,BorderColor:"#FF000000",MarginColor:"#FF000000",ImageScaling:"Fit",Fill:{Type:"SolidFill",Color:"#FFCCD0D2"},Version:"1.0.0"};var Zn,Jn=n(92),$n=n(19),ea=n(53),ta=n(71);!function(e){e[e.Normal=0]="Normal",e[e.Waiting=1]="Waiting",e[e.NoDataConnection=2]="NoDataConnection",e[e.Retrying=3]="Retrying",e[e.Aborting=4]="Aborting",e[e.LoginPrompt=5]="LoginPrompt",e[e.Authenticating=6]="Authenticating",e[e.ChangingProject=7]="ChangingProject",e[e.UpdatingLocalProject=8]="UpdatingLocalProject",e[e.LocalProjectRetry=9]="LocalProjectRetry"}(Zn||(Zn={}));var na=n(6),aa=n(27);function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ia(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var oa=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ra(this,e),this._wasDialogClosed=!1,this._navigationBackStack=[],this._navigationForwardStack=[],this._errorStatus=bn.a.OK,this._dragInverse=new Ce.a,this._app=t,this.settings=null!==r?r:new rn,this._dataClient=n,this._canvasHost=a,this._runFrameContext=new ca,this._runFrameContext.minInterval=this.settings.minRenderIntervalMsec,this.configureClock(),this._pageManager=new vn,En.a.initialize(t,n),this._connectionRetryTimer=new mn(1e3),this.startBlinkDynamicTimer();var i=this.loadSecurityParameters();null!=i&&(this.securityContext=function(e){var t;switch(e.authProtocol){case Dn.a.None:break;case Dn.a.Application:t=new kn;break;case Dn.a.Integrated:t=new kn}return t}(i),this.securityContext&&this.securityContext.addRolesChangedListener(new Mn(this.pageManager.pageStack)),this.authService=new Vn(this._dataClient.authenticationSettings)),exportGlobal(e._appVarName,this._app)}var t,n,a;return t=e,(n=[{key:"configureClock",value:function(){void 0!==this._clock&&this._clock.smoothingWindow.dataPollInterval!==this._dataClient.dataPollInterval&&(this._clock=void 0),void 0===this._clock&&(this._clock=new hn(parseFloat(this._dataClient.dataPollInterval.toString()),this.settings.logClockEvents))}},{key:"stop",value:function(){this.pageManager.pageStack.length>0&&this.deactivateTopPage(),this.pageManager.clearStack(),null!==e.Stopped&&e.Stopped()}},{key:"onChangingProject",value:function(e){var t=!1,n=this._dataClient.startPageUrl;return void 0!==n?(this.stop(),En.a.initialize(this._app,this._dataClient),this.configureClock(),this._errorStatus!==bn.a.Pending&&(this._errorStatus=bn.a.Pending),e.start(n),t=!0):this.changeRunState(Zn.Aborting),t}},{key:"loadPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fn.b.None,n=new Kn.a(this._app,this._dataClient,this._renderer.backgroundContext),a=t&fn.b.IsDialog?this.pageManager.topPage:null,r=n.download(e,a);return null!==r&&(r.showOptions=t,this.showPage(r),!0)}},{key:"loadPageAsync",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fn.b.None,r=new Kn.a(this._app,this._dataClient,this._renderer.backgroundContext),i=a&fn.b.IsDialog?this.pageManager.topPage:null;r.downloadAsync(e,i,function(e,r){r===bn.a.OK&&null!==e&&(e.showOptions=a,t.showPage(e)),n(r)})}},{key:"changeRunState",value:function(e){var t=this,n=this.prepareRetryCallback(this._dataClient.RecoveryCountdown),a=n.retryLimit,r=n.retryTimerCallback;switch(e){case Zn.Waiting:this._statusMessage.showPreloader();break;case Zn.NoDataConnection:this._statusMessage.showNoDataConnection(a,ErrorStrings.ConnectionError),this.pageManager.dataGroup.clear(),this._dataClient.stopUpdate(),this._connectionRetryTimer.start(a,r);break;case Zn.Retrying:this._connectionRetryTimer.reset(),this.startDataUpdate();break;case Zn.Aborting:this.stop(),this.showStatusMessage();break;case Zn.Normal:this._statusMessage.hideAllOverlays();break;case Zn.LoginPrompt:var i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).status,n=void 0===e?null:e;n&&(t._errorStatus=n,t._errorStatus===bn.a.ProjectChanged&&t._dataClient.onProjectChanged()),t._dataClient.updateCreateSessionQueuedStatus()};if(this._dataClient.startSessionMaintenanceCycle(i,i)){if(this._dataClient.isCreateSessionQueued)return;this._statusMessage.hideAllOverlays(),this.openLoginDialog()||(this.stop(),this.showStatusMessage())}else this._errorStatus=this._dataClient.status,this.stop(),this.showStatusMessage();break;case Zn.Authenticating:this._statusMessage.showPreloader();break;case Zn.ChangingProject:this._errorStatus=bn.a.Pending}}},{key:"prepareRetryCallback",value:function(e){var t=this;return{retryLimit:e,retryTimerCallback:function(e){e>0&&t._statusMessage.updateRetryCounter(e)}}}},{key:"showStatusMessage",value:function(){var e=null;switch(this._errorStatus){case bn.a.DownloadScreenError:e=ErrorStrings.DownloadScreenError;break;case bn.a.UpdateDataError:e=ErrorStrings.UpdateDataError;break;case bn.a.RegisterGroupError:e=ErrorStrings.RegisterGroupError;break;case bn.a.AuthorizationError:e=ErrorStrings.UnauthorizedDataError;break;case bn.a.SessionError:e=ErrorStrings.ManageSessionError;break;case bn.a.DuplicateStationIDError:e=ErrorStrings.DuplicateStationIDError;break;case bn.a.NetworkLevelError:e=ErrorStrings.NetworkLevelError;break;case bn.a.NetworkTimeoutError:e=ErrorStrings.NetworkTimeoutError;break;case bn.a.ExceptionError:e=ErrorStrings.ExceptionError;break;case bn.a.LocalProjectChangeError:e=ErrorStrings.LocalProjectChangeError;break;default:case bn.a.InternalError:e=ErrorStrings.InternalError}this._statusMessage.showStatusMessage(e)}},{key:"deactivateTopPage",value:function(){this._dataClient.stopUpdate(this.pageManager.dataGroup),this.focusNode(null),this.selectDebugVisual(null),null!==this.pageManager.topPage&&null!==e.PageDeactivated&&e.PageDeactivated(this.pageManager.topPage)}},{key:"activateTopPage",value:function(){this._renderer.initialize(this.pageManager,!1);var t=this.pageManager.topPage;null!==e.PageActivated&&e.PageActivated(t),this.canShowPage(t)&&(this.securityContext&&Mn.UpdateRoleInformationForPage(t,this.securityContext),this.startDataUpdate())}},{key:"showPage",value:function(e){this._wasDialogClosed=!1,this.deactivateTopPage(),e.showOptions&fn.b.IsDialog||this.pageManager.clearStack(),this.pageManager.pushPage(e),this.activateTopPage()}},{key:"closeDialog",value:function(e){if(null!==e.targetName&&this.writeVariable(e.target,e.source),this.pageManager.pageStack.length<=1)this.navigateBack();else{this.deactivateTopPage(),this._wasDialogClosed=!0;this.pageManager.popPage();this.activateTopPage()}}},{key:"openDialog",value:function(e){if(null!==e.pageName){this._wasDialogClosed=!1;var t=this.formatPageUrl(e.pageName),n=fn.b.IsDialog;e.dimBackground&&(n|=fn.b.DimBackground),this.loadPage(t,n)}}},{key:"IsTopPageLoginDialog",value:function(){return this.pageManager.isTopPageLoginDialog()}},{key:"openLoginDialog",value:function(){var e=new Hn.a;return e.pageName="login",e.dimBackground=!0,this.openDialog(e),!!this.IsTopPageLoginDialog()&&(this.pageManager.topPage.rootNode.nodes.filter(function(e){return e.actions.some(function(e){return e instanceof qn.a})})[0].actions.push(new zn.a),!0)}},{key:"loadMessageBox",value:function(e){var t={Version:"1.0.0",Objects:[{Type:"SymbolInstance",Symbol:e.symbol,Parameters:[{Type:"ParameterBindingConstant",Source:e.value1,Name:"Value1"},{Type:"ParameterBindingConstant",Source:e.value2,Name:"Value2"},{Type:"ParameterBindingConstant",Source:e.icon,Name:"Icon"},{Type:"ParameterBindingConstant",Source:e.buttons,Name:"Buttons"},{Type:"ParameterBindingVariable",Source:e.targetName,Name:"ResultVariable"},{Type:"ParameterBindingConstant",Source:e.caption,Name:"Caption"}]}]},n=new Kn.a(this._app,this._dataClient,this._renderer.backgroundContext).loadModel(t,this.pageManager.topPage);null!==n&&(n.showOptions=fn.b.IsDialog|fn.b.DimBackground,this.showPage(n))}},{key:"loadRenderOptionsDialog",value:function(){if("@RenderOptions"!==this._pageManager.topPage.name){var e=new Kn.a(this._app,this._dataClient,this._renderer.backgroundContext).loadModel(Qn.model,this.pageManager.topPage);if(null!==e){new Qn(this,e);e.showOptions=fn.b.IsDialog,this.showPage(e)}}}},{key:"getNavigationState",value:function(e){var t=0;return this._navigationBackStack.length>1&&(t|=fn.a.AllowBack),this._navigationForwardStack.length>0&&(t|=fn.a.AllowForward),t}},{key:"startDataUpdate",value:function(){var e=this;if(!this.topPageIsRestricted()&&!this.IsTopPageLoginDialog()){var t=this.pageManager.dataGroup;if(t.clear(),this._errorStatus=bn.a.OK,t.hasVariables){this._dataClient.stopSessionMaintenanceCycle();this._dataClient.startUpdate(t,function(n){e._clock.synchronize(e._dataClient.sysTickCount),e._errorStatus=e._dataClient.status,e._errorStatus===bn.a.OK&&null!==n&&t.update(n,e._dataClient.sysTickCount)})}else{var n=function(){e._dataClient.isSessionMaintenanceActive||(Ht.a.Log("ERROR: Data client failed to start session maintenance cycle, so treating as internal error.",zt.a.Error),e._errorStatus=bn.a.InternalError)};this._dataClient.startSessionMaintenanceCycle(n,n),t.update([],0)}}}},{key:"setRenderOptions",value:function(e){var t=0!=(this.settings.renderOptions&K.DrawHighDpi),n=0!=(e&K.DrawHighDpi),a=0!=(this.settings.renderOptions&K.ZoomToFit),r=0!=(e&K.ZoomToFit);this.settings.renderOptions=e,this._renderer.options=this.settings.renderOptions,a!=r&&this.pageManager.centerPages(this._renderer.width,this._renderer.height,r),t!==n?this._renderer.initialize(this.pageManager):this._renderer.invalidate()}},{key:"zoom",value:function(e){this.pageManager.zoom(e,this._renderer.width,this._renderer.height,this.settings.zoomToFit),this._renderer.invalidate()}},{key:"pan",value:function(e,t){this.pageManager.pan(e,t,this._renderer.width,this._renderer.height),this._renderer.invalidate()}},{key:"getHitVisual",value:function(e,t){var n=this.pageManager.topPage,a=e*this._renderer.pixelRatio,r=t*this._renderer.pixelRatio;return this.getNearestHit(n.rootNode,a,r)}},{key:"getNearestHit",value:function(e,t,n){for(var a=null,r=e.nodes.length-1;r>=0&&null===a;r--){var i=e.nodes[r];i.screenBounds.containsXY(t,n)&&(a=this.getNearestHit(i,t,n))}if(null===a&&e instanceof C.a){var o=e;(o.hasHitRegion||this.settings.renderOptions&K.DrawDebugSelection)&&o.isPointInPath(this._renderer.foregroundContext,t,n)&&!o.isPointClippped(t,n)&&e.isVisible&&(a=e)}return a}},{key:"selectDebugVisual",value:function(e){this.pageManager.selectedDebugVisual=e}},{key:"focusNode",value:function(e){this.pageManager.focusedNode=e}},{key:"dragObject",value:function(e){var t=e.dynamic,n=t.path;if(Ce.a.findInverse(n.screenMatrix,this._dragInverse)){var a=e.mouseCurrent.x*this._renderer.pixelRatio,r=e.mouseCurrent.y*this._renderer.pixelRatio;this._dragInverse.transformXY(a,r,e.dragPoint);var i,o=n.solver.findClosestPoint(e.dragPoint,e.closestPoint);(o-=t.pathOffset)<0?o+=1:o>1&&(o-=1);var s=t.highRange-t.lowRange;if(i=t.direction===Jn.a.Reverse?t.highRange-o*s:t.lowRange+o*s,n instanceof We&&e.action.snapToTick){var u=s/n.tickCount,c=Math.round((i-t.lowRange)/u);i=t.lowRange+c*u}t.dataSource.value=i}}},{key:"changeCursor",value:function(e){this._canvasHost.changeCursor(e)}},{key:"navigate",value:function(t){t!==this._navigationBackStack[this._navigationBackStack.length-1]&&(this._navigationBackStack.length>=e.pageStackSize&&this._navigationBackStack.splice(0,1),this.loadPage(t)&&(this._navigationForwardStack=[],this._navigationBackStack.push(t),this.pageManager.rootPage.updateNavigationState(this.getNavigationState(t),this.securityContext)))}},{key:"navigateHome",value:function(){this._navigationBackStack.length>0&&this.navigate(this._dataClient.startPageUrl)}},{key:"navigateBack",value:function(){if(this._navigationBackStack.length>1){var e=this._wasDialogClosed,t=this._navigationBackStack,n=e?1:2,a=t[t.length-n];null!=this.loadPage(a)&&this.navigateBackHelper(e,t,a)}}},{key:"navigateBackHelper",value:function(e,t,n){e?this._navigationForwardStack.push(t[t.length-1]):this._navigationForwardStack.push(t.pop()),this.pageManager.rootPage.updateNavigationState(this.getNavigationState(n),this.securityContext),this._wasDialogClosed=!1}},{key:"navigateForward",value:function(){if(this._navigationForwardStack.length>0){var e=this._navigationForwardStack[this._navigationForwardStack.length-1];null!=this.loadPage(e)&&(this._navigationBackStack.push(this._navigationForwardStack.pop()),this.pageManager.rootPage.updateNavigationState(this.getNavigationState(e),this.securityContext))}}},{key:"navigateLeft",value:function(){this.navigatetoDirection($n.a.Left)}},{key:"navigateRight",value:function(){this.navigatetoDirection($n.a.Right)}},{key:"navigateUp",value:function(){this.navigatetoDirection($n.a.Up)}},{key:"navigateDown",value:function(){this.navigatetoDirection($n.a.Down)}},{key:"navigatetoDirection",value:function(e){var t=this.pageManager.topPage.GetPageForDirection(e);null!=t&&""!=t&&this.navigate(this.formatPageUrl(t))}},{key:"toggleVariable",value:function(e){if(null!=e){var t=y.a.convertToBoolean(e.value)?0:1;this.writeConstant(e,t)}}},{key:"incrementVariable",value:function(e,t){var n;null!==e&&(n=na.a.isLong(e.value)?e.value.add(t):y.a.getNumber(e.value)+t,this.writeConstant(e,n))}},{key:"writeVariable",value:function(e,t){if(null!==e&&e instanceof rt.a&&null!==t)if(aa.a.isLocalVar(e.name))e.update(t.value);else if(t instanceof ot.a)t.value=En.a.prepareSubstituteValue(e.name,t.value),this._dataClient.writeVariable(ea.a.Constant,e,t.value);else{var n=t;aa.a.isLocalVar(n.name)?this._dataClient.writeVariable(ea.a.Constant,e,t.value):this._dataClient.writeVariable(ea.a.Variable,e,n.name)}}},{key:"writeConstant",value:function(e,t){null!==e&&e instanceof rt.a&&(aa.a.isLocalVar(e.name)?e.update(t):this._dataClient.writeVariable(ea.a.Constant,e,t))}},{key:"formatPageUrl",value:function(e){var t=_e.a.getResourceUrl(e);return-1==t.toLowerCase().indexOf(".json",t.length-".json".length)&&(t+=".json"),t}},{key:"toggleBlinkVar",value:function(e,t,n){if(0==Math.abs(t%n)){var a=this.pageManager.topPage;if(null!==a){var r=a.screenVariables.getValue(e);null!==r&&this.toggleVariable(r)}}}},{key:"startBlinkDynamicTimer",value:function(){var e=this;if(null==this._blinkCallbackTimer){this._blinkCallbackTimer=new mn(500),this._blinkCallbackTimer.start(0,function(t){e.toggleBlinkVar("@BlinkFastStatus",t,1),e.toggleBlinkVar("@BlinkStatus",t,2),e.toggleBlinkVar("@BlinkSlowStatus",t,4)})}}},{key:"startLocalClockTimer",value:function(e){if(e&&null==this._localTimeTimer){var t=function(){e.value=na.a.fromNumber(Date.now()).multiply(1e6)};t(),this._localTimeTimer=setInterval(t,1e3)}}},{key:"loadApplicationVariables",value:function(){var e=this._dataClient.downloadScreen(_e.a.getResourceUrl("application.variables.json"));if(null!==e){var t=e.variables;if(t)for(var n=0;n<t.length;n++)if(aa.a.isAppVar(t[n].name)){var a=this._app.registerApplicationVariable(t[n].name,t[n].type);null!==t[n].initValue&&void 0!==t[n].initValue&&a.initialize(t[n].initValue)}var r=this._app.getApplicationVariable("@@ClientNow");r&&this.startLocalClockTimer(r)}}},{key:"loadSecurityParameters",value:function(){var e=new Cn;return e.authProtocol=this._dataClient.authenticationProtocol,e}},{key:"logInEx",value:function(e,t){this.updateLocalLoginVariables(0,"");var n=this.pageManager.topPage.rootNode.nodes.filter(function(e){return e.id.toUpperCase()==ta.a.passwordTargetName})[0].getTargetProperty("Text").value,a=this.pageManager.topPage.rootNode.nodes.filter(function(e){return e.id.toUpperCase()==ta.a.userNameTargetName})[0].getTargetProperty("Text").value,r=new ua;r.engine=e,r.username=a,this.authService.logInAsync(a,n,this.authCallback,r)}},{key:"logOut",value:function(e){if(void 0!==this.securityContext&&(this.pageManager.dataGroup.clear(),this.authService.logOutAsync(),this.securityContext.loggedInUserName="",this.securityContext.access_token=void 0,this.securityContext.updateRoles([]),this.updateLoggedUserVariable(),this._dataClient.access_token=void 0),null!==e.pageName){var t=this.formatPageUrl(e.pageName);t===this._navigationBackStack[this._navigationBackStack.length-1]?this.activateTopPage():this.navigate(t)}}},{key:"updateLoggedUserVariable",value:function(){this.pageManager.topPage.screenVariables.contains(e.LocalVariableLoggedInUser)||this.pageManager.topPage.screenVariables.add(e.LocalVariableLoggedInUser,new rt.a(e.LocalVariableLoggedInUser,"STRING")),this.writeConstant(this.pageManager.topPage.screenVariables.getValue(e.LocalVariableLoggedInUser),this.securityContext.loggedInUserName)}},{key:"authCallback",value:function(e,t,n,a){var r=a,i=a.engine;e===On.Success?(i.securityContext.access_token=t,i._dataClient.access_token=t,i.pageManager.pageStack.length>1&&i.canShowPage(i.pageManager.pageStack[i.pageManager.pageStack.length-1])&&(i.closeDialog(new qn.a),i.securityContext.loggedInUserName=r.username,i.securityContext.updateRoles(n)),i.startDataUpdate()):e===On.BadCredentials&&i.updateLocalLoginVariables(1,"Invalid login credentials."),i.updateLoggedUserVariable()}},{key:"updateLocalLoginVariables",value:function(t,n){var a=this.pageManager.topPage.screenVariables,r=a.getValue(e.LocalVariableLoginStatusCode),i=a.getValue(e.LocalVariableLoginErrorString);r&&i&&(this.writeConstant(r,t),this.writeConstant(i,n))}},{key:"topPageIsRestricted",value:function(){return null!==this.pageManager.topPage&&!this.canShowPage(this._pageManager.topPage)}},{key:"canShowPage",value:function(e){return void 0===this.securityContext||this.securityContext.canShowPage(e)}},{key:"app",get:function(){return this._app}},{key:"renderer",get:function(){return this._renderer}},{key:"pageManager",get:function(){return this._pageManager}}])&&ia(t.prototype,n),a&&ia(t,a),e}();oa._appVarName="g_App",oa.LocalVariableLoggedInUser="@loggedInUser",oa.LocalVariableLoginStatusCode="@loginStatusCode",oa.LocalVariableLoginErrorString="@loginErrorString",oa.Started=null,oa.Stopped=null,oa.PageActivated=null,oa.PageDeactivated=null,oa.pageStackSize=20;var sa,ua=function e(){ra(this,e)},ca=function e(){ra(this,e),this.previousState=Zn.Waiting,this.lastRender=0,this.minInterval=0},la=n(34);function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){return!t||"object"!==ha(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function da(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function va(e,t,n){return t&&ga(e.prototype,t),n&&ga(e,n),e}function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){e[e.None=0]="None",e[e.DrawDialogDimmer=1]="DrawDialogDimmer",e[e.DrawBackground=2]="DrawBackground",e[e.DrawVisual=3]="DrawVisual",e[e.DrawBorder=4]="DrawBorder"}(sa||(sa={}));var ma=function e(){ya(this,e),this.type=sa.None,this.layer=0,this.rect=null,this.data=null,this.zorder=-1},ba=function(){function e(t){ya(this,e),this.position=-1,this.renderList=t}return va(e,[{key:"next",value:function(){return null}},{key:"reset",value:function(){this.position=-1}}]),e}(),Ea=function(e){function t(){return ya(this,t),fa(this,_a(t).apply(this,arguments))}return da(t,ba),va(t,[{key:"next",value:function(){return this.position++,this.position<this.renderList.backgroundCount?this.renderList.getBackgroundCommand(this.position):null}}]),t}(),Da=function(e){function t(){return ya(this,t),fa(this,_a(t).apply(this,arguments))}return da(t,ba),va(t,[{key:"next",value:function(){return this.position++,this.position<this.renderList.foregroundCount?this.renderList.getForegroundCommand(this.position):null}}]),t}(),Sa=function(){function e(t){ya(this,e),this._foregroundCount=0,this._backgroundCount=0,this._backgroundIterator=new Ea(this),this._foregroundIterator=new Da(this),this._zorder=0,this._previousBackgroundCount=0,this._hasBackroundZOrderChanged=!1,this._list=new Array(t);for(var n=0;n<t;n++)this._list[n]=new ma;this.clear(!0)}return va(e,[{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._previousBackgroundCount=e?0:this._backgroundCount,this._hasBackroundZOrderChanged=e,this._backgroundCount=0,this._foregroundCount=0,this._zorder=0}},{key:"addToForeground",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._foregroundCount+this._backgroundCount>=this._list.length)throw Error("Index out of bounds.");var r=this._foregroundCount,i=this._list[r];i.type=e,i.layer=t,i.rect=n,i.data=a,i.zorder=this._zorder++,this._foregroundCount++}},{key:"addToBackground",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._foregroundCount+this._backgroundCount>=this._list.length)throw Error("Index out of bounds.");var r=this._list.length-1-this._backgroundCount,i=this._zorder++,o=this._list[r];o.zorder!==i&&(this._hasBackroundZOrderChanged=!0),o.type=e,o.layer=t,o.rect=n,o.data=a,o.zorder=i,this._backgroundCount++}},{key:"addOverlapping",value:function(e,t,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(this.foregroundIterator.reset();null!==(a=this.foregroundIterator.next())&&!n.intersects(a.rect););return null===a?(this.addToBackground(e,t,n,r),!1):(this.addToForeground(e,t,n,r),!0)}},{key:"getForegroundCommand",value:function(e){if(e>=this._foregroundCount||e<0)throw Error("Index out of bounds.");return this._list[e]}},{key:"getBackgroundCommand",value:function(e){if(e>=this._backgroundCount||e<0)throw Error("Index out of bounds.");return e=this._list.length-1-e,this._list[e]}},{key:"foregroundCount",get:function(){return this._foregroundCount}},{key:"backgroundCount",get:function(){return this._backgroundCount}},{key:"backgroundIterator",get:function(){return this._backgroundIterator}},{key:"foregroundIterator",get:function(){return this._foregroundIterator}},{key:"hasBackgroundChanged",get:function(){return this._hasBackroundZOrderChanged||this._previousBackgroundCount!=this.backgroundCount}}]),e}();function Pa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var wa=function(){function e(t,n,a,r,i,o,s){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._spriteIndex=0,this._loadingSpriteSize=128,this._spriteWidth=0,this._spriteHeight=0,this._sheetRows=0,this._sheetColumns=0,this._spriteCount=0,this._animationPausemsecs=10,this._waitingLoaded=!1,this._lastRenderTime=0,this._spriteWidth=n,this._spriteHeight=a,this._sheetRows=r,this._sheetColumns=i,this._spriteCount=o,this._animationPausemsecs=s,this._imageElement=window.document.createElement("img"),this._imageElement.onload=function(e){u._imageElement.width>0&&u._imageElement.height>0&&(u._waitingLoaded=!0)},this.calcSpriteMaps(),this._imageElement.src=t}var t,n,a;return t=e,(n=[{key:"calcSpriteMaps",value:function(){var e,t;this._spriteMaps=new Array(this._spriteCount);for(var n=this._spriteWidth,a=this._spriteHeight,r=0;r<this._spriteMaps.length;r++)e=Math.floor(r/this._sheetColumns),t=r%this._sheetColumns,this._spriteMaps[r]=new ue.a(t*n,e*a,t*n+n,e*a+a)}},{key:"renderToContextAtLocation",value:function(e,t,n){if(this._waitingLoaded){e.drawImage(this._imageElement,this._spriteMaps[this._spriteIndex].left,this._spriteMaps[this._spriteIndex].top,this._spriteWidth,this._spriteHeight,t,n,this._spriteWidth,this._spriteHeight);var a=Date.now();a-this._lastRenderTime>this._animationPausemsecs&&(this._lastRenderTime=a,this._spriteIndex=(this._spriteIndex+1)%this._spriteMaps.length)}}},{key:"width",get:function(){return this._spriteWidth}},{key:"height",get:function(){return this._spriteHeight}}])&&Pa(t.prototype,n),a&&Pa(t,a),e}();function Ca(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Oa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hudActive=!1,this._modalOverlay=!1,this._preloader=!1,this._noConnection=!1,this._anmiate=!1,this._canvas=t;var n=_e.a.getResourceUrl("loadingSpriteSheet.png");this._loadingAnimation=new wa(n,128,128,4,5,19,50)}var t,n,a;return t=e,(n=[{key:"isActive",value:function(){return this._hudActive}},{key:"showHUD",value:function(){this._hudActive||(document.appendChild(this._canvas),this._hudActive=!0)}},{key:"hideHud",value:function(){this._hudActive&&(document.removeChild(this._canvas),this._hudActive=!1)}},{key:"setRetryStatusMessage",value:function(e){this._statusMessage="Retry in "+e.toString()+" seconds"}},{key:"hideAllOverlays",value:function(){this.hideHud(),this._preloader=!1,this._modalOverlay=!1,this._statusMessage=void 0,this.retryLimit=0,this.retryCounter=0,this._caption=void 0,this._statusMessage=void 0,this._anmiate=!1}},{key:"showPreloader",value:function(){this._modalOverlay=!0,this._preloader=!0,this._noConnection=!1,this.retryLimit=0,this._caption="",this._statusMessage="",this._anmiate=!0,this.showHUD()}},{key:"updateRetryCounter",value:function(e){this.retryCounter=e,this.showHUD(),this.setRetryStatusMessage(this.retryCounter),console.log(this._statusMessage)}},{key:"showNoDataConnection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ErrorStrings.ConnectionError;this._modalOverlay=!0,this._preloader=!1,this._noConnection=!0,this.retryLimit=e,this._anmiate=!1,this.showHUD(),this._caption=t,this.setRetryStatusMessage(this.retryLimit)}},{key:"showStatusMessage",value:function(e){this.hideAllOverlays(),this._anmiate=!1,this.showHUD(),this._caption=ErrorStrings.pageCaption,this._statusMessage=e}},{key:"getBackgroundPath",value:function(e,t,n,a,r){var i=new ue.a(e,t,e+n,t+a);return void 0!==this._backgroundPath&&this._lastRect.equals(i)&&this._lastRadius==r?this._backgroundPath:(this._lastRect=i,this._lastRadius=r,this._backgroundPath=new fe.a(i,!0,new v.a(r,r)),this._backgroundPath)}},{key:"renderLoading",value:function(e,t){if(this._anmiate){var n=this.viewPortCenterX(t)-.5*this._loadingAnimation.width,a=this.viewPortCenterY(t)-.5*this._loadingAnimation.height;this._loadingAnimation.renderToContextAtLocation(e,n,a)}}},{key:"viewPortCenterX",value:function(e){return e.left+.5*e.width}},{key:"viewPortCenterY",value:function(e){return e.top+.5*e.height}},{key:"renderCenteredRoundedRectangle",value:function(e,t,n,a,r){var i=this.viewPortCenterX(t)-.5*n,o=this.viewPortCenterY(t)-.5*a,s=this.getBackgroundPath(i,o,n,a,r);e.save(),e.beginPath(),U.a.define(e,s),e.fill(),e.restore()}},{key:"render",value:function(e,t,n,a){if(this._hudActive){e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="rgba(0,0,0,0.6)",e.fillRect(0,0,e.canvas.width,e.canvas.height);t=this.viewPortCenterX(a)-250,n=this.viewPortCenterY(a)-70;var r=500;this._anmiate&&(r=140),e.fillStyle="#1e2326",this.renderCenteredRoundedRectangle(e,a,r,140,10),n+=40,t+=10,e.fillStyle="white",e.font="18px",void 0!==this._caption&&(e.fillText(this._caption,t,n),n+=20),void 0!==this._statusMessage&&e.fillText(this._statusMessage,t,n),this.renderLoading(e,a),e.restore()}}},{key:"statusMessage",get:function(){return this._statusMessage}}])&&Ca(t.prototype,n),a&&Ca(t,a),e}();function Ra(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ka=function(){function e(t,n,a,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CanvasResized=null,this._viewportRect=new la.a,this._lastRenderTime=0,this._frameCount=0,this._fps=0,this._queue=new Sa(0),this._screenMatrix=new Ce.a,this._invalidated=!0,this._focusPoints=v.a.createPointArray(4),this._focusI=new v.a,this._focusJ=new v.a,this._focusPadding=new v.a,this._nodeAxesOrigin=new v.a,this._nodeAxesI=new v.a,this._nodeAxesJ=new v.a,this.options=a,this._foregroundCanvas=t,this._foregroundContext=t.getContext("2d"),this.augmentContext(this._foregroundContext,this),this._backgroundCanvas=n,this._backgroundContext=this._backgroundCanvas.getContext("2d"),this._backgroundCanvas.width=this._foregroundCanvas.width,this._backgroundCanvas.height=this._foregroundCanvas.height,this.augmentContext(this._backgroundContext,this),void 0!==r&&(this._hudCanvas=r,this._hudContext=r.getContext("2d"),this._hudCanvas.width=this._foregroundCanvas.width,this._hudCanvas.height=this._foregroundCanvas.height,this.augmentContext(this.hudContext,this),this._statusMessage=new Oa(r)),console.log("resizing canvas"),this.resizeCanvas(),window.addEventListener("resize",function(e){i.resizeCanvas()},!1)}var t,n,a;return t=e,(n=[{key:"augmentContext",value:function(e,t){e.transformFill=function(){if(void 0===this.fillStyle.fillMatrix)this.fill();else{this.save();var e=this.fillStyle.fillMatrix;this.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.fill(),this.restore()}},e.getPixelRatio=function(){return t.pixelRatio},e.getInvPixelRatio=function(){return t.invPixelRatio}}},{key:"resizeCanvas",value:function(){this._width=window.innerWidth,this._height=window.innerHeight,this._pixelRatio=0!=(this.options&K.DrawHighDpi)?window.devicePixelRatio:1,this._invPixelRatio=1/this.pixelRatio,this._foregroundCanvas.width=window.innerWidth*this.pixelRatio,this._foregroundCanvas.height=window.innerHeight*this.pixelRatio,this._foregroundCanvas.style.width=window.innerWidth+"px",this._foregroundCanvas.style.height=window.innerHeight+"px",this._backgroundCanvas.width=window.innerWidth*this.pixelRatio,this._backgroundCanvas.height=window.innerHeight*this.pixelRatio,this._backgroundCanvas.style.width=window.innerWidth+"px",this._backgroundCanvas.style.height=window.innerHeight+"px",void 0!==this._hudCanvas&&(this._hudCanvas.width=this._foregroundCanvas.width,this._hudCanvas.height=this._foregroundCanvas.height,this._hudCanvas.style.width=this._foregroundCanvas.style.width,this._hudCanvas.style.height=this._foregroundCanvas.style.height),this.invalidate(),null!==this.CanvasResized&&this.CanvasResized(this.width,this.height)}},{key:"initialize",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.getTotalVisualNodeCount();n+=3*e.pageStack.length,this._queue=new Sa(n),this.invalidate(),t?this.resizeCanvas():null!==this.CanvasResized&&this.CanvasResized(this.width,this.height),this._foregroundCanvas.style.backgroundColor=e.rootPage.marginColor.toString(),this._backgroundCanvas.style.backgroundColor=e.rootPage.marginColor.toString()}},{key:"invalidate",value:function(){this._invalidated=!0}},{key:"preRender",value:function(e){var t=this._queue,n=e.pageStack,a=Date.now(),r=this._screenMatrix;r.identity(),r.scale(this.pixelRatio,this.pixelRatio),t.clear(this._invalidated);for(var i=0,o=n.length;i<o;i++){var s=n[i];s.computeScreenMatrix(r),i==e.dimmerLayer&&0!=(this.options&K.DrawDialogDimmer)&&t.addOverlapping(sa.DrawDialogDimmer,i,this._viewportRect);var u=i>0&&0!=(this.options&K.DrawDialogShadows);t.addOverlapping(sa.DrawBackground,i,s.screenBounds,u),this.preRenderNode(s.rootNode,s.screenMatrix,i,a),s.borderWidth>0&&t.addOverlapping(sa.DrawBorder,i,s.screenBounds)}}},{key:"preRenderNode",value:function(e,t,n,a){e.computeScreenMatrix(t),e.computeScreenClipRect(),e.computeScreenBounds();var r=this._queue;e instanceof C.a&&e.isVisible&&(!this._invalidated&&this.options&K.Optimize?e.isAnimating(a)?r.addToForeground(sa.DrawVisual,n,e.screenBounds,e):r.addOverlapping(sa.DrawVisual,n,e.screenBounds,e)&&e.resetAnimationWatchDog():r.addToBackground(sa.DrawVisual,n,e.screenBounds,e));for(var i=0,o=e.nodes.length;i<o;i++){var s=e.nodes[i];this.preRenderNode(s,e.screenMatrix,n,a),e.screenBounds.union(s.screenBounds)}e.screenClipRect}},{key:"render",value:function(e){var t=this._queue,n=this._viewportRect,a=this._foregroundContext,r=this.backgroundContext;this.preRender(e),this._invalidated?(this.clearCanvas(r),this.clearCanvas(a),this.resetViewport(a,e.rootPage,n)):this.options&K.DoubleBufferedHost&&this.clearCanvas(a),a.save(),r.save(),this.clearViewport(a,n),this.options&K.DrawBackground&&(!t.hasBackgroundChanged&&this.options&K.Optimize||(this.clearViewport(r,n),this.executeCommands(r,e,t.backgroundIterator,!1)),a.setTransform(1,0,0,1,0,0),a.drawImage(this._backgroundCanvas,n.left,n.top,n.width,n.height,n.left,n.top,n.width,n.height)),this.options&K.DrawForeground&&this.executeCommands(a,e,t.foregroundIterator,!0);var i=e.focusedNode;if(null!==i&&i.focusStyle!==at.a.None&&(this.resetClipRegion(a,n),this.setPageClipRegion(a,e.topPage),this.drawFocusRect(a,i)),this.options&K.DrawDebugSelection){var o=e.selectedDebugVisual;null!==o&&(this.resetClipRegion(a,n),this.drawDebugSelection(a,o))}a.restore(),r.restore(),this.renderHUD(this._hudContext,n),this.options&K.DrawFps&&this.drawFps(a,n),this._invalidated=!1}},{key:"renderHUD",value:function(e,t){if(void 0===this._statusMessage)return!1;e.save(),e.setTransform(1,0,0,1,0,0),e.scale(this.pixelRatio,this.pixelRatio),this._statusMessage.render(e,0,100,t),e.restore()}},{key:"resetViewport",value:function(e,t,n){if(t){var a=t.size.x*t.scale.x*this.pixelRatio,r=t.size.y*t.scale.y*this.pixelRatio;n.left=Math.max(0,t.location.x*this.pixelRatio),n.top=Math.max(0,t.location.y*this.pixelRatio),n.right=Math.min(e.canvas.width,n.left+a),n.bottom=Math.min(e.canvas.height,n.top+r)}}},{key:"executeCommands",value:function(e,t,n,a){var r,i,o=-1,s=null;for(n.reset();null!=(r=n.next());)switch(r.layer!==o&&(o=r.layer,s=t.pageStack[o],this.resetClipRegion(e,this._viewportRect),i=!1),r.type>sa.DrawBackground&&!i&&(this.setPageClipRegion(e,s),i=!0),r.type){case sa.DrawDialogDimmer:this.drawDialogDimmer(e);break;case sa.DrawBackground:this.drawPageBackground(e,s,r.data);break;case sa.DrawVisual:var u=r.data;if(null!=u.screenClipRect){var c=u.screenClipRect;e.save(),e.setTransform(1,0,0,1,0,0),e.beginPath(),e.rect(c.left,c.top,c.width,c.height),e.clip()}u.draw(e,this.options),this.options&K.DrawHitRegions&&u.hasHitRegion&&U.a.drawHitRegions(e,u.path,u.screenMatrix),this.options&K.DrawBoundingBoxes&&this.drawBoundingBox(e,u,a),null!=u.screenClipRect&&e.restore();break;case sa.DrawBorder:this.drawPageBorder(e,s)}}},{key:"resetClipRegion",value:function(e,t){e.restore(),e.save(),e.setTransform(1,0,0,1,0,0),e.beginPath(),e.rect(t.left,t.top,t.width,t.height),e.clip()}},{key:"setPageClipRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.screenMatrix;e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.beginPath(),U.a.define(e,t.borderPath),e.clip()}},{key:"clearCanvas",value:function(e){var t=e.canvas;e.setTransform(1,0,0,1,0,0),e.beginPath(),e.clearRect(0,0,t.width,t.height)}},{key:"clearViewport",value:function(e,t){e.setTransform(1,0,0,1,0,0),e.clearRect(t.left,t.top,t.width,t.height)}},{key:"drawPageBackground",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.save();var a=t.screenMatrix;e.setTransform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),n&&(e.shadowOffsetX=2,e.shadowOffsetY=4,e.shadowColor=C.a.defaultDialogShadowColor,e.shadowBlur=C.a.defaultDialogShadowBlur),e.beginPath(),U.a.define(e,t.borderPath),e.fillStyle=t.fillStyle,e.transformFill(),e.restore()}},{key:"drawDialogDimmer",value:function(e){var t=this._viewportRect;e.setTransform(1,0,0,1,0,0),e.beginPath(),e.rect(t.left-2,t.top-2,t.width+4,t.height+4),e.fillStyle=C.a.defaultDialogDimmerColor,e.fill()}},{key:"drawPageBorder",value:function(e,t){var n=t.screenMatrix;e.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e.beginPath(),U.a.define(e,t.borderPath),e.lineWidth=2*t.borderWidth,e.strokeStyle=t.borderColor.toString(),e.stroke()}},{key:"drawFocusRect",value:function(e,t){var n=this._focusPoints,a=this._focusI,r=this._focusJ,i=this._focusPadding;t.computeFocusRect(n),a.x=n[1].x-n[0].x,a.y=n[1].y-n[0].y,a.normalize(),r.x=n[3].x-n[0].x,r.y=n[3].y-n[0].y,r.normalize(),i.x=.5*(a.x+r.x),i.y=.5*(a.y+r.y),i.normalize(),i.scale(C.a.defaultFocusPadding,C.a.defaultFocusPadding),n[0].x-=i.x,n[0].y-=i.y,n[1].x+=i.y,n[1].y-=i.x,n[2].x+=i.x,n[2].y+=i.y,n[3].x-=i.y,n[3].y+=i.x,e.setTransform(1,0,0,1,0,0),e.beginPath(),e.moveTo(n[0].x,n[0].y),e.lineTo(n[1].x,n[1].y),e.lineTo(n[2].x,n[2].y),e.lineTo(n[3].x,n[3].y),e.closePath(),e.strokeStyle=C.a.defaultFocusStrokeStyle,e.lineWidth=C.a.defaultFocusLineWidth,e.stroke()}},{key:"drawBoundingBox",value:function(e,t,n){t.screenBounds.width>0&&t.screenBounds.height>0&&(e.setTransform(1,0,0,1,0,0),e.beginPath(),e.rect(t.screenBounds.left,t.screenBounds.top,t.screenBounds.width,t.screenBounds.height),e.strokeStyle=n?"red":"gray",e.lineWidth=1,e.stroke())}},{key:"drawAxes",value:function(e,t){var n=this._nodeAxesOrigin,a=this._nodeAxesI,r=this._nodeAxesJ,i=t.screenMatrix;i.transformXY(0,0,n),i.transformXY(1,0,a),i.transformXY(0,1,r),a.x-=n.x,a.y-=n.y,a.normalize(),a.scale(40,40),a.x+=n.x,a.y+=n.y,r.x-=n.x,r.y-=n.y,r.normalize(),r.scale(40,40),r.x+=n.x,r.y+=n.y,e.setTransform(1,0,0,1,0,0),e.beginPath(),e.lineWidth=2,e.beginPath(),e.strokeStyle="#FF0000",e.moveTo(n.x,n.y),e.lineTo(a.x,a.y),e.stroke(),e.beginPath(),e.strokeStyle="#00FF00",e.moveTo(n.x,n.y),e.lineTo(r.x,r.y),e.stroke()}},{key:"drawDebugSelection",value:function(t,n){t.setTransform(1,0,0,1,0,0),t.beginPath();var a=v.a.createPointArray(n.path.points.length);n.screenMatrix.transformPoints(n.path.points,a),U.a.define(t,n.path,a),t.strokeStyle=e.debugSelectionLineColor,t.lineWidth=e.debugSelectionLineWidth,t.stroke();for(var r=n;null!==r.parent;)this.drawAxes(t,r),r=r.parent}},{key:"drawFps",value:function(e,t){this._frameCount++;var n=Date.now(),a=.001*(n-this._lastRenderTime);a>=1&&(this._fps=Math.round(this._frameCount/a),this._frameCount=0,this._lastRenderTime=n),e.setTransform(1,0,0,1,t.left,t.top),e.scale(this.pixelRatio,this.pixelRatio),e.fillStyle="white",e.fillRect(0,0,50,18),e.textAlign="left",e.textBaseline="top",e.font="14px Arial",e.fillStyle="black",e.fillText(this._fps.toString()+" fps",0,0,40)}},{key:"options",get:function(){return this._options},set:function(e){this._options=e}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"pixelRatio",get:function(){return this._pixelRatio}},{key:"invPixelRatio",get:function(){return this._invPixelRatio}},{key:"foregroundCanvas",get:function(){return this._foregroundCanvas}},{key:"foregroundContext",get:function(){return this._foregroundContext}},{key:"backgroundContext",get:function(){return this._backgroundContext}},{key:"hudContext",get:function(){return this._hudContext}},{key:"statusMessage",get:function(){return this._statusMessage}}])&&Ra(t.prototype,n),a&&Ra(t,a),e}();ka.debugSelectionLineColor="#FFFFFF",ka.debugSelectionLineWidth=2;var xa=n(104),Ta=n(108),La=n(64),Aa=n(60),Ma=n(107),Ia=n(106),Ba=n(105),Ua=n(109),ja=n(144),Fa=n(46),Na=n(91);function Wa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ga=function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._engine=t,this._launcherActions=n,H.a.PressedExecuted=function(e,t){return a.onExecuteMouseButtonAction(e,t)},H.a.ReleasedExecuted=function(e,t){return a.onExecuteMouseButtonAction(e,t)},H.a.ActionExecuted=function(e,t){return a.onExecuteMouseButtonAction(e,t)},H.a.DragExecuted=function(e,t){return a.onExecuteDragAction(e,t)},H.a.CursorChanged=function(e,t){return a.onCursorChanged(e,t)},H.a.Focused=function(e){return a.onFocused(e)},H.a.Blurred=function(e){return a.onBlurred(e)},H.a.Enabled=function(e){return a.onEnabled(e)},H.a.Disabled=function(e){return a.onDisabled(e)},wt.a.InputSubmitted=function(e){return a.onSubmitTextInput(e)}}var t,n,a;return t=e,(n=[{key:"onExecuteMouseButtonAction",value:function(e,t){if(t instanceof xa.a){var n=t;this._engine.toggleVariable(n.target)}else if(t instanceof qn.a)this._engine.closeDialog(t);else if(t instanceof it.a){var a=t;null!==a.target&&this._engine.writeVariable(a.target,a.source)}else if(t instanceof Ta.a)this._engine.logOut(t);else if(t instanceof La.a&&t.direction==$n.a.Home)this._engine.navigateHome();else if(t instanceof Aa.a){var r=t;if(null!==r.pageName){var i=this._engine.formatPageUrl(r.pageName);this._engine.navigate(i)}}else if(t instanceof Hn.a)this._engine.openDialog(t);else if(t instanceof zn.a)this._engine.navigateBack();else if(t instanceof Ma.a)this._engine.navigateForward();else if(t instanceof Ia.a);else if(t instanceof Ba.a){var o=t;this._engine.incrementVariable(o.target,o.increment)}else if(t instanceof ta.a)this._engine.logIn(t);else if(t instanceof Ua.a){var s=t;switch(s.commandType){case"OpenProject":var u=this._launcherActions.getProjectLauncher();u&&u.Open(s.commandTarget,s.windowLaunchOption,s.alias);break;case"OpenSupportFile":var c=this._launcherActions.getFileLauncher();c&&c.Open(s.commandTarget,s.windowLaunchOption);break;case"OpenUrl":var l=this._launcherActions.getUrlLauncher();l&&l.Open(s.commandTarget,s.windowLaunchOption);break;case"CloseDownApplication":this._engine.app&&this._engine.app.closeDown();break;case"RunCommandLine":var h=this._launcherActions.getCommandLineLauncher();h&&h.Execute(s.commandTarget,s.workingDirectory)}}else if(t instanceof Xn.a){t.actionCallback(e,t.gesture)}}},{key:"onSubmitTextInput",value:function(e){var t=this._engine.pageManager.topPage.getNodeForElement(e);if(null!==t&&t instanceof wt.a){var n=t;if(null!=n){var a=t.getDynamic(function(e){return e instanceof ja.a});if(null!==a&&a.dataSource instanceof rt.a){var r=a.dataSource;this._engine.writeConstant(r,n.text.value)}}}}},{key:"onExecuteDragAction",value:function(e,t){if(t.state===Fa.a.BeginDrag&&(t.originalValueSource=t.dynamic.dataSource,t.dynamic.dataSource=t.dragValueSource,t.dynamic.path.dragData=t),this._engine.dragObject(t),t.state===Fa.a.EndDrag||t.action.writeMode===Na.a.Continuous){var n=t.originalValueSource;this._engine.writeConstant(n,n.roundOnWrite?Math.round(t.dragValueSource.value):t.dragValueSource.value)}t.state===Fa.a.EndDrag&&(t.dynamic.dataSource=t.originalValueSource,t.dynamic.path.dragData=null)}},{key:"onCursorChanged",value:function(e,t){this._engine.changeCursor(t)}},{key:"onFocused",value:function(e){this._engine.focusNode(e)}},{key:"onBlurred",value:function(e){this._engine.focusNode(null)}},{key:"onEnabled",value:function(e){var t=this._engine.pageManager.rootPage.getElementForNode(e);null!==t&&(t.tabIndex=e.tabIndex)}},{key:"onDisabled",value:function(e){var t=this._engine.pageManager.rootPage.getElementForNode(e);null!==t&&(t.tabIndex=-1)}}])&&Wa(t.prototype,n),a&&Wa(t,a),e}(),Va=n(93);function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ha(e){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function za(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xa(e,t)}function Xa(e,t){return(Xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Za(e,t,n){return t&&Qa(e.prototype,t),n&&Qa(e,n),e}var Ja=function(){function e(){Ya(this,e)}return Za(e,[{key:"DoOpen",value:function(e,t){return t===Va.a.SameWindow?window.open(e,e):window.open(e,"_blank")}}]),e}(),$a=function(e){function t(){return Ya(this,t),qa(this,Ha(t).apply(this,arguments))}return za(t,Ja),Za(t,[{key:"Open",value:function(e,t,n){return this.DoOpen(e,t)}}]),t}(),er=function(e){function t(){return Ya(this,t),qa(this,Ha(t).apply(this,arguments))}return za(t,Ja),Za(t,[{key:"Open",value:function(e,t){return this.DoOpen(e,t)}}]),t}(),tr=function(e){function t(){return Ya(this,t),qa(this,Ha(t).apply(this,arguments))}return za(t,Ja),Za(t,[{key:"Open",value:function(e,t){return this.DoOpen(e,t)}}]),t}(),nr=function(){function e(){Ya(this,e)}return Za(e,[{key:"getProjectLauncher",value:function(){return new $a}},{key:"getFileLauncher",value:function(){return new er}},{key:"getUrlLauncher",value:function(){return new tr}},{key:"getCommandLineLauncher",value:function(){return null}}]),e}();function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ir(e,t,n){return(ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=or(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var cr=function(e){function t(e,n,a){var r,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,o=or(t).call(this,e,n,a,s),(r=!o||"object"!==ar(o)&&"function"!=typeof o?ur(i):o)._renderer=new ka(a.frontCanvas,a.backCanvas,r.settings.renderOptions),r._statusMessage=a,r._presenter=new Ga(ur(ur(r)),new nr),r._renderer.CanvasResized=function(e,t){r._pageManager.centerPages(e,t,r.settings.zoomToFit)},r}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,oa),n=t,(a=[{key:"start",value:function(e){var n=this;this.run(),this.loadPageAsync(e,function(a){a===bn.a.OK?(n._navigationBackStack.push(e),n.pageManager.rootPage.updateNavigationState(n.getNavigationState(e),n.securityContext),null!==t.Started&&t.Started()):n._errorStatus=a})}},{key:"runFrame",value:function(){var e=this;this._clock.tick();var t=this.getRunState(this._runFrameContext.previousState);if(t===this._runFrameContext.previousState||(this.changeRunState(t),this._runFrameContext.previousState=t,t!==Zn.Aborting)){var n=!1;this._pageManager.havePages?((this._pageManager.isPageReady||this._pageManager.isTopPageLoginDialog())&&this._pageManager.runDynamics(this._clock),n=!0):this._errorStatus===bn.a.AuthorizationError&&(n=!0);var a=0!=this._runFrameContext.minInterval&&performance.now()-this._runFrameContext.lastRender+.5<=this._runFrameContext.minInterval;n&&!a&&(this._runFrameContext.lastRender=performance.now(),this._renderer.render(this.pageManager)),this._animationFrameHandle=requestAnimationFrame(function(){return e.runFrame()})}}},{key:"run",value:function(){this._runFrameContext.lastRender=0,this._runFrameContext.previousState=Zn.Waiting,this.changeRunState(Zn.Waiting),this.runFrame()}},{key:"getRunState",value:function(e){switch(this._errorStatus){case bn.a.InternalError:case bn.a.ExceptionError:case bn.a.DownloadScreenError:case bn.a.UpdateDataError:case bn.a.RegisterGroupError:case bn.a.SessionError:case bn.a.DuplicateStationIDError:return Zn.Aborting;case bn.a.AuthorizationError:if(e!=Zn.LoginPrompt)return Zn.LoginPrompt;break;case bn.a.InvalidGroupIDError:if(e!=Zn.NoDataConnection)return Zn.NoDataConnection;break;case bn.a.ProjectChanged:return Zn.ChangingProject}switch(e){case Zn.NoDataConnection:if(this._connectionRetryTimer.isExpired)return Zn.Retrying;break;case Zn.Retrying:return Zn.Waiting;case Zn.Waiting:switch(this._errorStatus){case bn.a.OK:if(null!=this.pageManager.topPage&&!this.canShowPage(this._pageManager.topPage)&&this.securityContext)return Zn.LoginPrompt;if(this._pageManager.isPageReady)return Zn.Normal;break;case bn.a.NetworkLevelError:case bn.a.NetworkTimeoutError:return Zn.NoDataConnection}break;case Zn.Normal:switch(this._errorStatus){case bn.a.DataPollTimeoutWarning:return Zn.Waiting;case bn.a.NetworkLevelError:case bn.a.NetworkTimeoutError:return Zn.NoDataConnection}if(!this.canShowPage(this.pageManager.topPage))return this.authService.status===Rn.LogOutCompleted?Zn.LoginPrompt:Zn.Waiting;break;case Zn.LoginPrompt:if(null===this.pageManager.topPage||"LOGIN"!==this.pageManager.topPage.name.toUpperCase())return Zn.Waiting;if(this.authService.status===Rn.LogInPending)return Zn.Authenticating;if(this.authService.status===Rn.LogInCompleted&&null!=this.securityContext.loggedInUserName)return Zn.Waiting;break;case Zn.Authenticating:if(this.authService.status===Rn.LogInCompleted)return null!=this.securityContext.loggedInUserName?(this.authService.clearStatus(),Zn.Waiting):Zn.LoginPrompt;this.authService.status===Rn.Error&&Zn.LoginPrompt;break;case Zn.ChangingProject:if(!0===this.onChangingProject(this)){if(!0===this._dataClient.isProjectSettingsDownloaded)return this._statusMessage.hideAllOverlays(),Zn.Waiting;throw Error("Failed to load project settings")}}return e}},{key:"logIn",value:function(e){ir(or(t.prototype),"logInEx",this).call(this,this,e)}},{key:"stopAnimation",value:function(){this._renderer.CanvasResized=null,null!=this._animationFrameHandle&&(cancelAnimationFrame(this._animationFrameHandle),this._animationFrameHandle=null)}}])&&rr(n.prototype,a),r&&rr(n,r),t}(),lr=n(57),hr=n(136);function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(e,t){return!t||"object"!==fr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vr=function(e){var t,n,a;function r(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=_r(this,dr(r).call(this,e)))._ev=t,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(r,hr["a"]),t=r,(n=[{key:"key",get:function(){return this._ev.key}},{key:"code",get:function(){return this._ev.code}},{key:"charCode",get:function(){return this._ev.charCode}},{key:"shiftKey",get:function(){return this._ev.shiftKey}},{key:"ctrlKey",get:function(){return this._ev.ctrlKey}},{key:"altKey",get:function(){return this._ev.altKey}},{key:"altGraphKey",get:function(){return this._ev.getModifierState("AltGraph")}}])&&pr(t.prototype,n),a&&pr(t,a),r}();function yr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var br=function e(){mr(this,e),this.pointerId0=-1,this.pointerId1=-1,this.center=new v.a,this.offset=new v.a,this.zoomSize=new v.a},Er=function(){function e(t,n,a){var r=this;mr(this,e),this._isCustomTextInput=!1,this._hasScrollBar=!0,this._enableKnobs=!1,this._touchState=new br,this._touchDown=!1,this._touchUp=!1,this._touchClick=!1,this.applicationVariables=new _n.a,this._onWheelListener=function(e){return r.onMouseWheel(e)},this._onTouchStartListener=function(e){return r.onTouchStart(e)},this._onTouchEndListener=function(e){return r.onTouchEnd(e)},this._onTouchMoveListener=function(e){return r.onTouchMove(e)},this._onTouchCancelListener=function(e){return r.onTouchCancel(e)},this._hoveredOverVisual=null,this._isDragging=!1,this._capturedVisual=null,this._tappedVisual=null,a.CustomTextInput&&(this._isCustomTextInput=y.a.convertToBoolean(a.CustomTextInput)),a.ListScrollBars&&(this._hasScrollBar=y.a.convertToBoolean(a.ListScrollBars));var i=new rn;if(void 0!==a&&void 0!==a.LogClockEvents&&"ON"===a.LogClockEvents.toUpperCase()&&(i.logClockEvents=!0),void 0!==a&&void 0!==a.MaxFPS){var o=parseInt(a.MaxFPS);!isNaN(o)&&isFinite(o)&&i.setMaxFPS(o)}this._canvasHost=n,this._engine=new cr(e,t,n,i),this._pageManager=this._engine.pageManager,void 0!==a&&void 0!==a.Settings&&"ON"===a.Settings.toUpperCase()?this._enableKnobs=!0:Qn.dispose(),this.InitializeApplicationSystemVariables(a)}var t,n,a;return t=e,a=[{key:"registerApplicationVariable",value:function(t,n,a){return e._instance.registerApplicationVariableInternal(t,n,a)}},{key:"getApplicationVariable",value:function(t){return e._instance.applicationVariables.getValue(t)}},{key:"initialize",value:function(t,n,a){nn.initialize(e),this._instance=new e(t,n,a),this._instance._engine.setRenderOptions(this._instance._engine.settings.renderOptions),this._instance._engine.loadApplicationVariables()}},{key:"run",value:function(t){return cr.Started=function(){return e._instance.onEngineStarted()},cr.Stopped=function(){return e._instance.onEngineStopped()},oa.PageActivated=function(t){return e._instance.onPageActivated(t)},oa.PageDeactivated=function(t){return e._instance.onPageDeactivated(t)},e._instance._engine.start(t),!0}},{key:"dispatchNodeEvent",value:function(e,t){for(;null!==e&&!t(e);)e=e.parent;return e}},{key:"closeDown",value:function(){}},{key:"nodeFactory",get:function(){return nn}},{key:"isCustomTextInput",get:function(){return e._instance._isCustomTextInput}},{key:"hasScrollBar",get:function(){return e._instance._hasScrollBar}},{key:"engine",get:function(){return e._instance._engine?e._instance._engine:null}},{key:"renderer",get:function(){return this._instance._engine.renderer}},{key:"canClose",get:function(){return!1}}],(n=[{key:"registerApplicationVariableInternal",value:function(e,t,n){var a=this.applicationVariables.getValue(e);return null===a&&(a=new rt.a(e,t,n),this.applicationVariables.add(e,a)),a}},{key:"InitializeApplicationSystemVariables",value:function(e){var t=this.registerApplicationVariableInternal("@@StationID","STRING",!0);e.StationID&&(t.value=e.StationID)}},{key:"onEngineStarted",value:function(){this.hookCanvasEvents()}},{key:"onEngineStopped",value:function(){this.unhookCanvasEvents()}},{key:"hookCanvasEvents",value:function(){var e=this,t=c.getSubElementById(this._canvasHost.surfaceElement,"frontCanvas");t.onmousemove=function(t){return e.onMouseMove(t)},t.onmouseover=function(t){return e.onMouseOver(t)},t.onmouseout=function(t){return e.onMouseOut(t)},t.onmousedown=function(t){return e.onMouseDown(t)},t.onmouseup=function(t){return e.onMouseUp(t)},t.onclick=function(t){return e.onMouseClick(t)},t.addEventListener("wheel",this._onWheelListener,!1),t.addEventListener("touchstart",this._onTouchStartListener,!1),t.addEventListener("touchend",this._onTouchEndListener,!1),t.addEventListener("touchmove",this._onTouchMoveListener,!1),t.addEventListener("touchcancel",this._onTouchCancelListener,!1);var n=new Hammer.Manager(t),a=new Hammer.Pinch({threshold:0,pointers:2}),r=new Hammer.Pan({threshold:10,pointers:1}),i=new Hammer.Tap({event:"doubletap",threshold:10,posThreshold:200,pointers:1,taps:3}),o=new Hammer.Swipe({event:"swipe",threshold:10,pointers:1,direction:Hammer.DIRECTION_ALL,velocity:.3});n.add(r),n.add(a),n.add(i),n.add(o),r.recognizeWith(a),r.recognizeWith(o),a.recognizeWith(r),n.on("panstart panmove panend",function(t){return e.onPan(t)}),n.on("pinchstart pinchmove pinchend pinchcancel",function(t){return e.onPinch(t)}),n.on("swipe",function(t){return e.onSwipe(t)}),this._enableKnobs&&n.on("doubletap",function(t){return e.onDoubleTap(t)})}},{key:"onMouseWheel",value:function(e){return e.returnValue=!1,e.preventDefault&&e.preventDefault(),!1}},{key:"unhookCanvasEvents",value:function(){var e=c.getSubElementById(this._canvasHost.surfaceElement,"frontCanvas");e.onmousemove=null,e.onmouseover=null,e.onmouseout=null,e.onmousedown=null,e.onmouseup=null,e.onclick=null,e.removeEventListener("wheel",this._onWheelListener),e.removeEventListener("touchstart",this._onTouchStartListener),e.removeEventListener("touchend",this._onTouchEndListener),e.removeEventListener("touchmove",this._onTouchMoveListener),e.removeEventListener("touchcancel",this._onTouchCancelListener)}},{key:"onPageActivated",value:function(e){for(var t=this,n=e.getElements(),a=0;a<n.length;a++){var r=n[a];r.onfocus=function(e){return t.onFocus(e)},r.onblur=function(e){return t.onBlur(e)},r.onkeypress=function(e){return t.onKeyPress(e)},r.onkeydown=function(e){return t.onKeyDown(e)},r.onkeyup=function(e){return t.onKeyUp(e)},this._canvasHost.surfaceElement.appendChild(n[a])}}},{key:"onPageDeactivated",value:function(e){for(var t=e.getElements(),n=0;n<t.length;n++){var a=t[n];a.onfocus=null,a.onblur=null,a.onkeypress=null,a.onkeydown=null,a.onkeyup=null,this._canvasHost.surfaceElement.contains(a)&&this._canvasHost.surfaceElement.removeChild(a)}}},{key:"hoverOverObject",value:function(t){var n=this;t!==this._hoveredOverVisual&&(null!==this._hoveredOverVisual&&(e.dispatchNodeEvent(this._hoveredOverVisual,function(e){return e.onPointerOut(new lr.a(n._hoveredOverVisual))}),this._hoveredOverVisual=null),null!=t&&(this._hoveredOverVisual=t,e.dispatchNodeEvent(this._hoveredOverVisual,function(e){return e.onPointerOver(new lr.a(n._hoveredOverVisual))})))}},{key:"onFullScreenToggled",value:function(){screenfull.toggle()}},{key:"onKnobSettingsChanged",value:function(e){this._engine.setRenderOptions(e.renderOptions)}},{key:"onFocus",value:function(t){var n=this._pageManager.topPage.getNodeForElement(t.target);null!==n&&n.isEnabled.value&&e.dispatchNodeEvent(n,function(e){return e.onFocus()})}},{key:"onBlur",value:function(t){var n=this._pageManager.topPage.getNodeForElement(t.target);null!==n&&e.dispatchNodeEvent(n,function(e){return e.onBlur()})}},{key:"onKeyPress",value:function(t){var n=this._pageManager.topPage.getNodeForElement(t.target);if(null!==n){var a=new vr(n,t);e.dispatchNodeEvent(n,function(e){return e.onKeyPress(a)})}}},{key:"onKeyDown",value:function(t){var n=this._pageManager.topPage.getNodeForElement(t.target);if(null!==n){var a=new vr(n,t);e.dispatchNodeEvent(n,function(e){return e.onKeyDown(a)})}}},{key:"onKeyUp",value:function(t){var n=this._pageManager.topPage.getNodeForElement(t.target);if(null!==n){var a=new vr(n,t);e.dispatchNodeEvent(n,function(e){return e.onKeyUp(a)})}}},{key:"onMouseMove",value:function(t){if(null!==this._capturedVisual)if(this._isDragging)e.dispatchNodeEvent(this._capturedVisual,function(e){return e.onDrag(t.clientX,t.clientY)});else{var n=e.dispatchNodeEvent(this._capturedVisual,function(e){return e.onBeginDrag(t.clientX,t.clientY)});this._isDragging=null!==n}var a=this._engine.getHitVisual(t.clientX,t.clientY);this.hoverOverObject(a),t.cancelBubble=!0}},{key:"onMouseOver",value:function(e){var t=this._engine.getHitVisual(e.clientX,e.clientY);this.hoverOverObject(t),e.cancelBubble=!0}},{key:"onMouseOut",value:function(e){var t=this._engine.getHitVisual(e.clientX,e.clientY);this.hoverOverObject(t),e.cancelBubble=!0}},{key:"onMouseDown",value:function(t){var n=this;if(this._touchDown)this._touchDown=!1;else if(0===t.button){var a=this._engine.getHitVisual(t.clientX,t.clientY);if(null!==a&&(this._capturedVisual=a,e.dispatchNodeEvent(a,function(e){return e.onPointerDown(new lr.a(a,t.clientX,t.clientY))}),window.onmouseup=function(e){n.onMouseUp(e)},a.isEnabled.value)){var r=this._pageManager.topPage.getElementForNode(a);null!==r&&setTimeout(function(){return r.focus()})}this._engine.selectDebugVisual(a)}}},{key:"onMouseUp",value:function(t){if(this._tappedVisual=null,this._touchUp)this._touchUp=!1;else if(0===t.button){window.onmouseup=null;var n=this._engine.getHitVisual(t.clientX,t.clientY);null!==this._capturedVisual&&(n===this._capturedVisual&&(this._tappedVisual=n),this._isDragging&&(e.dispatchNodeEvent(this._capturedVisual,function(e){return e.onEndDrag(t.clientX,t.clientY)}),this._isDragging=!1),n=this._capturedVisual,this._capturedVisual=null),null!==n&&e.dispatchNodeEvent(n,function(e){return e.onPointerUp(new lr.a(n))})}}},{key:"onMouseClick",value:function(t){if(this._touchClick)this._touchClick=!1;else{if(0===t.button){var n=this._engine.getHitVisual(t.clientX,t.clientY);null!==n&&n===this._tappedVisual&&e.dispatchNodeEvent(n,function(e){return e.onPointerTap(new lr.a(n,t.clientX,t.clientY))})}t.cancelBubble=!0}}},{key:"onTouchStart",value:function(t){if(1==t.changedTouches.length){var n=this._engine.getHitVisual(t.changedTouches[0].pageX,t.changedTouches[0].pageY);if(null!=n){this.hoverOverObject(n),this._capturedVisual=n;var a=new lr.a(n,t.changedTouches[0].pageX,t.changedTouches[0].pageY);if(e.dispatchNodeEvent(n,function(e){return e.onPointerDown(a)}),n.isEnabled.value){var r=this._pageManager.topPage.getElementForNode(n);null!==r&&setTimeout(function(){return r.focus()})}this._touchDown=!0}this._engine.selectDebugVisual(n)}}},{key:"onTouchEnd",value:function(t){var n=null;if(1==t.changedTouches.length&&(n=this._engine.getHitVisual(t.changedTouches[0].pageX,t.changedTouches[0].pageY)),this._tappedVisual=null,null!==this._capturedVisual&&(n===this._capturedVisual&&(this._tappedVisual=n),this._isDragging&&(e.dispatchNodeEvent(this._capturedVisual,function(e){return e.onEndDrag(t.changedTouches[0].pageX,t.changedTouches[0].pageY)}),this._isDragging=!1),n=this._capturedVisual,this._capturedVisual=null),null!==n&&(this.hoverOverObject(n),e.dispatchNodeEvent(n,function(e){return e.onPointerUp(new lr.a(n))}),this._touchUp=!0),null!==this._tappedVisual){var a=t.changedTouches[0],r=a.clientX,i=a.clientY;r*=this._engine.renderer.pixelRatio,i*=this._engine.renderer.pixelRatio;var o=new lr.a(n,r,i);e.dispatchNodeEvent(n,function(e){return e.onPointerTap(o)}),this._touchClick=!0}}},{key:"onTouchCancel",value:function(t){this._isDragging&&this._capturedVisual&&1==t.changedTouches.length&&e.dispatchNodeEvent(this._capturedVisual,function(e){return e.onEndDrag(t.changedTouches[0].clientX,t.changedTouches[0].clientY)})}},{key:"onTouchMove",value:function(t){if(1==t.changedTouches.length){if(null!==this._capturedVisual)if(this._isDragging)e.dispatchNodeEvent(this._capturedVisual,function(e){return e.onDrag(t.changedTouches[0].pageX,t.changedTouches[0].pageY)});else{var n=e.dispatchNodeEvent(this._capturedVisual,function(e){return e.onBeginDrag(t.changedTouches[0].pageX,t.changedTouches[0].pageY)});this._isDragging=null!==n}var a=this._engine.getHitVisual(t.changedTouches[0].pageX,t.changedTouches[0].pageY);this.hoverOverObject(a)}t.preventDefault()}},{key:"onDoubleTap",value:function(e){this._enableKnobs&&this._engine.loadRenderOptionsDialog()}},{key:"onPan",value:function(e){if(1==e.changedPointers.length&&!this._isDragging){var t=e.changedPointers[0].identifier;if("panend"==e.type)this._touchState.pointerId0=-1;else if("panstart"==e.type)this._touchState.pointerId0=e.changedPointers[0].identifier,this._touchState.center.x=e.center.x,this._touchState.center.y=e.center.y;else if(t==this._touchState.pointerId0){var n=this._pageManager.rootPage.location,a=n.x+(e.center.x-this._touchState.center.x),r=n.y+(e.center.y-this._touchState.center.y);this._engine.pan(a,r),this._touchState.center.x=e.center.x,this._touchState.center.y=e.center.y}}}},{key:"onPinch",value:function(e){if(2==e.pointers.length){var t=this._pageManager.rootPage;if("pinchend"==e.type);else if("pinchstart"==e.type)this._touchState.zoomSize.x=t.size.x*t.scale.x,this._touchState.zoomSize.y=t.size.y*t.scale.y,this._touchState.offset.x=t.location.x-e.center.x,this._touchState.offset.y=t.location.y-e.center.y;else{var n=this._touchState.zoomSize.x*e.scale/t.size.x;this._engine.zoom(n);var a=t.scale.x*t.size.x/this._touchState.zoomSize.x,r=e.center.x+this._touchState.offset.x*a,i=e.center.y+this._touchState.offset.y*a;v.a.equalsXY(t.location,r,i,1e-4)||this._engine.pan(r,i)}}}},{key:"onSwipe",value:function(e){e.offsetDirection==Hammer.DIRECTION_LEFT?this._engine.navigateRight():e.offsetDirection==Hammer.DIRECTION_RIGHT?this._engine.navigateLeft():e.offsetDirection==Hammer.DIRECTION_UP?this._engine.navigateDown():e.offsetDirection==Hammer.DIRECTION_DOWN&&this._engine.navigateUp()}}])&&yr(t.prototype,n),a&&yr(t,a),e}();function Dr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Sr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._canCache=!1,this._canCache=e.storageAvailable("sessionStorage")}var t,n,a;return t=e,a=[{key:"storageAvailable",value:function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}}],(n=[{key:"clearCache",value:function(){return!!this._canCache&&(window.sessionStorage.clear(),!0)}},{key:"keyExists",value:function(e){return!!this._canCache&&null!=window.sessionStorage.getItem(e)}},{key:"getItem",value:function(e){return this._canCache?window.sessionStorage.getItem(e):null}},{key:"setItem",value:function(e,t){if(!this._canCache)return!1;try{return window.sessionStorage.setItem(e,t),!0}catch(e){e instanceof DOMException&&e.code}return!1}}])&&Dr(t.prototype,n),a&&Dr(t,a),e}();window.onload=function(){var e,t=function(e){var t={};void 0===e&&(e=window.location.search.substring(1));window&&window.location&&window.location.protocol&&(t.DataProtocol=window.location.protocol);var n=e.split("&");for(var a in n){var r=n[a].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(),n=navigator.userAgent;null!==n.match(/(iPod|iPhone|iPad)/)&&null!==n.match(/AppleWebKit/)&&(e=function(){var e=Number.MAX_VALUE,t=Number.MAX_VALUE;document.getElementById("canvasArea"),document.body.style.width=e+"px",document.body.style.height=t+"px",window.scrollTo(0,0)},window.addEventListener("orientationchange",e),e());var r=function(e){return void 0!==e?(void 0===e.StationID&&(e.StationID="0"),_e.a.initialize(e),new a.a(e.HmiPage,e.DataSource,parseInt(e.DataRetries),e.DataHost,parseInt(e.DataTimeout),parseInt(e.DataPollInterval),parseInt(e.DataPollTimeoutMultiplier),e.DataDebug,parseInt(e.DownloadTimeout),e.DataProtocol,e.StationID,parseInt(e.ConnectionRetrySeconds),((t=new Sr).clearCache(),t))):null;var t}(t);if(void 0!==r){var i=r.startPageUrl;if(void 0!==i){var o=new g;Er.initialize(r,o,t),Er.run(i)}else alert("ERROR: Please specify the desired path by including '?HmiPath=<PagePath>' in the URL, or the desired page by including '?HmiPage=<PagePath>/<PageFileName>.json' in the URL.")}else alert("ERROR: Invalid data source: "+t.DataSource)}}]);
