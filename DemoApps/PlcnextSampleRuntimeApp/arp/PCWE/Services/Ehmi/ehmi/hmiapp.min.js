///////////////////////////////////////////////////////////////////////////////
//
//  HMI Browser Client App Version: 2019.0.0.1552
//
//  Copyright PHOENIX CONTACT
//
///////////////////////////////////////////////////////////////////////////////
var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(f){this.toString=function(){return"CORRUPT: "+this.message};this.message=f},invalid:function(f){this.toString=function(){return"INVALID: "+this.message};this.message=f},bug:function(f){this.toString=function(){return"BUG: "+this.message};this.message=f},notReady:function(f){this.toString=function(){return"NOT READY: "+this.message};this.message=f}}};
"undefined"!=typeof module&&module.exports&&(module.exports=sjcl);
sjcl.cipher.aes=function(f){this.h[0][0][0]||this.z();var a,e,d,c,b=this.h[0][4],g=this.h[1];a=f.length;var h=1;if(4!==a&&6!==a&&8!==a)throw new sjcl.exception.invalid("invalid aes key size");this.a=[d=f.slice(0),c=[]];for(f=a;f<4*a+28;f++){e=d[f-1];if(0===f%a||8===a&&4===f%a)e=b[e>>>24]<<24^b[e>>16&255]<<16^b[e>>8&255]<<8^b[e&255],0===f%a&&(e=e<<8^e>>>24^h<<24,h=h<<1^283*(h>>7));d[f]=d[f-a]^e}for(a=0;f;a++,f--)e=d[a&3?f:f-4],c[a]=4>=f||4>a?e:g[0][b[e>>>24]]^g[1][b[e>>16&255]]^g[2][b[e>>8&255]]^g[3][b[e&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(f){return this.I(f,0)},decrypt:function(f){return this.I(f,1)},h:[[[],[],[],[],[]],[[],[],[],[],[]]],z:function(){var f=this.h[0],a=this.h[1],e=f[4],d=a[4],c,b,g,h=[],q=[],n,l,k,m;for(c=0;256>c;c++)q[(h[c]=c<<1^283*(c>>7))^c]=c;for(b=g=0;!e[b];b^=n||1,g=q[g]||1)for(k=g^g<<1^g<<2^g<<3^g<<4,k=k>>8^k&255^99,e[b]=k,d[k]=b,l=h[c=h[n=h[b]]],m=16843009*l^65537*c^257*n^16843008*b,l=257*h[k]^16843008*k,c=0;4>c;c++)f[c][b]=l=l<<24^l>>>8,a[c][k]=m=m<<24^m>>>8;for(c=
0;5>c;c++)f[c]=f[c].slice(0),a[c]=a[c].slice(0)},I:function(f,a){if(4!==f.length)throw new sjcl.exception.invalid("invalid aes block size");var e=this.a[a],d=f[0]^e[0],c=f[a?3:1]^e[1],b=f[2]^e[2];f=f[a?1:3]^e[3];var g,h,q,n=e.length/4-2,l,k=4,m=[0,0,0,0];g=this.h[a];var p=g[0],r=g[1],u=g[2],v=g[3],w=g[4];for(l=0;l<n;l++)g=p[d>>>24]^r[c>>16&255]^u[b>>8&255]^v[f&255]^e[k],h=p[c>>>24]^r[b>>16&255]^u[f>>8&255]^v[d&255]^e[k+1],q=p[b>>>24]^r[f>>16&255]^u[d>>8&255]^v[c&255]^e[k+2],f=p[f>>>24]^r[d>>16&255]^
u[c>>8&255]^v[b&255]^e[k+3],k+=4,d=g,c=h,b=q;for(l=0;4>l;l++)m[a?3&-l:l]=w[d>>>24]<<24^w[c>>16&255]<<16^w[b>>8&255]<<8^w[f&255]^e[k++],g=d,d=c,c=b,b=f,f=g;return m}};
sjcl.bitArray={bitSlice:function(f,a,e){f=sjcl.bitArray.P(f.slice(a/32),32-(a&31)).slice(1);return void 0===e?f:sjcl.bitArray.clamp(f,e-a)},extract:function(f,a,e){var d=Math.floor(-a-e&31);return((a+e-1^a)&-32?f[a/32|0]<<32-d^f[a/32+1|0]>>>d:f[a/32|0]>>>d)&(1<<e)-1},concat:function(f,a){if(0===f.length||0===a.length)return f.concat(a);var e=f[f.length-1],d=sjcl.bitArray.getPartial(e);return 32===d?f.concat(a):sjcl.bitArray.P(a,d,e|0,f.slice(0,f.length-1))},bitLength:function(f){var a=f.length;return 0===
a?0:32*(a-1)+sjcl.bitArray.getPartial(f[a-1])},clamp:function(f,a){if(32*f.length<a)return f;f=f.slice(0,Math.ceil(a/32));var e=f.length;a&=31;0<e&&a&&(f[e-1]=sjcl.bitArray.partial(a,f[e-1]&2147483648>>a-1,1));return f},partial:function(f,a,e){return 32===f?a:(e?a|0:a<<32-f)+1099511627776*f},getPartial:function(f){return Math.round(f/1099511627776)||32},equal:function(f,a){if(sjcl.bitArray.bitLength(f)!==sjcl.bitArray.bitLength(a))return!1;var e=0,d;for(d=0;d<f.length;d++)e|=f[d]^a[d];return 0===
e},P:function(f,a,e,d){var c;for(void 0===d&&(d=[]);32<=a;a-=32)d.push(e),e=0;if(0===a)return d.concat(f);for(c=0;c<f.length;c++)d.push(e|f[c]>>>a),e=f[c]<<32-a;c=f.length?f[f.length-1]:0;f=sjcl.bitArray.getPartial(c);d.push(sjcl.bitArray.partial(a+f&31,32<a+f?e:d.pop(),1));return d},k:function(f,a){return[f[0]^a[0],f[1]^a[1],f[2]^a[2],f[3]^a[3]]}};
sjcl.codec.utf8String={fromBits:function(f){var a="",e=sjcl.bitArray.bitLength(f),d,c;for(d=0;d<e/8;d++)0===(d&3)&&(c=f[d/4]),a+=String.fromCharCode(c>>>24),c<<=8;return decodeURIComponent(escape(a))},toBits:function(f){f=unescape(encodeURIComponent(f));var a=[],e,d=0;for(e=0;e<f.length;e++)d=d<<8|f.charCodeAt(e),3===(e&3)&&(a.push(d),d=0);e&3&&a.push(sjcl.bitArray.partial(8*(e&3),d));return a}};
sjcl.codec.hex={fromBits:function(f){var a="",e;for(e=0;e<f.length;e++)a+=((f[e]|0)+0xf00000000000).toString(16).substr(4);return a.substr(0,sjcl.bitArray.bitLength(f)/4)},toBits:function(f){var a,e=[],d;f=f.replace(/\s|0x/g,"");d=f.length;f+="00000000";for(a=0;a<f.length;a+=8)e.push(parseInt(f.substr(a,8),16)^0);return sjcl.bitArray.clamp(e,4*d)}};
sjcl.codec.base64={F:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(f,a,e){var d="",c=0,b=sjcl.codec.base64.F,g=0,h=sjcl.bitArray.bitLength(f);e&&(b=b.substr(0,62)+"-_");for(e=0;6*d.length<h;)d+=b.charAt((g^f[e]>>>c)>>>26),6>c?(g=f[e]<<6-c,c+=26,e++):(g<<=6,c-=6);for(;d.length&3&&!a;)d+="=";return d},toBits:function(f,a){f=f.replace(/\s|=/g,"");var e=[],d=0,c=sjcl.codec.base64.F,b=0,g;a&&(c=c.substr(0,62)+"-_");for(a=0;a<f.length;a++){g=c.indexOf(f.charAt(a));
if(0>g)throw new sjcl.exception.invalid("this isn't base64!");26<d?(d-=26,e.push(b^g>>>d),b=g<<32-d):(d+=6,b^=g<<32-d)}d&56&&e.push(sjcl.bitArray.partial(d&56,b,1));return e}};sjcl.codec.base64url={fromBits:function(f){return sjcl.codec.base64.fromBits(f,1,1)},toBits:function(f){return sjcl.codec.base64.toBits(f,1)}};sjcl.hash.sha256=function(f){this.a[0]||this.z();f?(this.n=f.n.slice(0),this.i=f.i.slice(0),this.e=f.e):this.reset()};sjcl.hash.sha256.hash=function(f){return(new sjcl.hash.sha256).update(f).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.n=this.N.slice(0);this.i=[];this.e=0;return this},update:function(f){"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));var a,e=this.i=sjcl.bitArray.concat(this.i,f);a=this.e;f=this.e=a+sjcl.bitArray.bitLength(f);for(a=512+a&-512;a<=f;a+=512)this.D(e.splice(0,16));return this},finalize:function(){var f,a=this.i,e=this.n,a=sjcl.bitArray.concat(a,[sjcl.bitArray.partial(1,1)]);for(f=a.length+2;f&15;f++)a.push(0);a.push(Math.floor(this.e/
4294967296));for(a.push(this.e|0);a.length;)this.D(a.splice(0,16));this.reset();return e},N:[],a:[],z:function(){function f(a){return 4294967296*(a-Math.floor(a))|0}var a=0,e=2,d;a:for(;64>a;e++){for(d=2;d*d<=e;d++)if(0===e%d)continue a;8>a&&(this.N[a]=f(Math.pow(e,0.5)));this.a[a]=f(Math.pow(e,1/3));a++}},D:function(f){var a,e,d=f.slice(0),c=this.n,b=this.a,g=c[0],h=c[1],q=c[2],n=c[3],l=c[4],k=c[5],m=c[6],p=c[7];for(f=0;64>f;f++)16>f?a=d[f]:(a=d[f+1&15],e=d[f+14&15],a=d[f&15]=(a>>>7^a>>>18^a>>>3^
a<<25^a<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+d[f&15]+d[f+9&15]|0),a=a+p+(l>>>6^l>>>11^l>>>25^l<<26^l<<21^l<<7)+(m^l&(k^m))+b[f],p=m,m=k,k=l,l=n+a|0,n=q,q=h,h=g,g=a+(h&q^n&(h^q))+(h>>>2^h>>>13^h>>>22^h<<30^h<<19^h<<10)|0;c[0]=c[0]+g|0;c[1]=c[1]+h|0;c[2]=c[2]+q|0;c[3]=c[3]+n|0;c[4]=c[4]+l|0;c[5]=c[5]+k|0;c[6]=c[6]+m|0;c[7]=c[7]+p|0}};
sjcl.mode.ccm={name:"ccm",encrypt:function(f,a,e,d,c){var b,g=a.slice(0),h=sjcl.bitArray,q=h.bitLength(e)/8,n=h.bitLength(g)/8;c=c||64;d=d||[];if(7>q)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(b=2;4>b&&n>>>8*b;b++);b<15-q&&(b=15-q);e=h.clamp(e,8*(15-b));a=sjcl.mode.ccm.H(f,a,e,d,c,b);g=sjcl.mode.ccm.J(f,g,e,a,c,b);return h.concat(g.data,g.tag)},decrypt:function(f,a,e,d,c){c=c||64;d=d||[];var b=sjcl.bitArray,g=b.bitLength(e)/8,h=b.bitLength(a),q=b.clamp(a,h-c),n=b.bitSlice(a,
h-c),h=(h-c)/8;if(7>g)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(a=2;4>a&&h>>>8*a;a++);a<15-g&&(a=15-g);e=b.clamp(e,8*(15-a));q=sjcl.mode.ccm.J(f,q,e,n,c,a);f=sjcl.mode.ccm.H(f,q.data,e,d,c,a);if(!b.equal(q.tag,f))throw new sjcl.exception.corrupt("ccm: tag doesn't match");return q.data},H:function(f,a,e,d,c,b){var g=[],h=sjcl.bitArray,q=h.k;c/=8;if(c%2||4>c||16<c)throw new sjcl.exception.invalid("ccm: invalid tag length");if(4294967295<d.length||4294967295<a.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");
b=[h.partial(8,(d.length?64:0)|c-2<<2|b-1)];b=h.concat(b,e);b[3]|=h.bitLength(a)/8;b=f.encrypt(b);if(d.length)for(e=h.bitLength(d)/8,65279>=e?g=[h.partial(16,e)]:4294967295>=e&&(g=h.concat([h.partial(16,65534)],[e])),g=h.concat(g,d),d=0;d<g.length;d+=4)b=f.encrypt(q(b,g.slice(d,d+4).concat([0,0,0])));for(d=0;d<a.length;d+=4)b=f.encrypt(q(b,a.slice(d,d+4).concat([0,0,0])));return h.clamp(b,8*c)},J:function(f,a,e,d,c,b){var g,h=sjcl.bitArray;g=h.k;var q=a.length,n=h.bitLength(a);e=h.concat([h.partial(8,
b-1)],e).concat([0,0,0]).slice(0,4);d=h.bitSlice(g(d,f.encrypt(e)),0,c);if(!q)return{tag:d,data:[]};for(g=0;g<q;g+=4)e[3]++,c=f.encrypt(e),a[g]^=c[0],a[g+1]^=c[1],a[g+2]^=c[2],a[g+3]^=c[3];return{tag:d,data:h.clamp(a,n)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(f,a,e,d,c,b){if(128!==sjcl.bitArray.bitLength(e))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var g,h=sjcl.mode.ocb2.B,q=sjcl.bitArray,n=q.k,l=[0,0,0,0];e=h(f.encrypt(e));var k,m=[];d=d||[];c=c||64;for(g=0;g+4<a.length;g+=4)k=a.slice(g,g+4),l=n(l,k),m=m.concat(n(e,f.encrypt(n(e,k)))),e=h(e);k=a.slice(g);a=q.bitLength(k);g=f.encrypt(n(e,[0,0,0,a]));k=q.clamp(n(k.concat([0,0,0]),g),a);l=n(l,n(k.concat([0,0,0]),g));l=f.encrypt(n(l,n(e,h(e))));
d.length&&(l=n(l,b?d:sjcl.mode.ocb2.pmac(f,d)));return m.concat(q.concat(k,q.clamp(l,c)))},decrypt:function(f,a,e,d,c,b){if(128!==sjcl.bitArray.bitLength(e))throw new sjcl.exception.invalid("ocb iv must be 128 bits");c=c||64;var g=sjcl.mode.ocb2.B,h=sjcl.bitArray,q=h.k,n=[0,0,0,0],l=g(f.encrypt(e)),k,m,p=sjcl.bitArray.bitLength(a)-c,r=[];d=d||[];for(e=0;e+4<p/32;e+=4)k=q(l,f.decrypt(q(l,a.slice(e,e+4)))),n=q(n,k),r=r.concat(k),l=g(l);m=p-32*e;k=f.encrypt(q(l,[0,0,0,m]));k=q(k,h.clamp(a.slice(e),m).concat([0,
0,0]));n=q(n,k);n=f.encrypt(q(n,q(l,g(l))));d.length&&(n=q(n,b?d:sjcl.mode.ocb2.pmac(f,d)));if(!h.equal(h.clamp(n,c),h.bitSlice(a,p)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return r.concat(h.clamp(k,m))},pmac:function(f,a){var e,d=sjcl.mode.ocb2.B,c=sjcl.bitArray,b=c.k,g=[0,0,0,0],h=f.encrypt([0,0,0,0]),h=b(h,d(d(h)));for(e=0;e+4<a.length;e+=4)h=d(h),g=b(g,f.encrypt(b(h,a.slice(e,e+4))));a=a.slice(e);128>c.bitLength(a)&&(h=b(h,d(h)),a=c.concat(a,[-2147483648,0,0,0]));g=b(g,a);
return f.encrypt(b(d(b(h,d(h))),g))},B:function(f){return[f[0]<<1^f[1]>>>31,f[1]<<1^f[2]>>>31,f[2]<<1^f[3]>>>31,f[3]<<1^135*(f[0]>>>31)]}};sjcl.misc.hmac=function(f,a){this.M=a=a||sjcl.hash.sha256;var e=[[],[]],d=a.prototype.blockSize/32;this.l=[new a,new a];f.length>d&&(f=a.hash(f));for(a=0;a<d;a++)e[0][a]=f[a]^909522486,e[1][a]=f[a]^1549556828;this.l[0].update(e[0]);this.l[1].update(e[1])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(f,a){f=(new this.M(this.l[0])).update(f,a).finalize();return(new this.M(this.l[1])).update(f).finalize()};
sjcl.misc.pbkdf2=function(f,a,e,d,c){e=e||1E3;if(0>d||0>e)throw sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));c=c||sjcl.misc.hmac;f=new c(f);var b,g,h,q,n=[],l=sjcl.bitArray;for(q=1;32*n.length<(d||1);q++){c=b=f.encrypt(l.concat(a,[q]));for(g=1;g<e;g++)for(b=f.encrypt(b),h=0;h<b.length;h++)c[h]^=b[h];n=n.concat(c)}d&&(n=l.clamp(n,d));return n};
sjcl.random={randomWords:function(f,a){var e=[];a=this.isReady(a);var d;if(0===a)throw new sjcl.exception.notReady("generator isn't seeded");a&2&&this.U(!(a&1));for(a=0;a<f;a+=4)0===(a+1)%65536&&this.L(),d=this.w(),e.push(d[0],d[1],d[2],d[3]);this.L();return e.slice(0,f)},setDefaultParanoia:function(f){this.t=f},addEntropy:function(f,a,e){e=e||"user";var d,c,b=(new Date).valueOf(),g=this.q[e],h=this.isReady(),q=0;d=this.G[e];void 0===d&&(d=this.G[e]=this.R++);void 0===g&&(g=this.q[e]=0);this.q[e]=
(this.q[e]+1)%this.b.length;switch(typeof f){case "number":void 0===a&&(a=1);this.b[g].update([d,this.u++,1,a,b,1,f|0]);break;case "object":e=Object.prototype.toString.call(f);if("[object Uint32Array]"===e){c=[];for(e=0;e<f.length;e++)c.push(f[e]);f=c}else for("[object Array]"!==e&&(q=1),e=0;e<f.length&&!q;e++)"number"!=typeof f[e]&&(q=1);if(!q){if(void 0===a)for(e=a=0;e<f.length;e++)for(c=f[e];0<c;)a++,c>>>=1;this.b[g].update([d,this.u++,2,a,b,f.length].concat(f))}break;case "string":void 0===a&&
(a=f.length);this.b[g].update([d,this.u++,3,a,b,f.length]);this.b[g].update(f);break;default:q=1}if(q)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.j[g]+=a;this.f+=a;0===h&&(0!==this.isReady()&&this.K("seeded",Math.max(this.g,this.f)),this.K("progress",this.getProgress()))},isReady:function(f){f=this.C[void 0!==f?f:this.t];return this.g&&this.g>=f?80<this.j[0]&&(new Date).valueOf()>this.O?3:1:this.f>=f?2:0},getProgress:function(f){f=this.C[f?
f:this.t];return this.g>=f?1:this.f>f?1:this.f/f},startCollectors:function(){if(!this.m){if(window.addEventListener)window.addEventListener("load",this.o,!1),window.addEventListener("mousemove",this.p,!1);else if(document.attachEvent)document.attachEvent("onload",this.o),document.attachEvent("onmousemove",this.p);else throw new sjcl.exception.bug("can't attach event");this.m=!0}},stopCollectors:function(){this.m&&(window.removeEventListener?(window.removeEventListener("load",this.o,!1),window.removeEventListener("mousemove",
this.p,!1)):window.detachEvent&&(window.detachEvent("onload",this.o),window.detachEvent("onmousemove",this.p)),this.m=!1)},addEventListener:function(f,a){this.r[f][this.Q++]=a},removeEventListener:function(f,a){var e;f=this.r[f];var d=[];for(e in f)f.hasOwnProperty(e)&&f[e]===a&&d.push(e);for(a=0;a<d.length;a++)e=d[a],delete f[e]},b:[new sjcl.hash.sha256],j:[0],A:0,q:{},u:0,G:{},R:0,g:0,f:0,O:0,a:[0,0,0,0,0,0,0,0],d:[0,0,0,0],s:void 0,t:6,m:!1,r:{progress:{},seeded:{}},Q:0,C:[0,48,64,96,128,192,256,
384,512,768,1024],w:function(){for(var f=0;4>f&&(this.d[f]=this.d[f]+1|0,!this.d[f]);f++);return this.s.encrypt(this.d)},L:function(){this.a=this.w().concat(this.w());this.s=new sjcl.cipher.aes(this.a)},T:function(f){this.a=sjcl.hash.sha256.hash(this.a.concat(f));this.s=new sjcl.cipher.aes(this.a);for(f=0;4>f&&(this.d[f]=this.d[f]+1|0,!this.d[f]);f++);},U:function(f){var a=[],e=0,d;this.O=a[0]=(new Date).valueOf()+3E4;for(d=0;16>d;d++)a.push(4294967296*Math.random()|0);for(d=0;d<this.b.length&&(a=
a.concat(this.b[d].finalize()),e+=this.j[d],this.j[d]=0,f||!(this.A&1<<d));d++);this.A>=1<<this.b.length&&(this.b.push(new sjcl.hash.sha256),this.j.push(0));this.f-=e;e>this.g&&(this.g=e);this.A++;this.T(a)},p:function(f){sjcl.random.addEntropy([f.x||f.clientX||f.offsetX||0,f.y||f.clientY||f.offsetY||0],2,"mouse")},o:function(){sjcl.random.addEntropy((new Date).valueOf(),2,"loadtime")},K:function(f,a){var e;f=sjcl.random.r[f];var d=[];for(e in f)f.hasOwnProperty(e)&&d.push(f[e]);for(e=0;e<d.length;e++)d[e](a)}};
try{var s=new Uint32Array(32);crypto.getRandomValues(s);sjcl.random.addEntropy(s,1024,"crypto['getRandomValues']")}catch(t){}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(f,a,e,d){e=e||{};d=d||{};var c=sjcl.json,b=c.c({iv:sjcl.random.randomWords(4,0)},c.defaults),g;c.c(b,e);e=b.adata;"string"===typeof b.salt&&(b.salt=sjcl.codec.base64.toBits(b.salt));"string"===typeof b.iv&&(b.iv=sjcl.codec.base64.toBits(b.iv));if(!sjcl.mode[b.mode]||!sjcl.cipher[b.cipher]||"string"===typeof f&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&256!==b.ks||2>b.iv.length||
4<b.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof f&&(g=sjcl.misc.cachedPbkdf2(f,b),f=g.key.slice(0,b.ks/32),b.salt=g.salt);"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));"string"===typeof e&&(e=sjcl.codec.utf8String.toBits(e));g=new sjcl.cipher[b.cipher](f);c.c(d,b);d.key=f;b.ct=sjcl.mode[b.mode].encrypt(g,a,b.iv,e,b.ts);return c.encode(b)},decrypt:function(f,a,e,d){e=e||{};d=d||{};var c=sjcl.json;a=c.c(c.c(c.c({},c.defaults),c.decode(a)),
e,!0);var b;e=a.adata;"string"===typeof a.salt&&(a.salt=sjcl.codec.base64.toBits(a.salt));"string"===typeof a.iv&&(a.iv=sjcl.codec.base64.toBits(a.iv));if(!sjcl.mode[a.mode]||!sjcl.cipher[a.cipher]||"string"===typeof f&&100>=a.iter||64!==a.ts&&96!==a.ts&&128!==a.ts||128!==a.ks&&192!==a.ks&&256!==a.ks||!a.iv||2>a.iv.length||4<a.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof f&&(b=sjcl.misc.cachedPbkdf2(f,a),f=b.key.slice(0,a.ks/32),a.salt=b.salt);"string"===
typeof e&&(e=sjcl.codec.utf8String.toBits(e));b=new sjcl.cipher[a.cipher](f);e=sjcl.mode[a.mode].decrypt(b,a.ct,a.iv,e,a.ts);c.c(d,a);d.key=f;return sjcl.codec.utf8String.fromBits(e)},encode:function(f){var a,e="{",d="";for(a in f)if(f.hasOwnProperty(a)){if(!a.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");e+=d+'"'+a+'":';d=",";switch(typeof f[a]){case "number":case "boolean":e+=f[a];break;case "string":e+='"'+escape(f[a])+'"';break;case "object":e+='"'+
sjcl.codec.base64.fromBits(f[a],1)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return e+"}"},decode:function(f){f=f.replace(/\s/g,"");if(!f.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");f=f.replace(/^\{|\}$/g,"").split(/,/);var a={},e,d;for(e=0;e<f.length;e++){if(!(d=f[e].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");a[d[2]]=
d[3]?parseInt(d[3],10):d[2].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(d[4]):unescape(d[4])}return a},c:function(f,a,e){void 0===f&&(f={});if(void 0===a)return f;for(var d in a)if(a.hasOwnProperty(d)){if(e&&void 0!==f[d]&&f[d]!==a[d])throw new sjcl.exception.invalid("required parameter overridden");f[d]=a[d]}return f},W:function(f,a){var e={},d;for(d in f)f.hasOwnProperty(d)&&f[d]!==a[d]&&(e[d]=f[d]);return e},V:function(f,a){var e={},d;for(d=0;d<a.length;d++)void 0!==f[a[d]]&&(e[a[d]]=f[a[d]]);
return e}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.S={};sjcl.misc.cachedPbkdf2=function(f,a){var e=sjcl.misc.S,d;a=a||{};d=a.iter||1E3;e=e[f]=e[f]||{};d=e[d]=e[d]||{firstSalt:a.salt&&a.salt.length?a.salt.slice(0):sjcl.random.randomWords(2,0)};e=void 0===a.salt?d.firstSalt:a.salt;d[e]=d[e]||sjcl.misc.pbkdf2(f,e,a.iter);return{key:d[e].slice(0),salt:e.slice(0)}};
var Long=function(){function f(a,e,d){this.lte=this.lessThanOrEqual;this.gt=this.greaterThan;this.shl=this.shiftLeft;this.shr=this.shiftRight;this.shr_u=this.shru=this.shiftRightUnsigned;this.low=a|0;this.high=e|0;this.unsigned=!!d}f.isLong=function(a){return!0===(a&&a.IsLong)};Object.defineProperty(f.prototype,"IsLong",{get:function(){return!0},enumerable:!0,configurable:!0});f.fromInt=function(a,e){var d,c;if(e){a>>>=0;if(c=0<=a&&256>a)if(d=f.UINT_CACHE[a])return d;d=f.fromBits(a,0>(a|0)?-1:0,!0);
c&&(f.UINT_CACHE[a]=d)}else{a|=0;if(c=-128<=a&&128>a)if(d=f.INT_CACHE[a])return d;d=f.fromBits(a,0>a?-1:0,!1);c&&(f.INT_CACHE[a]=d)}return d};f.fromNumber=function(a,e){if(isNaN(a))return e?f.UZERO:f.ZERO;if(e){if(0>a)return f.UZERO;if(a>=f.TWO_PWR_64_DBL)return f.MAX_UNSIGNED_VALUE}else{if(a<=-f.TWO_PWR_63_DBL)return f.MIN_VALUE;if(a+1>=f.TWO_PWR_63_DBL)return f.MAX_VALUE}return 0>a?f.fromNumber(-a,e).neg():f.fromBits(a%f.TWO_PWR_32_DBL|0,a/f.TWO_PWR_32_DBL|0,e)};f.fromBits=function(a,e,d){return new f(a,
e,d)};f.fromString=function(a,e,d){if(0===a.length||"NaN"===a||"Infinity"===a||"+Infinity"===a||"-Infinity"===a)return f.ZERO;"number"===typeof e?(d=e,e=!1):e=!!e;d=d||10;if(2>d||36<d)throw RangeError("radix");var c;if(0<(c=a.indexOf("-")))throw Error("interior hyphen");if(0===c)return f.fromString(a.substring(1),e,d).neg();c=f.fromNumber(f.pow_dbl(d,8));for(var b=f.ZERO,g=0;g<a.length;g+=8){var h=Math.min(8,a.length-g),q=parseInt(a.substring(g,g+h),d);8>h?(h=f.fromNumber(f.pow_dbl(d,h)),b=b.mul(h).add(f.fromNumber(q))):
(b=b.mul(c),b=b.add(f.fromNumber(q)))}b.unsigned=e;return b};f.fromValue=function(a,e){return"number"===typeof a?f.fromNumber(a,e):"string"===typeof a?f.fromString(a,e):f.fromBits(a.low,a.high,"boolean"===typeof e?e:a.unsigned)};f.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};f.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*f.TWO_PWR_32_DBL+(this.low>>>0):this.high*f.TWO_PWR_32_DBL+(this.low>>>0)};f.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw RangeError("radix");
if(this.isZero())return"0";if(this.isNegative()){if(this.eq(f.MIN_VALUE)){var e=f.fromNumber(a),d=this.div(e),e=d.mul(e).sub(this);return d.toString(a)+e.toInt().toString(a)}return"-"+this.neg().toString(a)}for(var d=f.fromNumber(f.pow_dbl(a,6),this.unsigned),e=new f(this.low,this.high,this.unsigned),c="";;){var b=e.div(d),g=(e.sub(b.mul(d)).toInt()>>>0).toString(a),e=b;if(e.isZero())return g+c;for(;6>g.length;)g="0"+g;c=""+g+c}};f.prototype.toFixed=function(a){var e=this.toString();if(0<a){e.concat(".");
for(var d=0;20>d&&d<a;d++)e+="0"}return e};f.prototype.getHighBits=function(){return this.high};f.prototype.getHighBitsUnsigned=function(){return this.high>>>0};f.prototype.getLowBits=function(){return this.low};f.prototype.getLowBitsUnsigned=function(){return this.low>>>0};f.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(f.MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var a=0!=this.high?this.high:this.low,e=31;0<e&&0==(a&1<<e);e--);return 0!=this.high?e+33:e+1};f.prototype.isZero=
function(){return 0===this.high&&0===this.low};f.prototype.isNegative=function(){return!this.unsigned&&0>this.high};f.prototype.isPositive=function(){return this.unsigned||0<=this.high};f.prototype.isOdd=function(){return 1===(this.low&1)};f.prototype.isEven=function(){return 0===(this.low&1)};f.prototype.equals=function(a){f.isLong(a)||(a=f.fromValue(a));return this.unsigned!==a.unsigned&&1===this.high>>>31&&1===a.high>>>31?!1:this.high===a.high&&this.low===a.low};f.prototype.eq=function(a){return this.equals(a)};
f.prototype.notEquals=function(a){return!this.equals(a)};f.prototype.neq=function(a){return this.notEquals(a)};f.prototype.ne=function(a){return this.notEquals(a)};f.prototype.lessThan=function(a){return 0>this.comp(a)};f.prototype.lt=function(a){return this.lessThan(a)};f.prototype.lessThanOrEqual=function(a){return 0>=this.comp(a)};f.prototype.le=function(a){return this.lessThanOrEqual(a)};f.prototype.greaterThan=function(a){return 0<this.comp(a)};f.prototype.greaterThanOrEqual=function(a){return 0<=
this.comp(a)};f.prototype.gte=function(a){return this.greaterThanOrEqual(a)};f.prototype.ge=function(a){return this.greaterThanOrEqual(a)};f.prototype.compare=function(a){f.isLong(a)||(a=f.fromValue(a));if(this.eq(a))return 0;var e=this.isNegative(),d=a.isNegative();return e&&!d?-1:!e&&d?1:this.unsigned?a.high>>>0>this.high>>>0||a.high===this.high&&a.low>>>0>this.low>>>0?-1:1:this.sub(a).isNegative()?-1:1};f.prototype.comp=function(a){return this.compare(a)};f.prototype.negate=function(){return!this.unsigned&&
this.eq(f.MIN_VALUE)?f.MIN_VALUE:this.not().add(f.ONE)};f.prototype.neg=function(){return this.negate()};f.prototype.add=function(a){f.isLong(a)||(a=f.fromValue(a));var e=this.high>>>16,d=this.high&65535,c=this.low>>>16,b=a.high>>>16,g=a.high&65535,h=a.low>>>16,q;q=0+((this.low&65535)+(a.low&65535));a=0+(q>>>16);a+=c+h;c=0+(a>>>16);c+=d+g;d=0+(c>>>16);d=d+(e+b)&65535;return f.fromBits((a&65535)<<16|q&65535,d<<16|c&65535,this.unsigned)};f.prototype.subtract=function(a){f.isLong(a)||(a=f.fromValue(a));
return this.add(a.neg())};f.prototype.sub=function(a){return this.subtract(a)};f.prototype.multiply=function(a){if(this.isZero())return this.unsigned?f.UZERO:f.ZERO;f.isLong(a)||(a=f.fromValue(a));if(a.isZero())return this.unsigned?f.UZERO:f.ZERO;if(this.eq(f.MIN_VALUE))return a.isOdd()?f.MIN_VALUE:f.ZERO;if(a.eq(f.MIN_VALUE))return this.isOdd()?f.fromValue(f.MIN_VALUE,this.unsigned):this.unsigned?f.UZERO:f.ZERO;if(this.isNegative())return a.isNegative()?this.neg().mul(a.neg()):this.neg().mul(a).neg();
if(a.isNegative())return this.mul(a.neg()).neg();if(this.lt(f.TWO_PWR_24)&&a.lt(f.TWO_PWR_24))return f.fromNumber(this.toNumber()*a.toNumber(),this.unsigned);var e=this.high>>>16,d=this.high&65535,c=this.low>>>16,b=this.low&65535,g=a.high>>>16,h=a.high&65535,q=a.low>>>16;a=a.low&65535;var n,l,k,m;m=0+b*a;k=0+(m>>>16);k+=c*a;l=0+(k>>>16);k=(k&65535)+b*q;l+=k>>>16;k&=65535;l+=d*a;n=0+(l>>>16);l=(l&65535)+c*q;n+=l>>>16;l&=65535;l+=b*h;n+=l>>>16;l&=65535;n=n+(e*a+d*q+c*h+b*g)&65535;return f.fromBits(k<<
16|m&65535,n<<16|l,this.unsigned)};f.prototype.mul=function(a){return this.multiply(a)};f.prototype.divide=function(a){f.isLong(a)||(a=f.fromValue(a));if(a.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?f.UZERO:f.ZERO;var e,d,c;if(this.unsigned){a.unsigned||(a=a.toUnsigned());if(a.gt(this))return f.UZERO;if(a.gt(this.shru(1)))return f.UONE;c=f.UZERO}else{if(this.eq(f.MIN_VALUE)){if(a.eq(f.ONE)||a.eq(f.NEG_ONE))return f.MIN_VALUE;if(a.eq(f.MIN_VALUE))return f.ONE;e=
this.shr(1).div(a).shl(1);if(e.eq(f.ZERO))return a.isNegative()?f.ONE:f.NEG_ONE;d=this.sub(a.mul(e));return c=e.add(d.div(a))}if(a.eq(f.MIN_VALUE))return this.unsigned?f.UZERO:f.ZERO;if(this.isNegative())return a.isNegative()?this.neg().div(a.neg()):this.neg().div(a).neg();if(a.isNegative())return this.div(a.neg()).neg();c=f.ZERO}for(d=this;d.gte(a);){e=Math.max(1,Math.floor(d.toNumber()/a.toNumber()));for(var b=Math.ceil(Math.log(e)/Math.LN2),b=48>=b?1:f.pow_dbl(2,b-48),g=f.fromNumber(e),h=g.mul(a);h.isNegative()||
h.gt(d);)e-=b,g=f.fromNumber(e,this.unsigned),h=g.mul(a);g.isZero()&&(g=f.ONE);c=c.add(g);d=d.sub(h)}return c};f.prototype.div=function(a){return this.divide(a)};f.prototype.modulo=function(a){f.isLong(a)||(a=f.fromValue(a));return this.sub(this.div(a).mul(a))};f.prototype.mod=function(a){return this.modulo(a)};f.prototype.rem=function(a){return this.modulo(a)};f.prototype.not=function(){return f.fromBits(~this.low,~this.high,this.unsigned)};f.prototype.and=function(a){f.isLong(a)||(a=f.fromValue(a));
return f.fromBits(this.low&a.low,this.high&a.high,this.unsigned)};f.prototype.or=function(a){f.isLong(a)||(a=f.fromValue(a));return f.fromBits(this.low|a.low,this.high|a.high,this.unsigned)};f.prototype.xor=function(a){f.isLong(a)||(a=f.fromValue(a));return f.fromBits(this.low^a.low,this.high^a.high,this.unsigned)};f.prototype.shiftLeft=function(a){f.isLong(a)&&(a=a.toInt());return 0===(a&=63)?this:32>a?f.fromBits(this.low<<a,this.high<<a|this.low>>>32-a,this.unsigned):f.fromBits(0,this.low<<a-32,
this.unsigned)};f.prototype.shiftRight=function(a){f.isLong(a)&&(a=a.toInt());return 0===(a&=63)?this:32>a?f.fromBits(this.low>>>a|this.high<<32-a,this.high>>a,this.unsigned):f.fromBits(this.high>>a-32,0<=this.high?0:-1,this.unsigned)};f.prototype.shiftRightUnsigned=function(a){f.isLong(a)&&(a=a.toInt());a&=63;if(0===a)return this;var e=this.high;return 32>a?f.fromBits(this.low>>>a|e<<32-a,e>>>a,this.unsigned):32===a?f.fromBits(e,0,this.unsigned):f.fromBits(e>>>a-32,0,this.unsigned)};f.prototype.toSigned=
function(){return this.unsigned?f.fromBits(this.low,this.high,!1):this};f.prototype.toUnsigned=function(){return this.unsigned?this:f.fromBits(this.low,this.high,!0)};f.prototype.toBytes=function(a){return a?this.toBytesLE():this.toBytesBE()};f.prototype.toBytesLE=function(){var a=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,a&255,a>>>8&255,a>>>16&255,a>>>24]};f.prototype.toBytesBE=function(){var a=this.high,e=this.low;return[a>>>24,a>>>16&255,a>>>8&255,a&255,e>>>24,e>>>16&255,e>>>
8&255,e&255]};f.fromBytes=function(a,e,d){return d?f.fromBytesLE(a,e):f.fromBytesBE(a,e)};f.fromBytesLE=function(a,e){return new f(a[0]|a[1]<<8|a[2]<<16|a[3]<<24,a[4]|a[5]<<8|a[6]<<16|a[7]<<24,e)};f.fromBytesBE=function(a,e){return new f(a[4]<<24|a[5]<<16|a[6]<<8|a[7],a[0]<<24|a[1]<<16|a[2]<<8|a[3],e)};f.INT_CACHE={};f.UINT_CACHE={};f.pow_dbl=Math.pow;f.TWO_PWR_16_DBL=65536;f.TWO_PWR_24_DBL=16777216;f.TWO_PWR_32_DBL=f.TWO_PWR_16_DBL*f.TWO_PWR_16_DBL;f.TWO_PWR_64_DBL=f.TWO_PWR_32_DBL*f.TWO_PWR_32_DBL;
f.TWO_PWR_63_DBL=f.TWO_PWR_64_DBL/2;f.TWO_PWR_24=f.fromInt(f.TWO_PWR_24_DBL);f.ZERO=f.fromInt(0);f.UZERO=f.fromInt(0,!0);f.ONE=f.fromInt(1);f.UONE=f.fromInt(1,!0);f.NEG_ONE=f.fromInt(-1);f.MAX_VALUE=f.fromBits(-1,2147483647,!1);f.MAX_UNSIGNED_VALUE=f.fromBits(-1,-1,!0);f.MIN_VALUE=f.fromBits(0,-2147483648,!1);return f}(),Pxc;
(function(f){(function(a){var e=function(){function a(c){this._id=null;this._count=0;this._interval=c}Object.defineProperty(a.prototype,"isExpired",{get:function(){return null!==this._id&&0===this._count},enumerable:!0,configurable:!0});a.prototype.start=function(a,b){var g=this;this.reset();this._count=a;this._id=setInterval(function(){g._count--;b(g._count);0===g._count&&clearInterval(g._id)},this._interval)};a.prototype.reset=function(){null!==this._id&&clearInterval(this._id);this._id=null;this._count=
0};return a}();a.CallbackTimer=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
var HashTable=function(){function f(){this.keys=[];this.values=[]}f.endsWith=function(a,e){return-1!==a.indexOf(e,a.length-e.length)};f.prototype.add=function(a,e){var d=null,d=this.hasOwnProperty(a)?this[a]:this.keys.length++;this[a]=d;this.keys[d]=a;this.values[d]=e};f.prototype.getValue=function(a){return this.hasOwnProperty(a)?this.values[this[a]]:null};f.prototype.contains=function(a){return this.hasOwnProperty(a)};f.prototype.remove=function(a){if(this.hasOwnProperty(a)){var e=this[a];this.keys.splice(e,
1);this.values.splice(e,1);delete this[a];for(a=0;a<this.keys.length;a++)this[this.keys[a]]=a}};return f}(),TypeConverter=function(){function f(){}f.stringToBoolean=function(a){if(null!==a&&void 0!==a)switch(a.toLowerCase()){case "true":case "1":return!0}return!1};f.booleanStringToNumber=function(a){if(null!==a&&void 0!==a)switch(a.toLowerCase()){case "true":return 1;case "false":return 0}return NaN};return f}(),HtmlHelper=function(){function f(){}f.getSubElementById=function(a,e){for(var d=0;d<a.childElementCount;d++){var c=
a.children[d];if(c.id==e)return c}return null};return f}(),StringBuilder=function(){function f(){this.data=[];this.counter=0}f.prototype.append=function(a){this.data[this.counter++]=a};f.prototype.toString=function(){return this.data.join("")};return f}();
(function(f){(function(a){var e=function(){function d(){}d.getImageScaling=function(c,b){void 0===b&&(b=a.ImageScaling.Stretch);if(void 0===c)return b;switch(c){case "Fill":return a.ImageScaling.Fill;case "Fit":return a.ImageScaling.Fit;case "Center":return a.ImageScaling.Center;default:return a.ImageScaling.Stretch}};d.getPlacement=function(c,b){void 0===b&&(b=a.Placement.Center);if(void 0===c)return b;switch(c){case "Left":return a.Placement.Left;case "Right":return a.Placement.Right;case "Top":return a.Placement.Top;
case "Bottom":return a.Placement.Bottom;default:return a.Placement.Center}};d.getHorizontalAlignment=function(c,b){void 0===b&&(b=a.HorizontalAlignment.Center);if(void 0===c)return b;switch(c){case "Left":return a.HorizontalAlignment.Left;case "Right":return a.HorizontalAlignment.Right;default:return a.HorizontalAlignment.Center}};d.getVerticalAlignment=function(c,b){void 0===b&&(b=a.VerticalAlignment.Middle);if(void 0===c)return b;switch(c){case "Top":return a.VerticalAlignment.Top;case "Bottom":return a.VerticalAlignment.Bottom;
default:return a.VerticalAlignment.Middle}};d.getTextDirection=function(c,b){void 0===b&&(b=a.TextDirection.LeftToRight);if(void 0===c)return b;switch(c){case "TopToBottom":return a.TextDirection.TopToBottom;case "BottomToTop":return a.TextDirection.BottomToTop;default:return a.TextDirection.LeftToRight}};d.getBoolean=function(a,b){void 0===b&&(b=!1);"boolean"!==typeof a&&(a="string"===typeof a?TypeConverter.stringToBoolean(a):b);return a};d.convertToBoolean=function(a){if("boolean"!==typeof a){if("string"===
typeof a){var b=a.toLowerCase();"true"===b?a=!0:"false"===b?a=!1:(a=parseFloat(a),a=0<a||0>a);return a}a="number"===typeof a?0<a||0>a:Long.isLong(a)?!a.isZero():!1}return a};d.getNumber=function(a,b){void 0===b&&(b=0);var g;"number"===typeof a?g=a:"string"===typeof a?(g=parseFloat(a),isNaN(g)&&(g=TypeConverter.booleanStringToNumber(a))):"boolean"===typeof a?g=a?1:0:Long.isLong(a)&&(g=a.toNumber());return isNaN(g)?b:g};d.getString=function(a,b){void 0===b&&(b="");"string"!==typeof a&&(a=void 0===a||
null===a?b:a.toString());return a};d.getPoint=function(c,b){void 0===b&&(b=null);void 0===c&&(c=null!==b?b:{X:0,Y:0});var g=d.getNumber(c.X),h=d.getNumber(c.Y);return new a.Point(g,h)};d.getSize=function(c,b){void 0===b&&(b=null);void 0===c&&(c=null!==b?b:{Width:0,Height:0});var g=d.getNumber(c.Width),h=d.getNumber(c.Height);return new a.Point(g,h)};d.getRect=function(c,b){void 0===b&&(b=null);void 0===c&&(c=null!==b?b:{Left:0,Top:0,Right:0,Bottom:0});var g=d.getNumber(c.Left),h=d.getNumber(c.Top),
q=d.getNumber(c.Right),e=d.getNumber(c.Bottom);return new a.Rect(g,h,q,e)};d.getColor=function(c,b){void 0===b&&(b=null);if(void 0===c)return b;c=c.toString();var g=parseInt(c.slice(1,3),16),h=parseInt(c.slice(3,5),16),d=parseInt(c.slice(5,7),16),e=parseInt(c.slice(7,9),16);return new a.Color(h,d,e,g)};return d}();a.Parser=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.getPageRootUrl=function(){return d.getPageRootUrlSupport(g_query)};d.getPageRootUrlSupport=function(c){var b=null;void 0!==c&&(void 0!==c.HmiPage?b=c.HmiPage:void 0!==c.HmiPath&&(b=a.UrlEx.EnsureUrlTrailingForwardSlash(c.HmiPath)),null!==b&&(c=b.split("/"),c=c.slice(0,c.length-1),b=c.join("/")));return b};d.getResourceUrl=function(c,b){void 0===b&&(b=null);if(void 0===c)return b;var g=a.Parser.getString(c),h=d.getPageRootUrl();return null===
h||""===h?g:h+"/"+g};d.LoadModule=function(c){this._loadedModules.contains(c)||this._loadedModules.add(c,a.ScriptModuleLoader.LoadScript(d.getResourceUrl(c+".js")))};d.GetModuleInstance=function(a){return this._loadedModules.getValue(a)};d._loadedModules=new HashTable;return d}();a.ModuleLoader=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.accessToBit=function(a,b){return 0!=(d.shiftRight(a,b)&1)};d.accessToByte=function(a,b){return d.shiftRight(a,8*b)&255};d.accessToWord=function(a,b){return d.shiftRight(a,16*b)&65535};d.accessToDword=function(a,b){return d.convert32BitIntToUnsigned(d.shiftRight(a,32*b)&4294967295)};d.bitwiseAnd=function(c,b){if("boolean"===typeof c){if("boolean"===typeof b)return c&&b}else if(Long.isLong(c))return c.and(d.getNumberForLong(b));return Long.isLong(b)?
b.and(d.getNumberForLong(c)):d.convert32BitIntToUnsigned(a.Parser.getNumber(c)&a.Parser.getNumber(b))};d.bitwiseOr=function(c,b){if("boolean"===typeof c){if("boolean"===typeof b)return c||b}else if(Long.isLong(c))return c.or(d.getNumberForLong(b));return Long.isLong(b)?b.or(d.getNumberForLong(c)):d.convert32BitIntToUnsigned(a.Parser.getNumber(c)|a.Parser.getNumber(b))};d.bitwiseXor=function(c,b){if("boolean"===typeof c){if("boolean"===typeof b)return c!=b}else if(Long.isLong(c))return c.xor(d.getNumberForLong(b));
return Long.isLong(b)?b.xor(d.getNumberForLong(c)):d.convert32BitIntToUnsigned(a.Parser.getNumber(c)^a.Parser.getNumber(b))};d.equals=function(c,b){return Long.isLong(c)?c.equals(d.getNumberForLong(b)):Long.isLong(b)?b.equals(d.getNumberForLong(c)):a.Parser.getNumber(c)==a.Parser.getNumber(b)};d.notEquals=function(c,b){return Long.isLong(c)?c.notEquals(d.getNumberForLong(b)):Long.isLong(b)?b.notEquals(d.getNumberForLong(c)):a.Parser.getNumber(c)!=a.Parser.getNumber(b)};d.lessThan=function(c,b){return Long.isLong(c)?
c.lessThan(d.getNumberForLong(b)):Long.isLong(b)?b.greaterThan(d.getNumberForLong(c)):a.Parser.getNumber(c)<a.Parser.getNumber(b)};d.lessThanOrEqual=function(c,b){return Long.isLong(c)?c.lessThanOrEqual(d.getNumberForLong(b)):Long.isLong(b)?b.greaterThanOrEqual(d.getNumberForLong(c)):a.Parser.getNumber(c)<=a.Parser.getNumber(b)};d.modulo=function(c,b){if(Long.isLong(b)){if(b.isZero())return NaN;Long.isLong(c)||(c=Long.fromValue(d.getNumberForLong(c)));return c.modulo(b)}if(Long.isLong(c)){var g=Long.fromValue(d.getNumberForLong(b));
if(g.isZero())return NaN;g=c.modulo(g);return 0==g.getHighBits()?g.toInt():g}return a.Parser.getNumber(c)%a.Parser.getNumber(b)};d.negate=function(c){if(Long.isLong(c))return c.toSigned().negate();c=a.Parser.getNumber(c);return-c};d.toNumber=function(c){return a.Parser.getNumber(c)};d.getNumberForLong=function(a){if("number"!==typeof a){if("string"===typeof a){a=a.trim();var b=TypeConverter.booleanStringToNumber(a);return 0==b||1==b?b:a}if(!Long.isLong(a))return Number(a)}return a};d.convert32BitIntToUnsigned=
function(a){return 0>a?a+4294967296:a};d.shiftRight=function(c,b){if(Long.isLong(c))return c.shiftRight(b).toInt();c=a.Parser.getNumber(c);return 31<b?Long.fromValue(c,!0).shiftRight(b).toInt():c>>>b};return d}();a.ExpressionHelper=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){return function(d,c,b,g){this.authenticationProtocol=a.AuthenticationProtocol.None;if(!d.match(/(http|https)/))throw Error("ERROR: Invalid authentication protocol: "+d);if(g==a.AuthenticationProtocol.Integrated&&!d.match(/(https)/))throw Error("ERROR: Invalid authentication protocol: TLS required with clear text credentials.");this.authenticationServer=c;this.serverProtocol=d;this.xhrTimeout=b;g&&(this.authenticationProtocol=g)}}();a.AuthenticationSettings=
e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.Any=0]="Any";a[a.All=1]="All"})(e=a.ScopeOp||(a.ScopeOp={}));var d=function(){function a(b){"All"==b.Scope?this.scopeOp=e.All:"Any"==b.Scope&&(this.scopeOp=e.Any);this.operator=b.Operator;void 0!=b.Role&&(this.role=b.Role);0==a.filters.values.length&&a.InitializeFuncitonMap();this.compairsonCallback2=a.filters.getValue(b.Scope+"Are"+b.Operator)}a.AnyAreEqual=function(a,g){return a.some(function(a){return a===g})};a.AnyAreGreaterThan=function(a,g){return a.some(function(a){return a>
g})};a.AnyAreGreaterThanOrEqual=function(a,g){return a.some(function(a){return a>=g})};a.AnyAreLessThan=function(a,g){return a.some(function(a){return a<g})};a.AnyAreLessThanOrEqual=function(a,g){return a.some(function(a){return a<=g})};a.AnyAreNotEqual=function(a,g){return a.some(function(a){return a!=g})};a.AllAreEqual=function(a,g){return 0<a.length&&a.every(function(a){return a===g})};a.AllAreGreaterThan=function(a,g){return 0<a.length&&a.every(function(a){return a>g})};a.AllAreGreaterThanOrEqual=
function(a,g){return 0<a.length&&a.every(function(a){return a>=g})};a.AllAreLessThan=function(a,g){return 0<a.length&&a.every(function(a){return a<g})};a.AllAreLessThanOrEqual=function(a,g){return 0<a.length&&a.every(function(a){return a<=g})};a.AllAreNotEqual=function(a,g){return 0<a.length&&a.every(function(a){return a!=g})};a.InitializeFuncitonMap=function(){a.filters.add("AnyAreEqual",a.AnyAreEqual);a.filters.add("AnyAreGreaterThan",a.AnyAreGreaterThan);a.filters.add("AnyAreGreaterThanOrEqual",
a.AnyAreGreaterThanOrEqual);a.filters.add("AnyAreLessThan",a.AnyAreLessThan);a.filters.add("AnyAreLessThanOrEqual",a.AnyAreLessThanOrEqual);a.filters.add("AnyAreNotEqual",a.AnyAreNotEqual);a.filters.add("AllAreEqual",a.AllAreEqual);a.filters.add("AllAreGreaterThan",a.AllAreGreaterThan);a.filters.add("AllAreGreaterThanOrEqual",a.AllAreGreaterThanOrEqual);a.filters.add("AllAreLessThan",a.AllAreLessThan);a.filters.add("AllAreLessThanOrEqual",a.AllAreLessThanOrEqual);a.filters.add("AllAreNotEqual",a.AllAreNotEqual)};
a.prototype.IsAuthorized=function(a){return this.compairsonCallback2(a,this.role)};a.filters=new HashTable;return a}();a.AccessControlExpression=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.None=0]="None";a[a.Application=1]="Application";a[a.Integrated=2]="Integrated"})(e=a.AuthenticationProtocol||(a.AuthenticationProtocol={}));var d=function(){return function(){this.authProtocol=e.None}}();a.SecurityContextInitParams=d;a.CreateSecurityContext=function(a){var g;switch(a.authProtocol){case e.Application:g=new c;break;case e.Integrated:g=new c}return g};d=function(){function a(){}a.prototype.canShowPage=function(a){return!0};a.prototype.shouldEnableNode=
function(a){return!0};a.prototype.shouldShowNode=function(a){return!0};a.prototype.updateRoles=function(a){};a.prototype.addRolesChangedListener=function(a){};return a}();a.NullSecurityContext=d;var c=function(){function a(){this.userRoles=[];this.rolesChangedListeners=[]}a.prototype.addRolesChangedListener=function(a){this.rolesChangedListeners.push(a)};a.prototype.canShowPage=function(a){return a.availabilityAccessControl?a.availabilityAccessControl.IsAuthorized(this.userRoles):!0};a.prototype.shouldEnableNode=
function(a){return a.enabledAccessControl?a.enabledAccessControl.IsAuthorized(this.userRoles):!0};a.prototype.shouldShowNode=function(a){return a.visibilityAccessControl?a.visibilityAccessControl.IsAuthorized(this.userRoles):!0};a.prototype.updateRoles=function(a){var b=this;this.userRoles.length=0;a&&a.forEach(function(a){return b.userRoles.push(a)});this.rolesChangedListeners.forEach(function(a){return a.OnSecurityContextChanged(b)})};return a}();a.ApplciationSecurityContext=c})(f.Hmi||(f.Hmi={}))})(Pxc||
(Pxc={}));
(function(f){(function(a){(function(a){a[a.Success=0]="Success";a[a.BadCredentials=1]="BadCredentials";a[a.ServerError=2]="ServerError";a[a.CommunicationError=3]="CommunicationError";a[a.BadToken=4]="BadToken"})(a.AuthenticationResult||(a.AuthenticationResult={}));(function(a){a[a.None=0]="None";a[a.LogInPending=1]="LogInPending";a[a.LogInCompleted=2]="LogInCompleted";a[a.LogOutPending=3]="LogOutPending";a[a.LogOutCompleted=4]="LogOutCompleted";a[a.Error=5]="Error"})(a.AuthenticationStatus||(a.AuthenticationStatus=
{}))})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c){var b=this;this.status=a.AuthenticationStatus.None;this._clientState="";this._authProtcol=this._authServer=this._authenticationToken=null;this._authenticationProtocol=a.AuthenticationProtocol.None;this.ObtainAccessToken=function(g,c,d,e){c=b.buildPassword(c);g={code:b._authenticationToken,grant_type:"authorization_code",username:g,password:c};b._authservice.PostResource(b.urlStart()+"/_pxc_api/auth/access-token",g,function(b,g){if(b.Succeeded())void 0!=
b.data.access_token?(g._authenticationToken=void 0,d(0,b.data.access_token,b.data.roles,e)):d(1,null,[],e);else{var c=a.AuthenticationResult.CommunicationError;if(401==b.status){var h=b.getResponseHeader("WWW-Authenticate");null!=h&&(-1!=h.search("invalid_token")?(c=a.AuthenticationResult.BadToken,g._authenticationToken=void 0):-1!=h.search("invalid_grant")&&(c=a.AuthenticationResult.BadCredentials))}d(c,null,[],e)}},b)};this._authservice=new a.XhrRESTService(c.xhrTimeout);this._authServer=c.authenticationServer;
this._authProtcol=c.serverProtocol;":"!=this._authProtcol.charAt(this._authProtcol.length-1)&&(this._authProtcol+=":");this._authenticationProtocol=c.authenticationProtocol;this.refreshClientState()}d.prototype.clearStatus=function(){this.status=a.AuthenticationStatus.None};d.prototype.refreshClientState=function(){try{if(sjcl.random.isReady()){var a=sjcl.random.randomWords(4);this._clientState=Math.abs(a[0]).toString(16)+Math.abs(a[1]).toString(16);Math.abs(a[2]).toString(16)+Math.abs(a[3]).toString(16)}}catch(b){}};
d.prototype.logInAsync=function(a,b,g,h){var d=this;null==this._authenticationToken?this.ObtainAuthenticationToken(function(e,f){e.Succeeded()?void 0!=e.data.code?(d._authenticationToken=e.data.code,d.ObtainAccessToken(a,b,g,h)):g(1,null,[],h):g(1,null,[],h)}.bind(this),h):this.ObtainAccessToken(a,b,g,h)};d.prototype.buildPassword=function(c){return this._authenticationProtocol==a.AuthenticationProtocol.Application?(c=String.fromCharCode(112,120,99,104,109,105)+c,c=sjcl.hash.sha256.hash(sjcl.codec.utf8String.toBits(c)),
c=sjcl.bitArray.concat(sjcl.codec.utf8String.toBits(this._authenticationToken),c),sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(c))):c};d.prototype.urlStart=function(){return this._authProtcol+"//"+this._authServer};d.prototype.ObtainAuthenticationToken=function(a,b){this.refreshClientState();var g={response_type:"code",state:this._clientState,scope:"variables"};this._authservice.PostResource(this.urlStart()+"/_pxc_api/auth/auth-token",g,function(g,d){g.Succeeded()&&void 0!=g.data.code&&(d._authenticationToken=
g.data.code);a(g,b)},this)};d.prototype.logOutAsync=function(){this.status=a.AuthenticationStatus.LogOutCompleted};return d}();a.ApplicationAuthenticationService=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b){void 0===b&&(b=!1);this._drift=this._time=0;this._lastTick=this._prevSysTickCount=this._serverTime=-1;this._lastTick=Date.now();this._isLoggingEnabled=b;this._smoothingWindow=new a.SmoothingWindow(this,c)}Object.defineProperty(d.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"drift",{get:function(){return this._drift},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"serverTime",{get:function(){return this._serverTime},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isLoggingEnabled",{get:function(){return this._isLoggingEnabled},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"smoothingWindow",{get:function(){return this._smoothingWindow},enumerable:!0,configurable:!0});d.prototype.synchronize=function(a){this.tick();var b=a;if(0>=b||b===this._prevSysTickCount)b=Date.now();this._drift=this._time-b;Math.abs(this._drift)>d._driftTolerance&&
(this._isLoggingEnabled&&console.log("DRIFT CORRECTION drift="+this._drift),this._time=b,this._lastTick=Date.now(),this._drift=0);this._prevSysTickCount=a;this._serverTime=b};d.prototype.tick=function(){var a=Date.now();this._time+=a-this._lastTick;this._lastTick=a};d._driftTolerance=25;return d}();a.Clock=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){f=f.Hmi||(f.Hmi={});f=f.RenderOptions||(f.RenderOptions={});f[f.None=0]="None";f[f.DrawBoundingBoxes=1]="DrawBoundingBoxes";f[f.DoubleBufferedHost=2]="DoubleBufferedHost";f[f.DrawFps=4]="DrawFps";f[f.DrawButtonShadows=8]="DrawButtonShadows";f[f.Optimize=16]="Optimize";f[f.DrawForeground=32]="DrawForeground";f[f.DrawBackground=64]="DrawBackground";f[f.DrawDebugSelection=128]="DrawDebugSelection";f[f.DrawAnimationPoints=256]="DrawAnimationPoints";f[f.DrawHitRegions=512]="DrawHitRegions";
f[f.ZoomToFit=1024]="ZoomToFit";f[f.DrawHighDpi=2048]="DrawHighDpi";f[f.DrawDialogDimmer=4096]="DrawDialogDimmer";f[f.DrawDialogShadows=8192]="DrawDialogShadows"})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b){var g=this;this.OnRowClickCallback=function(b,c){var h=g._engine.settings.renderOptions;if(b instanceof a.CheckBox){var d=!b.checkBoxValue.value;switch(b.id){case "optBBox":h=d?h|a.RenderOptions.DrawBoundingBoxes:h&~a.RenderOptions.DrawBoundingBoxes;break;case "optAnimationPoints":h=d?h|a.RenderOptions.DrawAnimationPoints:h&~a.RenderOptions.DrawAnimationPoints;break;case "optHitRegions":h=d?h|a.RenderOptions.DrawHitRegions:h&~a.RenderOptions.DrawHitRegions;
break;case "optFps":h=d?h|a.RenderOptions.DrawFps:h&~a.RenderOptions.DrawFps;break;case "optDebugSelection":h=d?h|a.RenderOptions.DrawDebugSelection:h&~a.RenderOptions.DrawDebugSelection;break;case "optButtonShadows":h=d?h|a.RenderOptions.DrawButtonShadows:h&~a.RenderOptions.DrawButtonShadows;break;case "optDialogShadows":h=d?h|a.RenderOptions.DrawDialogShadows:h&~a.RenderOptions.DrawDialogShadows;break;case "optDialogDimmer":h=d?h|a.RenderOptions.DrawDialogDimmer:h&~a.RenderOptions.DrawDialogDimmer;
break;case "optOptimize":h=d?h|a.RenderOptions.Optimize:h&~a.RenderOptions.Optimize;break;case "optZoomToFit":h=d?h|a.RenderOptions.ZoomToFit:h&~a.RenderOptions.ZoomToFit;break;case "optHighDpi":h=d?h|a.RenderOptions.DrawHighDpi:h&~a.RenderOptions.DrawHighDpi;break;case "optForeground":h=d?h|a.RenderOptions.DrawForeground:h&~a.RenderOptions.DrawForeground;break;case "optBackground":h=d?h|a.RenderOptions.DrawBackground:h&~a.RenderOptions.DrawBackground}g._engine.setRenderOptions(h)}};this._engine=
c;for(var h=this._engine.settings.renderOptions,d=0;d<b.rootNode.nodes.length;d++){var e=b.rootNode.nodes[d];if(e instanceof a.CheckBox){e.actions.push(new a.CustomAction(a.ActionGesture.Click,this.OnRowClickCallback.bind(this)));var f=!1;switch(e.id){case "optZoomToFit":f=0!=(h&a.RenderOptions.ZoomToFit);break;case "optHighDpi":f=0!=(h&a.RenderOptions.DrawHighDpi);break;case "optButtonShadows":f=0!=(h&a.RenderOptions.DrawButtonShadows);break;case "optDialogShadows":f=0!=(h&a.RenderOptions.DrawDialogShadows);
break;case "optOptimize":f=0!=(h&a.RenderOptions.Optimize);break;case "optDialogDimmer":f=0!=(h&a.RenderOptions.DrawDialogDimmer);break;case "optFps":f=0!=(h&a.RenderOptions.DrawFps);break;case "optBBox":f=0!=(h&a.RenderOptions.DrawBoundingBoxes);break;case "optAnimationPoints":f=0!=(h&a.RenderOptions.DrawAnimationPoints);break;case "optHitRegions":f=0!=(h&a.RenderOptions.DrawHitRegions);break;case "optDebugSelection":f=0!=(h&a.RenderOptions.DrawDebugSelection);break;case "optForeground":f=0!=(h&
a.RenderOptions.DrawForeground);break;case "optBackground":f=0!=(h&a.RenderOptions.DrawBackground)}b.screenVariables.contains("@RenderOptions."+e.id)&&b.screenVariables.getValue("@RenderOptions."+e.id).update(f)}}}Object.defineProperty(d,"model",{get:function(){if(!this._initialized){this._model.Name="@RenderOptions";for(var a=0;a<this._model.Objects.length;a++){var b=this._model.Objects[a];b.Variable="@RenderOptions."+b.ID}this._initialized=!0}return this._model},enumerable:!0,configurable:!0});
d.dispose=function(){this._model=null};d._initialized=!1;d._model={Name:"@RenderOptions",Objects:[{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Zoom-To-Fit",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",
HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:4},Rotation:0,ID:"optZoomToFit",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"High DPI",FontLineSpacing:1.14990234375,FontFamily:"Arial",
FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:24.5},Rotation:0,ID:"optHighDpi",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},
Text:"Button Shadows",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:45},Rotation:0,ID:"optButtonShadows",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",
Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Dialog Shadows",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:65.5},Rotation:0,ID:"optDialogShadows",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",
Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Optimize",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:86},Rotation:0,ID:"optOptimize",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",
Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:144,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Dialog Dimmer",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:13,Y:147.5},Rotation:0,ID:"optDialogDimmer",IsTabSelectable:!0,TabOrder:0},
{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"FPS",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:177},
Rotation:0,ID:"optFps",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"B-Boxes",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",
GuiStyle:"Flat",Location:{X:12,Y:197.5},Rotation:0,ID:"optBBox",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Animation Points",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",
HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:218},Rotation:0,ID:"optAnimationPoints",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:145,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Hit Regions",FontLineSpacing:1.14990234375,FontFamily:"Arial",
FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:238.5},Rotation:0,ID:"optHitRegions",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:147,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},
Text:"Axes/Border",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:12,Y:259},Rotation:0,ID:"optDebugSelection",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:126,Bottom:30}},Fill:{Type:"SolidFill",
Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Foreground",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:31,Y:106.5},Rotation:0,ID:"optForeground",IsTabSelectable:!0,TabOrder:0},{Type:"CheckBox",TextPlacement:"Right",BoxBackgroundFill:{Type:"SolidFill",Color:"#FFFFFFFF"},ValueWhenChecked:!0,Geometry:{Type:"Rectangle",
Rect:{Left:0,Top:0,Right:126,Bottom:30}},Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:0,DashStyle:{Offset:0},Text:"Background",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:31,Y:127},Rotation:0,ID:"optBackground",IsTabSelectable:!0,TabOrder:0},{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,
Y:0},Segments:[{Type:"LinePathSegment",End:{X:142,Y:0}}]}]},StartLineEndType:"None",EndLineEndType:"None",StartLineEndSize:"Medium",EndLineEndSize:"Medium",Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:1,DashStyle:{Offset:0},FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:18,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:14,Y:176},Rotation:0,ID:"Shape1",IsTabSelectable:!1,
TabOrder:0},{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,Y:0},Segments:[{Type:"LinePathSegment",End:{X:142,Y:0}}]}]},StartLineEndType:"None",EndLineEndType:"None",StartLineEndSize:"Medium",EndLineEndSize:"Medium",Fill:{Type:"SolidFill",Color:"#00FFFFFF"},LineColor:"#FF3E3D40",LineWidth:1,DashStyle:{Offset:0},FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:18,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Left",VerticalTextAlignment:"Center",
GuiStyle:"Flat",Location:{X:15,Y:290},Rotation:0,ID:"Shape2",IsTabSelectable:!1,TabOrder:0},{Type:"Button",IsLatching:!1,FillWhenDown:{Type:"SolidFill",Color:"#FF8ACCD1"},ImpulseTime:0,ValueWhenPressed:!0,ImagePlacement:"Left",ImageArea:{Width:50,Height:50},ImageAreaWidthUnits:"Percent",ImageAreaHeightUnits:"Percent",TextDirection:"LeftToRight",Margin:0,CornerRadii:{Width:0,Height:0},ImageScaling:"Fill",Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:144,Bottom:27}},Fill:{Type:"SolidFill",Color:"#FFECEDED"},
LineColor:"#FFCCD0D2",LineWidth:1,DashStyle:{Offset:0},Text:"Close",FontLineSpacing:1.14990234375,FontFamily:"Arial",FontSize:14,FontStyle:"normal",FontWeight:400,FontColor:"#FF3E3D40",HorizontalTextAlignment:"Center",VerticalTextAlignment:"Center",GuiStyle:"Flat",Location:{X:15,Y:300},Rotation:0,ID:"Button2",IsTabSelectable:!0,TabOrder:0,Actions:[{Type:"CloseDialogAction",SourceType:"Constant",Gesture:"Click"}]}],Size:{Width:172,Height:340},BorderWidth:1,BorderColor:"#FF000000",MarginColor:"#FF000000",
ImageScaling:"Fit",Fill:{Type:"SolidFill",Color:"#FFCCD0D2"},Version:"1.0.0"};return d}();a.RenderOptionsDialog=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){this.renderOptions=a.RenderOptions.DrawHighDpi|a.RenderOptions.DrawButtonShadows|a.RenderOptions.DrawBackground|a.RenderOptions.DrawForeground|a.RenderOptions.DrawDialogShadows|a.RenderOptions.DrawDialogDimmer|a.RenderOptions.Optimize|a.RenderOptions.ZoomToFit;this.logClockEvents=!1;this._minRenderIntervalmsec=0}Object.defineProperty(d.prototype,"zoomToFit",{get:function(){return 0!==(this.renderOptions&a.RenderOptions.ZoomToFit)},enumerable:!0,
configurable:!0});d.prototype.setMaxFPS=function(a){0<a&&(this._minRenderIntervalmsec=1E3/a,0>=this._minRenderIntervalmsec&&(this._minRenderIntervalmsec=1E3))};Object.defineProperty(d.prototype,"minRenderIntervalMsec",{get:function(){return this._minRenderIntervalmsec},enumerable:!0,configurable:!0});return d}();a.EngineSettings=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b,g,h){var d=this;this.CanvasResized=null;this._viewportRect=new a.Bounds;this._fps=this._frameCount=this._lastRenderTime=0;this._queue=new a.RenderQueue(0);this._screenMatrix=new a.Matrix;this._invalidated=!0;this._focusPoints=a.Point.createPointArray(4);this._focusI=new a.Point;this._focusJ=new a.Point;this._focusPadding=new a.Point;this._nodeAxesOrigin=new a.Point;this._nodeAxesI=new a.Point;this._nodeAxesJ=new a.Point;this.options=g;this._foregroundCanvas=
c;this._foregroundContext=c.getContext("2d");this.augmentContext(this._foregroundContext,this);this._backgroundCanvas=b;this._backgroundContext=this._backgroundCanvas.getContext("2d");this._backgroundCanvas.width=this._foregroundCanvas.width;this._backgroundCanvas.height=this._foregroundCanvas.height;this.augmentContext(this._backgroundContext,this);void 0!==h&&(this._hudCanvas=h,this._hudContext=h.getContext("2d"),this._hudCanvas.width=this._foregroundCanvas.width,this._hudCanvas.height=this._foregroundCanvas.height,
this.augmentContext(this.hudContext,this),this._statusMessage=new a.CanvasStatusMessage(h));console.log("resizing canvas");this.resizeCanvas();window.addEventListener("resize",function(a){d.resizeCanvas()},!1)}Object.defineProperty(d.prototype,"options",{get:function(){return this._options},set:function(a){this._options=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"height",{get:function(){return this._height},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"invPixelRatio",{get:function(){return this._invPixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"foregroundContext",{get:function(){return this._foregroundContext},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"backgroundContext",
{get:function(){return this._backgroundContext},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hudContext",{get:function(){return this._hudContext},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"statusMessage",{get:function(){return this._statusMessage},enumerable:!0,configurable:!0});d.prototype.augmentContext=function(a,b){a.transformFill=function(){if(void 0===this.fillStyle.fillMatrix)this.fill();else{this.save();var a=this.fillStyle.fillMatrix;this.transform(a.m11,
a.m12,a.m21,a.m22,a.dx,a.dy);this.fill();this.restore()}};a.getPixelRatio=function(){return b.pixelRatio};a.getInvPixelRatio=function(){return b.invPixelRatio}};d.prototype.resizeCanvas=function(){this._width=window.innerWidth;this._height=window.innerHeight;this._pixelRatio=0!==(this.options&a.RenderOptions.DrawHighDpi)?window.devicePixelRatio:1;this._invPixelRatio=1/this.pixelRatio;this._foregroundCanvas.width=window.innerWidth*this.pixelRatio;this._foregroundCanvas.height=window.innerHeight*this.pixelRatio;
this._foregroundCanvas.style.width=window.innerWidth+"px";this._foregroundCanvas.style.height=window.innerHeight+"px";this._backgroundCanvas.width=window.innerWidth*this.pixelRatio;this._backgroundCanvas.height=window.innerHeight*this.pixelRatio;this._backgroundCanvas.style.width=window.innerWidth+"px";this._backgroundCanvas.style.height=window.innerHeight+"px";void 0!==this._hudCanvas&&(this._hudCanvas.width=this._foregroundCanvas.width,this._hudCanvas.height=this._foregroundCanvas.height,this._hudCanvas.style.width=
this._foregroundCanvas.style.width,this._hudCanvas.style.height=this._foregroundCanvas.style.height);this.invalidate();null!==this.CanvasResized&&this.CanvasResized(this.width,this.height)};d.prototype.initialize=function(c,b){void 0===b&&(b=!0);var g=c.getTotalVisualNodeCount(),g=g+3*c.pageStack.length;this._queue=new a.RenderQueue(g);this.invalidate();b?this.resizeCanvas():null!==this.CanvasResized&&this.CanvasResized(this.width,this.height);this._foregroundCanvas.style.backgroundColor=c.rootPage.marginColor.toString();
this._backgroundCanvas.style.backgroundColor=c.rootPage.marginColor.toString()};d.prototype.invalidate=function(){this._invalidated=!0};d.prototype.preRender=function(c){var b=this._queue,g=c.pageStack,h=Date.now(),d=this._screenMatrix;d.identity();d.scale(this.pixelRatio,this.pixelRatio);b.clear(this._invalidated);for(var e=0,f=g.length;e<f;e++){var k=g[e];k.computeScreenMatrix(d);e==c.dimmerLayer&&0!==(this.options&a.RenderOptions.DrawDialogDimmer)&&b.addOverlapping(a.RenderCommandType.DrawDialogDimmer,
e,this._viewportRect);b.addOverlapping(a.RenderCommandType.DrawBackground,e,k.screenBounds,0<e&&0!==(this.options&a.RenderOptions.DrawDialogShadows));this.preRenderNode(k.rootNode,k.screenMatrix,e,h);0<k.borderWidth&&b.addOverlapping(a.RenderCommandType.DrawBorder,e,k.screenBounds)}};d.prototype.preRenderNode=function(c,b,g,h){c.computeScreenMatrix(b);c.computeScreenClipRect();c.computeScreenBounds();b=this._queue;c instanceof a.VisualNode&&c.isVisible&&(!this._invalidated&&this.options&a.RenderOptions.Optimize?
c.isAnimating(h)?b.addToForeground(a.RenderCommandType.DrawVisual,g,c.screenBounds,c):b.addOverlapping(a.RenderCommandType.DrawVisual,g,c.screenBounds,c)&&c.resetAnimationWatchDog():b.addToBackground(a.RenderCommandType.DrawVisual,g,c.screenBounds,c));b=0;for(var d=c.nodes.length;b<d;b++){var e=c.nodes[b];this.preRenderNode(e,c.screenMatrix,g,h);c.screenBounds.union(e.screenBounds)}};d.prototype.render=function(c){var b=this._queue,g=this._viewportRect,h=this._foregroundContext,d=this.backgroundContext;
this.preRender(c);this._invalidated?(this.clearCanvas(d),this.clearCanvas(h),this.resetViewport(h,c.rootPage,g)):this.options&a.RenderOptions.DoubleBufferedHost&&this.clearCanvas(h);h.save();d.save();this.clearViewport(h,g);this.options&a.RenderOptions.DrawBackground&&(!b.hasBackgroundChanged&&this.options&a.RenderOptions.Optimize||(this.clearViewport(d,g),this.executeCommands(d,c,b.backgroundIterator,!1)),h.setTransform(1,0,0,1,0,0),h.drawImage(this._backgroundCanvas,g.left,g.top,g.width,g.height,
g.left,g.top,g.width,g.height));this.options&a.RenderOptions.DrawForeground&&this.executeCommands(h,c,b.foregroundIterator,!0);b=c.focusedNode;null!==b&&b.focusStyle!==a.FocusStyle.None&&(this.resetClipRegion(h,g),this.setPageClipRegion(h,c.topPage),this.drawFocusRect(h,b));this.options&a.RenderOptions.DrawDebugSelection&&(c=c.selectedDebugVisual,null!==c&&(this.resetClipRegion(h,g),this.drawDebugSelection(h,c)));h.restore();d.restore();this.renderHUD(this._hudContext,g);this.options&a.RenderOptions.DrawFps&&
this.drawFps(h,g);this._invalidated=!1};d.prototype.renderHUD=function(a,b){if(void 0===this._statusMessage)return!1;a.save();a.setTransform(1,0,0,1,0,0);a.scale(this.pixelRatio,this.pixelRatio);this._statusMessage.render(a,0,100,b);a.restore()};d.prototype.resetViewport=function(a,b,g){if(b){var h=b.size.x*b.scale.x*this.pixelRatio,d=b.size.y*b.scale.y*this.pixelRatio;g.left=Math.max(0,b.location.x*this.pixelRatio);g.top=Math.max(0,b.location.y*this.pixelRatio);g.right=Math.min(a.canvas.width,g.left+
h);g.bottom=Math.min(a.canvas.height,g.top+d)}};d.prototype.executeCommands=function(c,b,g,h){var d=-1,e,f=null,k;for(g.reset();null!=(e=g.next());)switch(e.layer!==d&&(d=e.layer,f=b.pageStack[d],this.resetClipRegion(c,this._viewportRect),k=!1),e.type>a.RenderCommandType.DrawBackground&&!k&&(this.setPageClipRegion(c,f),k=!0),e.type){case a.RenderCommandType.DrawDialogDimmer:this.drawDialogDimmer(c);break;case a.RenderCommandType.DrawBackground:this.drawPageBackground(c,f,e.data);break;case a.RenderCommandType.DrawVisual:e=
e.data;if(void 0!=e.screenClipRect){var m=e.screenClipRect;c.save();c.setTransform(1,0,0,1,0,0);c.beginPath();c.rect(m.left,m.top,m.width,m.height);c.clip()}e.draw(c,this.options);this.options&a.RenderOptions.DrawHitRegions&&e.hasHitRegion&&a.PathRegion.drawHitRegions(c,e.path,e.screenMatrix);this.options&a.RenderOptions.DrawBoundingBoxes&&this.drawBoundingBox(c,e,h);void 0!=e.screenClipRect&&c.restore();break;case a.RenderCommandType.DrawBorder:this.drawPageBorder(c,f)}};d.prototype.resetClipRegion=
function(a,b){a.restore();a.save();a.setTransform(1,0,0,1,0,0);a.beginPath();a.rect(b.left,b.top,b.width,b.height);a.clip()};d.prototype.setPageClipRegion=function(c,b){void 0===b&&(b=null);var g=b.screenMatrix;c.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);c.beginPath();a.PathRegion.define(c,b.borderPath);c.clip()};d.prototype.clearCanvas=function(a){var b=a.canvas;a.setTransform(1,0,0,1,0,0);a.beginPath();a.clearRect(0,0,b.width,b.height)};d.prototype.clearViewport=function(a,b){a.setTransform(1,
0,0,1,0,0);a.clearRect(b.left,b.top,b.width,b.height)};d.prototype.drawPageBackground=function(c,b,g){void 0===g&&(g=!1);c.save();var h=b.screenMatrix;c.setTransform(h.m11,h.m12,h.m21,h.m22,h.dx,h.dy);g&&(c.shadowOffsetX=2,c.shadowOffsetY=4,c.shadowColor=a.VisualNode.defaultDialogShadowColor,c.shadowBlur=a.VisualNode.defaultDialogShadowBlur);c.beginPath();a.PathRegion.define(c,b.borderPath);c.fillStyle=b.fillStyle;c.transformFill();c.restore()};d.prototype.drawDialogDimmer=function(c){var b=this._viewportRect;
c.setTransform(1,0,0,1,0,0);c.beginPath();c.rect(b.left-2,b.top-2,b.width+4,b.height+4);c.fillStyle=a.VisualNode.defaultDialogDimmerColor;c.fill()};d.prototype.drawPageBorder=function(c,b){var g=b.screenMatrix;c.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);c.beginPath();a.PathRegion.define(c,b.borderPath);c.lineWidth=2*b.borderWidth;c.strokeStyle=b.borderColor.toString();c.stroke()};d.prototype.drawFocusRect=function(c,b){var g=this._focusPoints,h=this._focusI,d=this._focusJ,e=this._focusPadding;
b.computeFocusRect(g);h.x=g[1].x-g[0].x;h.y=g[1].y-g[0].y;h.normalize();d.x=g[3].x-g[0].x;d.y=g[3].y-g[0].y;d.normalize();e.x=0.5*(h.x+d.x);e.y=0.5*(h.y+d.y);e.normalize();e.scale(a.VisualNode.defaultFocusPadding,a.VisualNode.defaultFocusPadding);g[0].x-=e.x;g[0].y-=e.y;g[1].x+=e.y;g[1].y-=e.x;g[2].x+=e.x;g[2].y+=e.y;g[3].x-=e.y;g[3].y+=e.x;c.setTransform(1,0,0,1,0,0);c.beginPath();c.moveTo(g[0].x,g[0].y);c.lineTo(g[1].x,g[1].y);c.lineTo(g[2].x,g[2].y);c.lineTo(g[3].x,g[3].y);c.closePath();c.strokeStyle=
a.VisualNode.defaultFocusStrokeStyle;c.lineWidth=a.VisualNode.defaultFocusLineWidth;c.stroke()};d.prototype.drawBoundingBox=function(a,b,g){0<b.screenBounds.width&&0<b.screenBounds.height&&(a.setTransform(1,0,0,1,0,0),a.beginPath(),a.rect(b.screenBounds.left,b.screenBounds.top,b.screenBounds.width,b.screenBounds.height),a.strokeStyle=g?"red":"gray",a.lineWidth=1,a.stroke())};d.prototype.drawAxes=function(a,b){var g=this._nodeAxesOrigin,h=this._nodeAxesI,d=this._nodeAxesJ,e=b.screenMatrix;e.transformXY(0,
0,g);e.transformXY(1,0,h);e.transformXY(0,1,d);h.x-=g.x;h.y-=g.y;h.normalize();h.scale(40,40);h.x+=g.x;h.y+=g.y;d.x-=g.x;d.y-=g.y;d.normalize();d.scale(40,40);d.x+=g.x;d.y+=g.y;a.setTransform(1,0,0,1,0,0);a.beginPath();a.lineWidth=2;a.beginPath();a.strokeStyle="#FF0000";a.moveTo(g.x,g.y);a.lineTo(h.x,h.y);a.stroke();a.beginPath();a.strokeStyle="#00FF00";a.moveTo(g.x,g.y);a.lineTo(d.x,d.y);a.stroke()};d.prototype.drawDebugSelection=function(c,b){c.setTransform(1,0,0,1,0,0);c.beginPath();var g=a.Point.createPointArray(b.path.points.length);
b.screenMatrix.transformPoints(b.path.points,g);a.PathRegion.define(c,b.path,g);c.strokeStyle=d.debugSelectionLineColor;c.lineWidth=d.debugSelectionLineWidth;c.stroke();for(g=b;null!==g.parent;)this.drawAxes(c,g),g=g.parent};d.prototype.drawFps=function(a,b){this._frameCount++;var g=Date.now(),h=0.001*(g-this._lastRenderTime);1<=h&&(this._fps=Math.round(this._frameCount/h),this._frameCount=0,this._lastRenderTime=g);a.setTransform(1,0,0,1,b.left,b.top);a.scale(this.pixelRatio,this.pixelRatio);a.fillStyle=
"white";a.fillRect(0,0,50,18);a.textAlign="left";a.textBaseline="top";a.font="14px Arial";a.fillStyle="black";a.fillText(this._fps.toString()+" fps",0,0,40)};d.debugSelectionLineColor="#FFFFFF";d.debugSelectionLineWidth=2;return d}();a.Renderer=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.AllowBack=1]="AllowBack";a[a.AllowForward=2]="AllowForward"})(e=a.PageNavigationState||(a.PageNavigationState={}));var d;(function(a){a[a.None=0]="None";a[a.IsDialog=1]="IsDialog";a[a.DimBackground=2]="DimBackground"})(d=a.ShowPageOptions||(a.ShowPageOptions={}));var c=function(){function b(){this.pageNavigationObjects=[];for(var a=0;4>a;a++)this.pageNavigationObjects[a]=[]}b.prototype.AddNavListenerForDirection=function(b,g){g!=a.NavDirection.Home&&
this.pageNavigationObjects[g].push(b)};b.prototype.EnableNavListenersForDirectionIfSet=function(a,b,g){var c=null!=b&&""!=b;void 0!=g?this.pageNavigationObjects[a].forEach(function(a,b,h){a.isEnabled.value=c&&g.shouldEnableNode(a)}):this.pageNavigationObjects[a].forEach(function(a,b,g){a.isEnabled.value=c})};return b}();a.PageNavigationSubscribers=c;var b=function(){function b(g){this.name="";this.size=new a.Point(1,1);this.borderWidth=0;this.borderColor=new a.Color;this.marginColor=new a.Color;this.rootNode=
new a.RootNode;this.pageDown=this.pageUp=this.pageRight=this.pageLeft="";this.dynamics=[];this.isSmoothingEnabled=!1;this.pageBackObjects=[];this.pageForwardObjects=[];this.pageNavigationSubscribers=new c;this.location=new a.Point;this.scale=new a.Point(1,1);this.screenMatrix=new a.Matrix;this.screenBounds=new a.Bounds;this.showOptions=d.None;this.serverVariables=new HashTable;this.screenVariables=new HashTable;this.visibilityAccessControlNodes=[];this.enabledAccessControlNodes=[];this._elementNodeMap=
new HashTable;this._boundsPoint=new a.Point;this._zoomToFitSize=new a.Point;this.parent=g}b.prototype.computeSize=function(){var b=new a.Bounds,g=function(b,c){b instanceof a.VisualNode&&c.union(b.bounds);for(var h=0,d=b.nodes.length;h<d;h++)g(b.nodes[h],c)};g(this.rootNode,b);this.size.x=b.width;this.size.y=b.height};b.prototype.updateNavigationState=function(b,g){var c=this;this.pageBackObjects.forEach(function(a,d,f){c.enableNodeWithSecurityCheck(a,0!=(b&e.AllowBack),g)});this.pageForwardObjects.forEach(function(a,
d,f){c.enableNodeWithSecurityCheck(a,0!=(b&e.AllowForward),g)});this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.NavDirection.Left,this.pageLeft,g);this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.NavDirection.Right,this.pageRight,g);this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.NavDirection.Up,this.pageUp,g);this.pageNavigationSubscribers.EnableNavListenersForDirectionIfSet(a.NavDirection.Down,this.pageDown,g)};b.prototype.enableNodeWithSecurityCheck=
function(a,b,g){b&&void 0!=g&&(b=g.shouldEnableNode(a));a.isEnabled.value=b};b.prototype.getElements=function(){for(var a=Array(this._elementNodeMap.values.length),b=0,g=this._elementNodeMap.values.length;b<g;b++)a[b]=this._elementNodeMap.values[b][1];return a};b.prototype.addHtmlElement=function(a){var b=a[0];a[1].setAttribute("id",b.uid);this._elementNodeMap.add(b.uid,a)};b.prototype.getNodeForElement=function(a){a=this._elementNodeMap.getValue(a.id);return null!==a?a[0]:null};b.prototype.getElementForNode=
function(a,b){void 0===b&&(b=!0);for(var g=a;null!==g;){var c=this._elementNodeMap.getValue(g.uid);if(null!==c)return c[1];g=b?g.parent:null}return null};b.prototype.getVisualNodeCount=function(){var b=0;(function n(g){g instanceof a.VisualNode&&b++;for(var c=0;c<g.nodes.length;c++)n(g.nodes[c])})(this.rootNode);return b};b.prototype.computeScreenMatrix=function(a){var b=this.screenMatrix;b.identity();b.postMultiply(a);b.translate(this.location.x,this.location.y);b.scale(this.scale.x,this.scale.y);
this.computeScreenBounds()};b.prototype.computeScreenBounds=function(){var a=this.screenBounds;a.reset();var b=this.screenMatrix,g=this._boundsPoint;b.transformXY(0,0,g);a.addXY(g.x,g.y);b.transformXY(this.size.x,this.size.y,g);a.addXY(g.x,g.y)};b.prototype.scalePage=function(a,c,d,e){var f=this.size.x;e&&(this.resetZoomToFitSize(c,d),f=this._zoomToFitSize.x);a*=this.size.x;a>f&&a<this.size.x*b.maxPageScale&&(this.scale.x=this.scale.y=a/this.size.x)};b.prototype.translatePage=function(a,b,g,c){var d=
this.size.x*this.scale.x,e=this.size.y*this.scale.y,f=0,r=0;r=e<c?f=(c-e)/2:c-e;b>f?b=f:b<r&&(b=r);e=c=0;e=d<g?c=(g-d)/2:g-d;a>c?a=c:a<e&&(a=e);this.location.x=a;this.location.y=b};b.prototype.centerOnCanvas=function(a,b,g){var c=this.size.x,d=this.size.y;g&&(this.resetZoomToFitSize(a,b),c=this._zoomToFitSize.x,d=this._zoomToFitSize.y);this.location.x=0.5*a-0.5*c;this.location.y=0.5*b-0.5*d;this.scale.x=this.scale.y=c/this.size.x};b.prototype.centerOnPage=function(a){var b=a.size.x*a.scale.x,g=a.size.y*
a.scale.y;this.scale.x=a.scale.x;this.scale.y=a.scale.y;var c=this.size.y*this.scale.y;this.location.x=a.location.x+0.5*(b-this.size.x*this.scale.x);this.location.y=a.location.y+0.5*(g-c)};b.prototype.resetZoomToFitSize=function(a,b){var g=this.size.x,c=this.size.y,c=this.size.x/this.size.y;a/b>c?(g=b*c,c=b):(g=a,c=a/c);this._zoomToFitSize.x=g;this._zoomToFitSize.y=c};b.prototype.GetPageForDirection=function(b){switch(b){case a.NavDirection.Left:return this.pageLeft;case a.NavDirection.Right:return this.pageRight;
case a.NavDirection.Up:return this.pageUp;case a.NavDirection.Down:return this.pageDown}};b.prototype.SetPageForDirection=function(b,g){switch(b){case a.NavDirection.Left:this.pageLeft=g;break;case a.NavDirection.Right:this.pageRight=g;break;case a.NavDirection.Up:this.pageUp=g;break;case a.NavDirection.Down:this.pageDown=g}};b.maxPageScale=5;return b}();a.Page=b})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){return function(a){this.revision=this.minor=this.major=0;void 0!==a&&(a=a.split(".",3),0<a.length&&(this.major=parseInt(a[0])),1<a.length&&(this.minor=parseInt(a[1])),2<a.length&&(this.revision=parseInt(a[2])))}}();a.SchemaVersion=e;e=function(){function d(a,b){this.pathDynamics=[];this.pathMap=new HashTable;this._localVariables=new HashTable;this._constants=this._parameters=this._symbolDefinitionName=null;this._layer=0;this.page=a;this.version=b;for(var g=
a.parent;null!==g;g=g.parent)this._layer++}Object.defineProperty(d.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});d.prototype.registerValueSource=function(c,b,g,h){g=g?g:c;if(!this.isValidName(g))return null;c=null;if(null!==this._parameters&&this._parameters.contains(g))switch(g=this._parameters.getValue(g),g.type){case a.ParameterType.Constant:this.isValidName(g.name)&&(c=this._constants.getValue(g.name),null===c&&(c=new a.Constant(g.source),this._constants.add(g.name,
c)));break;case a.ParameterType.ArrayVariable:this.isValidName(g.source)&&(c=this.registerServerVariable(g.source,h),c=new a.ArrayElementVariable(c,g.lowerBound,g.index,g.memberName,b,h));break;default:this.isValidName(g.source)&&(c=this.registerVariableByName(g.source,b))}else c=this.registerVariableByName(g,b);return c};d.prototype.registerVariableByName=function(a,b){return"@"===a.charAt(0)?"@"===a.charAt(1)?f.Hmi.App.registerApplicationVariable(a,b):this.registerScreenVariableName(a,b):this.registerServerVariable(a,
b)};d.prototype.isValidName=function(a){return void 0!==a&&null!==a&&""!==a};d.prototype.registerScreenVariableName=function(c,b){var g=this._localVariables.getValue(c),h=this.page.screenVariables.getValue(c);null===g&&(g=null!=h?h:new a.Variable(c,b),this._localVariables.add(c,g));null==h&&this.page.screenVariables.add(c,g);return g};d.prototype.registerServerVariable=function(c,b){for(var g=null,h=this.page;null===g&&null!==h;)g=h.serverVariables.getValue(c),h=h.parent;null===g&&(null===b&&(b=this.dataTypeDictionary.getTypeForVariable(c)),
g=new a.Variable(c,b),g.isEnumeration=this.dataTypeDictionary.isEnumeration(c),g.roundOnWrite=this.shouldRoundforType(g.type),this.page.serverVariables.add(c,g));return g};d.prototype.shouldRoundforType=function(a){var b="ULINT UDINT UINT USINT LINT DINT INT SINT LWORD DWORD WORD BYTE".split(" ");return null!=a?b.some(function(b){return b===a}):!1};d.prototype.pushParameters=function(a,b){this._symbolDefinitionName=a;this._parameters=b;this._constants=new HashTable};d.prototype.popParameters=function(){this._constants=
this._parameters=this._symbolDefinitionName=null};d.prototype.getParameter=function(a){return null!==this._parameters?this._parameters.getValue(a):null};d.prototype.getSymbolDefinitionName=function(){return this._symbolDefinitionName};return d}();a.PageLoaderContext=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b){this._stallStats=new a.Statistics;this._lastServerTime=-1;this._numSamples=0;this._dataPollInterval=b;b=Math.max(b,1);this._updateLimit=this._updateCount=this._window=0;this._maxUpdateLimit=Math.ceil(d._maxTestPeriod/b);this._minGap=Number.MAX_VALUE;this._clock=c}Object.defineProperty(d.prototype,"dataPollInterval",{get:function(){return this._dataPollInterval},enumerable:!0,configurable:!0});d.prototype.getTargetTime=function(){return this._clock.time-
this._window};d.prototype.calibrate=function(){var a=this._clock.serverTime-(this._clock.time-this._window);0>a?this._stallStats.push(-a):a<this._minGap&&(this._minGap=a);this._numSamples++;if(this._lastServerTime!==this._clock.serverTime&&(this._updateCount++,this._updateCount>=this._updateLimit)){var b=this._stallStats.numSamples/this._numSamples,a=0;b>d._stallPercentageLimit?(this._window+=this._stallStats.mean+0.5*d._slopAllowance,a=1,this._updateLimit=0):this._minGap>d._slopAllowance?(this._window-=
this._minGap+0.5*d._slopAllowance,a=2,this._updateLimit=0):this._updateLimit<this._maxUpdateLimit&&this._updateLimit++;if(this._clock.isLoggingEnabled){b="dataUpdates="+this._updateCount+" numSamples="+this._numSamples+" stalls="+(100*b).toFixed(2)+"% stallAvg="+this._stallStats.mean.toFixed(2)+" overshoot="+this._minGap.toFixed(2)+" window="+this._window.toFixed(2)+" clockdrift="+this._clock.drift.toFixed(2);switch(a){case 1:b+=" STALL CORRECTION";break;case 2:b+=" OVERSHOOT CORRECTION"}console.log(b)}this._stallStats.clear();
this._minGap=Number.MAX_VALUE;this._numSamples=this._updateCount=0}this._lastServerTime=this._clock.serverTime};d._maxTestPeriod=2E3;d._slopAllowance=50;d._stallPercentageLimit=0.03;return d}();a.SmoothingWindow=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){this.selectedDebugVisual=this.focusedNode=null;this._dimmerLayer=-1;this._isSmoothingEnabled=!1;this.pageStack=[];this.dataGroup=new a.DataGroup}Object.defineProperty(d.prototype,"dimmerLayer",{get:function(){return this._dimmerLayer},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isPageReady",{get:function(){return 0<this.pageStack.length&&this.dataGroup.hasData},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"havePages",{get:function(){return 0<this.pageStack.length},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rootPage",{get:function(){return 0<this.pageStack.length?this.pageStack[0]:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"topPage",{get:function(){return 0<this.pageStack.length?this.pageStack[this.pageStack.length-1]:null},enumerable:!0,configurable:!0});d.prototype.pushPage=function(a){this.pageStack.push(a);this.dataGroup.pushLayer(a.serverVariables);
this.updateOptionState()};d.prototype.popPage=function(){var a=this.pageStack.pop();void 0===a?a=null:(this.dataGroup.popLayer(),this.updateOptionState());return a};d.prototype.clearStack=function(){for(;0<this.pageStack.length;)this.popPage()};d.prototype.updateOptionState=function(){this._dimmerLayer=-1;this._isSmoothingEnabled=!1;for(var c=0;c<this.pageStack.length;c++){var b=this.pageStack[c];0!==(b.showOptions&a.ShowPageOptions.DimBackground)&&(this._dimmerLayer=c);this._isSmoothingEnabled=this._isSmoothingEnabled||
b.isSmoothingEnabled}};d.prototype.getTotalVisualNodeCount=function(){for(var a=0,b=0;b<this.pageStack.length;b++)a+=this.pageStack[b].getVisualNodeCount();return a};d.prototype.runDynamics=function(a){this._isSmoothingEnabled&&a.smoothingWindow.calibrate();var b=0;this.isTopPageLoginDialog()&&(b=this.pageStack.length-1);for(var b=0+b,g=this.pageStack.length;b<g;b++){var h=this.pageStack[b];if(h)for(var d=0,e=h.dynamics.length;d<e;d++)h.dynamics[d].run(a)}};d.prototype.zoom=function(a,b,g,h){var d=
this.rootPage;d.scalePage(a,b,g,h);for(a=1;a<this.pageStack.length;a++)this.pageStack[a].centerOnPage(d)};d.prototype.pan=function(a,b,g,h){var d=this.rootPage;d.translatePage(a,b,g,h);for(a=1;a<this.pageStack.length;a++)this.pageStack[a].centerOnPage(d)};d.prototype.centerPages=function(a,b,g){if(null!==this.rootPage){var h=this.rootPage;h.centerOnCanvas(a,b,g);for(a=1;a<this.pageStack.length;a++)this.pageStack[a].centerOnPage(h)}};d.prototype.isTopPageLoginDialog=function(){return this.havePages?
this.isLoginDialog(this.topPage.name):!1};d.prototype.isLoginDialog=function(a){return"LOGIN"===a.toUpperCase()};return d}();a.PageManager=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){(function(a){a[a.Default=0]="Default";a[a.Pointer=1]="Pointer";a[a.Text=2]="Text"})(a.MouseCursor||(a.MouseCursor={}));var e=function(){function d(c){var b=this;this._projectLauncher=a.getProjectLauncher();this._fileLauncher=a.getFileLauncher();this._urlLauncher=a.getUrlLauncher();this._commandLineLauncher=a.getCommandLineLauncher();this._engine=c;a.Node.PressedExecuted=function(a,c){return b.onExecuteMouseButtonAction(a,c)};a.Node.ReleasedExecuted=function(a,c){return b.onExecuteMouseButtonAction(a,
c)};a.Node.ActionExecuted=function(a,c){return b.onExecuteMouseButtonAction(a,c)};a.Node.DragExecuted=function(a,c){return b.onExecuteDragAction(a,c)};a.Node.CursorChanged=function(a,c){return b.onCursorChanged(a,c)};a.Node.Focused=function(a){return b.onFocused(a)};a.Node.Blurred=function(a){return b.onBlurred(a)};a.Node.Enabled=function(a){return b.onEnabled(a)};a.Node.Disabled=function(a){return b.onDisabled(a)};a.TextInput.InputSubmitted=function(a){return b.onSubmitTextInput(a)}}d.prototype.onExecuteMouseButtonAction=
function(c,b){if(b instanceof a.ToggleValueAction)this._engine.toggleVariable(b.target);else if(b instanceof a.CloseDialogAction)this._engine.closeDialog(b);else if(b instanceof a.WriteValueAction)null!==b.target&&this._engine.writeVariable(b.target,b.source);else if(b instanceof a.LogOutAction)this._engine.logOut(b);else if(b instanceof a.NavigationAction&&b.direction==a.NavDirection.Home)this._engine.navigateHome();else if(b instanceof a.LoadPageAction){if(null!==b.pageName){var g=this._engine.formatPageUrl(b.pageName);
this._engine.navigate(g)}}else if(b instanceof a.OpenDialogAction)this._engine.openDialog(b);else if(b instanceof a.PageBackAction)this._engine.navigateBack();else if(b instanceof a.PageForwardAction)this._engine.navigateForward();else if(!(b instanceof a.MessageBoxAction))if(b instanceof a.IncrementValueAction)this._engine.incrementVariable(b.target,b.increment);else if(b instanceof a.LogInAction)this._engine.logIn(b);else if(b instanceof a.ExecuteCommandAction)switch(b.commandType){case "OpenProject":null!=
this._projectLauncher&&this._projectLauncher.Open(b.commandTarget,b.windowLaunchOption,b.alias);break;case "OpenSupportFile":null!=this._fileLauncher&&this._fileLauncher.Open(b.commandTarget,b.windowLaunchOption);break;case "OpenUrl":null!=this._urlLauncher&&this._urlLauncher.Open(b.commandTarget,b.windowLaunchOption);break;case "CloseDownApplication":f.Hmi.App.closeDown();break;case "RunCommandLine":null!=this._commandLineLauncher&&this._commandLineLauncher.Execute(b.commandTarget,b.workingDirectory)}else b instanceof
a.CustomAction&&b.actionCallback(c,b.gesture)};d.prototype.onSubmitTextInput=function(c){c=this._engine.pageManager.topPage.getNodeForElement(c);if(null!==c&&c instanceof a.TextInput&&null!=c){var b=c.getDynamic(function(b){return b instanceof a.TextDynamic});null!==b&&b.dataSource instanceof a.Variable&&this._engine.writeConstant(b.dataSource,c.text.value)}};d.prototype.onExecuteDragAction=function(c,b){b.state===a.DragState.BeginDrag&&(b.originalValueSource=b.dynamic.dataSource,b.dynamic.dataSource=
b.dragValueSource,b.dynamic.path.dragData=b);this._engine.dragObject(b);if(b.state===a.DragState.EndDrag||b.action.writeMode===a.FollowPathWriteMode.Continuous){var g=b.originalValueSource;this._engine.writeConstant(g,g.roundOnWrite?Math.round(b.dragValueSource.value):b.dragValueSource.value)}b.state===a.DragState.EndDrag&&(b.dynamic.dataSource=b.originalValueSource,b.dynamic.path.dragData=null)};d.prototype.onCursorChanged=function(a,b){this._engine.changeCursor(b)};d.prototype.onFocused=function(a){this._engine.focusNode(a)};
d.prototype.onBlurred=function(a){this._engine.focusNode(null)};d.prototype.onEnabled=function(a){var b=this._engine.pageManager.rootPage.getElementForNode(a);null!==b&&(b.tabIndex=a.tabIndex)};d.prototype.onDisabled=function(a){a=this._engine.pageManager.rootPage.getElementForNode(a);null!==a&&(a.tabIndex=-1)};return d}();a.Presenter=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
var __extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.None=0]="None";a[a.DrawDialogDimmer=1]="DrawDialogDimmer";a[a.DrawBackground=2]="DrawBackground";a[a.DrawVisual=3]="DrawVisual";a[a.DrawBorder=4]="DrawBorder"})(e=a.RenderCommandType||(a.RenderCommandType={}));var d=function(){return function(){this.type=e.None;this.layer=0;this.data=this.rect=null;this.zorder=-1}}();a.RenderCommand=d;var c=function(){function a(b){this.position=-1;this.renderList=b}a.prototype.next=function(){return null};a.prototype.reset=
function(){this.position=-1};return a}();a.RenderQueueIterator=c;var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.prototype.next=function(){this.position++;return this.position<this.renderList.backgroundCount?this.renderList.getBackgroundCommand(this.position):null};return b}(c),g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.prototype.next=function(){this.position++;return this.position<this.renderList.foregroundCount?
this.renderList.getForegroundCommand(this.position):null};return b}(c),c=function(){function a(c){this._backgroundCount=this._foregroundCount=0;this._backgroundIterator=new b(this);this._foregroundIterator=new g(this);this._previousBackgroundCount=this._zorder=0;this._hasBackroundZOrderChanged=!1;this._list=Array(c);for(var h=0;h<c;h++)this._list[h]=new d;this.clear(!0)}Object.defineProperty(a.prototype,"foregroundCount",{get:function(){return this._foregroundCount},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"backgroundCount",{get:function(){return this._backgroundCount},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"backgroundIterator",{get:function(){return this._backgroundIterator},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"foregroundIterator",{get:function(){return this._foregroundIterator},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasBackgroundChanged",{get:function(){return this._hasBackroundZOrderChanged||
this._previousBackgroundCount!=this.backgroundCount},enumerable:!0,configurable:!0});a.prototype.clear=function(a){void 0===a&&(a=!1);this._previousBackgroundCount=a?0:this._backgroundCount;this._hasBackroundZOrderChanged=a;this._zorder=this._foregroundCount=this._backgroundCount=0};a.prototype.addToForeground=function(a,b,g,c){void 0===c&&(c=null);if(this._foregroundCount+this._backgroundCount>=this._list.length)throw Error("Index out of bounds.");var h=this._list[this._foregroundCount];h.type=a;
h.layer=b;h.rect=g;h.data=c;h.zorder=this._zorder++;this._foregroundCount++};a.prototype.addToBackground=function(a,b,g,c){void 0===c&&(c=null);if(this._foregroundCount+this._backgroundCount>=this._list.length)throw Error("Index out of bounds.");var h=this._list.length-1-this._backgroundCount,d=this._zorder++,h=this._list[h];h.zorder!==d&&(this._hasBackroundZOrderChanged=!0);h.type=a;h.layer=b;h.rect=g;h.data=c;h.zorder=d;this._backgroundCount++};a.prototype.addOverlapping=function(a,b,g,c){void 0===
c&&(c=null);this.foregroundIterator.reset();for(var h;null!==(h=this.foregroundIterator.next())&&!g.intersects(h.rect););if(null===h)return this.addToBackground(a,b,g,c),!1;this.addToForeground(a,b,g,c);return!0};a.prototype.getForegroundCommand=function(a){if(a>=this._foregroundCount||0>a)throw Error("Index out of bounds.");return this._list[a]};a.prototype.getBackgroundCommand=function(a){if(a>=this._backgroundCount||0>a)throw Error("Index out of bounds.");a=this._list.length-1-a;return this._list[a]};
return a}();a.RenderQueue=c})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));(function(f){(function(a){var e=function(){function a(c,b){this._source=c;b&&(this.location=b)}Object.defineProperty(a.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});return a}();a.EventArgs=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b,g){var c=a.call(this,b)||this;c._ev=g;return c}__extends(c,a);Object.defineProperty(c.prototype,"key",{get:function(){return this._ev.key},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"code",{get:function(){return this._ev.code},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"charCode",{get:function(){return this._ev.charCode},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"shiftKey",
{get:function(){return this._ev.shiftKey},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ctrlKey",{get:function(){return this._ev.ctrlKey},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"altKey",{get:function(){return this._ev.altKey},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"altGraphKey",{get:function(){return this._ev.getModifierState("AltGraph")},enumerable:!0,configurable:!0});return c}(a.EventArgs);a.KeyboardEventArgs=e})(f.Hmi||
(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b,g,c){void 0===g&&(g=0);void 0===c&&(c=0);b=a.call(this,b)||this;b._x=g;b._y=c;return b}__extends(c,a);Object.defineProperty(c.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0});return c}(a.EventArgs);a.PointerEventArgs=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(a){this.pageList=a}d.prototype.OnSecurityContextChanged=function(a){this.pageList.forEach(function(b){d.UpdateRoleInformationForPage(b,a)})};d.UpdateRoleInformationForPage=function(c,b){c.dynamics.filter(function(b){return b instanceof a.VisibilityDynamic}).forEach(function(a){a.OnSecurityContextChanged(b)});c.dynamics.filter(function(b){return b instanceof a.DisableDynamic}).forEach(function(a){a.OnSecurityContextChanged(b)});c.enabledAccessControlNodes.forEach(function(g){var c=
b.shouldEnableNode(g);a.TraverseNodes(g,function(a){a.isEnabled.value=c;return!0})});c.visibilityAccessControlNodes.forEach(function(a){a.visibility.value=b.shouldShowNode(a)})};return d}();a.SecurityContextRolesChangedListenerForPages=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(a,b,g){this._nodeCount=0;this._htmlElements=[];this._dataClient=a;this._renderContext=b;this._dataTypeDictionary=g}d.prototype.downloadAsync=function(c,b,g){var h=this,d=null;this._dataClient.downloadScreen(c,function(c){var e=h._dataClient.status;e===a.DataAccessStatus.OK&&(d=h.loadModel(c,b));g(d,e)})};d.prototype.download=function(a,b){var g=this._dataClient.downloadScreen(a);return null===g?null:this.loadModel(g,b)};d.prototype.loadModel=function(c,
b){var g=new a.Page(b);g.name=a.Parser.getString(c.Name);g.borderWidth=a.Parser.getNumber(c.BorderWidth);g.borderColor=a.Parser.getColor(c.BorderColor,a.Color.Black);g.marginColor=a.Parser.getColor(c.MarginColor,a.Color.Black);g.pageLeft=a.Parser.getString(c.PageLeft);g.pageRight=a.Parser.getString(c.PageRight);g.pageUp=a.Parser.getString(c.PageUp);g.pageDown=a.Parser.getString(c.PageDown);var h=new a.PageLoaderContext(g,new a.SchemaVersion(c.Version));h.dataTypeDictionary=this._dataTypeDictionary;
this._dataTypeDictionary.loadPageVariables(h,this.normalizeStringName(h.page.name)+".variables.json");var d=this._dataTypeDictionary.findSysTickCountVariable();d&&h.registerValueSource(d,this._dataTypeDictionary.getTypeForVariable(d));c.AvailabilityAccessControl&&"Always"!==c.AvailabilityAccessControl.Scope&&(g.availabilityAccessControl=new a.AccessControlExpression(c.AvailabilityAccessControl));void 0!==c.Size?g.size=a.Parser.getSize(c.Size):g.computeSize();if(void 0!=c.Objects){for(var d=0,e=c.Objects.length;d<
e;d++){var f=this.loadObject(h,g.rootNode,c.Objects[d]);null!=f&&g.rootNode.nodes.push(f)}this.resolvePathDynamics(h);this.resolveObjectSecurity(g);this.resolveHtmlElements(g)}d=new a.Rect(0,0,g.size.x,g.size.y);g.fillStyle=void 0!==c.Fill?a.FillFactory.createFillStyle(this._renderContext,c.Fill,d):a.SolidFill.White.createStyle(this._renderContext,d);g.borderPath=new a.RectangleGeometry(d,!1,0<h.layer?a.VisualNode.defaultDialogCornerRadius:null);void 0!==c.Image&&null!==c.Image&&this.loadPageBackgroundImage(h,
c);return g};d.prototype.loadPageBackgroundImage=function(a,b){var g=a.page,h=this.loadObject(a,g.rootNode,{ID:"PageBkgImg",Type:"Image",Image:b.Image,ImageScaling:b.ImageScaling,Geometry:{Type:"Rectangle",Rect:{Left:0,Top:0,Right:g.size.x,Bottom:g.size.y}},Location:{X:0,Y:0}});g.rootNode.nodes.unshift(h)};d.prototype.generateUid=function(a,b){return"L"+b.layer+"N"+ ++this._nodeCount+a.id};d.prototype.loadObject=function(c,b,g){this.preProcessDynamics(c,g,g.Dynamics);var h=c.getSymbolDefinitionName();
null==h&&(h=c.page.name);h=h.toLowerCase().replace(/ /g,"")+"Module";b=a.NodeFactory.createNode(this._renderContext,g,b);a.ModuleLoader.LoadModule(h);if(null!==b){this.loadActions(c,h,b,g,g.Actions);b.uid=this.generateUid(b,c);this.loadDynamicsFromNodeModel(c,h,b,g);this.processActions(c,b);switch(g.Type){case "ListBox":case "Group":this.loadGroup(c,b,g);break;case "Path":case "GaugeScale":c.pathMap.add(b.id,b);break;case "SymbolInstance":this.loadSymbolInstance(c,b,g);break;case "TextInput":b.isClipped(c.page.size),
this._htmlElements.push([b,b.element])}this.configureTabStop(g,b)}b.initVisual?b.initVisual(this._renderContext,g):b.init(g);return b};d.prototype.preProcessDynamics=function(c,b,g){if(void 0!==g&&0<g.length)for(var h=function(){var a="this."+e.TargetProperty+"="+JSON.stringify(f.source);eval(a)},d=g.length-1;0<=d;d--){var e=g[d];if(!a.Parser.getBoolean(e.IsEnabled,!0))g.splice(d,1);else if("AssignmentDynamic"==e.Type){var f=c.getParameter(e.Variable);null!==f&&f.type===a.ParameterType.Constant&&
(h.apply(b),g.splice(d,1))}}};d.prototype.configureTabStop=function(c,b){var g=!1;switch(c.Type){case "Button":case "CheckBox":case "TextInput":g=!0}a.Parser.getBoolean(c.IsTabSelectable,g)&&(b instanceof a.TextInput?g=b.element:(g=document.createElement("a"),this._htmlElements.push([b,g])),g.tabIndex=b.tabIndex)};d.prototype.resolveHtmlElements=function(a){this._htmlElements.sort(function(a,b){var c=a[1],d=b[1];return c.tabIndex===d.tabIndex?0:c.tabIndex>d.tabIndex?1:-1});for(var b=0;b<this._htmlElements.length;b++)a.addHtmlElement(this._htmlElements[b])};
d.prototype.loadGroup=function(a,b,g){if(void 0!==g.Objects){for(var h=0,d=g.Objects.length;h<d;h++){var e=this.loadObject(a,b,g.Objects[h]);null!=e&&b.nodes.push(e)}b.onLoaded()}};d.prototype.loadSymbolInstance=function(c,b,g){var h=a.ModuleLoader.getResourceUrl(g.Symbol);if(null===h)return null;h=this._dataClient.downloadScreen(h);if(null===h)return null;var d=null;if(void 0!=g.Parameters)for(var d=new HashTable,e=0;e<g.Parameters.length;e++){var f=a.ParameterFactory.createParameter(g.Parameters[e]);
null!=f&&d.add(f.name,f)}if(void 0!==h.Objects){c=new a.PageLoaderContext(c.page,new a.SchemaVersion(h.Version));c.dataTypeDictionary=this._dataTypeDictionary;c.pushParameters(h.Name,d);b=b.nodes[0];b.uid=this.generateUid(b,c);e=0;for(g=h.Objects.length;e<g;e++)f=this.loadObject(c,b,h.Objects[e]),null!=f&&b.nodes.push(f);void 0===h.Version&&(h.Version="1.0.0",c.version=new a.SchemaVersion("1.0.0"),JSON.stringify(h));this.resolvePathDynamics(c);null!=d&&c.popParameters()}};d.prototype.processActions=
function(c,b){for(var g=c.page,h=0;h<b.actions.length;h++){var d=b.actions[h];if(d instanceof a.ToggleValueAction||d instanceof a.IncrementValueAction){var e=this.registerValueSource(d.targetName,c);null!==e&&e instanceof a.Variable&&(d.target=e)}else if(d instanceof a.WriteValueAction&&null!==d.targetName){if(e=this.registerValueSource(d.targetName,c),null!==e&&e instanceof a.Variable){var f;f=d.sourceType===a.WriteRequestSourceType.Variable?this.registerValueSource(d.sourceName,c):new a.Constant(d.sourceName);
d.source=f;d.target=e}}else d instanceof a.MessageBoxAction?null!==d.targetName&&(e=this.registerValueSource(d.targetName,c),null!==e&&e instanceof a.Variable&&(d.target=e)):d instanceof a.PageBackAction?g.pageBackObjects.push(b):d instanceof a.PageForwardAction?g.pageForwardObjects.push(b):d instanceof a.NavigationAction?(g.pageNavigationSubscribers.AddNavListenerForDirection(b,d.direction),d.pageName=c.page.GetPageForDirection(d.direction),""==d.pageName&&(d.pageName=null)):d instanceof a.LoadPageAction||
d instanceof a.OpenDialogAction||d instanceof a.CustomAction||d instanceof a.FollowPathAction||d instanceof a.LogInAction||d instanceof a.LogOutAction||a.UpdateFollowersAction||a.Common.Log("WARNING: processActions received unexpected Action type",a.LogType.Warning)}};d.prototype.registerValueSource=function(c,b){var g=b.getParameter(c),h=this._dataTypeDictionary,d;if(g){var e=g.type;switch(e){case a.ParameterType.Variable:d=b.registerValueSource(c,h.getTypeForVariable(g.source));break;case a.ParameterType.Constant:d=
b.registerValueSource(c,null);break;case a.ParameterType.ArrayVariable:d=g.source+"["+g.lowerBound+"]";g.memberName&&(d+="."+g.memberName);d=b.registerValueSource(d,h.getTypeForVariable(d),c,h.getTypeForVariable(g.source));break;default:a.Common.Log("WARNING: Unexpected Parameter Type: "+e+" during value source registration.",a.LogType.Warning)}}else d=b.registerValueSource(c,h.getTypeForVariable(c));return d};d.prototype.normalizeStringName=function(a){return a.toLowerCase().replace(/ /g,"")};d.prototype.loadActions=
function(c,b,g,h,d){if(void 0!=d)for(var e=0;e<d.length;e++){var f=a.ActionFactory.createAction(d[e]);if(d[e].DataTrigger){this.preProcessDynamics(c,h,[d[e].DataTrigger]);var k=this.loadDynamic(c,b,g,d[e].DataTrigger);k&&(k.action=f)}null!=f&&g.actions.push(f)}};d.prototype.loadDynamicsFromNodeModel=function(a,b,g,h){h=h.Dynamics;if(void 0!==h&&0<h.length)for(var d=0;d<h.length;d++)this.loadDynamic(a,b,g,h[d])};d.prototype.loadDynamic=function(c,b,g,h){if(a.Parser.getBoolean(h.IsEnabled,!0)){void 0==
h.ModuleName?h.ModuleName=b:a.ModuleLoader.LoadModule(h.ModuleName);b=a.DynamicFactory.createDynamic(this._renderContext,g,h);if(null!==b){g.dynamics.push(b);if(b.dataSource instanceof a.Expression)for(g=b.dataSource,h=0;h<g.functionParameters.length;h++){var d=g.functionParameters[h];d&&d.name&&(g.functionParameters[h]=this.registerValueSource(d.name,c))}else b.dataSource=this.registerValueSource(b.variableName,c);b instanceof a.FillDynamic&&void 0!==b.blinkStatusVariableName&&(b.blinkStateDataSource=
c.registerValueSource(b.blinkStatusVariableName,"BOOL"));b instanceof a.RangeDynamic&&b.dataSource instanceof a.Variable&&(d=b.dataSource,c.page.serverVariables.contains(d.name)&&(d.allowTimestamping=d.allowTimestamping||b.isSmoothingEnabled,c.page.isSmoothingEnabled=c.page.isSmoothingEnabled||b.isSmoothingEnabled));c.page.dynamics.push(b);b instanceof a.PathDynamic&&c.pathDynamics.push(b)}return b}};d.prototype.resolvePathDynamics=function(c){for(var b=c.pathDynamics,g=0;g<b.length;g++){var h=b[g],
d=c.pathMap.getValue(h.targetId);if(null!==d){h.node.parent.removeChildNode(h.node);var e=new a.Group({},d);e.id="surrogate"+Math.floor(1E3*Math.random()).toString();e.uid=this.generateUid(e,c);e.nodes.push(h.node);h.node.parent=e;d.nodes.push(e);h.motionType===a.PathMotionType.Rotation?(e.location.value.x=h.node.location.value.x,e.location.value.y=h.node.location.value.y):e.location.value.x=e.location.value.y=0;h.node.location.value.x=h.node.location.value.y=0;null===d.solver&&(d.solver=new a.PathSolver(d.path));
h.target=e;h.path=d}}};d.prototype.resolveObjectSecurity=function(c){a.TraverseNodes(c.rootNode,function(b){b.nodes.filter(function(a){return a.enabledAccessControl||a.visibilityAccessControl}).forEach(function(b){b.enabledAccessControl&&0==c.dynamics.filter(function(c){return c.node===b&&c instanceof a.DisableDynamic}).length&&c.enabledAccessControlNodes.push(b);b.visibilityAccessControl&&0==c.dynamics.filter(function(c){return c.node===b&&c instanceof a.VisibilityDynamic}).length&&c.visibilityAccessControlNodes.push(b)});
return!0})};return d}();a.PageLoader=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));(function(f){(function(a){var e=function(){function a(){}a.LoadScript=function(a){var b;try{var g=new XMLHttpRequest;g.open("GET",a,!1);g.send();200==g.status&&(b=(0,eval)(g.responseText))}catch(h){console.log("failed to load module "+a+": "+h)}return b};return a}();a.ScriptModuleLoader=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function c(a){this._pageVariableDataDictionary=this._typeDictionary=this._dataDictionary=null;this._dataClient=a;this._dataDictionary=this.loadDataDictionary();this._typeDictionary=this.loadTypeDictionary()}c.prototype.loadDataDictionary=function(){var b=this;if(null===this._dataDictionary){var g=this._dataClient.downloadScreen(a.ModuleLoader.getResourceUrl("data.dictionary.json"));if(g&&g.HmiVariables2){this._dataDictionary=new HashTable;var c=g.HmiVariables2;
Object.keys(c).forEach(function(a){return b._dataDictionary.add(a,c[a])})}}return this._dataDictionary};c.prototype.loadTypeDictionary=function(){var b=this;if(null===this._typeDictionary){var g=this._dataClient.downloadScreen(a.ModuleLoader.getResourceUrl("type.dictionary.json"));if(g&&g.Types){this._typeDictionary=new HashTable;for(var g=g.Types,c={},d=0;d<g.length;d++)c[g[d].Name]=g[d];Object.keys(c).forEach(function(a){return b._typeDictionary.add(a,c[a])})}}return this._typeDictionary};c.prototype.loadPageVariables=
function(b,g){var c=this._dataClient.downloadScreen(a.ModuleLoader.getResourceUrl(g));if(null!==c){var d=c.variables;if(d){this._pageVariableDataDictionary=new HashTable;for(var e=0;e<d.length;e++){var f=d[e];if(f.name)if("@"===f.name.charAt(0)){if(this._pageVariableDataDictionary.add(f.name,f),b.registerValueSource(f.name,f.type),f.type){var k=b.page.screenVariables.getValue(f.name);k&&k.update(f.initValue)}}else if(k=c.variablePathPrefix?c.variablePathPrefix+f.name:f.name,!this._dataDictionary.contains(k)){var m=
this.getKindForType(f.type),f=this.createDataEntryObject(m,f.type);this._dataDictionary.add(k,f)}}}}};c.prototype.findSysTickCountVariable=function(){if(this._dataDictionary)for(var b=0;b<this._dataDictionary.keys.length;b++){var g=this._dataDictionary.keys[b];if(a.DataClient.isSysTickCountVariable(g))return g}return null};c.prototype.getTypeForVariable=function(b){var g=null;if("@"===b.charAt(0)){if(null!==this._pageVariableDataDictionary){var c=this._pageVariableDataDictionary.getValue(b);null!==
c?g=c.type:a.Common.Log("WARNING: Unable to get page entry for variable name: "+b,a.LogType.Warning)}}else if(null!==this._dataDictionary)if(c=this._dataDictionary.getValue(b),null===c||c.Elementary)null!==c&&c.Elementary?g=c.Type:a.Common.Log("WARNING: Unable to get data entry for variable name: "+b,a.LogType.Warning);else{var d=new HashTable,e=this.getElementaryTypeForVariable(c.Type,d);e?(g=e.type,c.Type!==e&&(this._dataDictionary.contains(b)&&this._dataDictionary.remove(c),c=this.createDataEntryObject(e.kind,
e.type,d),c.Elementary=!0,this._dataDictionary.add(b,c))):a.Common.Log("WARNING: Unable to get type entry for variable name: "+b,a.LogType.Warning)}return g};c.prototype.getElementaryTypeForVariable=function(b,g,c){if(b=this._typeDictionary.getValue(b)){var e=b.Kind.toString();c=c?c:e;switch(b.Kind){case "Elementary":return new d(c,b.Name);case "Array":if(b.ElementType)return this.getElementaryTypeForVariable(b.ElementType,g,c);break;case "Structure":return new d(c,b.Name);case "UserString":return new d(c,
"STRING");case "Enumeration":if(b.ElementType&&b.Values)return b.Values.forEach(function(a){g.add(a.Name,a.Value)}),this.getElementaryTypeForVariable(b.ElementType,g,c);break;default:a.Common.Log("WARNING: Unexpected Kind of type entry: "+b.Kind,a.LogType.Warning)}}return null};c.prototype.prepareSubstituteValue=function(a,g){var c=this._dataDictionary.getValue(a);return c&&c.Values&&(c=c.Values.getValue(g),null!==c&&void 0!==c)?c:g};c.prototype.createDataEntryObject=function(a,g,c){return c&&0<c.keys.length?
{Kind:a,Type:g,Values:c}:{Kind:a,Type:g}};c.prototype.isEnumeration=function(a){return(a=this._dataDictionary.getValue(a))&&a.Kind&&"Enumeration"===a.Kind?!0:!1};c.prototype.getKindForType=function(a){return(a=this._typeDictionary.getValue(a))&&a.Kind?a.Kind:""};return c}();a.DataTypeDictionary=e;var d=function(){return function(a,b){this.kind=a;this.type=b}}()})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.Normal=0]="Normal";a[a.Waiting=1]="Waiting";a[a.NoDataConnection=2]="NoDataConnection";a[a.Retrying=3]="Retrying";a[a.Aborting=4]="Aborting";a[a.LoginPrompt=5]="LoginPrompt";a[a.Authenticating=6]="Authenticating";a[a.ChangingProject=7]="ChangingProject"})(e=a.RunState||(a.RunState={}));var d=function(){function g(g,c,d){void 0===d&&(d=null);this._wasDialogClosed=!1;this._navigationBackStack=[];this._navigationForwardStack=[];this._errorStatus=a.DataAccessStatus.OK;
this._dragInverse=new a.Matrix;this.settings=null!==d?d:new a.EngineSettings;this._dataClient=g;this._canvasHost=c;this._runFrameContext=new b;this._runFrameContext.minInterval=this.settings.minRenderIntervalMsec;this.configureClock();this._pageManager=new a.PageManager;this._dataTypeDictionary=new a.DataTypeDictionary(this._dataClient);this._connectionRetryTimer=new a.CallbackTimer(1E3);this.startBlinkDynamicTimer();g=this.loadSecurityParameters();null!=g&&((this.securityContext=a.CreateSecurityContext(g))&&
this.securityContext.addRolesChangedListener(new a.SecurityContextRolesChangedListenerForPages(this.pageManager.pageStack)),this.authService=new a.ApplicationAuthenticationService(this._dataClient.authenticationSettings))}Object.defineProperty(g.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"pageManager",{get:function(){return this._pageManager},enumerable:!0,configurable:!0});g.prototype.configureClock=function(){void 0!==
this._clock&&this._clock.smoothingWindow.dataPollInterval!==this._dataClient.dataPollInterval&&(this._clock=void 0);void 0===this._clock&&(this._clock=new a.Clock(parseFloat(this._dataClient.dataPollInterval.toString()),this.settings.logClockEvents))};g.prototype.stop=function(){0<this.pageManager.pageStack.length&&this.deactivateTopPage();this.pageManager.clearStack();null!==a.Engine.Stopped&&a.Engine.Stopped()};g.prototype.onChangingProject=function(b){var g=!1,c=this._dataClient.startPageUrl;void 0!==
c?0!==c.indexOf("file:")?(this.stop(),this.configureClock(),this._errorStatus!==a.DataAccessStatus.Pending&&(this._errorStatus=a.DataAccessStatus.Pending),b.start(c),g=!0):this._errorStatus=a.DataAccessStatus.LocalProjectChangeError:this.changeRunState(e.Aborting);return g};g.prototype.loadPage=function(b,g){void 0===g&&(g=a.ShowPageOptions.None);var c=(new a.PageLoader(this._dataClient,this._renderer.backgroundContext,this._dataTypeDictionary)).download(b,g&a.ShowPageOptions.IsDialog?this.pageManager.topPage:
null);return null!==c?(c.showOptions=g,this.showPage(c),!0):!1};g.prototype.loadPageAsync=function(b,g,c){var d=this;void 0===g&&(g=null);void 0===c&&(c=a.ShowPageOptions.None);(new a.PageLoader(this._dataClient,this._renderer.backgroundContext,this._dataTypeDictionary)).downloadAsync(b,c&a.ShowPageOptions.IsDialog?this.pageManager.topPage:null,function(b,h){h===a.DataAccessStatus.OK&&null!==b&&(b.showOptions=c,d.showPage(b));g(h)})};g.prototype.changeRunState=function(b){var g=this,c=function(a){0<
a&&g._statusMessage.updateRetryCounter(a)};switch(b){case e.Waiting:this._statusMessage.showPreloader();break;case e.NoDataConnection:this._statusMessage.showNoDataConnection(10);this.pageManager.dataGroup.clear();this._dataClient.stopUpdate();this.clearListBoxSelection();this._connectionRetryTimer.start(10,c);break;case e.Retrying:this._connectionRetryTimer.reset();this.startDataUpdate();break;case e.Aborting:this.stop();this.showStatusMessage();break;case e.Normal:this._statusMessage.hideAllOverlays();
break;case e.LoginPrompt:this._dataClient.startSessionMaintenanceCycle(null,null);this._statusMessage.hideAllOverlays();this.openLoginDialog()||(this.stop(),this.showStatusMessage());break;case e.Authenticating:this._statusMessage.showPreloader();break;case e.ChangingProject:this._errorStatus=a.DataAccessStatus.Pending}};g.prototype.showStatusMessage=function(){var b=null;switch(this._errorStatus){case a.DataAccessStatus.DownloadScreenError:b=ErrorStrings.DownloadScreenError;break;case a.DataAccessStatus.UpdateDataError:b=
ErrorStrings.UpdateDataError;break;case a.DataAccessStatus.RegisterGroupError:b=ErrorStrings.RegisterGroupError;break;case a.DataAccessStatus.AuthorizationError:b=ErrorStrings.UnauthorizedDataError;break;case a.DataAccessStatus.SessionError:b=ErrorStrings.ManageSessionError;break;case a.DataAccessStatus.DuplicateStationIDError:b=ErrorStrings.DuplicateStationIDError;break;case a.DataAccessStatus.NetworkLevelError:b=ErrorStrings.NetworkLevelError;break;case a.DataAccessStatus.NetworkTimeoutError:b=
ErrorStrings.NetworkTimeoutError;break;case a.DataAccessStatus.ExceptionError:b=ErrorStrings.ExceptionError;break;case a.DataAccessStatus.LocalProjectChangeError:b=ErrorStrings.LocalProjectChangeError;break;default:case a.DataAccessStatus.InternalError:b=ErrorStrings.InternalError}this._statusMessage.showStatusMessage(b)};g.prototype.deactivateTopPage=function(){this._dataClient.stopUpdate(this.pageManager.dataGroup);this.focusNode(null);this.selectDebugVisual(null);null!==this.pageManager.topPage&&
null!==a.Engine.PageDeactivated&&a.Engine.PageDeactivated(this.pageManager.topPage)};g.prototype.activateTopPage=function(){this._renderer.initialize(this.pageManager,!1);var b=this.pageManager.topPage;null!==a.Engine.PageActivated&&a.Engine.PageActivated(b);this.canShowPage(b)&&(this.securityContext&&a.SecurityContextRolesChangedListenerForPages.UpdateRoleInformationForPage(b,this.securityContext),this.startDataUpdate())};g.prototype.showPage=function(b){this._wasDialogClosed=!1;this.deactivateTopPage();
b.showOptions&a.ShowPageOptions.IsDialog||this.pageManager.clearStack();this.pageManager.pushPage(b);this.activateTopPage()};g.prototype.closeDialog=function(a){null!==a.targetName&&this.writeVariable(a.target,a.source);1>=this.pageManager.pageStack.length?this.navigateBack():(this.deactivateTopPage(),this._wasDialogClosed=!0,this.pageManager.popPage(),this.activateTopPage())};g.prototype.openDialog=function(b){if(null!==b.pageName){this._wasDialogClosed=!1;var g=this.formatPageUrl(b.pageName),c=
a.ShowPageOptions.IsDialog;b.dimBackground&&(c|=a.ShowPageOptions.DimBackground);this.loadPage(g,c)}};g.prototype.IsTopPageLoginDialog=function(){return this.pageManager.isTopPageLoginDialog()};g.prototype.openLoginDialog=function(){var b=new a.OpenDialogAction;b.pageName="login";b.dimBackground=!0;this.openDialog(b);return this.IsTopPageLoginDialog()?(this.pageManager.topPage.rootNode.nodes.filter(function(b){return b.actions.some(function(b){return b instanceof a.CloseDialogAction})})[0].actions.push(new a.PageBackAction),
!0):!1};g.prototype.loadMessageBox=function(b){b={Version:"1.0.0",Objects:[{Type:"SymbolInstance",Symbol:b.symbol,Parameters:[{Type:"ParameterBindingConstant",Source:b.value1,Name:"Value1"},{Type:"ParameterBindingConstant",Source:b.value2,Name:"Value2"},{Type:"ParameterBindingConstant",Source:b.icon,Name:"Icon"},{Type:"ParameterBindingConstant",Source:b.buttons,Name:"Buttons"},{Type:"ParameterBindingVariable",Source:b.targetName,Name:"ResultVariable"},{Type:"ParameterBindingConstant",Source:b.caption,
Name:"Caption"}]}]};b=(new a.PageLoader(this._dataClient,this._renderer.backgroundContext,this._dataTypeDictionary)).loadModel(b,this.pageManager.topPage);null!==b&&(b.showOptions=a.ShowPageOptions.IsDialog|a.ShowPageOptions.DimBackground,this.showPage(b))};g.prototype.loadRenderOptionsDialog=function(){if("@RenderOptions"!==this._pageManager.topPage.name){var b=(new a.PageLoader(this._dataClient,this._renderer.backgroundContext,this._dataTypeDictionary)).loadModel(a.RenderOptionsDialog.model,this.pageManager.topPage);
null!==b&&(new a.RenderOptionsDialog(this,b),b.showOptions=a.ShowPageOptions.IsDialog,this.showPage(b))}};g.prototype.getNavigationState=function(b){b=0;1<this._navigationBackStack.length&&(b|=a.PageNavigationState.AllowBack);0<this._navigationForwardStack.length&&(b|=a.PageNavigationState.AllowForward);return b};g.prototype.startDataUpdate=function(){if(!this.topPageIsRestricted()&&!this.IsTopPageLoginDialog()){this._dataClient.stopSessionMaintenanceCycle();var b=this.pageManager.dataGroup;b.clear();
this._errorStatus=a.DataAccessStatus.OK;if(b.hasVariables){var g=function(g){this._clock.synchronize(this._dataClient.sysTickCount);this._errorStatus=this._dataClient.status;this._errorStatus===a.DataAccessStatus.OK&&null!==g&&b.update(g,this._dataClient.sysTickCount)}.bind(this);this._dataClient.startUpdate(b,g)}else b.update([],0)}};g.prototype.setRenderOptions=function(b){var g=0!=(this.settings.renderOptions&a.RenderOptions.DrawHighDpi),c=0!=(b&a.RenderOptions.DrawHighDpi),d=0!=(this.settings.renderOptions&
a.RenderOptions.ZoomToFit),e=0!=(b&a.RenderOptions.ZoomToFit);this.settings.renderOptions=b;this._renderer.options=this.settings.renderOptions;d!=e&&this.pageManager.centerPages(this._renderer.width,this._renderer.height,e);g!==c?this._renderer.initialize(this.pageManager):this._renderer.invalidate()};g.prototype.zoom=function(a){this.pageManager.zoom(a,this._renderer.width,this._renderer.height,this.settings.zoomToFit);this._renderer.invalidate()};g.prototype.pan=function(a,b){this.pageManager.pan(a,
b,this._renderer.width,this._renderer.height);this._renderer.invalidate()};g.prototype.getHitVisual=function(a,b){return this.getNearestHit(this.pageManager.topPage.rootNode,a*this._renderer.pixelRatio,b*this._renderer.pixelRatio)};g.prototype.getNearestHit=function(b,g,c){for(var d=null,e=b.nodes.length-1;0<=e&&null===d;e--){var f=b.nodes[e];f.screenBounds.containsXY(g,c)&&(d=this.getNearestHit(f,g,c))}null===d&&b instanceof a.VisualNode&&(b.hasHitRegion||this.settings.renderOptions&a.RenderOptions.DrawDebugSelection)&&
b.isPointInPath(this._renderer.foregroundContext,g,c)&&!b.isPointClippped(g,c)&&b.isVisible&&(d=b);return d};g.prototype.selectDebugVisual=function(a){this.pageManager.selectedDebugVisual=a};g.prototype.focusNode=function(a){this.pageManager.focusedNode=a};g.prototype.dragObject=function(b){var g=b.dynamic,c=g.path;if(a.Matrix.findInverse(c.screenMatrix,this._dragInverse)){this._dragInverse.transformXY(b.mouseCurrent.x*this._renderer.pixelRatio,b.mouseCurrent.y*this._renderer.pixelRatio,b.dragPoint);
var d=c.solver.findClosestPoint(b.dragPoint,b.closestPoint),d=d-g.pathOffset;0>d?d+=1:1<d&&(d-=1);var e=g.highRange-g.lowRange,d=g.direction===a.PathDirection.Reverse?g.highRange-d*e:g.lowRange+d*e;c instanceof a.GaugeScale&&b.action.snapToTick&&(b=e/c.tickCount,c=Math.round((d-g.lowRange)/b),d=g.lowRange+c*b);g.dataSource.value=d}};g.prototype.changeCursor=function(a){this._canvasHost.changeCursor(a)};g.prototype.navigate=function(b){b!==this._navigationBackStack[this._navigationBackStack.length-
1]&&(this._navigationBackStack.length>=a.Engine.pageStackSize&&this._navigationBackStack.splice(0,1),this.loadPage(b)&&(this._navigationForwardStack=[],this._navigationBackStack.push(b),this.pageManager.rootPage.updateNavigationState(this.getNavigationState(b),this.securityContext)))};g.prototype.navigateHome=function(){0<this._navigationBackStack.length&&this.navigate(this._dataClient.startPageUrl)};g.prototype.navigateBack=function(){if(1<this._navigationBackStack.length){var a=this._wasDialogClosed,
b=this._navigationBackStack,g=b[b.length-(a?1:2)];null!=this.loadPage(g)&&this.navigateBackHelper(a,b,g)}};g.prototype.navigateBackHelper=function(a,b,g){a?this._navigationForwardStack.push(b[b.length-1]):this._navigationForwardStack.push(b.pop());this.pageManager.rootPage.updateNavigationState(this.getNavigationState(g),this.securityContext);this._wasDialogClosed=!1};g.prototype.navigateForward=function(){if(0<this._navigationForwardStack.length){var a=this._navigationForwardStack[this._navigationForwardStack.length-
1];null!=this.loadPage(a)&&(this._navigationBackStack.push(this._navigationForwardStack.pop()),this.pageManager.rootPage.updateNavigationState(this.getNavigationState(a),this.securityContext))}};g.prototype.navigateLeft=function(){this.navigatetoDirection(a.NavDirection.Left)};g.prototype.navigateRight=function(){this.navigatetoDirection(a.NavDirection.Right)};g.prototype.navigateUp=function(){this.navigatetoDirection(a.NavDirection.Up)};g.prototype.navigateDown=function(){this.navigatetoDirection(a.NavDirection.Down)};
g.prototype.navigatetoDirection=function(a){a=this.pageManager.topPage.GetPageForDirection(a);null!=a&&""!=a&&this.navigate(this.formatPageUrl(a))};g.prototype.toggleVariable=function(b){if(null!=b){var g=a.Parser.convertToBoolean(b.value)?0:1;this.writeConstant(b,g)}};g.prototype.incrementVariable=function(b,g){if(null!==b){var c;c=Long.isLong(b.value)?b.value.add(g):a.Parser.getNumber(b.value)+g;this.writeConstant(b,c)}};g.prototype.writeVariable=function(b,g){null!==b&&b instanceof a.Variable&&
null!==g&&("@"===b.name.charAt(0)?b.update(g.value):g instanceof a.Constant?(g.value=this._dataTypeDictionary.prepareSubstituteValue(b.name,g.value),this._dataClient.writeVariable(a.WriteRequestSourceType.Constant,b,g.value)):"@"===g.name.charAt(0)?this._dataClient.writeVariable(a.WriteRequestSourceType.Constant,b,g.value):this._dataClient.writeVariable(a.WriteRequestSourceType.Variable,b,g.name))};g.prototype.writeConstant=function(b,g){null!==b&&b instanceof a.Variable&&("@"===b.name.charAt(0)?
b.update(g):this._dataClient.writeVariable(a.WriteRequestSourceType.Constant,b,g))};g.prototype.formatPageUrl=function(b){b=a.ModuleLoader.getResourceUrl(b);-1==b.toLowerCase().indexOf(".json",b.length-5)&&(b+=".json");return b};g.prototype.toggleBlinkVar=function(a,b,g){0==Math.abs(b%g)&&(b=this.pageManager.topPage,null!==b&&(a=b.screenVariables.getValue(a),null!==a&&this.toggleVariable(a)))};g.prototype.startBlinkDynamicTimer=function(){var b=this;null==this._blinkCallbackTimer&&(this._blinkCallbackTimer=
new a.CallbackTimer(500),this._blinkCallbackTimer.start(0,function(a){b.toggleBlinkVar("@BlinkFastStatus",a,1);b.toggleBlinkVar("@BlinkStatus",a,2);b.toggleBlinkVar("@BlinkSlowStatus",a,4)}))};g.prototype.loadApplicationVariables=function(){var b=this._dataClient.downloadScreen(a.ModuleLoader.getResourceUrl("application.variables.json"));if(null!==b&&(b=b.variables))for(var g=0;g<b.length;g++)if("@"===b[g].name.charAt(0)&&"@"===b[g].name.charAt(1)){var c=f.Hmi.App.registerApplicationVariable(b[g].name,
b[g].type);null!==b[g].initValue&&void 0!==b[g].initValue&&c.update(b[g].initValue)}};g.prototype.clearListBoxSelection=function(){this._pageManager.topPage.rootNode.nodes.filter(function(b){return b instanceof a.ListBox}).forEach(function(a){a.initializeSelectedRow()})};g.prototype.loadSecurityParameters=function(){var b=new a.SecurityContextInitParams;b.authProtocol=this._dataClient.authenticationProtocol;return b};g.prototype.logInEx=function(b,g){this.updateLocalLoginVariables(0,"");var d=this.pageManager.topPage.rootNode.nodes.filter(function(b){return b.id.toUpperCase()==
a.LogInAction.passwordTargetName})[0].getTargetProperty("Text").value,e=this.pageManager.topPage.rootNode.nodes.filter(function(b){return b.id.toUpperCase()==a.LogInAction.userNameTargetName})[0].getTargetProperty("Text").value,f=new c;f.engine=b;f.username=e;this.authService.logInAsync(e,d,this.authCallback,f)};g.prototype.logOut=function(a){void 0!==this.securityContext&&(this.pageManager.dataGroup.clear(),this.authService.logOutAsync(),this.securityContext.loggedInUserName="",this.securityContext.access_token=
void 0,this.securityContext.updateRoles([]),this.updateLoggedUserVariable(),this._dataClient.access_token=void 0);null!==a.pageName&&(a=this.formatPageUrl(a.pageName),a===this._navigationBackStack[this._navigationBackStack.length-1]?this.activateTopPage():this.navigate(a))};g.prototype.updateLoggedUserVariable=function(){this.pageManager.topPage.screenVariables.contains(g.LocalVariableLoggedInUser)||this.pageManager.topPage.screenVariables.add(g.LocalVariableLoggedInUser,new a.Variable(g.LocalVariableLoggedInUser,
"STRING"));this.writeConstant(this.pageManager.topPage.screenVariables.getValue(g.LocalVariableLoggedInUser),this.securityContext.loggedInUserName)};g.prototype.authCallback=function(b,g,c,d){var e=d.engine;b===a.AuthenticationResult.Success?(e.securityContext.access_token=g,e._dataClient.access_token=g,1<e.pageManager.pageStack.length&&e.canShowPage(e.pageManager.pageStack[e.pageManager.pageStack.length-1])&&(e.closeDialog(new a.CloseDialogAction),e.securityContext.loggedInUserName=d.username,e.securityContext.updateRoles(c)),
e.startDataUpdate()):b===a.AuthenticationResult.BadCredentials&&e.updateLocalLoginVariables(1,"Invalid login credentials.");e.updateLoggedUserVariable()};g.prototype.updateLocalLoginVariables=function(a,b){var c=this.pageManager.topPage.screenVariables,d=c.getValue(g.LocalVariableLoginStatusCode),c=c.getValue(g.LocalVariableLoginErrorString);d&&c&&(this.writeConstant(d,a),this.writeConstant(c,b))};g.prototype.topPageIsRestricted=function(){return null===this.pageManager.topPage?!1:!this.canShowPage(this._pageManager.topPage)};
g.prototype.canShowPage=function(a){return void 0!==this.securityContext?this.securityContext.canShowPage(a):!0};g.LocalVariableLoggedInUser="@loggedInUser";g.LocalVariableLoginStatusCode="@loginStatusCode";g.LocalVariableLoginErrorString="@loginErrorString";g.Started=null;g.Stopped=null;g.PageActivated=null;g.PageDeactivated=null;g.pageStackSize=20;return g}();a.EngineBase=d;var c=function(){return function(){}}();a.EngineAuthenticationCallBackData=c;var b=function(){return function(){this.previousState=
e.Waiting;this.minInterval=this.lastRender=0}}();a.RunFrameContext=b})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(a,b){this._host=this._protocol=this._url=this._isValid=this._domUrl=void 0;this._url=this.BuildUrl(a,b);this._protocol=this.GetUrlProtocol(this.url);this._host=this.GetUrlHost(this.url)}Object.defineProperty(d,"isDomURLSupported",{get:function(){if("undefined"===typeof d._isDomUrlSupported){d._isDomUrlSupported=!1;try{var c=new URL("ehmi","http://phoenixcontact.com");d._isDomUrlSupported="http://phoenixcontact.com/ehmi"===c.href}catch(b){a.Common.Log("WARNING: UrlEx window.URL object unavailable, so using the fall back approach instead.",
a.LogType.Warning)}}return d._isDomUrlSupported},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"protocol",{get:function(){return this._protocol},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"host",{get:function(){return this._host},enumerable:!0,
configurable:!0});d.HasTrailingForwardSlash=function(c){return c.charAt(c.length-1)===a.DataAccessServiceBase.forwardSlash?!0:!1};d.EnsureUrlTrailingForwardSlash=function(c){return!1===d.HasTrailingForwardSlash(c)?c+a.DataAccessServiceBase.forwardSlash:c};d.RemoveUrlTrailingForwardSlash=function(a){return!0===d.HasTrailingForwardSlash(a)?a.substring(0,a.length-1):a};d.FormatDataUrl=function(a,b){a||(a=window&&window.location&&window.location.protocol?window.location.protocol:"http:");if(!b)if(window&&
window.location&&window.location.hostname)b=window.location.hostname,window.location.port&&(b=b+":"+window.location.port);else return;return a+"//"+b};d.prototype.BuildUrl=function(c,b){var g=void 0;if(d.isDomURLSupported){this._isValid=!1;try{this._domUrl=new URL(b,c),this._isValid=!0}catch(h){if(h instanceof SyntaxError){a.Common.Log("ERROR: UrlEx.BuildUrl) Caught 'SyntaxError' exception due to invalid URL: "+c+b,a.LogType.Error);return}h instanceof TypeError?(a.Common.Log("WARNING: UrlEx.BuildUrl) Caught 'TypeError' exception.",
a.LogType.Warning),h.message&&a.Common.Log("            'TypeError.message="+h.message,a.LogType.Warning)):a.Common.Log("WARNING: UrlEx.BuildUrl) Caught unexpected exception ('"+h+"'), so using the fall back approach instead.",a.LogType.Warning)}}g=void 0!==this._domUrl?this._domUrl.href:c?d.EnsureUrlTrailingForwardSlash(c)+b:b;void 0!==g?(g=d.EnsureUrlTrailingForwardSlash(g),this._isValid=!0):this._isValid=!1;return g};d.prototype.GetUrlProtocol=function(c){var b=void 0;if(void 0!==this._domUrl)b=
this._domUrl.protocol;else{var g=c.indexOf(":");-1!==g?b=c.substring(0,g+1):a.Common.Log("ERROR: UrlEx.GetUrlProtocol) Unable to find protocol as invalid URL: "+c,a.LogType.Error)}this._isValid=void 0!==b?!0:!1;return b};d.prototype.GetUrlHost=function(c){var b=void 0;if(void 0!==this._domUrl)b=this._domUrl.host;else{var g=c.indexOf("://");-1!==g?b=c.substring(g+3):a.Common.Log("ERROR: UrlEx.GetUrlHost) Unable to find host as invalid URL: "+c,a.LogType.Error)}void 0!==b?(b=d.RemoveUrlTrailingForwardSlash(b),
this._isValid=!0):this._isValid=!1;return b};d._isDomUrlSupported=void 0;return d}();a.UrlEx=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){return function(d,c,b,g,h,e,f,l,k,m,p){this.stationID=this.downloadTimeout=this.startPageURL=this.dataDebug=this.dataPollTimeoutMultiplier=this.dataPollInterval=this.dataTimeout=this.dataRetries=this.dataSource=this.dataURL=this.sessionTimeout=this.files=this.homePage=this.appVersion=this.name=void 0;this.startPageURL=d;this.dataURL=a.UrlEx.FormatDataUrl(m,g);this.dataSource=c;this.dataRetries=b;this.dataTimeout=h;this.dataPollInterval=e;this.dataPollTimeoutMultiplier=
f;this.dataDebug=l;this.downloadTimeout=k;this.stationID=p}}();a.ProjectSettings=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c){this._value=c}Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(a){this.hasValueChanged(this._value,a)&&(this._value=a,this.onValueChanged())},enumerable:!0,configurable:!0});a.prototype.onValueChanged=function(){void 0!==this.valueChanged&&this.valueChanged(this)};a.prototype.hasValueChanged=function(a,b){return a!==b};return a}();a.DynamicValue=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){void 0===b&&(b=!1);return a.call(this,b)||this}__extends(c,a);return c}(a.DynamicValue);a.BooleanValue=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){void 0===b&&(b=0);return a.call(this,b)||this}__extends(c,a);return c}(a.DynamicValue);a.FloatValue=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b=new a.Point);return d.call(this,b)||this}__extends(c,d);c.prototype.hasValueChanged=function(a,g){return void 0==a||void 0==g?a!=g:a.x!=g.x||a.y!=g.y};c.prototype.setPointValue=function(a,g){if(this.value.x!=a||this.value.y!=g)this.value.x=a,this.value.y=g,this.onValueChanged()};c.prototype.setX=function(a){this.value.x!==a&&(this.value.x=a,this.onValueChanged())};c.prototype.setY=function(a){this.value.y!==a&&(this.value.y=
a,this.onValueChanged())};return c}(a.DynamicValue);a.PointValue=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){void 0===b&&(b=null);return a.call(this,b)||this}__extends(c,a);return c}(a.DynamicValue);a.StringValue=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.Variable=0]="Variable";a[a.Constant=1]="Constant";a[a.ArrayVariable=2]="ArrayVariable"})(e=a.ParameterType||(a.ParameterType={}));var d=function(){return function(a,g,c,d,f,l){void 0===g&&(g=e.Variable);void 0===c&&(c=null);void 0===d&&(d=0);void 0===f&&(f=0);void 0===l&&(l=void 0);this.name=a;this.type=g;this.source=c;this.index=d;this.lowerBound=f;this.memberName=l}}();a.Parameter=d;var c=function(){function b(){}b.createParameter=function(b){var c=
null,q=a.Parser.getString(b.Name,null);if(null!==q){c=new d(q);switch(a.Parser.getString(b.Type)){case "ParameterBindingConstant":c.type=e.Constant;break;case "ParameterBindingArrayVariable":c=new d(q);c.type=e.ArrayVariable;c.index=b.Index;c.lowerBound=b.LowerBound;"."!=b.MemberName&&(c.memberName=b.MemberName);break;default:c.type=e.Variable}void 0!==b.Source&&(c.source=b.Source)}return c};return b}();a.ParameterFactory=c})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){return function(){this.value=null}}();a.DataValueSource=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){var g=a.call(this)||this;g.value=b;return g}__extends(c,a);return c}(a.DataValueSource);a.Constant=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));(function(f){(function(a){var e=function(){return function(a,c,b,g){this.timeFrom=a;this.timeTo=c;this.valueFrom=b;this.valueTo=g}}();a.TimestampEntry=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){this._entries=null;this._count=0;this._entries=[];this.resize(d.minimumLength)}Object.defineProperty(d.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});d.prototype.trim=function(a){for(var b=null,g=0,h=this.count;g<h;g++)if(b=this._entries[g],a>b.timeTo||a>=b.timeFrom)return this._count=g+1,b;return null};d.prototype.resize=function(c){if(c>=d.minimumLength&&c<=d.maximumLength){c-=this._entries.length;for(var b=
0,g=Math.abs(c);b<g;b++)0<c?this._entries.push(new a.TimestampEntry(-1,-1,-1,-1)):this._entries.pop()}return this._entries.length};d.prototype.enqueue=function(c,b){c=a.Parser.getNumber(c);var g=this._entries.length;this._count+1>g&&g<d.maximumLength&&(g=this.resize(this._count+d.minimumLength));for(var h=this.count-1;0<=h;h--)if(h<g-1){var e=this._entries[h],f=this._entries[h+1];f.timeFrom=e.timeFrom;f.timeTo=e.timeTo;f.valueFrom=e.valueFrom;f.valueTo=e.valueTo}h=this._entries[0];0<this.count?(h.timeFrom=
h.timeTo,h.valueFrom=h.valueTo):(h.timeFrom=b,h.valueFrom=c);h.timeTo=b;h.valueTo=c;this.count<g&&this._count++};d.minimumLength=3;d.maximumLength=3;return d}();a.TimestampQueue=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){function e(b){var g=a.Parser.getNumber(b);return null!=g?Math.abs(Math.round(g)):b}function d(b){var g=a.Parser.getNumber(b);return null!=g?Math.round(g):b}function c(b){var g=a.Parser.getNumber(b);return null!=g?g:b}function b(b){var g=a.Parser.getBoolean(b);return null!=g?g:b}function g(a){return a}function h(a){return Long.fromString(a,!1)}function q(a){if("string"===typeof a){var b;0<=(b=a.indexOf("."))&&(a=a.substring(0,b))}return a}function f(a){a=q(a);return Long.fromString(a,
!1)}function l(a){a=q(a);return Long.fromString(a,!0)}var k=function(q){function k(a,b,g){var c=q.call(this)||this;c.isEnumeration=!1;c.roundOnWrite=!1;c.writePendingCount=0;c.isReadOnly=!1;c._lastTimestamp=-1;c._timestampQueue=null;c._allowTimestamping=!1;c.name=a;c.type=b;g&&(c.isReadOnly=g);c.setTypeConverter();return c}__extends(k,q);Object.defineProperty(k.prototype,"allowTimestamping",{get:function(){return this._allowTimestamping},set:function(b){this._allowTimestamping=b;!0===b&&null===this._timestampQueue?
this._timestampQueue=new a.TimestampQueue:!1===b&&(this._timestampQueue=null)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"writeName",{get:function(){return this.name},enumerable:!0,configurable:!0});k.prototype.equals=function(a){return this.name==a.name};k.prototype.parseStrict=function(b){var g=this instanceof a.ArrayElementVariable?this.memberType:this.type;if(!g)return a.Common.Log("WARNING: Unable to parse value '"+b+"' due to invalid type: "+this.type,a.LogType.Warning),
b;try{switch(g){case "BOOL":switch(b.trim().toLowerCase()){case "0":case "false":return!1;case "1":case "true":return!0;default:g="USINT";try{var c=this.parseStrict(b);if("number"!==typeof c)throw Error("not BOOL");if(!(0<=c&&1>=c))throw RangeError();g="BOOL";return 0!==c}catch(h){throw g="BOOL",h;}}case "USINT":case "UINT":case "UDINT":case "ULINT":case "BYTE":case "WORD":case "DWORD":case "LWORD":if(!/^[0-9]+$/.test(b.trim()))return a.Common.Log("DEBUG: Unable to parse value '"+b+"' for type '"+
g+"' due to invalid character.",a.LogType.Debug),null;var d=k.longFromString(b,!0);switch(g){case "USINT":case "BYTE":if(d.and(k.MASK_UINT8).ne(Long.UZERO))throw RangeError();break;case "UINT":case "WORD":if(d.and(k.MASK_UINT16).ne(Long.UZERO))throw RangeError();break;case "UDINT":case "DWORD":if(d.and(k.MASK_UINT32).ne(Long.UZERO))throw RangeError();if(d.gt(k.MAX_INT))return d;break;case "ULINT":case "LWORD":if(d.gt(k.MAX_INT))return d}return d.toInt();case "SINT":case "INT":case "DINT":case "LINT":if(!/^(\-|\+)?[0-9]+$/.test(b.trim()))return a.Common.Log("DEBUG: Unable to parse value '"+
b+"' for type '"+g+"' due to invalid character.",a.LogType.Debug),null;var e=k.longFromString(b,!1);switch(g){case "SINT":var q=e.shr(7);if(!q.eq(Long.ZERO)&&!q.eq(Long.NEG_ONE))throw RangeError();break;case "INT":q=e.shr(15);if(!q.eq(Long.ZERO)&&!q.eq(Long.NEG_ONE))throw RangeError();break;case "DINT":q=e.shr(31);if(!q.eq(Long.ZERO)&&!q.eq(Long.NEG_ONE))throw RangeError();break;case "LINT":if(q=e.shr(31),!q.eq(Long.ZERO)&&!q.eq(Long.NEG_ONE))return e}return e.toInt();case "REAL":case "LREAL":if(!/^(\-|\+)?([0-9]+(\.[0-9]*)?|\.[0-9]+)((e|E)(\-|\+)?[0-9]+)?$/.test(b.trim()))return a.Common.Log("DEBUG: Unable to parse value '"+
b+"' for type '"+g+"' due to invalid character.",a.LogType.Debug),null;var f=parseFloat(b);if("number"!==typeof f||!isFinite(f))throw RangeError();if("REAL"==g){if(0==f)return f;if(!(1.175494351E-38<=Math.abs(f)&&3.402823466E38>=Math.abs(f)))throw RangeError();}return f;case "STRING":return b;case "TIME":case "LTIME_OF_DAY":case "LDATE_AND_TIME":case "LDATE":case "LTIME":throw Error(g+" not supported");default:throw Error("Unknown type:  "+g);}}catch(n){return a.Common.Log("WARNING: Unable to parse value '"+
b+"' as type '"+g+"' caused exception:  "+n,a.LogType.Warning),b}};k.prototype.setTypeConverter=function(){switch(this.type){case "BOOL":this.convertTypeFromString=b;break;case "USINT":case "UINT":case "UDINT":case "BYTE":case "WORD":case "DWORD":this.convertTypeFromString=e;break;case "SINT":case "INT":case "DINT":this.convertTypeFromString=d;break;case "REAL":this.convertTypeFromString=c;break;case "TIME":this.convertTypeFromString=d;break;case "LREAL":this.convertTypeFromString=c;break;case "LWORD":case "ULINT":this.convertTypeFromString=
l;break;case "LTIME_OF_DAY":case "LDATE_AND_TIME":case "LDATE":case "LTIME":this.convertTypeFromString=h;break;case "LINT":this.convertTypeFromString=f;break;default:this.convertTypeFromString=g}};k.prototype.update=function(a,b){void 0===b&&(b=-1);this.isReadOnly||("number"===typeof a&&"BOOL"===this.type?this.value=0!=a:(this.isEnumeration||"string"!==typeof a||(a=this.convertTypeFromString(a)),this.value=a),this.allowTimestamping&&-1!==b&&b!==this._lastTimestamp&&(this._timestampQueue.enqueue(this.value,
b),this._lastTimestamp=b))};k.prototype.getTimestampEntry=function(a){return this._timestampQueue?this._timestampQueue.trim(a):null};k.longFromString=function(a,b,g){if(0===a.length)throw Error("empty string");if("NaN"===a||"Infinity"===a||"+Infinity"===a||"-Infinity"===a)throw Error("floating point input");"number"===typeof b?(g=b,b=!1):b=!!b;g=g||10;if(2>g||36<g)throw RangeError("radix");for(var c=!1,h=-1,d=0;d<a.length;++d)if("+"==a[d]||"-"==a[d]){if(-1!=h)throw Error("interior sign");"-"==a[d]&&
(c=!c)}else-1==h&&(h=d);a=a.substring(h);for(var e=Long.fromNumber(Long.pow_dbl(g,8),!0),h=Long.UZERO,d=0;d<a.length;d+=8){var q=Math.min(8,a.length-d),f=parseInt(a.substring(d,d+q),g);if(8>q){q=Long.fromNumber(Long.pow_dbl(g,q),!0);if(h.gt(Long.MAX_UNSIGNED_VALUE.div(q)))throw Error("input overflow");h=h.mul(q)}else{if(h.gt(Long.MAX_UNSIGNED_VALUE.div(e)))throw Error("input overflow");h=h.mul(e)}f=Long.fromNumber(f,!0);if(h.gt(Long.MAX_UNSIGNED_VALUE.sub(f)))throw Error("input overflow");h=h.add(f)}if(b)return c?
h.neg():h;a=Long.fromValue(Long.MIN_VALUE,!0);if(c&&h.eq(a))return Long.MIN_VALUE;if(h.gte(a))throw Error("input overflow");a=Long.fromValue(h,!1);return c?a.neg():a};k.MASK_UINT8=Long.MAX_UNSIGNED_VALUE.xor(255);k.MASK_UINT16=Long.MAX_UNSIGNED_VALUE.xor(65535);k.MASK_UINT32=Long.MAX_UNSIGNED_VALUE.xor(4294967295);k.MAX_INT=Long.fromNumber(2147483647);return k}(a.DataValueSource);a.Variable=k})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b,g,c,e,f,l){l=a.call(this,b.name,l)||this;l.lowerBound=0;l.absoluteIndex=0;l.sourceArray=b;l.lowerBound=g;l.absoluteIndex=c;l.memberName=e;l.memberType=f;l.writeVariableName=b.name+"["+(l.lowerBound+l.absoluteIndex).toString()+"]";l.memberName&&(l.writeVariableName=l.writeName+"."+l.memberName);return l}__extends(c,a);Object.defineProperty(c.prototype,"writeName",{get:function(){return this.writeVariableName},enumerable:!0,configurable:!0});
c.prototype.equals=function(b){return a.prototype.equals.call(this,b)&&b?this.lowerBound==b.lowerBound&&this.absoluteIndex==b.absoluteIndex&&this.memberName==b.memberName:!1};c.prototype.update=function(a,g){this.memberName?this.sourceArray.value[this.absoluteIndex][this.memberName]=a:this.sourceArray.value[this.absoluteIndex]=a};Object.defineProperty(c.prototype,"value",{get:function(){if(this.sourceArray){var a=this.sourceArray.value[this.absoluteIndex];if(this.memberName)for(var g=this.memberName.split("."),
c=0;c<g.length;c++)a=a[g[c]];return a}return null},set:function(a){this.sourceArray&&(this.sourceArray[this.absoluteIndex].value=a)},enumerable:!0,configurable:!0});return c}(a.Variable);a.ArrayElementVariable=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(){this.name=null;this._hasData=!1;this._layers=[];this._keyMap=new HashTable}Object.defineProperty(a.prototype,"variables",{get:function(){return this._keyMap.values},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasData",{get:function(){return this._hasData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasVariables",{get:function(){return 0<this.variables.length},enumerable:!0,configurable:!0});a.prototype.getVariable=
function(a){return this._keyMap.getValue(a)};a.prototype.getVariableNames=function(){return this._keyMap.keys.slice(0,this._keyMap.keys.length)};a.prototype.pushLayer=function(a){this._layers.push(a);this.resetKeyMap()};a.prototype.popLayer=function(){var a=this._layers.pop();void 0===a&&(a=null);this.resetKeyMap();return a};a.prototype.resetKeyMap=function(){this._keyMap=new HashTable;for(var a=0;a<this._layers.length;a++)for(var b=this._layers[a],g=0;g<b.keys.length;g++)this._keyMap.add(b.keys[g],
b.values[g])};a.prototype.clear=function(){this.name=null;this._hasData=!1};a.prototype.update=function(a,b){for(var g=0,h=a.length;g<h;g++){var d=this._keyMap.getValue(a[g].name);null!==d&&0==d.writePendingCount&&d.update(void 0===a[g].value||null===a[g].value?"":a[g].value,b)}this._hasData=!0};return a}();a.DataGroup=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){(function(a){a[a.Constant=0]="Constant";a[a.Variable=1]="Variable"})(a.WriteRequestSourceType||(a.WriteRequestSourceType={}));var e=function(){return function(a,c,b){this.sourceType=a;this.variable=c;this.newValue=b}}();a.WriteRequest=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(a,g,c){var e=d.call(this)||this;e.moduleName=a;e.functionSignature=g;e.functionParameters=c;return e}__extends(c,d);Object.defineProperty(c.prototype,"allowTimestamping",{set:function(b){null!=this.functionParameters&&this.functionParameters.forEach(function(g,c,d){g instanceof a.Variable&&(g.allowTimestamping=b)})},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"value",{get:function(){var b=a.ModuleLoader.GetModuleInstance(this.moduleName);
if(b&&(b=b[this.functionSignature])){var g=[];null!=this.functionParameters&&this.functionParameters.forEach(function(a,b,c){return g.push(a.value)});return b.apply(null,g)}},set:function(a){},enumerable:!0,configurable:!0});return c}(a.DataValueSource);a.Expression=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b,g,h,d,e,f,k,m,p,r){this._isProjectSettingsDownloaded=this._queryProjectSettings=void 0;this._authenticationProtocol=a.AuthenticationProtocol.None;this._dataUrl=this._currentProjectSettings=void 0;this._downloadTimeout=3E4;this._dataRetryLimit=1;this._dataRetryCount=0;this._sessionRetryLimit=3;this._sessionRetryCount=0;this._sessionTimeout=5E3;this._dataPollTimeElapsed=this._dataPollStartTime=this._dataPollHandle=this._sessionPollHandle=void 0;
this._dataPollInterval=250;this._dataPollIntervalTimeoutMultiplier=2;this._dataAccessStatus=a.DataAccessStatus.OK;this._authenticationSettings=null;this.updateGroupMode=!1;this.resetSysTickCount();this._pendingWriteQueue=[];this._pageCache=a.createPageCache();this._queryProjectSettings=new a.ProjectSettings(c,b,g,h,d,e,f,k,m,p,r);this.resetIsProjectSettingsDownloaded();this.updateProjectSettings()}d.isSysTickCountVariable=function(a){return HashTable.endsWith(a.toUpperCase(),d.VariableName_SysTickCount.toUpperCase())};
Object.defineProperty(d.prototype,"sysTickCount",{get:function(){return this._sysTickCount},enumerable:!0,configurable:!0});d.prototype.resetSysTickCount=function(){this._sysTickCount=0};Object.defineProperty(d.prototype,"isProjectSettingsDownloaded",{get:function(){return this._isProjectSettingsDownloaded},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"authenticationProtocol",{get:function(){return this._authenticationProtocol},enumerable:!0,configurable:!0});d.prototype.resetIsProjectSettingsDownloaded=
function(){this._isProjectSettingsDownloaded=!1};Object.defineProperty(d.prototype,"currentProjectSettings",{get:function(){return this._currentProjectSettings},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"dataUrl",{get:function(){return this._dataUrl},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"startPageUrl",{get:function(){if(this._currentProjectSettings&&this._currentProjectSettings.startPageURL)return this._currentProjectSettings.startPageURL},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"dataPollInterval",{get:function(){return this._dataPollInterval},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"status",{get:function(){a.Common.Log("DEBUG: Data client's returning data status code: "+this._dataAccessStatus,a.LogType.Debug);return this._dataAccessStatus},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"authenticationSettings",{get:function(){return this._authenticationSettings},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"access_token",{get:function(){return this._dataAccessService.access_token},set:function(a){this._dataAccessService.access_token=a},enumerable:!0,configurable:!0});d.prototype.updateServerSecuritySettings=function(){};d.prototype.startSessionMaintenanceCycle=function(a,b){var g=this;void 0===this._sessionPollHandle&&this._dataAccessService.sessionID&&(this._sessionPollHandle=setInterval(function(){g._dataAccessService.MaintainSession(g._dataAccessService.sessionID,
a,b)},this._sessionTimeout/2))};d.prototype.stopSessionMaintenanceCycle=function(){void 0!==this._sessionPollHandle&&(clearInterval(this._sessionPollHandle),this._sessionPollHandle=void 0)};d.prototype.loadAuthenticationProtocol=function(){this._authenticationProtocol=a.AuthenticationProtocol.None;var c=this.downloadScreen(a.ModuleLoader.getResourceUrl("webserver.configuration.json"));null!==c&&c.WebServer.AuthenticationProtocol&&(this._authenticationProtocol=c.WebServer.AuthenticationProtocol)};
d.prototype.updateProjectSettings=function(){this.loadAuthenticationProtocol();this._currentProjectSettings=this.loadProjectSettings();this.applyProjectSettings(this._currentProjectSettings);a.Common.Log("DEBUG: Data client's authentication settings server: "+this.authenticationSettings.authenticationServer,a.LogType.Debug);a.Common.Log("DEBUG: Data client's authentication settings protocol: "+this.authenticationSettings.serverProtocol,a.LogType.Debug);a.Common.Log("DEBUG: Data client's authentication settings timeout (ms): "+
this.authenticationSettings.xhrTimeout,a.LogType.Debug);a.Common.Log("DEBUG: Data client's data URL: "+this.dataUrl.url,a.LogType.Debug);a.Common.Log("DEBUG: Data client's start page URL: "+this.startPageUrl,a.LogType.Debug);a.Common.Log("DEBUG: Data client's retry limit: "+this._dataRetryLimit,a.LogType.Debug);a.Common.Log("DEBUG: Data client's poll interval (ms): "+this._dataPollInterval,a.LogType.Debug);a.Common.Log("DEBUG: Data client's poll interval timeout multiplier: "+this._dataPollIntervalTimeoutMultiplier,
a.LogType.Debug);a.Common.Log("DEBUG: Data client's download timeout (ms): "+this._downloadTimeout,a.LogType.Debug);a.Common.Log("DEBUG: Data client's session timeout (ms): "+this._sessionTimeout,a.LogType.Debug)};d.prototype.loadProjectSettings=function(){var c=new a.ProjectSettings;this._currentProjectSettings=void 0;var b=this.downloadScreenFromServer(a.ModuleLoader.getResourceUrl(d.ProjectJsonFile));this._isProjectSettingsDownloaded=null!==b?!0:!1;this._queryProjectSettings.name?c.name=this._queryProjectSettings.name:
b&&b.name&&(c.name=b.name);this._queryProjectSettings.appVersion?c.appVersion=this._queryProjectSettings.appVersion:b&&b.appVersion&&(c.appVersion=b.appVersion);this._queryProjectSettings.homePage?c.homePage=this._queryProjectSettings.homePage:b&&b.homePage&&(c.homePage=b.homePage);b&&b.files&&(c.files=b.files);this._queryProjectSettings.sessionTimeout?c.sessionTimeout=this._queryProjectSettings.sessionTimeout:b&&b.settings.sessionTimeout&&(c.sessionTimeout=b.settings.sessionTimeout);this._queryProjectSettings.dataURL?
c.dataURL=this._queryProjectSettings.dataURL:b&&b.settings.dataURL&&(c.dataURL=b.settings.dataURL);c.dataSource=this._queryProjectSettings.dataSource?this._queryProjectSettings.dataSource:b&&b.settings.dataSource?b.settings.dataSource:f.Hmi.DataClient.DataSourceType_eCLR;this._queryProjectSettings.dataRetries?c.dataRetries=this._queryProjectSettings.dataRetries:b&&b.settings.dataRetries&&(c.dataRetries=b.settings.dataRetries);this._queryProjectSettings.dataTimeout?c.dataTimeout=this._queryProjectSettings.dataTimeout:
b&&b.settings.dataTimeout&&(c.dataTimeout=b.settings.dataTimeout);this._queryProjectSettings.dataPollInterval?c.dataPollInterval=this._queryProjectSettings.dataPollInterval:b&&b.settings.dataPollInterval&&(c.dataPollInterval=b.settings.dataPollInterval);this._queryProjectSettings.dataPollTimeoutMultiplier?c.dataPollTimeoutMultiplier=this._queryProjectSettings.dataPollTimeoutMultiplier:b&&b.settings.dataPollTimeoutMultiplier&&(c.dataPollTimeoutMultiplier=b.settings.dataPollTimeoutMultiplier);this._queryProjectSettings.dataDebug?
c.dataDebug=this._queryProjectSettings.dataDebug:b&&b.settings.dataDebug&&(c.dataDebug=b.settings.dataDebug);this._queryProjectSettings.startPageURL?c.startPageURL=this._queryProjectSettings.startPageURL:b&&b.startPageURL?c.startPageURL=b.startPageURL:c.homePage&&(c.startPageURL=a.ModuleLoader.getResourceUrl(c.homePage));this._queryProjectSettings.downloadTimeout?c.downloadTimeout=this._queryProjectSettings.downloadTimeout:b&&b.settings.downloadTimeout&&(c.downloadTimeout=b.settings.downloadTimeout);
this._queryProjectSettings.stationID?c.stationID=this._queryProjectSettings.stationID:b&&b.settings.stationID&&(c.stationID=b.settings.stationID);return c};d.prototype.applyProjectSettings=function(c){if(c){c.dataRetries&&!isNaN(c.dataRetries)&&0<=c.dataRetries&&(this._dataRetryLimit=c.dataRetries);c.dataPollInterval&&!isNaN(c.dataPollInterval)&&0<c.dataPollInterval&&(this._dataPollInterval=c.dataPollInterval);c.dataPollTimeoutMultiplier&&!isNaN(c.dataPollTimeoutMultiplier)&&0<c.dataPollTimeoutMultiplier&&
(this._dataPollIntervalTimeoutMultiplier=c.dataPollTimeoutMultiplier);c.downloadTimeout&&!isNaN(c.downloadTimeout)&&0<c.downloadTimeout&&(this._downloadTimeout=c.downloadTimeout);c.sessionTimeout&&!isNaN(c.sessionTimeout)&&0<c.sessionTimeout&&(this._sessionTimeout=c.sessionTimeout);c.dataURL&&(this._dataUrl=new a.UrlEx(void 0,c.dataURL));if(this.dataUrl.isValid)this._authenticationSettings=new a.AuthenticationSettings(this._dataUrl.protocol,this._dataUrl.host,c.dataTimeout,this._authenticationProtocol);
else throw Error("ERROR: Data client invalid data URL: "+c.dataURL);if(c.dataSource.toUpperCase()===d.DataSourceType_eCLR.toUpperCase())this._dataAccessService=new f.Hmi.PxcDataAccessService(c.dataURL,c.dataTimeout,c.dataDebug,c.stationID);else if(c.dataSource.toUpperCase()===d.DataSourceType_tsVisit.toUpperCase())this._dataAccessService=new f.Hmi.TsVisitDataAccessService(c.dataURL,c.dataTimeout,c.dataDebug,c.stationID);else throw Error("ERROR: Data client invalid data source: "+c.dataSource);return!0}return!1};
d.prototype.getPageFromCache=function(a){return null!==this._pageCache?this._pageCache.getItem(a):null};d.prototype.clearPageCache=function(){null!==this._pageCache&&this._pageCache.clearCache()};d.prototype.downloadScreen=function(c,b){a.Common.Log("DEBUG: Data client's downloading screen ... ",a.LogType.Debug);var g=!1;void 0!==b&&(g=!0);a.Common.Log("DEBUG: Data client's Download Screen XHR parameters: projectUrl = '"+c+"', isAsynchronous = '"+g+"'",a.LogType.Debug);var h=null,h=this.getPageFromCache(c);
return null!=h?(a.Common.Log("DEBUG: Data client's Download Screen cache hit: projectUrl = '"+c+"', isAsynchronous = '"+g+"'",a.LogType.Debug),h=JSON.parse(h),this._dataAccessStatus=a.DataAccessStatus.OK,void 0!==b&&b(h),h):this.downloadScreenFromServer(c,b)};d.prototype.isProjectFileAvailable=function(a){if(this.currentProjectSettings&&this.currentProjectSettings.files){var b=null,g=a.lastIndexOf("/");if((b=-1!==g?a.substr(g+1):a)&&b!==d.ProjectJsonFile)return this.currentProjectSettings.files.some(function(a,
g,c){if(a===b)return!0})}return!0};d.prototype.downloadScreenFromServer=function(c,b){var g=this,h=null;if(this.isProjectFileAvailable(c)){var d=void 0!==b,e=new XMLHttpRequest;e.ontimeout=function(h){a.Common.Log("ERROR: Data client's Download Screen XML HTTP Request timed out for projectUrl: "+c,a.LogType.Error);g._dataAccessStatus=a.DataAccessStatus.DownloadScreenError;if(d)b(null);else return null};e.onerror=function(h){h=h.target;a.Common.Log("ERROR: Data client's Download Screen XML HTTP Request failed for projectUrl '"+
c+"' with status code '"+h.status+"' and status text '"+h.statusText+"'.",a.LogType.Error);g._dataAccessStatus=a.DataAccessStatus.DownloadScreenError;if(d)b(null);else return null};e.onload=function(g){try{var e=g.target;e.readyState&&e.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&e.status?e.status===a.DataAccessServiceBase.httpRequestStatus_OK||e.status===a.DataAccessServiceBase.httpRequestStatus_NotModified?""!==e.response?(this.cacheResponse(c,e),h=eval("("+e.response+")"),
this._dataAccessStatus=a.DataAccessStatus.OK):(a.Common.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+c+"', unexpected XHR response: '"+e.response+"'",a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.DownloadScreenError):e.status===a.DataAccessServiceBase.httpRequestStatus_NotFound?-1!==c.indexOf(".variables.json")?(a.Common.Log("WARNING: Data client's Download Screen unable to download project URL '"+c+"' due to Not Found status, but treating as okay.",a.LogType.Warning),
this._dataAccessStatus=a.DataAccessStatus.OK):(a.Common.Log("ERROR: Data client's Download Screen failed to download project URL '"+c+"' due to Not Found status.",a.LogType.Warning),this._dataAccessStatus=a.DataAccessStatus.DownloadScreenError):(a.Common.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+c+"', unexpected XHR status = '"+e.status+"'",a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.DownloadScreenError):(a.Common.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+
c+"', unexpected XHR state: readyState = '"+e.readyState+"' and/or status = '"+e.status+"'",a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.DownloadScreenError)}catch(f){a.Common.Log("ERROR: dataClient.downloadScreen: xhr.onload) For projectUrl '"+c+"', caught exception: "+f,a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.ExceptionError}finally{d&&b(h)}}.bind(this);try{e.open("GET",c,d),!1===a.XhrSupport.DisableCaching(e)&&a.Common.Log("WARNING: Data client's Download Screen failed to disable caching for the request: '"+
c+"'",a.LogType.Warning),d&&!1===a.XhrSupport.EnableTimeout(e,this._downloadTimeout)&&a.Common.Log("WARNING: Data client's Download Screen failed to enable timeout setting for the request: '"+c+"'",a.LogType.Warning),this._dataAccessStatus=a.DataAccessStatus.Pending,e.send()}catch(f){a.Common.Log("ERROR: dataClient.downloadScreen) Caught exception: "+f,a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.ExceptionError}a.Common.Log("DEBUG: Data client's downloaded screen.",a.LogType.Debug)}else a.Common.Log("DEBUG: Data client's Download Screen skipped downloading unavailable file at project URL: "+
c,a.LogType.Debug);return h};d.prototype.cacheResponse=function(a,b){if(null!==this._pageCache){var g=b.getResponseHeader("Content-Type");g&&g.match(/application\/json/i)&&this._pageCache.setItem(a,b.response)}};d.prototype.registerGroup=function(c,b){a.Common.Log("DEBUG: Data client's registering group ... ",a.LogType.Debug);this._dataRetryCount=0;var g=function(h){var d=this,e=!1;if(void 0!==h.status)if(a.Common.Log("DEBUG: Data client's Register Group response status code: "+h.status,a.LogType.Debug),
h.status===a.DataAccessStatus.OK){void 0!==h.groupIdentifier?c.name=h.groupIdentifier:(a.Common.Log("ERROR: Data client's Register Group failed due to missing name information.",a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.RegisterGroupError);if(void 0!==h.types)for(var f=0;f<h.types.length;f++)c.getVariable(h.types[f].name).type=h.types[f].type;null!==c.name&&(this._callback=b,this._readUrl=c.name,this._dataAccessStatus=h.status,e=!0,this.updateData(this._readUrl,this._callback))}else h.status===
a.DataAccessStatus.ProjectChanged?(a.Common.Log("ERROR: Data client's Register Group failed due to Project Changed notification.",a.LogType.Warning),this.onProjectChanged(),this._dataAccessStatus=h.status):h.status==a.DataAccessStatus.AuthorizationError?(a.Common.Log("ERROR: Data client's Register Group failed due to Authorization Required error.",a.LogType.Error),this._dataAccessStatus=h.status):h.status===a.DataAccessStatus.DuplicateStationIDError?this._sessionRetryCount<this._sessionRetryLimit?
(this._sessionRetryCount+=1,a.Common.Log("WARNING: Data client's Register Group retry '"+this._dataRetryCount+"' of '"+this._sessionRetryLimit+"' due to Duplicate Station ID error.",a.LogType.Warning),e=!0,setTimeout(function(){return d._dataAccessService.RegisterGroup(c.getVariableNames(),g)},this._sessionTimeout)):(a.Common.Log("ERROR: Data client's Register Group failed due to Duplicate Station ID error, but retry limit ("+this._sessionRetryLimit+") already reached.",a.LogType.Error),this._dataAccessStatus=
h.status):this._dataRetryCount<this._dataRetryLimit?(this._dataRetryCount+=1,a.Common.Log("WARNING: Data client's Register Group retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to status: "+h.status,a.LogType.Warning),e=!0,this._dataAccessService.RegisterGroup(c.getVariableNames(),g)):(a.Common.Log("ERROR: Data client's Register Group failed due to status '"+h.status+"', but retry limit ("+this._dataRetryLimit+") already reached.",a.LogType.Error),this._dataAccessStatus=h.status,
this._dataAccessStatus===a.DataAccessStatus.InternalError&&(this._dataAccessStatus=a.DataAccessStatus.RegisterGroupError));else a.Common.Log("ERROR: Data client's Register Group failed due to missing status information.",a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.RegisterGroupError;e||b(null)}.bind(this);this._dataAccessService.RegisterGroup(c.getVariableNames(),g);a.Common.Log("DEBUG: Data client's registered group.",a.LogType.Debug)};d.prototype.unregisterGroup=function(c){a.Common.Log("DEBUG: Data client's unregistering group ... ",
a.LogType.Debug);null!==c.name&&(a.Common.Log("DEBUG: Data client's Unregister Group name: "+c.name,a.LogType.Debug),this._dataAccessService.UnregisterGroup(c.name,function(a){}),c.clear());a.Common.Log("DEBUG: Data client's unregistering group.",a.LogType.Debug)};d.prototype.startUpdate=function(c,b){a.Common.Log("DEBUG: Data client's starting update ... ",a.LogType.Debug);0<c.variables.length&&this.registerGroup(c,b);a.Common.Log("DEBUG: Data client's started update.",a.LogType.Debug)};d.prototype.updateData=
function(c,b){var g=this;a.Common.Log("DEBUG: Data client's updating data ... ",a.LogType.Debug);a.Common.Log("DEBUG: Data client's Update Data read URL: "+c,a.LogType.Debug);this._dataRetryCount=0;this.removeDataPollTimer();this._dataPollStartTime=this.getCurrentTime();this._dataPollTimeElapsed=0;var h=5;h>this._dataPollInterval&&(h=1);a.Common.Log("DEBUG: Data client's Update Data poll timer interval (ms): "+h,a.LogType.Debug);this._dataPollHandle=setInterval(function(){var a=this.getCurrentTime()-
this._dataPollStartTime;this._dataPollTimeElapsed=Math.floor(a/h)/10}.bind(this),h);if(0<this._pendingWriteQueue.length){var d=this._pendingWriteQueue.shift();this._dataAccessService.WriteValues([d.variable.writeName],[d.newValue],function(a){d.variable.writePendingCount--;g.updateData(c,b)})}else{var e=function(a){g.handleGroupRequestCallback(c,b,a)};this.updateGroupMode?this._dataAccessService.UpdateGroup(c,e):this._dataAccessService.ReadGroup(c,e)}a.Common.Log("DEBUG: Data client's updated data.",
a.LogType.Debug)};d.prototype.updateDataRetry=function(c,b){void 0!==this?c==this._readUrl?this.updateData(c,b):a.Common.Log("DEBUG: Data client's Update Data stopped as different read URLs: '"+c+"' vs '"+this._readUrl+"'",a.LogType.Debug):a.Common.Log("ERROR: Data client's Update Data failed due to this being undefined.",a.LogType.Error)};d.prototype.onProjectChanged=function(){this.resetSysTickCount();this.clearPageCache();this.resetIsProjectSettingsDownloaded();this.updateProjectSettings()};d.prototype.handleGroupRequestCallback=
function(c,b,g){var h=this,e=!1;if(void 0!==g.status)if(a.Common.Log("DEBUG: Data client's Update Data response status code: "+g.status,a.LogType.Debug),c==this._readUrl){var f=this._dataPollInterval*this._dataPollIntervalTimeoutMultiplier;this._dataPollTimeElapsed<=f?a.Common.Log("DEBUG: Data client's Update Data poll time (ms) okay: "+this._dataPollTimeElapsed+" vs "+f,a.LogType.Debug):(a.Common.Log("WARNING: Data client's Update Data encountered a data poll timeout (ms): "+this._dataPollTimeElapsed+
" vs "+f,a.LogType.Warning),this._dataAccessStatus=a.DataAccessStatus.DataPollTimeoutWarning);if(g.status===a.DataAccessStatus.OK)if(this.removeDataPollTimer(),void 0!==g.variables){e=!0;f=!1;if(0<g.variables.length&&d.isSysTickCountVariable(g.variables[0].name)){var l=this._sysTickCount;this._sysTickCount=parseInt(g.variables[0].value);var k=isNaN(this._sysTickCount)||isNaN(l),m=0===this._sysTickCount&&0===l,p=this._sysTickCount>l,r=l+this._sysTickCount<l;k||m||p||r?(a.Common.Log("DEBUG: Data client's Update Data Sys Tick Cnt okay: "+
this._sysTickCount+" vs "+l,a.LogType.Debug),f=!0):a.Common.Log("WARNING: Data client's Update Data unexpected Sys Tick Cnt: "+this._sysTickCount+" vs "+l,a.LogType.Warning)}else a.Common.Log("WARNING: Data client's Update Data response unexpectedly missing variable name: "+d.VariableName_SysTickCount,a.LogType.Warning),f=!0;this._dataAccessStatus=g.status;f?b(g.variables):a.Common.Log("WARNING: Data client's Update Data ignored variables information due to old data detected.",a.LogType.Warning);
g=this._dataPollInterval-this._dataPollTimeElapsed;0>g&&(g=0);a.Common.Log("DEBUG: Data client's Update Data poll delay (ms): "+g,a.LogType.Debug);setTimeout(function(){return h.updateDataRetry(c,b)},g)}else a.Common.Log("ERROR: Data client's Update Data failed due to missing variables information.",a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.UpdateDataError;else this._dataRetryCount<this._dataRetryLimit?(g.status===a.DataAccessStatus.ProjectChanged?(a.Common.Log("WARNING: Data client's Update Data retry '"+
this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to Project Changed notification.",a.LogType.Warning),this.onProjectChanged(),this._dataAccessStatus=g.status,this._dataRetryCount=this._dataRetryLimit):g.status===a.DataAccessStatus.AuthorizationError?(a.Common.Log("WARNING: Data client's Update Data retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to Authorization Required error.",a.LogType.Warning),this._dataAccessStatus=g.status,this._dataRetryCount=this._dataRetryLimit):
g.status===a.DataAccessStatus.InvalidGroupIDError?(this.resetSysTickCount(),this._dataAccessStatus=g.status,this._dataRetryCount=this._dataRetryLimit):(this._dataRetryCount+=1,a.Common.Log("WARNING: Data client's Update Data retry '"+this._dataRetryCount+"' of '"+this._dataRetryLimit+"' due to status: "+g.status,a.LogType.Warning)),this._dataAccessStatus!==a.DataAccessStatus.DataPollTimeoutWarning&&(e=!0),g=function(a){h.handleGroupRequestCallback(c,b,a)},this.updateGroupMode?this._dataAccessService.UpdateGroup(c,
g):this._dataAccessService.ReadGroup(c,g)):(a.Common.Log("ERROR: Data client's Update Data failed due to status '"+g.status+"', but retry limit ("+this._dataRetryLimit+") already reached.",a.LogType.Error),this._dataAccessStatus=g.status,this._dataAccessStatus===a.DataAccessStatus.InternalError&&(this._dataAccessStatus=a.DataAccessStatus.UpdateDataError))}else a.Common.Log("DEBUG: Data client's Update Data stopped as different read URLs: '"+c+"' vs '"+this._readUrl+"'",a.LogType.Debug),this.removeDataPollTimer(),
e=!0;else a.Common.Log("ERROR: Data client's Update Data failed due to missing status information.",a.LogType.Error),this._dataAccessStatus=a.DataAccessStatus.UpdateDataError;e||b(null)};d.prototype.stopUpdate=function(c){a.Common.Log("DEBUG: Data client's stopping update ... ",a.LogType.Debug);this._readUrl=null;this.removeDataPollTimer();void 0!==c&&null!==c&&this.unregisterGroup(c);a.Common.Log("DEBUG: Data client's stopped update.",a.LogType.Debug)};d.prototype.writeVariable=function(c,b,g){if(c===
a.WriteRequestSourceType.Constant&&(g=b.parseStrict(g.toString()),null!==g)){a.Common.Log("DEBUG: Data client's writing variables ... ",a.LogType.Debug);b.update(g);g=g.toString();for(var h=null,d=0;d<this._pendingWriteQueue.length;d++){var e=this._pendingWriteQueue[d];if(e.variable.equals(b)){h=e;h.newValue=g;h.sourceType=c;break}}null===h&&(h=new a.WriteRequest(c,b,g),this._pendingWriteQueue.push(h),b.writePendingCount++);a.Common.Log("DEBUG: Data client's wrote variables.",a.LogType.Debug)}};d.prototype.removeDataPollTimer=
function(){void 0!==this._dataPollHandle&&(a.Common.Log("DEBUG: Data client's removing data poll timer for data poll handle: "+this._dataPollHandle,a.LogType.Debug),clearInterval(this._dataPollHandle),a.Common.Log("DEBUG: Data client's clearing data poll handle: "+this._dataPollHandle,a.LogType.Debug),this._dataPollHandle=void 0)};d.prototype.getCurrentTime=function(){return Date.now()};d.VariableName_SysTickCount="PLC_SYS_TICK_CNT";d.DataSourceType_eCLR="eCLR";d.DataSourceType_tsVisit="tsVisit";
d.DataSourceTypesUppercase=[d.DataSourceType_eCLR.toUpperCase(),d.DataSourceType_tsVisit.toUpperCase()];d.ProjectJsonFile="project.json";return d}();a.DataClient=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(){}a.Log=function(a,g){void 0===g&&(g=d.Information);var c="["+(new Date).toString()+"] "+a;switch(g){case d.Debug:this.IsDebugOutputEnabled&&console.debug(c);break;case d.Information:console.log(c);break;case d.Error:console.error(c);break;case d.Warning:console.warn(c)}};a.IsDebugOutputEnabled=!1;return a}();a.Common=e;var d;(function(a){a[a.Debug=0]="Debug";a[a.Information=1]="Information";a[a.Error=2]="Error";a[a.Warning=3]="Warning"})(d=a.LogType||
(a.LogType={}))})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.DisableCaching=function(c){try{return c.setRequestHeader("Cache-Control","no-cache, no-store"),c.msCaching="disabled",c.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),!0}catch(b){return a.Common.Log("ERROR: XhrSupport.DisableCaching) Caught exception: "+b,a.LogType.Error),!1}};d.SetAcceptType=function(c,b){try{return c.setRequestHeader("Accept",b),!0}catch(g){return a.Common.Log("ERROR: XhrSupport.SetAcceptType) Caught exception: "+g,
a.LogType.Error),!1}};d.SetContentType=function(c,b){try{return c.setRequestHeader("Content-Type",b),c.msCaching="disabled",!0}catch(g){return a.Common.Log("ERROR: XhrSupport.SetContentType) Caught exception: "+g,a.LogType.Error),!1}};d.EnableTimeout=function(c,b){try{return c.timeout=b,!0}catch(g){return a.Common.Log("WARNING: XhrSupport.EnableTimeout) Caught exception: "+g,a.LogType.Warning),!1}};d.jsonMimeType="application/json";d.plainTextMimeType="text/plain; charset=utf-8";return d}();a.XhrSupport=
e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){f=f.Hmi||(f.Hmi={});f=f.DataAccessStatus||(f.DataAccessStatus={});f[f.Pending=-1]="Pending";f[f.OK=0]="OK";f[f.DataPollTimeoutWarning=1]="DataPollTimeoutWarning";f[f.NetworkLevelError=2]="NetworkLevelError";f[f.NetworkTimeoutError=3]="NetworkTimeoutError";f[f.InternalError=4]="InternalError";f[f.ExceptionError=5]="ExceptionError";f[f.DownloadScreenError=10]="DownloadScreenError";f[f.RegisterGroupError=11]="RegisterGroupError";f[f.UpdateDataError=12]="UpdateDataError";f[f.InvalidGroupIDError=
13]="InvalidGroupIDError";f[f.AuthorizationError=14]="AuthorizationError";f[f.SessionError=15]="SessionError";f[f.DuplicateStationIDError=16]="DuplicateStationIDError";f[f.LocalProjectChangeError=17]="LocalProjectChangeError";f[f.ProjectChanged=100]="ProjectChanged"})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c,b){void 0!==c&&(this.Name=c);void 0!==b&&(this.Value=b)}Object.defineProperty(a.prototype,"NewData",{get:function(){return this._newData},set:function(a){this._newData=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"Name",{get:function(){return this._name},set:function(a){this._name=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"Value",{get:function(){this.NewData=!1;return this._value},set:function(a){a!==
this._value&&(this._value=a,this.NewData=!0)},enumerable:!0,configurable:!0});return a}();a.VariableData=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b,g){this.useRequestTrackingMode=!1;this.xhrTimeout=1E3;this._serviceStatus=a.DataAccessStatus.OK;void 0!==b&&"ON"===b.toUpperCase()?a.Common.IsDebugOutputEnabled=!0:a.Common.IsDebugOutputEnabled=!1;void 0!==c&&0<c&&(this.xhrTimeout=c);a.Common.Log("DEBUG: Base Data Access service's XHR timeout (ms): "+this.xhrTimeout,a.LogType.Debug);void 0!==g&&(this.stationID=g);a.Common.Log("DEBUG: Base Data Access service's station ID: "+this.stationID,
a.LogType.Debug)}Object.defineProperty(d.prototype,"sessionID",{get:function(){return this._sessionID},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"sessionTimeout",{get:function(){return this._sessionTimeout},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"sessionUrl",{get:function(){return this._sessionUrl},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"status",{get:function(){return this._serviceStatus},enumerable:!0,configurable:!0});
d.prototype.PrepareXhr=function(c,b,g,h){var d=this;try{this.SetStatus(a.DataAccessStatus.Pending);c.onerror=function(a){return d.OnXhrError(a,g,h)};c.ontimeout=function(a){return d.OnXhrTimeout(a,g,h)};var e=!0;void 0!==b&&(e=a.XhrSupport.SetAcceptType(c,b),!1===e&&a.Common.Log("WARNING: Base Data Access service's preparing of XML HTTP Request failed to set the accept MIME type.",a.LogType.Warning));var f=a.XhrSupport.DisableCaching(c);!1===f&&a.Common.Log("WARNING: Base Data Access service's preparing of XML HTTP Request failed to disable caching.",
a.LogType.Warning);var k=a.XhrSupport.EnableTimeout(c,this.xhrTimeout);!1===k&&a.Common.Log("WARNING: Base Data Access service's preparing of XML HTTP Request failed to enable timeout setting.",a.LogType.Warning);this.access_token?c.setRequestHeader("Authorization","Bearer "+this.access_token):a.Common.Log("No access token available for command "+g,a.LogType.Debug);return e&&f&&k}catch(m){return a.Common.Log("ERROR: DataAccessServiceBase.PrepareXhr) Caught exception: "+m,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError),
!1}};d.PrepareStatusCallbackData=function(a){return{status:a}};d.prototype.PrepareStatusCallbackData=function(a){void 0!==a&&this.SetStatus(a);return d.PrepareStatusCallbackData(this.status)};d.PrepareVarCallbackData=function(c,b){var g=[];try{g={name:c,value:b},JSON.stringify(g)}catch(h){a.Common.Log("ERROR: DataAccessServiceBase.PrepareVarCallbackData) Caught exception: "+h,a.LogType.Error),g=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}return g};d.prototype.PrepareVarsCallbackDataSupport=
function(c){var b=[];try{this.SetStatus(a.DataAccessStatus.OK),b={status:this.status,variables:c},JSON.stringify(b)}catch(g){a.Common.Log("ERROR: DataAccessServiceBase.PrepareVarsCallbackDataSupport) Caught exception: "+g,a.LogType.Error),b=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}return b};d.prototype.PrepareGroupRegistrationCallbackData=function(c){var b=[];try{this.SetStatus(a.DataAccessStatus.OK),b={status:this.status,groupIdentifier:c},JSON.stringify(b)}catch(g){a.Common.Log("ERROR: DataAccessServiceBase.PrepareGroupRegistrationCallbackData) Caught exception: "+
g,a.LogType.Error),b=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}return b};d.PrepareSessionCreationCallbackData=function(c,b,g){var h=[];try{h=void 0===g?{status:c,sessionID:b}:{status:c,sessionID:b,timeout:g},JSON.stringify(h)}catch(d){a.Common.Log("ERROR: DataAccessServiceBase.PrepareSessionCreationCallbackData) Caught exception: "+d,a.LogType.Error),h=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}return h};d.PrepareSessionMaintenanceCallbackData=function(a,
b){return d.PrepareSessionCreationCallbackData(a,b,void 0)};d.prototype.SetStatus=function(a){this._serviceStatus=a};d.prototype.OnXhrError=function(c,b,g){var h;try{var d=c.target;a.Common.Log("ERROR: Base Data Access service's XML HTTP Request failed for command '"+b+"' with status code '"+d.status+"' and status text '"+d.statusText+"'.",a.LogType.Error);h=this.PrepareStatusCallbackData(a.DataAccessStatus.NetworkLevelError)}catch(e){a.Common.Log("WARNING: DataAccessServiceBase.OnXhrError) Caught exception: "+
e,a.LogType.Warning),h=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}void 0!==g&&g(h)};d.prototype.OnXhrTimeout=function(c,b,g){var h;try{a.Common.Log("ERROR: Base Data Access service's XML HTTP Request timed out for command: "+b,a.LogType.Error),h=this.PrepareStatusCallbackData(a.DataAccessStatus.NetworkTimeoutError)}catch(d){a.Common.Log("WARNING: DataAccessServiceBase.OnXhrTimeout) Caught exception: "+d,a.LogType.Warning),h=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}void 0!==
g&&g(h)};d["function"]="function";d.forwardSlash="/";d.httpRequestMethod_GET="GET";d.httpRequestMethod_DELETE="DELETE";d.httpRequestMethod_POST="POST";d.httpRequestMethod_PUT="PUT";d.httpRequestReadyState_Unsent=0;d.httpRequestReadyState_Opened=1;d.httpRequestReadyState_HeadersReceived=2;d.httpRequestReadyState_Loading=3;d.httpRequestReadyState_Done=4;d.httpRequestStatus_OK=200;d.httpRequestStatus_Created=201;d.httpRequestStatus_NoContent=204;d.httpRequestStatus_NotModified=304;d.httpRequestStatus_BadRequest=
400;d.httpRequestStatus_Unauthorized=401;d.httpRequestStatus_NotFound=404;d.httpRequestStatus_RequestTimeout=408;d.httpRequestStatus_Conflict=409;d.httpRequestStatus_Gone=410;d.httpRequestStatus_NotImplemented=501;d.httpRequestStatus_BadGateway=502;d.httpRequestStatus_ServiceUnavailable=503;d.httpRequestHeader_Location="Location";d.commandReadGroup="ReadGroup";d.commandRegisterGroup="RegisterGroup";d.commandUnregisterGroup="UnregisterGroup";d.commandUpdateGroup="UpdateGroup";d.commandWriteValues=
"WriteValues";d.commandReadVariables="ReadVariables";d.commandWriteVariables="WriteVariables";return d}();a.DataAccessServiceBase=e;e=function(){return function(a,c){this.id=a;this.location=c}}();a.ServerGroup=e;e=function(){return function(d,c){this.items=[];this.id=d;for(var b in c)this.items.push(new a.VariableData(c[b]))}}();a.LocalGroup=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g,h,e){g=d.call(this,g,h,e)||this;g.runSessionTestsMode=!1;g.useAltVariablesMode=!1;g.useAltGroupMode=!1;g.useAltFormatMode=!1;g.skipSessionAspects=!1;g.skipProjectCrcChecks=!1;g.skipExtendedStatusChecks=!1;g.serverGroups=[];g.localGroupNumber=0;g.localGroups=[];g.isApiSupported=void 0;g.pxcApi=c.pxcApiUrlLatest;g.needsMaintenance=!0;g.needsReassignment=!0;g.nameSessionIDString="sessionID";a.Common.Log("DEBUG: Phoenix Contact Data Access service's constructing ... ",
a.LogType.Debug);b=b?b:a.UrlEx.FormatDataUrl();g.UpdateResourceLocations(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's constructed.",a.LogType.Debug);return g}__extends(c,d);c.prototype.CreateSession=function(b,g,c,d){var e=this;a.Common.Log("DEBUG: Phoenix Contact Data Access service's creating session.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session supplied station ID: "+b,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session supplied session timeout (ms): "+
d,a.LogType.Debug);b=new a.PxcDataCreateSession(this,this.sessionsUrlPrefix,b,d);d=new XMLHttpRequest;d.open(b.httpRequestMethod,b.httpRequestUrl,!0);this.PrepareXhr(d,a.XhrSupport.jsonMimeType,b.name,function(a){c(a);return!1});!1===a.XhrSupport.SetContentType(d,a.XhrSupport.plainTextMimeType)&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Create Session failed to set the content MIME type.",a.LogType.Warning);b.Send(d,function(b,d,f,q){q=e.OnSessionCreated(b,d,f,q);!1===q?(b=e.PrepareStatusCallbackData(b),
a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session prepared reject's callback data status: "+b.status,a.LogType.Debug),c(b)):(b=a.DataAccessServiceBase.PrepareSessionCreationCallbackData(b,d,f),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session prepared resolve's callback data status: "+b.status,a.LogType.Debug),g(b));return q});return!0};c.prototype.OnSessionCreated=function(b,g,c,d){var e=!1;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session status: "+
b,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session session ID: "+g,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session timeout (ms): "+c,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session session location: "+d,a.LogType.Debug);switch(b){case a.DataAccessStatus.ExceptionError:case a.DataAccessStatus.InternalError:case a.DataAccessStatus.SessionError:case a.DataAccessStatus.DuplicateStationIDError:case a.DataAccessStatus.AuthorizationError:case a.DataAccessStatus.ProjectChanged:break;
case a.DataAccessStatus.OK:this.ApplySessionInfo(g,c,d);e=!0;break;default:a.Common.Log("WARNING: Phoenix Contact Data Access service's Create Session unexpected status: "+b,a.LogType.Warning)}this.SetStatus(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session current service status: "+this.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session current session ID: "+this.sessionID,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session current session timeout (ms): "+
this.sessionTimeout,a.LogType.Debug);return e};c.prototype.MaintainSession=function(b,g,c){var d=this;a.Common.Log("DEBUG: Phoenix Contact Data Access service's maintaining session.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session supplied session ID: "+b,a.LogType.Debug);if(b===this.sessionID){b=new a.PxcDataMaintainSession(this,this.sessionUrl,b);var e=new XMLHttpRequest;e.open(b.httpRequestMethod,b.httpRequestUrl,!0);this.PrepareXhr(e,a.XhrSupport.jsonMimeType,
b.name,function(a){c&&c(a);return!1});b.Send(e,function(b,e){var f=d.OnSessionMaintained(b,e);if(!1==f){if(c){var n=d.PrepareStatusCallbackData(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared reject's callback data status: "+n.status,a.LogType.Debug);c(n)}}else g&&(n=a.DataAccessServiceBase.PrepareSessionMaintenanceCallbackData(b,e),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared resolve's callback data status: "+n.status,
a.LogType.Debug),g(n));return f});return!0}a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session unexpected mismatch with current session ID: "+this.sessionID,a.LogType.Warning);b=this.PrepareStatusCallbackData(a.DataAccessStatus.SessionError);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared reject's callback data status: "+b.status,a.LogType.Debug);c(b);return!1};c.prototype.OnSessionMaintained=function(b,g){var c=!1;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session status: "+
b,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session session ID: "+g,a.LogType.Debug);switch(b){case a.DataAccessStatus.ExceptionError:case a.DataAccessStatus.InternalError:case a.DataAccessStatus.ProjectChanged:break;case a.DataAccessStatus.SessionError:this.IsSessionIDAvailable()?(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session cleared session information.",a.LogType.Debug),this.ClearSessionInfo(),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session failed due to session not being found and treating as update data error.",
a.LogType.Debug),this.SetStatus(a.DataAccessStatus.UpdateDataError),c=!0):(a.Common.Log("ERROR: Phoenix Contact Data Access service's Maintain Session unexpectedly missing session ID and treating as internal error.",a.LogType.Error),this.SetStatus(a.DataAccessStatus.InternalError));break;case a.DataAccessStatus.OK:c=!0;break;default:a.Common.Log("WARNING: Phoenix Contact Data Access service's Maintain Session unexpected status: "+b,a.LogType.Warning)}this.SetStatus(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session current service status: "+
this.status,a.LogType.Debug);return c};c.prototype.ReassignSession=function(b,g,c,d,e){var f=this;a.Common.Log("DEBUG: Phoenix Contact Data Access service's reassigning session.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current station ID: "+this.stationID,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current session ID: "+this.sessionID,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current session timeout (ms): "+
this.sessionTimeout,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session old session ID: "+b,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new station ID: "+g,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new session timeout (ms): "+e,a.LogType.Debug);if(b===this.sessionID)return b=new a.PxcDataReassignSession(this,this.sessionUrl,b,g,e),g=new XMLHttpRequest,g.open(b.httpRequestMethod,
b.httpRequestUrl,!0),!1===a.XhrSupport.SetContentType(g,a.XhrSupport.plainTextMimeType)&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Reassign Session failed to set the content MIME type.",a.LogType.Warning),this.PrepareXhr(g,a.XhrSupport.jsonMimeType,b.name,function(a){d(a);return!1}),b.Send(g,function(b,g,e,n){n=f.OnSessionReassigned(b,g,e,n);!1===n?(b=f.PrepareStatusCallbackData(b),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared reject's callback data status: "+
b.status,a.LogType.Debug),d(b)):(b=a.DataAccessServiceBase.PrepareSessionCreationCallbackData(b,g,e),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared resolve's callback data status: "+b.status,a.LogType.Debug),c(b));return n}),!0;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session unexpected mismatch with current session ID: "+this.sessionID,a.LogType.Warning);b=this.PrepareStatusCallbackData(a.DataAccessStatus.SessionError);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared reject's callback data status: "+
b.status,a.LogType.Debug);d(b);return!1};c.prototype.OnSessionReassigned=function(b,g,c,d){var e=!1;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session status: "+b,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new, session ID: "+g,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new, timeout: "+c,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session new, session location: "+
d,a.LogType.Debug);switch(b){case a.DataAccessStatus.ExceptionError:case a.DataAccessStatus.InternalError:case a.DataAccessStatus.DuplicateStationIDError:case a.DataAccessStatus.ProjectChanged:break;case a.DataAccessStatus.SessionError:this.IsSessionIDAvailable()?(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session cleared session information.",a.LogType.Debug),this.ClearSessionInfo(),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session failed due to session not being found and treating as update data error.",
a.LogType.Debug),b=a.DataAccessStatus.UpdateDataError,e=!0):(a.Common.Log("ERROR: Phoenix Contact Data Access service's Reassign Session unexpectedly missing session ID and treating as internal error.",a.LogType.Error),b=a.DataAccessStatus.InternalError);break;case a.DataAccessStatus.OK:this.ApplySessionInfo(g,c,d);e=!0;break;default:a.Common.Log("WARNING: Phoenix Contact Data Access service's Reassign Session unexpected status: "+b,a.LogType.Warning)}this.SetStatus(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current service status: "+
this.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session current session ID: "+this.sessionID,a.LogType.Debug);return e};c.prototype.DeleteSession=function(b,g,c){var d=this;a.Common.Log("DEBUG: Phoenix Contact Data Access service's deleting session.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session session ID: "+b,a.LogType.Debug);if(b===this.sessionID){b=new a.PxcDataDeleteSession(this,this.sessionUrl,b);var e=
new XMLHttpRequest;e.open(b.httpRequestMethod,b.httpRequestUrl,!0);this.PrepareXhr(e,a.XhrSupport.jsonMimeType,b.name,function(a){c(a);return!1});b.Send(e,function(b){var e=d.OnSessionDeleted(b);!1===e?(b=d.PrepareStatusCallbackData(b),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared reject's callback data status: "+b.status,a.LogType.Debug),c(b)):(b=d.PrepareStatusCallbackData(b),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared resolve's callback data status: "+
b.status,a.LogType.Debug),g(b));return e});return!0}a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session unexpected mismatch with current session ID: "+this.sessionID,a.LogType.Warning);b=this.PrepareStatusCallbackData(a.DataAccessStatus.SessionError);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared reject's callback data status: "+b.status,a.LogType.Debug);c(b);return!1};c.prototype.OnSessionDeleted=function(b){var g=!1;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session status: "+
b,a.LogType.Debug);switch(b){case a.DataAccessStatus.ExceptionError:case a.DataAccessStatus.InternalError:break;case a.DataAccessStatus.SessionError:b=a.DataAccessStatus.OK;case a.DataAccessStatus.OK:this.ClearSessionInfo();g=!0;break;default:a.Common.Log("WARNING: Phoenix Contact Data Access service's Delete Session unexpected status: "+b,a.LogType.Warning)}this.SetStatus(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session current service status: "+this.status,a.LogType.Debug);
a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session current session ID: "+this.sessionID,a.LogType.Debug);return g};c.prototype.RegisterGroup=function(b,g){var c=this,d=a.DataAccessServiceBase.commandRegisterGroup;return void 0===this.isApiSupported&&(this.UpdateResourceLocations(this.dataHostBase),void 0===this.isApiSupported&&this.status===a.DataAccessStatus.NetworkTimeoutError)?(d=this.PrepareStatusCallbackData(),g(d),!1):this.QueueCreateSession(function(){return c.RegisterGroup(b,
g)},g)?!0:this.useAltGroupMode?this.RegisterAlternativeGroup(b,d,g):this.RegisterServerGroup(b,d,g)};c.prototype.RegisterServerGroup=function(b,g,c){var d=this,e=new XMLHttpRequest;c&&typeof c===a.DataAccessServiceBase["function"]&&(e.onload=function(a){return d.OnRegisterGroupLoad(a,b,g,c)});e=this.RegisterGroupInternal(e,b,g,c);if(!1===e){var f=this.PrepareStatusCallbackData();c(f)}return e};c.prototype.OnRegisterGroupLoad=function(b,g,c,d){var e=!1,f=a.DataAccessStatus.Pending,k=void 0,m=void 0;
try{var p=b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group received ready state: "+p.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group received status: "+p.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group received response: "+p.response,a.LogType.Debug);if(p.readyState&&p.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(p.status){case a.DataAccessServiceBase.httpRequestStatus_Created:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Created status.",
a.LogType.Debug);var r=JSON.parse(p.response);if(this.CheckProjectCRC(r,c))f=a.DataAccessStatus.ProjectChanged;else if(void 0!==r.id){var m=r.id,u=a.UrlEx.EnsureUrlTrailingForwardSlash(this.groupsUrlPrefix+m),v=p.getResponseHeader(a.DataAccessServiceBase.httpRequestHeader_Location);if(void 0!==v&&null!==v){a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group server group location: "+v,a.LogType.Debug);v.toUpperCase()!==u.toUpperCase()&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Register Group encountered an unexpected location '"+
v+"' for server group: "+m,a.LogType.Warning);var w=r.variables.length,y=g.length;w!==y&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Register Group encountered variables count mistmatch ('"+w+"' vs '"+y+"') for server group: "+m,a.LogType.Warning);e=this.AddServerGroup(m,v);!0===e&&(k=this.PrepareGroupRegistrationCallbackData(m));a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group callback data: "+k,a.LogType.Debug)}else a.Common.Log("WARNING: Phoenix Contact Data Access service's Register Group falling back to local group due to missing location for sever group: "+
m,a.LogType.Warning)}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Register Group failed as missing identifier information.",a.LogType.Error),f=a.DataAccessStatus.InternalError;break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Unauthorized status.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group failed due to group not being authorized and treating as authorization error.",
a.LogType.Debug);f=a.DataAccessStatus.AuthorizationError;e=!0;break;case a.DataAccessServiceBase.httpRequestStatus_NotFound:case a.DataAccessServiceBase.httpRequestStatus_RequestTimeout:case a.DataAccessServiceBase.httpRequestStatus_Gone:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Not Found / Request Timeout / Gone status.",a.LogType.Debug);this.HasExtendedStatus(p.response,c)?f=this.CheckExtendedStatus(p.response,c):this.IsSessionIDAvailable()?(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group cleared session information.",
a.LogType.Debug),this.ClearSessionInfo(),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group failed due to session not being found and treating as register group error.",a.LogType.Debug),f=a.DataAccessStatus.RegisterGroupError,e=!0):(a.Common.Log("ERROR: Phoenix Contact Data Access service's Register Group unexpectedly missing session ID and treating as internal error.",a.LogType.Error),f=a.DataAccessStatus.InternalError);break;case a.DataAccessServiceBase.httpRequestStatus_BadRequest:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Bad Request status.",
a.LogType.Debug);if(this.useAltFormatMode)a.Common.Log("ERROR: Phoenix Contact Data Access service's Register Group unexpectedly failed for alternative, text format mode and treating as internal error.",a.LogType.Error),f=a.DataAccessStatus.InternalError;else return a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group falling back to alternative, text format mode due to default, JSON format mode received Bad Request.",a.LogType.Debug),this.useAltFormatMode=!0,this.RegisterGroupInternal(p,
g,c,d);break;case a.DataAccessServiceBase.httpRequestStatus_NotImplemented:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group detected Not Implemented status.",a.LogType.Debug);case a.DataAccessServiceBase.httpRequestStatus_BadGateway:case a.DataAccessServiceBase.httpRequestStatus_ServiceUnavailable:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group received Bad Gateway / Service Unavailable response: "+p.response,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group failed due to eCLR being unavailable and treating as network timeout.",
a.LogType.Debug);f=a.DataAccessStatus.NetworkTimeoutError;break;default:a.Common.Log("ERROR: PxcDataAccessService.OnRegisterGroupLoad) Unexpected XHR status: "+p.status,a.LogType.Error),f=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.OnRegisterGroupLoad) Unexpected XHR ready state: "+p.readyState,a.LogType.Error),f=a.DataAccessStatus.InternalError}catch(x){a.Common.Log("ERROR: PxcDataAccessService.OnRegisterGroupLoad) Caught exception: "+x,a.LogType.Error),f=a.DataAccessStatus.ExceptionError}k||
(k=this.PrepareStatusCallbackData(f));a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group prepared callback data status: "+k.status,a.LogType.Debug);d(k);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group resulting rc: "+e,a.LogType.Debug);return e};c.prototype.RegisterGroupInternal=function(b,g,h,d){var e=!1;try{a.Common.Log("DEBUG: Phoenix Contact Data Access service's registering group.",a.LogType.Debug);var f=this.groupsUrlPrefix;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group request URL: "+
f,a.LogType.Debug);var k=void 0,m=void 0;if(this.useAltFormatMode)a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group using the alternative, format mode.",a.LogType.Debug),k=a.XhrSupport.plainTextMimeType,m=this.AddSessionIDQuery(c.emptyString),m+=this.GetVariablesDataRequest(g,h,k);else{a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group using the default, format mode.",a.LogType.Debug);var k=a.XhrSupport.jsonMimeType,p=this.CreateSessionIDData(),r=this.GetVariablesDataRequest(g,
h,k),m=c.leftCurlyBraceSymbol+c.spaceSymbolString+p+r+c.spaceSymbolString+c.rightCurlyBraceSymbol;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group prepared group registration data: "+m,a.LogType.Debug);JSON.parse(m)}a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group request body: "+m,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_POST,f,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,h,d);!1===a.XhrSupport.SetContentType(b,k)&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Register Group failed to set the content MIME type.",
a.LogType.Warning);b.send(m);e=!0}catch(u){a.Common.Log("ERROR: PxcDataAccessService.RegisterGroup) Caught exception: "+u,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError)}return e};c.prototype.ReadGroup=function(b,g,c){var d=this,e=a.DataAccessServiceBase.commandReadGroup,f=function(){return d.ReadGroup(b,g,c)};if(this.QueueCreateSession(f,g))return!0;if(this.runSessionTestsMode){if(this.IsSessionIDAvailable()&&this.needsReassignment)return this.needsReassignment=!1,f=this.ReassignSession(this.sessionID,
"99",f,g);if(this.IsSessionIDAvailable()&&this.needsMaintenance)return this.needsMaintenance=!1,f=this.MaintainSession(this.sessionID,f,g);this.needsMaintenance=!0}f=new XMLHttpRequest;g&&typeof g===a.DataAccessServiceBase["function"]&&(f.onload=function(a){return d.OnReadGroupLoad(a,b,e,g,c)});f=this.ReadGroupInternal(f,b,e,g,c);if(!1===f){var k=this.PrepareStatusCallbackData();g(k)}return f};c.prototype.OnReadGroupLoad=function(b,g,c,d,e){var f=!1,k=a.DataAccessStatus.Pending,m=void 0;try{var p=
b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group received XHR ready state: "+p.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group received XHR status: "+p.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group received XHR response: "+p.response,a.LogType.Debug);if(p.readyState&&p.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(p.status){case a.DataAccessServiceBase.httpRequestStatus_OK:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected OK status.",
a.LogType.Debug);m=this.PrepareGroupRequestCallbackData(p.response,c,e);k=m.status;f=!0;break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected Unauthorized status.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group failed due to group not being authorized and treating as authorization error.",a.LogType.Debug);k=a.DataAccessStatus.AuthorizationError;f=!0;break;case a.DataAccessServiceBase.httpRequestStatus_NotFound:case a.DataAccessServiceBase.httpRequestStatus_RequestTimeout:case a.DataAccessServiceBase.httpRequestStatus_Gone:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected Not Found / Request Timeout / Gone status.",
a.LogType.Debug);this.HasExtendedStatus(p.response,c)?k=this.CheckExtendedStatus(p.response,c):(this.IsSessionIDAvailable()?(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group cleared session information.",a.LogType.Debug),this.ClearSessionInfo(),a.Common.Log("WARNING: Phoenix Contact Data Access service's Read Group failed due to group being unavailable and treating as update data error.",a.LogType.Warning),k=a.DataAccessStatus.UpdateDataError):(a.Common.Log("ERROR: Phoenix Contact Data Access service's Read Group failed due to group being unavailable and treating as invalid group ID error for command: "+
c,a.LogType.Error),k=a.DataAccessStatus.InvalidGroupIDError),f=!0);break;case a.DataAccessServiceBase.httpRequestStatus_BadRequest:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group detected Bad Request status.",a.LogType.Debug);if(this.useAltGroupMode&&!this.useAltFormatMode)return a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group falling back to alternative, text format mode due to default, JSON format mode received Bad Request.",a.LogType.Debug),this.useAltFormatMode=
!0,this.ReadGroupInternal(p,g,c,d,e);a.Common.Log("ERROR: Phoenix Contact Data Access service's Read Group unexpectedly failed for default, group mode and/or alternative, text format mode and treating as internal error.",a.LogType.Error);k=a.DataAccessStatus.InternalError;break;case a.DataAccessServiceBase.httpRequestStatus_BadGateway:case a.DataAccessServiceBase.httpRequestStatus_ServiceUnavailable:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group received Bad Gateway / Service Unavailable response: "+
p.response,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group failed due to eCLR being unavailable and treating as network timeout.",a.LogType.Debug);k=a.DataAccessStatus.NetworkTimeoutError;break;default:a.Common.Log("ERROR: PxcDataAccessService.OnReadGroupLoad) Unexpected XHR status = "+p.status,a.LogType.Error),k=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.OnReadGroupLoad) Unexpected XHR ready state: "+p.readyState,a.LogType.Error),
k=a.DataAccessStatus.InternalError}catch(r){a.Common.Log("ERROR: PxcDataAccessService.OnReadGroupLoad) Caught exception: "+r,a.LogType.Error),k=a.DataAccessStatus.ExceptionError}m||(m=this.PrepareStatusCallbackData(k));a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group prepared callback data status: "+m.status,a.LogType.Debug);d(m);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group resulting rc: "+f,a.LogType.Debug);return f};c.prototype.ReadGroupInternal=function(b,
g,c,d,e){e=!1;if(this.useAltGroupMode)g=this.GetGroupVariableNames(g),void 0!==g?(this.ReadVariablesInternal(b,g,c,d),e=!0):this.SetStatus(a.DataAccessStatus.InternalError);else{var f=this.FindServerGroup(g);if(-1!==f)try{a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group found server group: "+g,a.LogType.Debug);var k=this.serverGroups[f].location;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group location: "+k,a.LogType.Debug);var m=this.AddSessionIDQuery(k+
"?");a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Group request URL: "+m,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_GET,m,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,c,d);b.send();e=!0}catch(p){a.Common.Log("ERROR: PxcDataAccessService.ReadGroupInternal) Caught exception: "+p,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError)}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Read Group failed as unable to find server group: "+
g,a.LogType.Error),this.SetStatus(a.DataAccessStatus.InternalError)}return e};c.prototype.UpdateGroup=function(b,g){var c=this,d=a.DataAccessServiceBase.commandUpdateGroup,e=new XMLHttpRequest;g&&typeof g===a.DataAccessServiceBase["function"]&&(e.onload=function(a){return c.OnUpdateGroupLoad(a,d,g,b)});e=this.UpdateGroupInternal(e,b,d,g);if(!1===e){var f=this.PrepareStatusCallbackData();g(f)}return e};c.prototype.OnUpdateGroupLoad=function(b,g,c,d){var e=!1,f=a.DataAccessStatus.Pending,k=void 0;try{var m=
b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group received XHR ready state: "+m.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group received XHR status: "+m.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group received XHR response: "+m.response,a.LogType.Debug);if(m.readyState&&m.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(m.status){case a.DataAccessServiceBase.httpRequestStatus_OK:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group detected OK status.",
a.LogType.Debug);k=this.PrepareGroupRequestCallbackData(m.response,g,!0,d);f=k.status;e=!0;break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group detected Unauthorized status.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group failed due to group not being authorized and treating as authorization error.",a.LogType.Debug);f=a.DataAccessStatus.AuthorizationError;e=!0;break;default:a.Common.Log("ERROR: PxcDataAccessService.OnUpdateGroupLoad) Unexpected XHR status = "+
m.status,a.LogType.Error),f=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.OnUpdateGroupLoad) Unexpected XHR ready state: "+m.readyState,a.LogType.Error),f=a.DataAccessStatus.InternalError}catch(p){a.Common.Log("ERROR: PxcDataAccessService.OnUpdateGroupLoad) Caught exception: "+p,a.LogType.Error),f=a.DataAccessStatus.ExceptionError}k||(k=this.PrepareStatusCallbackData(f));a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group prepared callback data status: "+
k.status,a.LogType.Debug);c(k);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group resulting rc: "+e,a.LogType.Debug);return e};c.prototype.UpdateGroupInternal=function(b,g,c,d){var e=!1;try{a.Common.Log("DEBUG: Phoenix Contact Data Access service's updating group: "+name,a.LogType.Debug);if(this.useAltGroupMode)return this.ReadGroupInternal(b,g,c,d,!0);var f=this.FindServerGroup(g);if(-1!==f){var k=this.serverGroups[f].location;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group location: "+
k,a.LogType.Debug);var m=this.AddSessionIDQuery(k+"?");a.Common.Log("DEBUG: Phoenix Contact Data Access service's Update Group request URL: "+m,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_GET,m,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,c,d);b.send();e=!0}a.Common.Log("ERROR: Phoenix Contact Data Access service's Update Group failed as unable to find server group: "+g,a.LogType.Error);this.SetStatus(a.DataAccessStatus.InternalError)}catch(p){a.Common.Log("ERROR: PxcDataAccessService.UpdateGroupInternal) Caught exception: "+
p,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError)}return e};c.prototype.UnregisterGroup=function(b,g){var c=this,d=a.DataAccessServiceBase.commandUnregisterGroup,e=function(){return c.UnregisterGroup(b,g)};if(this.QueueCreateSession(e,g))return!0;if(this.runSessionTestsMode&&this.IsSessionIDAvailable())return e=this.DeleteSession(this.sessionID,e,g);if(this.useAltGroupMode){a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group removing alternative, local group: "+
b,a.LogType.Debug);this.SetStatus(a.DataAccessStatus.Pending);e=this.RemoveLocalGroup(b);!0===e&&this.SetStatus(a.DataAccessStatus.OK);var f=this.PrepareStatusCallbackData();a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group prepared local group callback data status: "+f.status,a.LogType.Debug);g(f)}else e=new XMLHttpRequest,g&&typeof g===a.DataAccessServiceBase["function"]&&(e.onload=function(a){return c.OnUnregisterGroupLoad(a,b,d,g)}),e=this.UnregisterGroupInternal(e,b,
d,g),!1===e&&(f=this.PrepareStatusCallbackData(),g(f));return e};c.prototype.OnUnregisterGroupLoad=function(b,g,c,d){c=!1;var e=a.DataAccessStatus.Pending;try{var f=b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group received XHR ready state: "+f.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group received XHR status: "+f.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group received XHR response: "+
f.response,a.LogType.Debug);if(f.readyState&&f.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(this.useAltGroupMode||(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group removed 'old' server group ID: "+g,a.LogType.Debug),this.RemoveServerGroup(g)),f.status){case a.DataAccessServiceBase.httpRequestStatus_NoContent:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group detected No Content status.",a.LogType.Debug);e=a.DataAccessStatus.OK;
c=!0;break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group detected Unauthorized status.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group failed due to group not being authorized and treating as authorization error.",a.LogType.Debug);e=a.DataAccessStatus.AuthorizationError;c=!0;break;case a.DataAccessServiceBase.httpRequestStatus_NotFound:case a.DataAccessServiceBase.httpRequestStatus_RequestTimeout:case a.DataAccessServiceBase.httpRequestStatus_Gone:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group detected Not Found / Request Timeout/ Gone status status.",
a.LogType.Debug);this.useAltGroupMode&&!this.useAltVariablesMode?(a.Common.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Local group mode's unexpected XHR status = "+f.status,a.LogType.Error),e=a.DataAccessStatus.InternalError):(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group failed due to server group not being found, but treating as okay.",a.LogType.Debug),e=a.DataAccessStatus.OK,c=!0);break;default:a.Common.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Unexpected XHR status = "+
f.status,a.LogType.Error),e=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Unexpected XHR ready state: "+f.readyState,a.LogType.Error),e=a.DataAccessStatus.InternalError}catch(k){a.Common.Log("ERROR: PxcDataAccessService.OnUnregisterGroupLoad) Caught exception: "+k,a.LogType.Error),e=a.DataAccessStatus.ExceptionError}b=this.PrepareStatusCallbackData(e);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group prepared server group callback data status: "+
b.status,a.LogType.Debug);d(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group resulting rc: "+c,a.LogType.Debug);return c};c.prototype.UnregisterGroupInternal=function(b,g,c,d){var e=!1;c=a.DataAccessServiceBase.commandUnregisterGroup;try{var f=this.FindServerGroup(g);if(-1!==f){a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group deleting server group: "+g,a.LogType.Debug);var k=this.serverGroups[f].location;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group location: "+
k,a.LogType.Debug);var m=this.AddSessionIDQuery(k+"?");a.Common.Log("DEBUG: Phoenix Contact Data Access service's Unregister Group request URL: "+m,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_DELETE,m,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,c,d);b.send();e=!0}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Unregister Group failed for group '"+g+"' as unable to find its server group.",a.LogType.Error),this.SetStatus(a.DataAccessStatus.InternalError)}catch(p){a.Common.Log("ERROR: PxcDataAccessService.UnregisterGroup) Caught exception: "+
p,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError)}return e};c.prototype.ReadVariables=function(b,g){var c=this,d=a.DataAccessServiceBase.commandReadVariables;if(this.QueueCreateSession(function(){return c.ReadVariables(b,g)},g))return!0;var e=new XMLHttpRequest;g&&typeof g===a.DataAccessServiceBase["function"]&&(e.onload=function(a){return c.OnReadVariablesLoad(a,b,d,g)});e=this.ReadVariablesInternal(e,b,d,g);if(!1===e){var f=this.PrepareStatusCallbackData();g(f)}return e};c.prototype.OnReadVariablesLoad=
function(b,g,c,d){var e=!1,f=a.DataAccessStatus.Pending,k=void 0;try{var m=b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables received XHR ready state: "+m.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables received XHR status: "+m.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables received XHR response: "+m.response,a.LogType.Debug);if(m.readyState&&m.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(m.status){case a.DataAccessServiceBase.httpRequestStatus_OK:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected OK status.",
a.LogType.Debug);k=this.PrepareVarsCallbackData(m.response,c);f=k.status;e=!0;break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected Unauthorized status.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables failed due to group not being authorized and treating as authorization error.",a.LogType.Debug);f=a.DataAccessStatus.AuthorizationError;e=!0;break;case a.DataAccessServiceBase.httpRequestStatus_NotFound:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected Not Found status.",
a.LogType.Debug);this.HasExtendedStatus(m.response,c)?f=this.CheckExtendedStatus(m.response,c):(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables failed and treating as update data error.",a.LogType.Debug),f=a.DataAccessStatus.UpdateDataError,e=!0);break;case a.DataAccessServiceBase.httpRequestStatus_BadRequest:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables detected Bad Request status.",a.LogType.Debug);if(this.useAltFormatMode)a.Common.Log("ERROR: Phoenix Contact Data Access service's Read Variables unexpectedly failed for alternative, text format mode and treating as internal error.",
a.LogType.Error),f=a.DataAccessStatus.InternalError;else return a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables falling back to alternative, text format mode due to default, JSON format mode received Bad Request.",a.LogType.Debug),this.useAltFormatMode=!0,this.ReadVariablesInternal(m,g,c,d);break;default:a.Common.Log("ERROR: PxcDataAccessService.OnReadVariablesLoad) Unexpected XHR status = "+m.status,a.LogType.Error),f=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.OnReadVariablesLoad) Unexpected XHR ready state: "+
m.readyState,a.LogType.Error),f=a.DataAccessStatus.InternalError}catch(p){a.Common.Log("ERROR: PxcDataAccessService.OnReadVariablesLoad) Caught exception: "+p,a.LogType.Error),f=a.DataAccessStatus.ExceptionError}k||(k=this.PrepareStatusCallbackData(f));a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables prepared callback data status: "+k.status,a.LogType.Debug);d(k);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables resulting rc: "+e,a.LogType.Debug);return e};
c.prototype.ReadVariablesInternal=function(b,g,d,e){var f=!1;try{var l=void 0,k=void 0;if(this.useAltFormatMode)a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the alternative, format mode.",a.LogType.Debug),l=a.XhrSupport.plainTextMimeType,k=this.AddSessionIDQuery(c.emptyString),k+=this.GetVariablesDataRequest(g,d,l);else{a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the default, format mode.",a.LogType.Debug);var l=a.XhrSupport.jsonMimeType,
m=this.CreateSessionIDData(),p=this.GetVariablesDataRequest(g,d,l),k=c.leftCurlyBraceSymbol+c.spaceSymbolString+m+p+c.spaceSymbolString+c.rightCurlyBraceSymbol;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables prepared read variables data: "+k,a.LogType.Debug);JSON.parse(k);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request body: "+k,a.LogType.Debug)}if(this.useAltVariablesMode){a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the alternative, GET-based mode.",
a.LogType.Debug);var r=this.varsUrlPrefix+c.questionMarkSymbolString+k;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request URL: "+r,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request body: "+k,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_GET,r,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,d,e);b.send()}else a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables using the default, POST-based mode.",
a.LogType.Debug),r=this.varsUrlPrefix,a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request URL: "+r,a.LogType.Debug),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Read Variables request body: "+k,a.LogType.Debug),b.open(a.DataAccessServiceBase.httpRequestMethod_POST,r,!0),this.PrepareXhr(b,a.XhrSupport.jsonMimeType,d,e),!1===a.XhrSupport.SetContentType(b,l)&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Read Variables failed to set the content MIME type.",
a.LogType.Warning),b.send(k);f=!0}catch(u){a.Common.Log("ERROR: PxcDataAccessService.ReadVariablesInternal) Caught exception: "+u,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError)}return f};c.prototype.WriteValues=function(b,g,d){var e=this,f=a.DataAccessServiceBase.commandWriteValues;if(this.QueueCreateSession(function(){return e.WriteValues(b,g,d)},d))return!0;var l=new XMLHttpRequest;d&&typeof d===a.DataAccessServiceBase["function"]&&(l.onload=function(a){return e.OnWriteItemsLoad(a,
f,d)});l=this.WriteItemsInternal(l,c.valueTypeConstant,b,g,f,d);if(!1===l){var k=this.PrepareStatusCallbackData();d(k)}return l};c.prototype.WriteVariables=function(b,g,d,e){var f=this;d=a.DataAccessServiceBase.commandWriteVariables;if(this.QueueCreateSession(function(){return f.WriteValues(b,g,e)},e))return!0;var l=new XMLHttpRequest;e&&typeof e===a.DataAccessServiceBase["function"]&&(l.onload=function(a){return f.OnWriteItemsLoad(a,d,e)});l=this.WriteItemsInternal(l,c.valueTypeVariable,b,g,d,e);
if(!1===l){var k=this.PrepareStatusCallbackData();e(k)}return l};c.prototype.OnWriteItemsLoad=function(b,g,c){var d=!1,e=a.DataAccessStatus.Pending;try{var f=b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items received XHR ready state: "+f.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items received XHR status: "+f.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items received XHR response: "+
f.response,a.LogType.Debug);if(f.readyState&&f.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(f.status){case a.DataAccessServiceBase.httpRequestStatus_OK:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items detected OK status.",a.LogType.Debug);var k=JSON.parse(f.response);this.CheckProjectCRC(k,g)?e=a.DataAccessStatus.ProjectChanged:(e=a.DataAccessStatus.OK,d=!0);break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items detected Unauthorized status.",
a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items failed due to group not being authorized and treating as authorization error.",a.LogType.Debug);e=a.DataAccessStatus.AuthorizationError;d=!0;break;case a.DataAccessServiceBase.httpRequestStatus_NotFound:case a.DataAccessServiceBase.httpRequestStatus_RequestTimeout:case a.DataAccessServiceBase.httpRequestStatus_Gone:if(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items detected Not Found / Request Timeout / Gone status.",
a.LogType.Debug),this.HasExtendedStatus(f.response,g))e=this.CheckExtendedStatus(f.response,g);else if(this.IsSessionIDAvailable()){a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items cleared session information.",a.LogType.Debug);this.ClearSessionInfo();a.Common.Log("ERROR: Phoenix Contact Data Access service's Write Items failed due to session not being found and treating as update data error.",a.LogType.Warning);e=a.DataAccessStatus.UpdateDataError;d=!0;break}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Write Items unexpectedly missing session ID and treating as internal error.",
a.LogType.Warning),e=a.DataAccessStatus.InternalError;default:a.Common.Log("ERROR: PxcDataAccessService.OnWriteItemsLoad) Unexpected XHR status = "+f.status,a.LogType.Error),e=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.OnWriteItemsLoad) Unexpected XHR ready state: "+f.readyState,a.LogType.Error),e=a.DataAccessStatus.InternalError}catch(m){a.Common.Log("ERROR: PxcDataAccessService.OnWriteItemsLoad) Caught exception: "+m,a.LogType.Error),e=a.DataAccessStatus.ExceptionError}b=
this.PrepareStatusCallbackData(e);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items prepared callback data status: "+b.status,a.LogType.Debug);c(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items resulting rc: "+d,a.LogType.Debug);return d};c.prototype.WriteItemsInternal=function(b,g,d,e,f,l){var k=!1;try{if(d.length===e.length){var m=this.varsUrlPrefix;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items request URL: "+m,a.LogType.Debug);
for(var p=a.XhrSupport.jsonMimeType,r=this.CreateSessionIDData(),u=c.DetermineVariablePrefix(d,f),v=c.PrepareVariablePrefixData(d,f,p,u),w=c.doubleQuoteSymbolString+"variables"+c.doubleQuoteSymbolString+c.colonSymbolString+c.spaceSymbolString+c.leftSquareBracket+c.spaceSymbolString,y=0;y<d.length&&d.length===e.length;y++){var x=c.DetermineVariableName(d[y],u,f);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items supplied value '"+e[y]+"' for item: "+x,a.LogType.Debug);var z=e[y];
"string"===typeof z&&(z=z.replace(/^[ ]+/g,c.emptyString));z=c.PrepareJsonString(z,!0);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items writing value '"+z+"' to item: "+x,a.LogType.Debug);w+=c.leftCurlyBraceSymbol+c.spaceSymbolString+c.doubleQuoteSymbolString+"path"+c.doubleQuoteSymbolString+c.colonSymbolString+c.spaceSymbolString+c.doubleQuoteSymbolString+x+c.doubleQuoteSymbolString+c.commaSymbolString+c.spaceSymbolString+c.doubleQuoteSymbolString+"value"+c.doubleQuoteSymbolString+
c.colonSymbolString+c.spaceSymbolString+c.doubleQuoteSymbolString+z+c.doubleQuoteSymbolString+c.commaSymbolString+c.spaceSymbolString+c.doubleQuoteSymbolString+"valueType"+c.doubleQuoteSymbolString+c.colonSymbolString+c.spaceSymbolString+c.doubleQuoteSymbolString+g+c.doubleQuoteSymbolString+c.spaceSymbolString+c.rightCurlyBraceSymbol;y+1!==d.length&&(w+=c.commaSymbolString+c.spaceSymbolString)}var w=w+(c.spaceSymbolString+c.rightSquareBracket),D=c.leftCurlyBraceSymbol+c.spaceSymbolString+r+v+w+c.spaceSymbolString+
c.rightCurlyBraceSymbol;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items prepared write variables data: "+D,a.LogType.Debug);JSON.parse(D);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Write Items request body: "+D,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_PUT,m,!0);this.PrepareXhr(b,p,f,l);!1===a.XhrSupport.SetContentType(b,p)&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Write Items failed to set the content MIME type.",
a.LogType.Warning);b.send(D);k=!0}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Write Items failed due to unequal array sizes: items '"+d.length+"' vs. values '"+e.length+"'",a.LogType.Error),this.SetStatus(a.DataAccessStatus.InternalError)}catch(B){a.Common.Log("ERROR: PxcDataAccessService.WriteItemsInternal) Caught exception: "+B,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError)}return k};c.GetProjectCRC=function(b,g){if(void 0!==b&&void 0!==b.projectCRC)return b.projectCRC;
a.Common.Log("WARNING: Phoenix Contact Data Access service unable to get the project CRC for command: "+g,a.LogType.Warning)};c.GetExtendedStatus=function(b,g){if(void 0!==b&&void 0!==b.error)return b.error;a.Common.Log("WARNING: Phoenix Contact Data Access service unable to get the extended status for command: "+g,a.LogType.Warning)};c.prototype.ApplyProjectCRC=function(b){var g=!1;void 0!==b&&(void 0!==this.projectCRC?this.projectCRC!==b&&(a.Common.Log("INFORMATION: Phoenix Contact Data Access service detected project changed due to different project CRC: '"+
this.projectCRC+"' vs '"+b+"'",a.LogType.Information),this.projectCRC=b,g=!0):this.projectCRC=b);return g};c.prototype.CheckProjectCRC=function(b,g){if(this.skipProjectCrcChecks)return a.Common.Log("DEBUG: Phoenix Contact Data Access service skipped checking the project CRC for command: "+g,a.LogType.Debug),!1;var d=c.GetProjectCRC(b,g);return this.ApplyProjectCRC(d)};c.prototype.HasExtendedStatus=function(b,g){var d=!1;if(this.skipExtendedStatusChecks)a.Common.Log("DEBUG: Phoenix Contact Data Access service skipped finding the extended status for command: "+
g,a.LogType.Debug);else{try{if(b)var e=JSON.parse(b),d=this.HasExtendedStatusSupport(e,g)}catch(f){a.Common.Log("DEBUG: PxcDataAccessService.HasExtendedStatus) Caught exception '"+f+"' for command: "+g,a.LogType.Debug)}d||(this.pxcApi===c.pxcApiUrlUnversioned?a.Common.Log("DEBUG: Phoenix Contact Data Access service unable to find the extended status for command: "+g,a.LogType.Debug):a.Common.Log("WARNING: Phoenix Contact Data Access service unable to find the extended status for command: "+g,a.LogType.Warning))}return d};
c.prototype.HasExtendedStatusSupport=function(a,g){return void 0!==c.GetExtendedStatus(a,g)};c.prototype.CheckExtendedStatusSupport=function(b,g){var d=a.DataAccessStatus.InternalError;if(this.skipExtendedStatusChecks)a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed as skipping enabled for command: "+g,a.LogType.Error);else try{a.Common.Log("DEBUG: Phoenix Contact Data Access service's checking extended status for command: "+g,a.LogType.Debug);var e=c.GetExtendedStatus(b,
g);if(void 0!==e&&void 0!==e.details){var f=e.details;switch(g){case a.DataAccessServiceBase.commandReadGroup:case a.DataAccessServiceBase.commandReadVariables:case a.DataAccessServiceBase.commandRegisterGroup:case a.DataAccessServiceBase.commandWriteValues:case a.DataAccessServiceBase.commandWriteVariables:1!==f.length&&a.Common.Log("WARNING: Phoenix Contact Data Access service's checking of extended status encountered an unexpected number of details: "+f.length,a.LogType.Warning);for(e=0;e<f.length;e++){var l=
f[e];if(void 0!==l&&void 0!==l.domain&&void 0!==l.reason){var k=l.domain,m=l.reason;a.Common.Log("DEBUG: Phoenix Contact Data Access service's checking of extended status received current domain: "+k,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's checking of extended status received current reason: "+m,a.LogType.Debug);switch(k){case c.projectDomain:switch(m){case "unloaded":a.Common.Log("ERROR: Phoenix Contact Data Access service's project unavailable and treating as network timeout error for command: "+
g,a.LogType.Error);d=a.DataAccessStatus.NetworkTimeoutError;break;default:a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+k+"' encountered unexpected reason '"+m+"' and treating as internal error for command: "+g,a.LogType.Error)}break;case c.sessionsDomain:switch(m){case "duplicateSessionID":a.Common.Log("ERROR: Phoenix Contact Data Access service's duplicate session ID and treating as session error for command: "+g,a.LogType.Error);
d=a.DataAccessStatus.SessionError;break;case "invalidSessionID":a.Common.Log("WARNING: Phoenix Contact Data Access service's invalid session ID, but treating as network timeout for command: "+g,a.LogType.Warning);d=a.DataAccessStatus.NetworkTimeoutError;a.Common.Log("DEBUG: Phoenix Contact Data Access service cleared session information for command: "+g,a.LogType.Debug);this.ClearSessionInfo();break;case "serviceUnavailable":a.Common.Log("ERROR: Phoenix Contact Data Access service's session ID unavailable and treating as session error for command: "+
g,a.LogType.Error);d=a.DataAccessStatus.SessionError;break;case "invalidRequest":a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+k+"' encountered invalid request and treating as internal error for command: "+g,a.LogType.Error);break;default:a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+k+"' encountered unexpected reason '"+m+"' and treating as internal error for command: "+
g,a.LogType.Error)}break;case c.groupsDomain:switch(m){case "invalidGroupID":g===a.DataAccessServiceBase.commandRegisterGroup?(a.Common.Log("ERROR: Phoenix Contact Data Access service's invalid group ID and treating as register group error for command: "+g,a.LogType.Error),d=a.DataAccessStatus.RegisterGroupError):(a.Common.Log("ERROR: Phoenix Contact Data Access service's invalid group ID and treating as invalid group ID error for command: "+g,a.LogType.Error),d=a.DataAccessStatus.InvalidGroupIDError);
break;case "invalidRequest":case "missingGroupID":case "missingPaths":a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+k+"' encountered invalid request and treating as internal error for command: "+g,a.LogType.Error);break;default:a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+k+"' encountered unexpected reason '"+m+"' and treating as internal error for command: "+g,a.LogType.Error)}break;
case c.varsDomain:switch(m){case "invalidNames":g===a.DataAccessServiceBase.commandRegisterGroup?(a.Common.Log("ERROR: Phoenix Contact Data Access service's invalid variable names and treating as register group error for command: "+g,a.LogType.Error),d=a.DataAccessStatus.RegisterGroupError):(a.Common.Log("Error: Phoenix Contact Data Access service's invalid variable names and treating as update data error for command: "+g,a.LogType.Error),d=a.DataAccessStatus.UpdateDataError);break;case "invalidRequest":a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+
k+"' encountered invalid request and treating as internal error for command: "+g,a.LogType.Error);break;default:a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to domain '"+k+"' encountered unexpected reason '"+m+"' and treating as internal error for command: "+g,a.LogType.Error)}break;default:a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to unexpected domain '"+k+"' and treating as internal error for command: "+
g,a.LogType.Error);return}}else{a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to invalid details for command: "+g,a.LogType.Error);break}}break;default:a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed due to unexpected command: "+g,a.LogType.Error)}}else a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed as unable to get extended status for command: "+g,a.LogType.Error)}catch(p){a.Common.Log("ERROR: PxcDataAccessService.CheckExtendedStatusSupport) Caught exception: "+
p,a.LogType.Error),d=a.DataAccessStatus.ExceptionError}a.Common.Log("DEBUG: Phoenix Contact Data Access service's checking of extended status resulting data access status: "+d,a.LogType.Debug);return d};c.prototype.CheckExtendedStatus=function(b,g){try{if(b){var c=JSON.parse(b);return this.CheckExtendedStatusSupport(c,g)}a.Common.Log("ERROR: Phoenix Contact Data Access service's checking of extended status failed as unable to get extended status for command: "+g,a.LogType.Error);return a.DataAccessStatus.InternalError}catch(d){return a.Common.Log("ERROR: PxcDataAccessService.CheckExtendedStatus) Caught exception '"+
d+"' for command: "+g,a.LogType.Error),a.DataAccessStatus.ExceptionError}};c.prototype.IsApiSupported=function(){var b=!1,g=new XMLHttpRequest;try{if(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported trying PxC API URL prefix: "+this.pxcApiUrlPrefix,a.LogType.Debug),g.open(a.DataAccessServiceBase.httpRequestMethod_GET,this.pxcApiUrlPrefix,!1),g.send(),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported received XHR ready state: "+g.readyState,a.LogType.Debug),
a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported received XHR status: "+g.status,a.LogType.Debug),a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported received XHR response: "+g.response,a.LogType.Debug),g.readyState&&g.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(g.status){case a.DataAccessServiceBase.httpRequestStatus_OK:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected OK status.",a.LogType.Debug);
this.SetStatus(a.DataAccessStatus.OK);b=!0;break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected Unauthorized status and treating as internal error.",a.LogType.Debug);this.SetStatus(a.DataAccessStatus.InternalError);break;case a.DataAccessServiceBase.httpRequestStatus_NotFound:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected Not Found status, but treating as okay.",
a.LogType.Debug);this.SetStatus(a.DataAccessStatus.OK);break;case a.DataAccessServiceBase.httpRequestStatus_BadGateway:case a.DataAccessServiceBase.httpRequestStatus_ServiceUnavailable:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported detected Bad Gateway / Service Unavailable status.",a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported failed due to API service being unavailable and treating as network timeout.",a.LogType.Debug);
this.SetStatus(a.DataAccessStatus.NetworkTimeoutError);break;default:a.Common.Log("ERROR: PxcDataAccessService.IsApiSupported) Unexpected XHR status = "+g.status,a.LogType.Error),this.SetStatus(a.DataAccessStatus.InternalError)}else a.Common.Log("ERROR: PxcDataAccessService.IsApiSupported) Unexpected XHR ready state: "+g.readyState,a.LogType.Error),this.SetStatus(a.DataAccessStatus.InternalError)}catch(c){"NetworkError"===c.name?(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported failed due to Network Error exception and treating as network timeout.",
a.LogType.Debug),this.SetStatus(a.DataAccessStatus.NetworkTimeoutError)):(a.Common.Log("ERROR: PxcDataAccessService.IsApiSupported) Caught exception: "+c,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError))}return b};c.prototype.UpdateResourceLocations=function(b){this.dataHostBase=b;this.UpdateApiLocation(b);if(!1===this.IsApiSupported()){if(this.status===a.DataAccessStatus.NetworkTimeoutError)return!1;this.isApiSupported=!1;a.Common.Log("DEBUG: Phoenix Contact Data Access service's falling back to legacy, unversioned API.",
a.LogType.Debug);this.pxcApi=c.pxcApiUrlUnversioned;this.UpdateApiLocation(b);a.Common.Log("DEBUG: Phoenix Contact Data Access service's alternative, GET request mode enabled for Read Variables as default, POST request unsupported.",a.LogType.Debug);this.useAltVariablesMode=!0;a.Common.Log("DEBUG: Phoenix Contact Data Access service's alternative, local group mode enabled for Register Group as default, server groups unsupported.",a.LogType.Debug);this.useAltGroupMode=!0;a.Common.Log("DEBUG: Phoenix Contact Data Access service's alternative, text format mode enabled for Read Variables & Register Group as default, JSON format unsupported.",
a.LogType.Debug);this.useAltFormatMode=!0;a.Common.Log("DEBUG: Phoenix Contact Data Access service's skip session aspects enabled as unsupported.",a.LogType.Debug);this.skipSessionAspects=!0;a.Common.Log("DEBUG: Phoenix Contact Data Access service's skip project CRC checks enabled as unsupported.",a.LogType.Debug);this.skipProjectCrcChecks=!0;a.Common.Log("DEBUG: Phoenix Contact Data Access service's skip extended status checks enabled as unsupported.",a.LogType.Debug);this.skipExtendedStatusChecks=
!0}else this.isApiSupported=!0;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Is API Supported state: "+this.isApiSupported,a.LogType.Debug);this.UpdateSessionsLocation();this.UpdateGroupsLocation();this.UpdateVariablesLocation();a.Common.Log("DEBUG: Phoenix Contact Data Access service's data host base: "+this.dataHostBase,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's PxC API URL prefix: "+this.pxcApiUrlPrefix,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's sessions URL prefix: "+
this.sessionsUrlPrefix,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's groups URL prefix: "+this.groupsUrlPrefix,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's vars URL prefix: "+this.varsUrlPrefix,a.LogType.Debug);return!0};c.prototype.UpdateApiLocation=function(b){this.pxcApiUrlPrefix=this.UpdateLocationSupport(b,this.pxcApi);b=void 0!==this.pxcApiUrlPrefix;this.pxcApiUrlPrefix||a.Common.Log("ERROR: Phoenix Contact Data Access service unable to update API URL.",
a.LogType.Error);return b};c.prototype.UpdateSessionsLocation=function(){this.sessionsUrlPrefix=this.UpdateLocationSupport(this.pxcApiUrlPrefix,c.sessionsVirtualDirectory);var b=void 0!==this.sessionsUrlPrefix;b||a.Common.Log("ERROR: Phoenix Contact Data Access service unable to update sessions URL prefix.",a.LogType.Error);return b};c.prototype.UpdateGroupsLocation=function(){this.groupsUrlPrefix=this.UpdateLocationSupport(this.pxcApiUrlPrefix,c.groupsVirtualDirectory);var b=void 0!==this.groupsUrlPrefix;
b||a.Common.Log("ERROR: Phoenix Contact Data Access service unable to update groups URL prefix.",a.LogType.Error);return b};c.prototype.UpdateVariablesLocation=function(){this.varsUrlPrefix=this.UpdateLocationSupport(this.pxcApiUrlPrefix,c.varsVirtualDirectory);var b=void 0!==this.varsUrlPrefix;b||a.Common.Log("ERROR: Phoenix Contact Data Access service unable to update variables URL prefix.",a.LogType.Error);return b};c.prototype.UpdateLocationSupport=function(b,g){var c=new a.UrlEx(b,g);if(c.isValid)return c.url;
a.Common.Log("ERROR: Phoenix Contact Data Access service failed as invalid URL ('"+b+"', '"+g+"'), and treating as internal error.",a.LogType.Error);this.SetStatus(a.DataAccessStatus.InternalError)};c.prototype.QueueCreateSession=function(b,g){if(this.IsStationIDAvailable())return void 0===this.sessionID?this.CreateSession(this.stationID,b,g):!1;a.Common.Log("DEBUG: Phoenix Contact Data Access service skipped Create Session as station ID unavailable.",a.LogType.Debug)};c.prototype.IsStationIDAvailable=
function(){return!this.skipSessionAspects&&c.IsAvailableSupport(this.stationID)};c.prototype.IsSessionIDAvailable=function(){return c.IsAvailableSupport(this.sessionID)};c.IsAvailableSupport=function(a){return void 0===a||a===c.emptyString?!1:!0};c.prototype.ApplySessionInfo=function(b,g,c){this._sessionID=b;this._sessionTimeout=g;this._sessionUrl=c;this.IsSessionIDAvailable()&&(b=a.PxcDataSupport.PrepareSessionUrl(this.sessionsUrlPrefix,b),void 0!==this.sessionUrl?this.sessionUrl.toUpperCase()!==
b.toUpperCase()&&a.Common.Log("WARNING: Phoenix Contact Data Access service's Apply Session Info encountered an unexpected URL '"+this.sessionUrl+"' for session ID: "+this.sessionID,a.LogType.Warning):this._sessionUrl=b)};c.prototype.ClearSessionInfo=function(){this.ApplySessionInfo(void 0,void 0,void 0)};c.prototype.AddSessionIDQuery=function(a){return this.IsSessionIDAvailable()?a+this.nameSessionIDString+c.equalSymbolString+this.sessionID+c.ampersandSymbolString:a};c.prototype.CreateSessionIDData=
function(){return this.IsSessionIDAvailable()?c.doubleQuoteSymbolString+this.nameSessionIDString+c.doubleQuoteSymbolString+c.colonSymbolString+c.spaceSymbolString+c.doubleQuoteSymbolString+this.sessionID+c.doubleQuoteSymbolString+c.commaSymbolString+c.spaceSymbolString:c.emptyString};c.prototype.RegisterAlternativeGroup=function(b,g,c){g=!1;var d=a.DataAccessStatus.Pending,e=void 0;try{this.SetStatus(a.DataAccessStatus.Pending);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Group using the alternative, local group mode.",
a.LogType.Debug);var f=this.GetNewLocalGroupIdentifier();-1===this.FindLocalGroup(f)?(this.AddLocalGroup(f,b),e=this.PrepareGroupRegistrationCallbackData(f),d=e.status,g=!0):(a.Common.Log("ERROR: Phoenix Contact Data Access service's Register Alternative Group failed for local group '"+f+"' as it already exists.",a.LogType.Error),d=a.DataAccessStatus.InternalError)}catch(k){a.Common.Log("ERROR: PxcDataAccessService.RegisterAlternativeGroup) Caught exception: "+k,a.LogType.Error),d=a.DataAccessStatus.ExceptionError}e||
(e=this.PrepareStatusCallbackData(d));a.Common.Log("DEBUG: Phoenix Contact Data Access service's Register Alternative Group prepared local group callback data status: "+e.status,a.LogType.Debug);c(e);return g};c.prototype.GetNewLocalGroupIdentifier=function(){return String(this.localGroupNumber++)};c.prototype.FindServerGroup=function(a){return this.FindGroup(a,this.serverGroups)};c.prototype.FindLocalGroup=function(a){return this.FindGroup(a,this.localGroups)};c.prototype.AddServerGroup=function(b,
g){this.serverGroups.push(new a.ServerGroup(b,g));return!0};c.prototype.AddLocalGroup=function(b,g){this.localGroups.push(new a.LocalGroup(b,g))};c.prototype.RemoveServerGroup=function(a){return this.RemoveGroup(a,this.serverGroups)};c.prototype.RemoveLocalGroup=function(a){return this.RemoveGroup(a,this.localGroups)};c.prototype.RemoveGroup=function(b,g){if(-1!==this.FindGroup(b,g))return g=g.filter(function(a){return a.id!==b}),!0;a.Common.Log("ERROR: Phoenix Contact Data Access service's Remove Group failed for group '"+
b+"' as unable to find it.",a.LogType.Error);this.SetStatus(a.DataAccessStatus.InternalError);return!1};c.prototype.FindGroup=function(a,g){for(var c=-1,d=0;d<g.length;d++)if(g[d].id===a){c=d;break}return c};c.prototype.GetGroupVariableNames=function(b){var g=this.FindLocalGroup(b);if(-1!==g){a.Common.Log("DEBUG: Phoenix Contact Data Access service's Get Group Variable Names found alternative, local group: "+b,a.LogType.Debug);var c=[];this.localGroups[g].items.forEach(function(g){void 0!==g.Name?
c.push(g.Name):a.Common.Log("ERROR: Phoenix Contact Data Access service's Get Group Variable Names failed for local group '"+b+"' as unexpected item name.",a.LogType.Error)},this);return c}a.Common.Log("ERROR: Phoenix Contact Data Access service's Get Group Variable Names failed as unable to find local group: "+b,a.LogType.Error)};c.prototype.FindGroupVariableData=function(a,g){for(var c=-1,d=0;d<this.localGroups[a].items.length;d++)if(this.localGroups[a].items[d].Name===g){c=d;break}return c};c.PrepareVariablePrefixData=
function(b,g,d,e){var f=c.emptyString;b=e?e:c.DetermineVariablePrefix(b,g);switch(d){case a.XhrSupport.jsonMimeType:f+=c.doubleQuoteSymbolString+c.pathPrefixString+c.doubleQuoteSymbolString+c.colonSymbolString+c.spaceSymbolString+c.doubleQuoteSymbolString+b+c.doubleQuoteSymbolString+c.commaSymbolString+c.spaceSymbolString;break;case a.XhrSupport.plainTextMimeType:f+=c.pathPrefixString+c.equalSymbolString+b+c.ampersandSymbolString;break;default:a.Common.Log("ERROR: Phoenix Contact Data Access Service's "+
g+" failed as unexpected MIME type: "+d,a.LogType.Error);return}return f};c.PrepareVarsRequestData=function(b,g,d,e){var f=c.emptyString;e=e?e:c.DetermineVariablePrefix(b,g);for(var l=0;l<b.length;l++){var k=c.DetermineVariableName(b[l],e,g);switch(d){case a.XhrSupport.jsonMimeType:k=c.PrepareJsonString(k,!1);break;case a.XhrSupport.plainTextMimeType:break;default:a.Common.Log("ERROR: Phoenix Contact Data Access Service's "+g+" failed as unexpected MIME type: "+d,a.LogType.Error);return}f+=k;l+1!==
b.length&&(f+=c.commaSymbolString)}return f};c.DetermineVariablePrefix=function(b,g){for(var d=c.emptyString,e=0;e<b.length;e++)if(d===c.emptyString)if(0===b[e].indexOf(c.defaultVariablePrefix_MONAPLUS))d=c.defaultVariablePrefix_MONAPLUS;else if(0===b[e].indexOf(c.defaultVariablePrefix_PLCNEXTRev1))d=c.defaultVariablePrefix_PLCNEXTRev1;else if(0===b[e].indexOf(c.defaultVariablePrefix_PLCNEXTRev2))d=c.defaultVariablePrefix_PLCNEXTRev2;else{a.Common.Log("WARNING: Phoenix Contact Data Access service's "+
g+" encountered an unexpected item variable name: "+b[e],a.LogType.Warning);d=c.emptyString;break}else if(0!==b[e].indexOf(d)){d=c.emptyString;break}a.Common.Log("DEBUG: Phoenix Contact Data Access service's "+g+" determined variable prefix: "+d,a.LogType.Debug);return d};c.DetermineVariableName=function(b,g,d){g!==c.emptyString&&0===b.toUpperCase().indexOf(g.toUpperCase())&&(b=b.substr(g.length));a.Common.Log("DEBUG: Phoenix Contact Data Access service's "+d+" determined variable name: "+b,a.LogType.Debug);
return b};c.prototype.GetVariablesDataRequest=function(b,g,d,e){var f=c.emptyString;d=d?d:a.XhrSupport.plainTextMimeType;f=e?e:c.DetermineVariablePrefix(b,g);e=c.PrepareVariablePrefixData(b,g,d,f);b=c.PrepareVarsRequestData(b,g,d,f);if(void 0!==b)switch(d){case a.XhrSupport.plainTextMimeType:b=c.pathsString+c.equalSymbolString+b;break;case a.XhrSupport.jsonMimeType:b=c.doubleQuoteSymbolString+c.pathsString+c.doubleQuoteSymbolString+c.colonSymbolString+c.spaceSymbolString+c.leftSquareBracket+c.spaceSymbolString+
b+c.spaceSymbolString+c.rightSquareBracket;break;default:a.Common.Log("ERROR: Phoenix Contact Data Access Service's "+g+" failed as unexpected MIME type: "+d,a.LogType.Error);return}else a.Common.Log("ERROR: Phoenix Contact Data Access Service's "+g+" failed as variables names data unexpectedly missing.",a.LogType.Error);f=e+b;a.Common.Log("DEBUG: Phoenix Contact Data Access service's "+g+" resulting variables names data: "+f,a.LogType.Debug);return f};c.PrepareJsonValue=function(a,g){void 0===g&&
(g=!1);return"string"!==typeof a?a:c.PrepareJsonString(a,g)};c.PrepareJsonString=function(a,g){var c=JSON.stringify(a);g&&'"'===c.charAt(0)&&'"'===c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));return c};c.prototype.PrepareVarsCallbackData=function(b,g,c,d){var e=a.DataAccessStatus.Pending,f=void 0;try{void 0===c&&(c=!0);var k=!1;void 0!==d&&(k=!0,a.Common.Log("DEBUG: Phoenix Contact Data Access service's Prepare Variables Callback Data supplied group update name '"+d+"', so enabled group update mode.",
a.LogType.Debug));if(b){var m=JSON.parse(b);if(this.CheckProjectCRC(m,g))e=a.DataAccessStatus.ProjectChanged;else if(b=void 0,void 0!==m.variables?b=m.variables:void 0!==m.length&&0<m.length&&(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Prepare Variables Callback Data using the unnamed variables array as a workaround.",a.LogType.Debug),b=m),void 0!==b){m=[];for(g=0;g<b.length;g++){var p=b[g];if(void 0!==p&&void 0!==p.path&&void 0!==p.value){var r=p.path,u=p.value;if(k){var v;v=this.useAltGroupMode?
this.localGroups:this.serverGroups;var w=this.FindGroup(d,v);if(-1!==w){var y=this.FindGroupVariableData(w,r);if(-1!==y){var x=v[w].items[y];x.Value=u;x.NewData&&m.push(a.DataAccessServiceBase.PrepareVarCallbackData(x.Name,x.Value))}}}else c?m.push(a.DataAccessServiceBase.PrepareVarCallbackData(r,u)):m.push(u)}else{a.Common.Log("ERROR: Phoenix Contact Data Access service's Prepare Variables Callback Data failed as unexpected variable: "+p,a.LogType.Error);e=a.DataAccessStatus.InternalError;m=void 0;
break}}m&&(f=this.PrepareVarsCallbackDataSupport(m))}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Prepare Variables Callback Data failed as missing variables information.",a.LogType.Error),e=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Prepare Variables Callback Data failed as unexpected response: "+b,a.LogType.Error),e=a.DataAccessStatus.InternalError}catch(z){a.Common.Log("ERROR: PxcDataAccessService.PrepareVarsCallbackData) Caught exception: "+
z,a.LogType.Error),e=a.DataAccessStatus.ExceptionError}f||(f=this.PrepareStatusCallbackData(e));return f};c.prototype.PrepareGroupRequestCallbackData=function(b,g,d,e){var f=a.DataAccessStatus.Pending,l=void 0;try{if(void 0===d&&(d=!0),void 0!==e&&a.Common.Log("DEBUG: Phoenix Contact Data Access service's Prepare Group Request Callback Data supplied group update name '"+e+"', so enabled group update mode.",a.LogType.Debug),this.useAltGroupMode)a.Common.Log("DEBUG: Phoenix Contact Data Access service's Prepare Group Request Callback Data using the alternative mode.",
a.LogType.Debug),l=this.PrepareVarsCallbackData(b,g,d,e);else if(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Prepare Group Request Callback Data using the standard mode.",a.LogType.Debug),void 0!==b&&b!==c.emptyString){var k=JSON.parse(b);if(this.CheckProjectCRC(k,g))f=a.DataAccessStatus.ProjectChanged;else{var m;void 0!==k.variablePathPrefix&&(m=k.variablePathPrefix);if(void 0!==k.variables){b=[];for(g=0;g<k.variables.length;g++){var p=k.variables[g];if(void 0!==p&&void 0!==p.path&&
void 0!==p.value){var r=m+p.path,u=p.value;d?b.push(a.DataAccessServiceBase.PrepareVarCallbackData(r,u)):b.push(u)}else{a.Common.Log("ERROR: Phoenix Contact Data Access service's Prepare Group Request Callback Data failed as unexpected variable: "+p,a.LogType.Error);f=a.DataAccessStatus.InternalError;b=void 0;break}}b&&(l=this.PrepareVarsCallbackDataSupport(b))}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Prepare Group Request Callback Data failed as missing variables information.",
a.LogType.Error),f=a.DataAccessStatus.InternalError}}else a.Common.Log("ERROR: Phoenix Contact Data Access service's Prepare Group Request Callback Data failed due to unexpected response: "+b,a.LogType.Error),f=a.DataAccessStatus.InternalError}catch(v){a.Common.Log("ERROR: PxcDataAccessService.PrepareGroupCallbackData) Caught exception: "+v,a.LogType.Error),f=a.DataAccessStatus.ExceptionError}l||(l=this.PrepareStatusCallbackData(f));return l};c.defaultVariablePrefix_MONAPLUS="ProConOS_eCLR.ResGlobalVars.";
c.defaultVariablePrefix_PLCNEXTRev1="Arp.Plc.Eclr/:";c.defaultVariablePrefix_PLCNEXTRev2="Arp.Plc.Eclr/";c.ampersandSymbolString="&";c.colonSymbolString=":";c.commaSymbolString=",";c.leftCurlyBraceSymbol="{";c.rightCurlyBraceSymbol="}";c.leftSquareBracket="[";c.rightSquareBracket="]";c.equalSymbolString="=";c.questionMarkSymbolString="?";c.singleQuoteSymbolString="'";c.doubleQuoteSymbolString='"';c.spaceSymbolString=" ";c.emptyString="";c.pathPrefixString="pathPrefix";c.pathsString="paths";c.valueTypeConstant=
"Constant";c.valueTypeVariable="Variable";c.pxcApiBaseUrl="_pxc_api/";c.pxcApiUrlUnversioned=c.pxcApiBaseUrl;c.pxcApiUrlLatest=c.pxcApiBaseUrl+"api/";c.pxcApiUrlv1_0=c.pxcApiBaseUrl+"v1.0/";c.pxcApiUrlv1_1=c.pxcApiBaseUrl+"v1.1/";c.projectDomain="project";c.sessionsDomain="sessions";c.groupsDomain="groups";c.varsDomain="variables";c.sessionsVirtualDirectory=c.sessionsDomain+"/";c.groupsVirtualDirectory=c.groupsDomain+"/";c.varsVirtualDirectory=c.varsDomain+"/";return c}(a.DataAccessServiceBase);a.PxcDataAccessService=
e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function c(b,g,c,e){this.serviceStatus=a.DataAccessStatus.Pending;this.name="CreateSession";this.httpRequestMethod=a.DataAccessServiceBase.httpRequestMethod_POST;this.sessionID="";this.timeout=0;this.sessionLocation=void 0;this._pxcDataAccessService=b;this._stationID=c;void 0!==e&&(this._timeout=e);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session desired timeout (ms): "+this._timeout,a.LogType.Debug);this.httpRequestUrl=d.PrepareSessionUrl(g,
"");a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session request URL: "+this.httpRequestUrl,a.LogType.Debug);this.httpRequestBody=d.PrepareStationRequestData(this._stationID,this._timeout);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session request body: "+this.httpRequestBody,a.LogType.Debug)}c.prototype.OnLoad=function(b,g){var c=!1;try{var d=b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session received XHR ready state: "+
d.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session received XHR status: "+d.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session received XHR response: "+d.response,a.LogType.Debug);if(d.readyState&&d.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(d.status){case a.DataAccessServiceBase.httpRequestStatus_Created:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session detected Created status.",
a.LogType.Debug);var e=JSON.parse(d.response);if(void 0!==this._pxcDataAccessService&&this._pxcDataAccessService.CheckProjectCRC(e,this.name))this.serviceStatus=a.DataAccessStatus.ProjectChanged;else{this.sessionID=e.sessionID;this.timeout=e.timeout;this.serviceStatus=a.DataAccessStatus.OK;var c=!0,f=d.getResponseHeader(a.DataAccessServiceBase.httpRequestHeader_Location);void 0!==f&&null!==f?(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session session location: "+f,a.LogType.Debug),
this.sessionLocation=f):a.Common.Log("WARNING: Phoenix Contact Data Access service's Create Session falling back to preparing session URL as session location unexpectedly unavailable.",a.LogType.Warning)}break;case a.DataAccessServiceBase.httpRequestStatus_BadRequest:case a.DataAccessServiceBase.httpRequestStatus_NotFound:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session detected Bad Request / Not Found status.",a.LogType.Debug);this.serviceStatus=a.DataAccessStatus.SessionError;
break;case a.DataAccessServiceBase.httpRequestStatus_Conflict:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session detected Conflict status.",a.LogType.Debug);this.serviceStatus=a.DataAccessStatus.DuplicateStationIDError;break;case a.DataAccessServiceBase.httpRequestStatus_Unauthorized:this.serviceStatus=a.DataAccessStatus.AuthorizationError;break;default:a.Common.Log("ERROR: PxcDataAccessService.PxcDataCreateSession.OnLoad) Unexpected XHR status: "+d.status,a.LogType.Error),
this.serviceStatus=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.PxcDataCreateSession.OnLoad) Unexpected XHR ready state: "+d.readyState,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.InternalError}catch(k){a.Common.Log("ERROR: PxcDataAccessService.PxcDataCreateSession.OnLoad) Caught exception: "+k,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.ExceptionError,c=!1}a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session prepared callback service status: "+
this.serviceStatus,a.LogType.Debug);g(this.serviceStatus,this.sessionID,this.timeout,this.sessionLocation);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Create Session resulting rc: "+c,a.LogType.Debug);return c};c.prototype.Send=function(a,g){var c=this;a.onload=function(a){return c.OnLoad(a,g)};a.send(this.httpRequestBody)};return c}();a.PxcDataCreateSession=e;e=function(){function c(b,g,c){this.serviceStatus=a.DataAccessStatus.Pending;this.name="MaintainSession";this.httpRequestMethod=
a.DataAccessServiceBase.httpRequestMethod_POST;this._pxcDataAccessService=b;this.httpRequestUrl=g;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session request URL: "+this.httpRequestUrl,a.LogType.Debug);this._sessionID=c}c.prototype.OnLoad=function(b,g){var c=!1;try{var d=b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session received XHR ready state: "+d.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session received status: "+
d.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session received response: "+d.response,a.LogType.Debug);if(d.readyState&&d.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(d.status){case a.DataAccessServiceBase.httpRequestStatus_OK:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session detected OK status.",a.LogType.Debug);var e=JSON.parse(d.response);void 0!==this._pxcDataAccessService&&this._pxcDataAccessService.CheckProjectCRC(e,
name)?this.serviceStatus=a.DataAccessStatus.ProjectChanged:this._sessionID===e.sessionID?(this.serviceStatus=a.DataAccessStatus.OK,c=!0):a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session unexpected session ID: "+e.sessionID,a.LogType.Warning);break;case a.DataAccessServiceBase.httpRequestStatus_BadRequest:case a.DataAccessServiceBase.httpRequestStatus_NotFound:case a.DataAccessServiceBase.httpRequestStatus_RequestTimeout:case a.DataAccessServiceBase.httpRequestStatus_Gone:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session detected Bad Request / Not Found / Request Timeout / Gone status.",
a.LogType.Debug);this.serviceStatus=a.DataAccessStatus.SessionError;break;default:a.Common.Log("ERROR: PxcDataAccessService.PxcDataMaintainSession.OnLoad) Unexpected XHR status: "+d.status,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.PxcDataMaintainSession.OnLoad) Unexpected XHR ready state: "+d.readyState,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.InternalError}catch(f){a.Common.Log("ERROR: PxcDataAccessService.PxcDataMaintainSession.OnLoad) Caught exception: "+
f,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.ExceptionError,c=!1}a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session prepared callback service status: "+this.serviceStatus,a.LogType.Debug);g(this.serviceStatus,this._sessionID);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session resulting rc: "+c,a.LogType.Debug);return c};c.prototype.Send=function(a,g){var c=this;a.onload=function(a){return c.OnLoad(a,g)};a.send()};return c}();a.PxcDataMaintainSession=
e;e=function(){function c(b,g,c,e,f){this.serviceStatus=a.DataAccessStatus.Pending;this.name="ReassignSession";this.httpRequestMethod=a.DataAccessServiceBase.httpRequestMethod_POST;this.sessionID="";this.sessionLocation=this.timeout=void 0;this._pxcDataAccessService=b;this.httpRequestUrl=g;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session request URL: "+this.httpRequestUrl,a.LogType.Debug);this._oldSessionID=c;this._newStationID=e;void 0!==f&&(this.timeout=f);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session desired timeout (ms): "+
this.timeout,a.LogType.Debug);this.httpRequestBody=d.PrepareStationRequestData(this._newStationID,this.timeout);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session request body: "+this.httpRequestBody,a.LogType.Debug)}c.prototype.OnLoad=function(b,g){var c=!1;try{var d=b.target;if(d.readyState&&d.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done)switch(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session received status: "+d.status,a.LogType.Debug),
a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session received response: "+d.response,a.LogType.Debug),d.status){case a.DataAccessServiceBase.httpRequestStatus_Created:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Maintain Session detected Created status.",a.LogType.Debug);var e=JSON.parse(d.response);if(void 0!==this._pxcDataAccessService&&this._pxcDataAccessService.CheckProjectCRC(e,name))this.serviceStatus=a.DataAccessStatus.ProjectChanged;else{this.sessionID=
e.sessionID;this.timeout=e.timeout;this.serviceStatus=a.DataAccessStatus.OK;var c=!0,f=d.getResponseHeader(a.DataAccessServiceBase.httpRequestHeader_Location);void 0!==f?(a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session session location: "+f,a.LogType.Debug),this.sessionLocation=f):a.Common.Log("WARNING: Phoenix Contact Data Access service's Reassign Session falling back to preparing session URL as session location unexpectedly unavailable.",a.LogType.Warning)}break;case a.DataAccessServiceBase.httpRequestStatus_BadRequest:case a.DataAccessServiceBase.httpRequestStatus_NotFound:case a.DataAccessServiceBase.httpRequestStatus_RequestTimeout:case a.DataAccessServiceBase.httpRequestStatus_Gone:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session detected Bad Request / Not Found / Request Timeout / Gone status.",
a.LogType.Debug);this.serviceStatus=a.DataAccessStatus.SessionError;break;case a.DataAccessServiceBase.httpRequestStatus_Conflict:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session detected Conflict status.",a.LogType.Debug);this.serviceStatus=a.DataAccessStatus.DuplicateStationIDError;break;default:a.Common.Log("ERROR: PxcDataAccessService.PxcDataReassignSession.OnLoad) Unexpected XHR status: "+d.status,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.PxcDataReassignSession.OnLoad) Unexpected XHR ready state: "+
d.readyState,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.InternalError}catch(k){a.Common.Log("ERROR: PxcDataAccessService.PxcDataReassignSession.OnLoad) Caught exception: "+k,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.ExceptionError,c=!1}a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session prepared callback service status: "+this.serviceStatus,a.LogType.Debug);g(this.serviceStatus,this.sessionID,this.timeout,this.sessionLocation);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Reassign Session resulting rc: "+
c,a.LogType.Debug);return c};c.prototype.Send=function(a,g){var c=this;a.onload=function(a){return c.OnLoad(a,g)};a.send(this.httpRequestBody)};return c}();a.PxcDataReassignSession=e;e=function(){function c(b,g,c){this.serviceStatus=a.DataAccessStatus.Pending;this.name="DeleteSession";this.httpRequestMethod=a.DataAccessServiceBase.httpRequestMethod_DELETE;this._pxcDataAccessService=b;this.httpRequestUrl=g;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session request URL: "+this.httpRequestUrl,
a.LogType.Debug);this._sessionID=c}c.prototype.OnLoad=function(b,g){var c=!1;try{var d=b.target;a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session received XHR ready state: "+d.readyState,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session received XHR status: "+d.status,a.LogType.Debug);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session received XHR response: "+d.response,a.LogType.Debug);if(d.readyState&&d.readyState===
a.DataAccessServiceBase.httpRequestReadyState_Done&&d.status)switch(d.status){case a.DataAccessServiceBase.httpRequestStatus_NoContent:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session detected No Content status.",a.LogType.Debug);this.serviceStatus=a.DataAccessStatus.OK;c=!0;break;case a.DataAccessServiceBase.httpRequestStatus_BadRequest:case a.DataAccessServiceBase.httpRequestStatus_NotFound:case a.DataAccessServiceBase.httpRequestStatus_RequestTimeout:case a.DataAccessServiceBase.httpRequestStatus_Gone:a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session detected Bad Request / Not Found / Request Timeout / Gone status.",
a.LogType.Debug);this.serviceStatus=a.DataAccessStatus.SessionError;break;default:a.Common.Log("ERROR: PxcDataAccessService.PxcDataDeleteSession.OnLoad) Unexpected XHR status: "+d.status,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.InternalError}else a.Common.Log("ERROR: PxcDataAccessService.PxcDataDeleteSession.OnLoad) Unexpected XHR ready state: "+d.readyState,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.InternalError}catch(e){a.Common.Log("ERROR: PxcDataAccessService.PxcDataDeleteSession.OnLoad) Caught exception: "+
e,a.LogType.Error),this.serviceStatus=a.DataAccessStatus.ExceptionError,c=!1}a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session prepared callback service status: "+this.serviceStatus,a.LogType.Debug);g(this.serviceStatus);a.Common.Log("DEBUG: Phoenix Contact Data Access service's Delete Session resulting rc: "+c,a.LogType.Debug);return c};c.prototype.Send=function(a,g){var c=this;a.onload=function(a){return c.OnLoad(a,g)};a.send()};return c}();a.PxcDataDeleteSession=e;var d=
function(){function c(){}c.PrepareSessionUrl=function(b,g){return a.UrlEx.EnsureUrlTrailingForwardSlash(b+g)};c.PrepareStationRequestData=function(a,g){var c="stationID="+a;void 0!==g&&(c+="&timeout="+g);return c};return c}();a.PxcDataSupport=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function b(a,g,c,d,e,h,f){this.debug=!1;this.reconnectInterval=5E3;this.timeoutInterval=1E4;this.timedOut=this.forcedClose=!1;this.protocols=[];this.onopen=function(a){this.log("ReconnectingWebSocket","this.onopen",this.url)};this.onclose=function(a){this.log("ReconnectingWebSocket","this.onclose",this.url)};this.onconnecting=function(){this.log("ReconnectingWebSocket","this.onconnecting",this.url)};this.onmessage=function(a){this.log("ReconnectingWebSocket",
"this.onmessage",this.url)};this.onerror=function(a){this.log("ReconnectingWebSocket","this.onerror",this.url)};this.log("ReconnectingWebSocket, ctor, url="+a);this.url=a;this.protocols=f;this.readyState=WebSocket.CONNECTING;null!=g&&(this.onopen=g);null!=c&&(this.onclose=c);null!=d&&(this.onconnecting=d);null!=e&&(this.onmessage=e);null!=h&&(this.onerror=h);this.connect(!1)}b.prototype.connect=function(a){var b=this;this.ws=new WebSocket(this.url,this.protocols);this.onconnecting();this.log("ReconnectingWebSocket, attempt-connect "+
this.url);var g=this.ws,c=setTimeout(function(){b.log("ReconnectingWebSocket, connection-timeout "+b.url);b.timedOut=!0;g.close();b.timedOut=!1},this.timeoutInterval);this.ws.onopen=function(g){clearTimeout(c);b.log("ReconnectingWebSocket, onopen "+b.url);b.readyState=WebSocket.OPEN;a=!1;b.onopen(g)};this.ws.onclose=function(g){clearTimeout(c);b.ws=null;b.forcedClose?(b.readyState=WebSocket.CLOSED,b.onclose(g)):(b.readyState=WebSocket.CONNECTING,b.onconnecting(),a||b.timedOut||(b.log("ReconnectingWebSocket, onclose "+
b.url),b.onclose(g)),setTimeout(function(){b.connect(!0)},b.reconnectInterval))};this.ws.onmessage=function(a){b.onmessage(a)};this.ws.onerror=function(a){b.log("ReconnectingWebSocket, onerror "+b.url+a);b.onerror(a)}};b.prototype.send=function(a){if(this.ws)return this.log("ReconnectingWebSocket, send "+this.url),this.ws.send(a);throw"INVALID_STATE_ERR : Pausing to reconnect websocket";};b.prototype.close=function(){return this.ws?(this.forcedClose=!0,this.ws.close(),!0):!1};b.prototype.refresh=
function(){return this.ws?(this.ws.close(),!0):!1};b.prototype.log=function(g){(this.debug||b.debugAll)&&a.Common.Log(g)};b.debugAll=!0;return b}(),d=function(){function a(){}a.Read=1;a.Write=2;a.SubscribeDataChanged=3;a.UnSubscribeDataChanged=4;a.LoadAllVariables=5;a.LoadResponse=6;a.ReadResponse=7;a.DataChanged=8;return a}(),c=function(){return function(){}}(),b=function(){function a(){this.variables=[];this.variablesMap={}}a.prototype.Length=function(){return this.variables.length};a.prototype.GetVariables=
function(){var a=[];this.variables.forEach(function(b){var g=new c;g.FullName=b.FullName;g.PathExpression=b.PathExpression;g.Value=b.Value;g.ApplicationTypeCode=b.ApplicationTypeCode;g.VariableAcces=b.VariableAcces;a.push(g)});return a};a.prototype.FindVariable=function(a){a=this.variablesMap[a.toUpperCase()];return void 0!==a?a:null};a.prototype.Clear=function(){this.variablesMap={};this.variables=[]};a.prototype.AddVariable=function(a,b,g,d,e){var h=new c;h.FullName=a;h.PathExpression=b;h.Value=
g;h.ApplicationTypeCode=d;h.VariableAcces=e;this.variables.push(h);return this.variablesMap[a.toUpperCase()]=h};return a}(),g=function(){function g(a){this.variables=new b;this.webSocketClient=new e("ws://"+a+":"+g.tsVisitPort+"/",this.onopen.bind(this),null,null,this.onmessage.bind(this),null,g.serviceName)}g.prototype.ReadVariables=function(a){var b=this,g=[];a.forEach(function(a){a=b.variables.FindVariable(a);null!==a?g.push(a.Value):g.push("")});return g};g.prototype.WriteVariables=function(a){for(var b=
[],g=0;g<a.length;g++){var d=this.variables.FindVariable(a[g].name);if(null!=d){var e=new c;e.FullName=d.FullName;e.PathExpression=d.PathExpression;e.Value=a[g].value;e.ApplicationTypeCode=d.ApplicationTypeCode;e.VariableAcces=d.VariableAcces;b.push(e)}}this.write(b)};g.prototype.onopen=function(a){0<this.variables.Length()&&this.variables.Clear();this.loadAllVariables()};g.prototype.onmessage=function(b){b=JSON.parse(b.data);a.Common.Log("receivedData. length="+b.ProcessDatas.length+", Action="+
b.Action);if(b.Action==d.LoadResponse){a.Common.Log("Action.LoadResponse");this.variables.Clear();for(var g=0;g<b.ProcessDatas.length;g++){var c=b.ProcessDatas[g];this.variables.AddVariable(c.FullName,c.PathExpression,c.Value,c.ApplicationTypeCode,c.VariableAcces)}this.subscribe(this.variables.GetVariables())}else if(b.Action==d.DataChanged)for(a.Common.Log("Action.DataChanged"),g=0;g<b.ProcessDatas.length;g++){c=b.ProcessDatas[g];a.Common.Log("variable="+c.FullName+", value="+c.Value);var e=this.variables.FindVariable(c.FullName);
null!=e&&(e.Value=c.Value)}else b.Action==d.UnSubscribeDataChanged?(a.Common.Log("Action.UnSubscribeDataChanged"),this.variables.Clear(),this.loadAllVariables()):b.Action==d.SubscribeDataChanged&&a.Common.Log("Action.SubscribeDataChanged")};g.prototype.fillTransportObject=function(a,b){for(var g=[],c=0;c<b.length;c++)g.push({PathExpression:b[c].PathExpression});return{Action:a,ProcessDatas:g}};g.prototype.fillTransportObjectWithValue=function(a,b){for(var g=[],c=0;c<b.length;c++)g.push({PathExpression:b[c].PathExpression,
Value:b[c].Value});return{Action:a,ProcessDatas:g}};g.prototype.loadAllVariables=function(){var a=this.fillTransportObject(d.LoadAllVariables,[]);this.send(a)};g.prototype.subscribe=function(b){b=this.fillTransportObject(d.SubscribeDataChanged,b);a.Common.Log("subscribe: action="+b.Action+", length="+b.ProcessDatas.length);this.send(b)};g.prototype.unsubscribe=function(b){b=this.fillTransportObject(d.UnSubscribeDataChanged,b);a.Common.Log("unsubscribe: action="+b.Action+", length="+b.ProcessDatas.length);
this.send(b)};g.prototype.write=function(a){a=this.fillTransportObjectWithValue(d.Write,a);this.send(a)};g.prototype.send=function(b){b=JSON.stringify(b);a.Common.Log("send: jsonString="+b);this.webSocketClient.send(b)};g.serviceName="ProcessVariableServiceProvider";g.tsVisitPort=8181;return g}();a.TsVisitProtocol=g})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g,e,q){g=d.call(this,g,e,q)||this;g.useAltGroupMode=!1;g.serverGroups=[];g.localGroupNumber=0;g.localGroups=[];a.Common.Log("DEBUG: Ts Visit Data Access Service's constructing ... ",a.LogType.Debug);b=b?b:a.UrlEx.FormatDataUrl();g.groupsUrlPrefix=a.UrlEx.EnsureUrlTrailingForwardSlash(b+c.groupsVirtualDirectory);a.Common.Log("DEBUG: Ts Visit Data Access Service's groups URL prefix: "+g.groupsUrlPrefix,a.LogType.Debug);g.varsUrlPrefix=a.UrlEx.EnsureUrlTrailingForwardSlash(b+
c.varsVirtualDirectory);g.tsVisitProtocol=new f.Hmi.TsVisitProtocol(window.location.hostname);a.Common.Log("DEBUG: Ts Visit Data Access Service's vars URL prefix: "+g.varsUrlPrefix,a.LogType.Debug);a.Common.Log("DEBUG: Ts Visit Data Access Service's constructed.",a.LogType.Debug);return g}__extends(c,d);c.prototype.CreateSession=function(a,g,c,d){return!1};c.prototype.MaintainSession=function(a,g,c){return!1};c.prototype.ReassignSession=function(a,g,c,d,e){return!1};c.prototype.DeleteSession=function(a,
g,c){return!1};c.prototype.RegisterGroup=function(a,g){var c=this;if(this.useAltGroupMode)return this.RegisterAlternativeGroup(a,g);var d=new XMLHttpRequest;g&&"function"===typeof g&&(d.onload=function(d){return c.OnRegisterGroupLoad(d,a,g)});d=this.RegisterGroupInternal(d,a,g);if(!1===d){var e=this.PrepareStatusCallbackData();g(e)}return d};c.prototype.OnRegisterGroupLoad=function(b,g,c){var d=!1,e=[],f=void 0;try{var k=b.target;if(k.readyState&&k.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&
k.status&&k.status===a.DataAccessServiceBase.httpRequestStatus_Created){a.Common.Log("DEBUG: Ts Visit Data Access Service's Register Group server group response: "+k.response,a.LogType.Debug);var m=JSON.parse(k.response);if(void 0!==m&&void 0!==m.id){var f=m.id,p=this.groupsUrlPrefix+f,r=k.getResponseHeader(a.DataAccessServiceBase.httpRequestHeader_Location);void 0!==r?(a.Common.Log("DEBUG: Ts Visit Data Access Service's Register Group server group location: "+r,a.LogType.Debug),r.toUpperCase()!==
p.toUpperCase()&&a.Common.Log("WARNING: Ts Visit Data Access Service's Register Group encountered an unexpected location '"+r+"' for server group: "+f,a.LogType.Warning),this.serverGroups.push(new a.ServerGroup(f,r)),e=this.PrepareGroupRegistrationCallbackData(f),d=!0):a.Common.Log("WARNING: Ts Visit Data Access Service's Register Group falling back to local group due to missing location for sever group: "+f,a.LogType.Warning)}else a.Common.Log("WARNING: Ts Visit Data Access Service's Register Group falling back to local group due to unexpected server group response: "+
k.response,a.LogType.Warning)}if(!1===d)return this.RegisterAlternativeGroup(g,c)}catch(u){a.Common.Log("ERROR: TsVisitDataAccessService.OnRegisterGroupLoad) Caught exception: "+u,a.LogType.Error),e=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}a.Common.Log("DEBUG: Ts Visit Data Access Service's Register Group prepared callback data status: "+e.status,a.LogType.Debug);c(e);return d};c.prototype.RegisterGroupInternal=function(b,g,d){try{a.Common.Log("DEBUG: Ts Visit Data Access Service's registering group.",
a.LogType.Debug);for(var e=c.pathPrefixString,f=c.defaultVariablePrefix,l=0;l<g.length;l++)if(0!==g[l].indexOf(f)){a.Common.Log("WARNING: Ts Visit Data Access Service's Register Group encountered an unexpected item variable name: "+g[l],a.LogType.Warning);f="";break}for(var e=e+f,k=c.pathsString,l=0;l<g.length;l++){var m=g[l];""!==f&&0===m.toUpperCase().indexOf(f.toUpperCase())&&(m=m.substr(f.length));k+=m;l+1<g.length&&(k+=",")}g=e+"&"+k;b.open(a.DataAccessServiceBase.httpRequestMethod_POST,this.groupsUrlPrefix,
!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,"RegisterGroup",d);!1===a.XhrSupport.SetContentType(b,a.XhrSupport.plainTextMimeType)&&a.Common.Log("WARNING: Ts Visit Data Access Service's Register Group failed to set the content MIME type.",a.LogType.Warning);b.send(g);return!0}catch(p){return a.Common.Log("ERROR: TsVisitDataAccessService.RegisterGroup) Caught exception: "+p,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError),!1}};c.prototype.ReadGroup=function(a,g,c){var d=this,e=
new XMLHttpRequest;g&&"function"===typeof g&&(e.onload=function(a){return d.OnReadGroupLoad(a,g,c)});a=this.ReadGroupInternal(e,a,g,c);!1===a&&(e=this.PrepareStatusCallbackData(),g(e));return a};c.prototype.OnReadGroupLoad=function(b,g,c){var d=!1,e=[];try{var f=b.target;f.readyState&&f.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&f.status&&f.status===a.DataAccessServiceBase.httpRequestStatus_OK?(f=b.target,a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group received OK response: "+
f.response,a.LogType.Debug),e=this.PrepareGroupRequestCallbackData(f.response,c),d=!0):f.readyState&&f.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&f.status&&f.status===a.DataAccessServiceBase.httpRequestStatus_NotFound?(a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group received Not Found response: "+f.response,a.LogType.Debug),a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group failed due to group not being found and treating as update data error.",a.LogType.Debug),
e=this.PrepareStatusCallbackData(a.DataAccessStatus.UpdateDataError)):f.readyState&&f.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&f.status&&f.status===a.DataAccessServiceBase.httpRequestStatus_ServiceUnavailable?(a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group received Service Unavailable response: "+f.response,a.LogType.Debug),a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group failed due to eCLR being unavailable and treating as network timeout.",a.LogType.Debug),
e=this.PrepareStatusCallbackData(a.DataAccessStatus.NetworkTimeoutError)):(a.Common.Log("ERROR: TsVisitDataAccessService.OnReadGroupLoad) Unexpected XHR state: readyState = '"+f.readyState+"', status = '"+f.status+"'",a.LogType.Error),e=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError))}catch(k){a.Common.Log("ERROR: TsVisitDataAccessService.OnReadGroupLoad) Caught exception: "+k,a.LogType.Error),e=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group prepared callback data status: "+
e.status,a.LogType.Debug);g(e);return d};c.prototype.ReadGroupInternal=function(b,g,c,d){if(this.useAltGroupMode){d=this.FindLocalGroup(g);if(-1!==d){a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group found alternative/local group: "+g,a.LogType.Debug);var e=[];this.localGroups[d].items.forEach(function(b){void 0!==b.Name?e.push(b.Name):a.Common.Log("ERROR: Ts Visit Data Access Service's Read Group failed for local group '"+g+"' as unexpected item name.",a.LogType.Error)},this);this.ReadVariablesInternal(b,
e,c);return!0}a.Common.Log("ERROR: Ts Visit Data Access Service's Read Group failed as unable to find local group: "+g,a.LogType.Error);this.SetStatus(a.DataAccessStatus.InternalError);return!1}d=this.FindServerGroup(g);if(-1!==d)try{a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group found server group: "+g,a.LogType.Debug);var f=this.serverGroups[d].location;a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Group location: "+f,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_GET,
f,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,"ReadGroup",c);b.send();return!0}catch(k){return a.Common.Log("ERROR: TsVisitDataAccessService.ReadGroupInternal) Caught exception: "+k,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError),!1}else return a.Common.Log("ERROR: Ts Visit Data Access Service's Read Group failed as unable to find server group: "+g,a.LogType.Error),this.SetStatus(a.DataAccessStatus.InternalError),!1};c.prototype.UpdateGroup=function(a,g){var c=this,d=new XMLHttpRequest;
g&&"function"===typeof g&&(d.onload=function(d){return c.OnUpdateGroupLoad(d,g,a)});d=this.UpdateGroupInternal(d,a,g);if(!1===d){var e=this.PrepareStatusCallbackData();g(e)}return d};c.prototype.OnUpdateGroupLoad=function(b,g,c){var d=!1,e=[];try{var f=b.target;f.readyState&&f.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&f.status&&f.status===a.DataAccessServiceBase.httpRequestStatus_OK?(f=b.target,a.Common.Log("DEBUG: Ts Visit Data Access Service's Update Group response: "+f.response,
a.LogType.Debug),e=this.PrepareGroupRequestCallbackData(f.response,!0,c),d=!0):(a.Common.Log("ERROR: TsVisitDataAccessService.OnUpdateGroupLoad) Unexpected XHR state: readyState = '"+f.readyState+"', status = '"+f.status+"'",a.LogType.Error),e=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError))}catch(k){a.Common.Log("ERROR: TsVisitDataAccessService.OnUpdateGroupLoad) Caught exception: "+k,a.LogType.Error),e=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}a.Common.Log("DEBUG: Ts Visit Data Access Service's Update Group prepared callback data status: "+
e.status,a.LogType.Debug);g(e);return d};c.prototype.UpdateGroupInternal=function(b,g,c){try{a.Common.Log("DEBUG: Ts Visit Data Access Service's updating group: "+name,a.LogType.Debug);if(this.useAltGroupMode)return this.ReadGroupInternal(b,g,c,!0);var d=this.FindServerGroup(g);if(-1!==d){var e=this.serverGroups[d].location;a.Common.Log("DEBUG: Ts Visit Data Access Service's Update Group location: "+e,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_GET,e,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,
"UpdateGroup",c);b.send();return!0}a.Common.Log("ERROR: Ts Visit Data Access Service's Update Group failed as unable to find server group: "+g,a.LogType.Error);this.SetStatus(a.DataAccessStatus.InternalError);return!1}catch(f){return a.Common.Log("ERROR: TsVisitDataAccessService.UpdateGroupInternal) Caught exception: "+f,a.LogType.Error),this.SetStatus(a.DataAccessStatus.ExceptionError),!1}};c.prototype.UnregisterGroup=function(b,g){var c=this;if(this.useAltGroupMode){a.Common.Log("DEBUG: Ts Visit Data Access Service's Unregister Group removing alternative/local group: "+
b,a.LogType.Debug);this.SetStatus(a.DataAccessStatus.Pending);var d=this.RemoveLocalGroup(b);!0===d&&this.SetStatus(a.DataAccessStatus.OK);var e=this.PrepareStatusCallbackData();a.Common.Log("DEBUG: Ts Visit Data Access Service's Unregister Group prepared local group callback data status: "+e.status,a.LogType.Debug);g(e)}else d=new XMLHttpRequest,g&&"function"===typeof g&&(d.onload=function(a){return c.OnUnregisterGroupLoad(a,g)}),d=this.UnregisterGroupInternal(d,b,g),!1===d&&(e=this.PrepareStatusCallbackData(),
g(e));return d};c.prototype.OnUnregisterGroupLoad=function(b,g){var c=!1,d=[];try{var e=b.target;e.readyState&&e.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&e.status&&e.status===a.DataAccessServiceBase.httpRequestStatus_NoContent?(e=b.target,a.Common.Log("DEBUG: Ts Visit Data Access Service's Unregister Group server group response: "+e.response,a.LogType.Debug),d=this.PrepareStatusCallbackData(a.DataAccessStatus.OK),c=!0):(a.Common.Log("ERROR: TsVisitDataAccessService.OnUnregisterGroupLoad) Unexpected XHR state: readyState = '"+
e.readyState+"', status = '"+e.status+"'",a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError))}catch(f){a.Common.Log("ERROR: TsVisitDataAccessService.OnUnregisterGroupLoad) Caught exception: "+f,a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}a.Common.Log("DEBUG: Ts Visit Data Access Service's Unregister Group prepared server group callback data status: "+d.status,a.LogType.Debug);g(d);return c};c.prototype.UnregisterGroupInternal=
function(b,g,c){try{var d=this.FindServerGroup(g);if(-1!==d){a.Common.Log("DEBUG: Ts Visit Data Access Service's Unregistering Group deleting server group: "+g,a.LogType.Debug);var e=this.serverGroups[d].location;a.Common.Log("DEBUG: Ts Visit Data Access Service's Unregister Group location: "+e,a.LogType.Debug);b.open(a.DataAccessServiceBase.httpRequestMethod_DELETE,e,!0);this.PrepareXhr(b,a.XhrSupport.jsonMimeType,"UnregisterGroup",c);b.send();return!0}a.Common.Log("ERROR: Ts Visit Data Access Service's Unregister Group failed for group '"+
g+"' as unable to find its server group.",a.LogType.Error);this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError);return!1}catch(f){return a.Common.Log("ERROR: TsVisitDataAccessService.UnregisterGroup) Caught exception: "+f,a.LogType.Error),this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError),!1}};c.prototype.ReadVariables=function(a,g){var c=this,d=new XMLHttpRequest;g&&"function"===typeof g&&(d.onload=function(d){return c.OnReadVariablesLoad(d,a,g)});d=this.ReadVariablesInternal(d,
a,g);if(!1===d){var e=this.PrepareStatusCallbackData();g(e)}return d};c.prototype.OnReadVariablesLoad=function(b,g,c){g=!1;var d=[];try{var e=b.target;e.readyState&&e.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&e.status&&e.status===a.DataAccessServiceBase.httpRequestStatus_OK?(d=this.PrepareVarsCallbackData(e.response),g=!0):(a.Common.Log("ERROR: TsVisitDataAccessService.OnReadVariablesLoad) Unexpected XHR state: readyState = '"+e.readyState+"', status = '"+e.status+"'",a.LogType.Error),
d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError))}catch(f){a.Common.Log("ERROR: TsVisitDataAccessService.OnReadVariablesLoad) Caught exception: "+f,a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Variables prepared callback data status: "+d.status,a.LogType.Debug);c(d);return g};c.prototype.ReadVariablesInternal=function(b,g,d){try{var e=c.defaultVariablePrefix;for(b=0;b<g.length;b++)if(0!==
g[b].indexOf(e)){a.Common.Log("WARNING: Ts Visit Data Access Service's Read Variables encountered an unexpected variable name: "+g[b],a.LogType.Warning);e="";break}var f=[];for(b=0;b<g.length;b++){var l=g[b];""!==e&&0===l.toUpperCase().indexOf(e.toUpperCase())&&(l=l.substr(e.length));a.Common.Log("DEBUG: Ts Visit Data Access Service's Read Variables item: "+l,a.LogType.Debug);f.push(l)}var k=this.tsVisitProtocol.ReadVariables(f),l=[];for(b=0;b<g.length;b++)l.push({name:e+f[b],value:k[b]});d({status:a.DataAccessStatus.OK,
variables:l});return!0}catch(m){return a.Common.Log("ERROR: TsVisitDataAccessService.ReadVariablesInternal) Caught exception: "+m,a.LogType.Error),this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError),!1}};c.prototype.WriteValues=function(a,g,d){var e=this,f=new XMLHttpRequest;d&&"function"===typeof d&&(f.onload=function(a){return e.OnWriteItemsLoad(a,d)});a=this.WriteItemsInternal(f,c.valueTypeConstant,a,g,d);!1===a&&(g=this.PrepareStatusCallbackData(),d(g));return a};c.prototype.WriteVariables=
function(a,g,d){var e=this,f=new XMLHttpRequest;d&&"function"===typeof d&&(f.onload=function(a){return e.OnWriteItemsLoad(a,d)});a=this.WriteItemsInternal(f,c.valueTypeVariable,a,g,d);!1===a&&(g=this.PrepareStatusCallbackData(),d(g));return a};c.prototype.OnWriteItemsLoad=function(b,g){var c=!1,d=[];try{var e=b.target;e.readyState&&e.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&e.status&&e.status===a.DataAccessServiceBase.httpRequestStatus_OK?(e=b.target,a.Common.Log("DEBUG: Ts Visit Data Access Service's Write Items response: "+
e.response,a.LogType.Debug),d=this.PrepareStatusCallbackData(a.DataAccessStatus.OK),c=!0):(a.Common.Log("ERROR: TsVisitDataAccessService.OnWriteItemsLoad) Unexpected XHR state: readyState = '"+e.readyState+"', status = '"+e.status+"'",a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError))}catch(f){a.Common.Log("ERROR: TsVisitDataAccessService.OnWriteItemsLoad) Caught exception: "+f,a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}a.Common.Log("DEBUG: Ts Visit Data Access Service's Write Items prepared callback data status: "+
d.status,a.LogType.Debug);g(d);return c};c.prototype.WriteItemsInternal=function(b,g,d,e,f){try{if(d.length!=e.length)return a.Common.Log("ERROR: Ts Visit Data Access Service's Write Items failed due to unequal array sizes: items '"+d.length+"' vs. values '"+e.length+"'",a.LogType.Error),this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError),!1;var l=c.defaultVariablePrefix;for(b=0;b<d.length;b++)if(0!==d[b].indexOf(l)){a.Common.Log("WARNING: Ts Visit Data Access Service's Write Items encountered an unexpected variable name: "+
d[b],a.LogType.Warning);l="";break}g=[];for(b=0;b<d.length&&d.length==e.length;b++){var k=d[b];""!==l&&0===k.toUpperCase().indexOf(l.toUpperCase())&&(k=k.substr(l.length));a.Common.Log("Ts Visit Data Access Service's Write Items writing value '"+e[b]+"' to item: "+k,a.LogType.Debug);g.push({name:k,value:e[b]})}this.tsVisitProtocol.WriteVariables(g);d=[];for(b=0;b<g.length;b++)d.push({name:l+g[b].name,value:g[b].value});var m={status:a.DataAccessStatus.OK,variables:d};setTimeout(function(){f(m)},1E3);
return!0}catch(p){return a.Common.Log("ERROR: TsVisitDataAccessService.WriteItemsInternal) Caught exception: "+p,a.LogType.Error),this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError),!1}};c.prototype.RegisterAlternativeGroup=function(b,g){var c=!1,d=[];try{this.SetStatus(a.DataAccessStatus.Pending);this.useAltGroupMode=!0;a.Common.Log("DEBUG: Ts Visit Data Access Service's alternative/local group mode enabled for Register Group as server groups unsupported.",a.LogType.Debug);var e=this.GetNewLocalGroupIdentifier();
-1===this.FindLocalGroup(e)?(this.localGroups.push(new a.LocalGroup(e,b)),d=this.PrepareGroupRegistrationCallbackData(e),c=!0):(a.Common.Log("ERROR: Ts Visit Data Access Service's Register Alternative Group failed for local group '"+e+"' as it already exists.",a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError))}catch(f){a.Common.Log("ERROR: TsVisitDataAccessService.RegisterAlternativeGroup) Caught exception: "+f,a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}a.Common.Log("DEBUG: Ts Visit Data Access Service's Register Alternative Group prepared local group callback data status: "+
d.status,a.LogType.Debug);g(d);return c};c.prototype.GetNewLocalGroupIdentifier=function(){return String(this.localGroupNumber++)};c.prototype.FindServerGroup=function(a){return this.FindGroup(a,this.serverGroups)};c.prototype.FindLocalGroup=function(a){return this.FindGroup(a,this.localGroups)};c.prototype.RemoveServerGroup=function(a){return this.RemoveGroup(a,this.serverGroups)};c.prototype.RemoveLocalGroup=function(a){return this.RemoveGroup(a,this.localGroups)};c.prototype.RemoveGroup=function(b,
g){if(-1!==this.FindGroup(b,g))return g=g.filter(function(a){return a.id!==b}),!0;a.Common.Log("ERROR: Ts Visit Data Access Service's Remove Group failed for group '"+b+"' as unable to find it.",a.LogType.Error);this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError);return!1};c.prototype.FindGroup=function(a,g){for(var c=-1,d=0;d<g.length;d++)if(g[d].id===a){c=d;break}return c};c.prototype.FindGroupVariableData=function(a,g){for(var c=-1,d=0;d<this.localGroups[a].items.length;d++)if(this.localGroups[a].items[d].Name===
g){c=d;break}return c};c.prototype.PrepareVarsCallbackData=function(b,g,c){var d=[];try{void 0===g&&(g=!0);var e=!1;void 0!==c&&(e=!0,a.Common.Log("DEBUG: Ts Visit Data Access Service's Prepare Variables Callback Data supplied group update name '"+c+"', so enabled group update mode.",a.LogType.Debug));if(void 0!==b&&""!==b){var f=JSON.parse(b);if(void 0!==f)if(b=void 0,void 0!==f.variables?b=f.variables:void 0!==f.length&&0<f.length&&(a.Common.Log("DEBUG: Ts Visit Data Access Service's Prepare Variables Callback Data using the unnamed variables array as a workaround.",
a.LogType.Debug),b=f),void 0!==b){for(var f=[],k=0;k<b.length;k++){var m=b[k];if(void 0!==m&&void 0!==m.path&&void 0!==m.value){var p=m.path,r=m.value;if(e){var u;u=this.useAltGroupMode?this.localGroups:this.serverGroups;var v=this.FindGroup(c,u);if(-1!==v){var w=this.FindGroupVariableData(v,p);if(-1!==w){var y=u[v].items[w];y.Value=r;y.NewData&&f.push(a.DataAccessServiceBase.PrepareVarCallbackData(y.Name,y.Value))}}}else g?f.push(a.DataAccessServiceBase.PrepareVarCallbackData(p,r)):f.push(r)}else return a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as unexpected variable: "+
m,a.LogType.Error),this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError)}d=this.PrepareVarsCallbackDataSupport(f)}else a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as missing variables information.",a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError);else a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as unexpected response.",a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError)}else a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Variables Callback Data failed as missing response information.",
a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError)}catch(x){a.Common.Log("ERROR: TsVisitDataAccessService.PrepareVarsCallbackData) Caught exception: "+x,a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}return d};c.prototype.PrepareGroupRequestCallbackData=function(b,g,c){var d=[];try{if(void 0===g&&(g=!0),void 0!==c&&a.Common.Log("DEBUG: Ts Visit Data Access Service's Prepare Group Request Callback Data supplied group update name '"+
c+"', so enabled group update mode.",a.LogType.Debug),this.useAltGroupMode)a.Common.Log("DEBUG: Ts Visit Data Access Service's Prepare Group Request Callback Data using the alternative mode.",a.LogType.Debug),d=this.PrepareVarsCallbackData(b,g,c);else if(a.Common.Log("DEBUG: Ts Visit Data Access Service's Prepare Group Request Callback Data using the standard mode.",a.LogType.Debug),void 0!==b&&""!==b){var e=JSON.parse(b);if(void 0!==e){var f;void 0!==e.variablePathPrefix&&(f=e.variablePathPrefix);
if(void 0!==e.variables){b=[];for(c=0;c<e.variables.length;c++){var k=e.variables[c];if(void 0!==k&&void 0!==k.path&&void 0!==k.value){var m=f+k.path,p=k.value;g?b.push(a.DataAccessServiceBase.PrepareVarCallbackData(m,p)):b.push(p)}else return a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed as unexpected variable: "+k,a.LogType.Error),this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError)}d=this.PrepareVarsCallbackDataSupport(b)}else a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed as missing variables information.",
a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError)}else a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed due to unexpected response: "+b,a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError)}else a.Common.Log("ERROR: Ts Visit Data Access Service's Prepare Group Request Callback Data failed due to missing response.",a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.InternalError)}catch(r){a.Common.Log("ERROR: TsVisitDataAccessService.PrepareGroupCallbackData) Caught exception: "+
r,a.LogType.Error),d=this.PrepareStatusCallbackData(a.DataAccessStatus.ExceptionError)}return d};c.defaultVariablePrefix="ProConOS_eCLR.ResGlobalVars.";c.pathPrefixString="pathPrefix=";c.pathsString="paths=";c.valueTypeConstant="Constant";c.valueTypeVariable="Variable";c.groupsVirtualDirectory="/_pxc_api/groups/";c.varsVirtualDirectory="/_pxc_api/variables/";return c}(a.DataAccessServiceBase);a.TsVisitDataAccessService=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function c(a){this._xhrTimeout=1E3;void 0!==a&&0<a&&(this._xhrTimeout=a)}c.prototype.GetResource=function(a,g,c,d){};c.prototype.PutResource=function(a,g,c,d){};c.prototype.PostResource=function(b,g,c,e){var f=new d(200);f.xhr.onload=function(){c(f,e)};f.xhr.ontimeout=function(){c(f,e)};f.xhr.open("POST",b,!0);f.xhr.timeout=this._xhrTimeout;!1===a.XhrSupport.SetContentType(f.xhr,a.XhrSupport.plainTextMimeType)&&a.Common.Log("WARNING: Failed to set the content MIME type.",
a.LogType.Warning);f.xhr.send(JSON.stringify(g))};return c}();a.XhrRESTService=e;var d=function(){function c(a){this.xhr=new XMLHttpRequest;this._successStatus=200;this._successStatus=a}c.prototype.Succeeded=function(){return this.xhr.readyState===a.DataAccessServiceBase.httpRequestReadyState_Done&&this.status===this._successStatus};Object.defineProperty(c.prototype,"status",{get:function(){return this.xhr.status},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"data",{get:function(){return JSON.parse(this.xhr.responseText)},
enumerable:!0,configurable:!0});c.prototype.getResponseHeader=function(a){return this.xhr.getResponseHeader(a)};return c}();a.XhrResponse=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));(function(f){(function(a){var e=function(){function a(){}a.degToRad=function(a){return 0.017453293*a};a.radToDeg=function(a){return 57.29577951*a};a.PI2=6.283185307;a.PIBY2=1.570796326;return a}();a.MathHelper=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c,b,g,d,e,f){void 0===c&&(c=1);void 0===b&&(b=0);void 0===g&&(g=0);void 0===d&&(d=1);void 0===e&&(e=0);void 0===f&&(f=0);this.m11=c;this.m12=b;this.m21=g;this.m22=d;this.dx=e;this.dy=f}a.prototype.setMatrixFrom=function(a){this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy};a.prototype.equals=function(a,b){return Math.abs(a.m11-this.m11)<b&&Math.abs(a.m12-this.m12)<b&&Math.abs(a.m21-this.m21)<b&&Math.abs(a.m22-
this.m22)<b&&Math.abs(a.dx-this.dx)<b&&Math.abs(a.dy-this.dy)<b};a.prototype.identity=function(){this.m11=this.m22=1;this.m12=this.m21=this.dx=this.dy=0};a.postMultiply=function(a,b,g,d,e,f,l){var k=b*a.m12+g*a.m22,m=d*a.m11+e*a.m21;d=d*a.m12+e*a.m22;e=f*a.m11+l*a.m21+a.dx;f=f*a.m12+l*a.m22+a.dy;a.m11=b*a.m11+g*a.m21;a.m12=k;a.m21=m;a.m22=d;a.dx=e;a.dy=f};a.preMultiply=function(a,b,g,d,e,f,l){var k=a.m11*g+a.m12*e,m=a.m21*b+a.m22*d,p=a.m21*g+a.m22*e;f=a.dx*b+a.dy*d+f;g=a.dx*g+a.dy*e+l;a.m11=a.m11*
b+a.m12*d;a.m12=k;a.m21=m;a.m22=p;a.dx=f;a.dy=g};a.clone=function(c){return new a(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};a.prototype.preMultiply=function(c){a.preMultiply(this,c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};a.prototype.postMultiply=function(c){a.postMultiply(this,c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};a.prototype.transformXY=function(a,b,g){g.x=a*this.m11+b*this.m21+this.dx;g.y=a*this.m12+b*this.m22+this.dy};a.prototype.transformPoint=function(a,b){b.x=a.x*this.m11+a.y*this.m21+this.dx;b.y=a.x*this.m12+
a.y*this.m22+this.dy};a.prototype.transformPoints=function(a,b){for(var g=0,d=a.length;g<d;g++)this.transformPoint(a[g],b[g])};a.prototype.transformPointInPlace=function(a){var b=a.x,g=a.y;a.x=b*this.m11+g*this.m21+this.dx;a.y=b*this.m12+g*this.m22+this.dy};a.prototype.transformPointsInPlace=function(a,b){void 0===b&&(b=a.length);for(var g=0;g<b;g++)this.transformPointInPlace(a[g])};a.prototype.transformRect=function(a,b){b.left=a.left*this.m11+a.left*this.m21+this.dx;b.top=a.top*this.m12+a.top*this.m22+
this.dy;b.right=a.right*this.m11+a.right*this.m21+this.dx;b.bottom=a.bottom*this.m12+a.bottom*this.m22+this.dy};a.prototype.scale=function(a,b){this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};a.prototype.rotate=function(c){var b=Math.cos(c);c=Math.sin(c);a.postMultiply(this,b,c,-c,b,0,0)};a.prototype.translate=function(a,b){this.dx=a*this.m11+b*this.m21+this.dx;this.dy=a*this.m12+b*this.m22+this.dy};a.solve=function(a,b,g){var d=a.m11*a.m22-a.m12*a.m21;1E-4>Math.abs(d)?(g.x=Number.NaN,g.y=Number.NaN):
(g.x=(b.x*a.m22-a.m12*b.y)/d,g.y=(a.m11*b.y-b.x*a.m21)/d)};a.findInverse=function(a,b){var g=a.m11*a.m22-a.m12*a.m21;if(1E-4>Math.abs(g))return!1;g=1/g;b.m11=a.m22*g;b.m12=-a.m12*g;b.m21=-a.m21*g;b.m22=a.m11*g;b.dx=(a.m21*a.dy-a.m22*a.dx)*g;b.dy=(a.m12*a.dx-a.m11*a.dy)*g;return!0};a.prototype.toCssString=function(){var a=new StringBuilder;a.append("matrix(");a.append(this.m11.toString());a.append(", ");a.append(this.m12.toString());a.append(", ");a.append(this.m21.toString());a.append(", ");a.append(this.m22.toString());
a.append(", ");a.append(this.dx.toString());a.append(", ");a.append(this.dy.toString());a.append(")");return a.toString()};return a}();a.Matrix=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c,b,g,d){void 0===c&&(c=0);void 0===b&&(b=0);void 0===g&&(g=0);void 0===d&&(d=0);this.left=c;this.top=b;this.right=g;this.bottom=d}a.prototype.union=function(a){a.left<this.left&&(this.left=a.left);a.top<this.top&&(this.top=a.top);a.right>this.right&&(this.right=a.right);a.bottom>this.bottom&&(this.bottom=a.bottom)};Object.defineProperty(a.prototype,"width",{get:function(){return Math.abs(this.right-this.left)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"height",{get:function(){return Math.abs(this.bottom-this.top)},enumerable:!0,configurable:!0});a.prototype.contains=function(a){return a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};a.prototype.containsXY=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};a.prototype.intersects=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top};a.prototype.translate=function(a,b){this.left+=
a;this.top+=b;this.right+=a;this.bottom+=b};a.prototype.equals=function(a){return 1E-4>Math.abs(this.left-a.left)&&1E-4>Math.abs(this.top-a.top)&&1E-4>Math.abs(this.right-a.right)&&1E-4>Math.abs(this.bottom-a.bottom)};return a}();a.Rect=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b,g,c,e){void 0===b&&(b=Number.MAX_VALUE);void 0===g&&(g=Number.MAX_VALUE);void 0===c&&(c=-Number.MAX_VALUE);void 0===e&&(e=-Number.MAX_VALUE);return a.call(this,b,g,c,e)||this}__extends(c,a);c.prototype.clone=function(){return new c(this.left,this.top,this.right,this.bottom)};c.prototype.reset=function(){this.left=Number.MAX_VALUE;this.right=-Number.MAX_VALUE;this.top=Number.MAX_VALUE;this.bottom=-Number.MAX_VALUE};c.prototype.addPoint=function(a){this.left=
Math.min(a.x,this.left);this.right=Math.max(a.x,this.right);this.top=Math.min(a.y,this.top);this.bottom=Math.max(a.y,this.bottom)};c.prototype.addXY=function(a,g){this.left=Math.min(a,this.left);this.right=Math.max(a,this.right);this.top=Math.min(g,this.top);this.bottom=Math.max(g,this.bottom)};c.prototype.addPoints=function(a){for(var g=0,c=a.length;g<c;g++)this.addPoint(a[g])};return c}(a.Rect);a.Bounds=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c,b){void 0===c&&(c=0);void 0===b&&(b=0);this.x=c;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};a.prototype.getAngle=function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a};a.equals=function(a,b,g){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g};a.distance=function(a,b){return Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))};
a.dotProduct=function(a,b){return a.x*b.x+a.y*b.y};a.prototype.normalize=function(){var a=1/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=a;this.y*=a};a.prototype.scale=function(a,b){this.x*=a;this.y*=b};a.createPointArray=function(c){for(var b=Array(c),g=0;g<c;g++)b[g]=new a;return b};a.origin=new a(0,0);a.i=new a(1,0);a.j=new a(0,1);return a}();a.Point=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c){this.controlPoints=c}a.prototype.interpolate=function(a,b){};a.prototype.differentiate=function(a,b){};a.prototype.differentiate2=function(a,b){};a.prototype.getUnitTangent=function(a,b){};return a}();a.Curve=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();(function(f){(function(a){var e=function(a){function c(b){return a.call(this,b)||this}__extends(c,a);return c}(a.Curve);a.BezierCurve=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b){this._d1=new a.Point;this._d2=new a.Point;this._normal=new a.Point;this._unitNormal=new a.Point;this._evolute=new a.Point;this._offsetSquared=this._offset=0;this._curve=c;this._offset=0.5*b;this._offsetSquared=this._offset*this._offset}d.prototype.getOffsetVectors=function(a,b,g,d){this._curve.differentiate(a,this._d1);this._unitNormal.x=this._normal.x=this._d1.y;this._unitNormal.y=this._normal.y=-this._d1.x;this._unitNormal.normalize();g.x=
this._unitNormal.x*this._offset;g.y=this._unitNormal.y*this._offset;b.x=-g.x;b.y=-g.y;d&&(this._curve.differentiate2(a,this._d2),a=-(this._d1.x*this._d1.x+this._d1.y*this._d1.y)/(this._d1.x*this._d2.y-this._d2.x*this._d1.y),this._evolute.x=this._normal.x*a,this._evolute.y=this._normal.y*a,this._offsetSquared>this._evolute.x*this._evolute.x+this._evolute.y*this._evolute.y&&(0>a?(b.x=this._evolute.x,b.y=this._evolute.y):(g.x=this._evolute.x,g.y=this._evolute.y)))};return d}();a.BezierCurveOffsetter=
e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){var g=a.call(this,b)||this;g.initCoefficients(b);return g}__extends(c,a);c.prototype.initCoefficients=function(a){this._a=a[3].x-3*a[2].x+3*a[1].x-a[0].x;this._b=3*a[2].x-6*a[1].x+3*a[0].x;this._c=3*a[1].x-3*a[0].x;this._d=a[0].x;this._e=a[3].y-3*a[2].y+3*a[1].y-a[0].y;this._f=3*a[2].y-6*a[1].y+3*a[0].y;this._g=3*a[1].y-3*a[0].y;this._h=a[0].y};c.prototype.interpolate=function(a,g){var c=a*a*a,d=a*a;g.x=this._a*c+this._b*d+this._c*a+this._d;
g.y=this._e*c+this._f*d+this._g*a+this._h};c.prototype.differentiate=function(a,g){var c=a*a;g.x=3*this._a*c+2*this._b*a+this._c;g.y=3*this._e*c+2*this._f*a+this._g};c.prototype.differentiate2=function(a,g){g.x=6*this._a*a+2*this._b;g.y=6*this._e*a+2*this._f};c.prototype.getUnitTangent=function(a,g){this.differentiate(a,g);g.normalize()};return c}(a.BezierCurve);a.CubicCurve=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){var g=a.call(this,b)||this;g.initCoefficients(b);return g}__extends(c,a);c.prototype.initCoefficients=function(a){this._a=a[2].x-2*a[1].x+a[0].x;this._b=2*a[1].x-2*a[0].x;this._c=a[0].x;this._d=a[2].y-2*a[1].y+a[0].y;this._e=2*a[1].y-2*a[0].y;this._f=a[0].y};c.prototype.interpolate=function(a,g){var c=a*a;g.x=this._a*c+this._b*a+this._c;g.y=this._d*c+this._e*a+this._f};c.prototype.differentiate=function(a,g){g.x=2*this._a*a+this._b;g.y=2*this._d*
a+this._e};c.prototype.differentiate2=function(a,g){g.x=2*this._a;g.y=2*this._d};c.prototype.getUnitTangent=function(a,g){this.differentiate(a,g);g.normalize()};return c}(a.BezierCurve);a.QuadraticCurve=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){var g=d.call(this,b)||this;g._slope=new a.Point;g._slope.x=b[1].x-b[0].x;g._slope.y=b[1].y-b[0].y;g._slope.normalize();return g}__extends(c,d);c.prototype.interpolate=function(a,g){g.x=(1-a)*this.controlPoints[0].x+a*this.controlPoints[1].x;g.y=(1-a)*this.controlPoints[0].y+a*this.controlPoints[1].y};c.prototype.differentiate=function(a,g){g.x=0;g.y=0};c.prototype.differentiate2=function(a,g){g.x=0;g.y=0};c.prototype.getUnitTangent=function(a,
g){g.x=this._slope.x;g.y=this._slope.y};return c}(a.Curve);a.LineCurve=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(){this._range=this._numSamples=0}Object.defineProperty(a.prototype,"numSamples",{get:function(){return this._numSamples},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"range",{get:function(){return this._max-this._min},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"mean",{get:function(){return 0<this._numSamples?this._newMean:0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"variance",{get:function(){return 1<this._numSamples?this._newVariance/(this._numSamples-1):0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"standardDeviation",{get:function(){return Math.sqrt(this.variance)},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._numSamples=
0;this._max=-Number.MAX_VALUE;this._min=Number.MAX_VALUE};a.prototype.push=function(a){this._numSamples++;1===this._numSamples?(this._oldMean=this._newMean=a,this._oldVariance=0,this._max=this._min=a):(this._newMean=this._oldMean+(a-this._oldMean)/this._numSamples,this._newVariance=this._oldVariance+(a-this._oldMean)*(a-this._newMean),this._oldMean=this._newMean,this._oldVariance=this._newVariance,a<this._min&&(this._min=a),a>this._max&&(this._max=a))};return a}();a.Statistics=e})(f.Hmi||(f.Hmi={}))})(Pxc||
(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b){this.curve=null;this.centerBounds=new a.Bounds;this.strokedBounds=new a.Bounds;this.outerOffsetPoints=this.innerOffsetPoints=null;this.start=c;this.end=b}Object.defineProperty(d.prototype,"hasOffsetCurve",{get:function(){return null!=this.innerOffsetPoints&&null!=this.outerOffsetPoints},enumerable:!0,configurable:!0});d.prototype.approximateStroke=function(a){};d.createSquareStartCap=function(c,b,g){b*=0.5;var d=new a.Point;c.curve.interpolate(0,d);
g=new a.Point;c.curve.getUnitTangent(0,g);var e=new a.Point(g.y,-g.x);e.scale(b,b);var f=new a.Point;f.x=d.x+e.x;f.y=d.y+e.y;a.Point.equals(c.outerOffsetPoints[0],f,1E-4)?f=c.outerOffsetPoints[0]:(c.outerOffsetPoints.unshift(f),c.strokedBounds.addPoint(f));var l=new a.Point;l.x=f.x-b*g.x;l.y=f.y-b*g.y;c.outerOffsetPoints.unshift(l);c.strokedBounds.addPoint(l);f=new a.Point;f.x=d.x-e.x;f.y=d.y-e.y;a.Point.equals(c.innerOffsetPoints[0],f,1E-4)?f=c.innerOffsetPoints[0]:(c.innerOffsetPoints.unshift(f),
c.strokedBounds.addPoint(f));d=new a.Point;d.x=f.x-b*g.x;d.y=f.y-b*g.y;c.innerOffsetPoints.unshift(d);c.strokedBounds.addPoint(d)};d.createSquareEndCap=function(c,b){var g=0.5*b,d=new a.Point;c.curve.interpolate(1,d);var e=new a.Point;c.curve.getUnitTangent(1,e);var f=new a.Point(e.y,-e.x);f.scale(g,g);var l=new a.Point;l.x=d.x+f.x;l.y=d.y+f.y;a.Point.equals(c.outerOffsetPoints[c.outerOffsetPoints.length-1],l,1E-4)?l=c.outerOffsetPoints[c.outerOffsetPoints.length-1]:(c.outerOffsetPoints.push(l),c.strokedBounds.addPoint(l));
var k=new a.Point;k.x=l.x+g*e.x;k.y=l.y+g*e.y;c.outerOffsetPoints.push(k);c.strokedBounds.addPoint(k);l=new a.Point;l.x=d.x-f.x;l.y=d.y-f.y;a.Point.equals(c.innerOffsetPoints[c.innerOffsetPoints.length-1],l,1E-4)?l=c.innerOffsetPoints[c.innerOffsetPoints.length-1]:(c.innerOffsetPoints.push(l),c.strokedBounds.addPoint(l));d=new a.Point;d.x=l.x+g*e.x;d.y=l.y+g*e.y;c.innerOffsetPoints.push(d);c.strokedBounds.addPoint(d)};d.createMiterPoint=function(c,b,g,d){var e=new a.Point;c.curve.getUnitTangent(1,
e);var f=new a.Point;b.curve.getUnitTangent(0,f);var l=Math.atan2(e.y,e.x);0>l&&(l+=2*Math.PI);var k=Math.atan2(f.y,f.x);0>k&&(k+=2*Math.PI);l=k-l;0>l&&(l+=2*Math.PI);if(0.001<Math.abs(l)){0<=l&&l<Math.PI?(l=c.outerOffsetPoints[c.outerOffsetPoints.length-1],k=b.outerOffsetPoints[0],b=c.outerOffsetPoints):(l=c.innerOffsetPoints[c.innerOffsetPoints.length-1],k=b.innerOffsetPoints[0],b=c.innerOffsetPoints);var f=new a.Matrix(e.x,f.x,e.y,f.y),k=new a.Point(k.x-l.x,k.y-l.y),m=new a.Point;a.Matrix.solve(f,
k,m);isNaN(m.x)||isNaN(m.y)||(e=new a.Point(l.x+m.x*e.x,l.y+m.y*e.y),f=new a.Point,c.curve.interpolate(1,f),a.Point.distance(f,e)/(0.5*g)<=d&&(b.push(e),c.strokedBounds.addPoint(e)))}};return d}();a.PathSegment=e;e=function(){function d(){}d.createPathSegment=function(c,b){var g=void 0;void 0!=b.Type&&(g=a.Parser.getString(b.Type));switch(g){case "CubicBezierPathSegment":return a.CubicSegment.create(c,b);case "LinePathSegment":return a.LineSegment.create(c,b);case "QuadraticBezierPathSegment":return a.QuadraticSegment.create(c,
b)}};return d}();a.PathSegmentFactory=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(a,g){var c=d.call(this,a,g)||this;c.maxOffsetPoints=50;return c}__extends(c,d);c.prototype.approximateStroke=function(b){var g=new a.Point,c=new a.Point,d=new a.Point;this.centerBounds.reset();this.strokedBounds.reset();this.estimatePointCount(b);b=new a.BezierCurveOffsetter(this.curve,b);this.innerOffsetPoints=[];this.outerOffsetPoints=[];for(var e=0;e<this.maxOffsetPoints;e++){var f=e/(this.maxOffsetPoints-1);this.curve.interpolate(f,g);b.getOffsetVectors(f,
c,d,!0);f=new a.Point(g.x+d.x,g.y+d.y);this.outerOffsetPoints.push(f);var k=new a.Point(g.x+c.x,g.y+c.y);this.innerOffsetPoints.push(k);this.centerBounds.addPoint(g);this.strokedBounds.addPoint(f);this.strokedBounds.addPoint(k)}this.strokedBounds.union(this.centerBounds)};c.prototype.estimatePointCount=function(b){for(var g=0,c=0;c<this.curve.controlPoints.length-1;c++)g+=a.Point.distance(this.curve.controlPoints[c],this.curve.controlPoints[c+1]);g=Math.sqrt(g*g+1);this.maxOffsetPoints=10+Math.floor(b/
8)+Math.ceil(g/100)};return c}(a.PathSegment);a.BezierSegment=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g){var c=d.call(this,b,g)||this;c.curve=new a.LineCurve([c.start,c.end]);return c}__extends(c,d);c.prototype.approximateStroke=function(a){this.centerBounds.reset();this.strokedBounds.reset();this.innerOffsetPoints=[];this.outerOffsetPoints=[];a*=0.5;for(var g=new f.Hmi.Point,c=new f.Hmi.Point,d=0;1>=d;d++){var e=new f.Hmi.Point;this.curve.interpolate(d,e);this.curve.getUnitTangent(d,g);c.x=a*g.y;c.y=a*-g.x;var l=new f.Hmi.Point(e.x+c.x,e.y+
c.y);this.outerOffsetPoints.push(l);var k=new f.Hmi.Point(e.x-c.x,e.y-c.y);this.innerOffsetPoints.push(k);this.centerBounds.addPoint(e);this.strokedBounds.addPoint(k);this.strokedBounds.addPoint(l)}this.strokedBounds.union(this.centerBounds)};c.create=function(b,g){var d=a.Parser.getPoint(g.End);return new c(b,d)};return c}(a.PathSegment);a.LineSegment=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g,c,e){b=d.call(this,b,e)||this;b.controlPoint1=g;b.controlPoint2=c;b.curve=new a.CubicCurve([b.start,b.controlPoint1,b.controlPoint2,b.end]);return b}__extends(c,d);c.create=function(b,g){var d=a.Parser.getPoint(g.End),e=a.Parser.getPoint(g.ControlPoint1),f=a.Parser.getPoint(g.ControlPoint2);return new c(b,e,f,d)};return c}(a.BezierSegment);a.CubicSegment=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g,c){b=d.call(this,b,c)||this;b.controlPoint=g;b.curve=new a.QuadraticCurve([b.start,b.controlPoint,b.end]);return b}__extends(c,d);c.create=function(b,g){var d=a.Parser.getPoint(g.End),e=a.Parser.getPoint(g.ControlPoint);return new c(b,e,d)};return c}(a.BezierSegment);a.QuadraticSegment=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){return function(d){void 0===d&&(d={});this.hasClosingSegment=!1;this.start=a.Parser.getPoint(d.Start);this.isClosed=a.Parser.getBoolean(d.IsClosed);this.segments=[];if(void 0!=d.Segments){for(var c=this.start,b=0;b<d.Segments.length;b++){var g=a.PathSegmentFactory.createPathSegment(new a.Point(c.x,c.y),d.Segments[b]);null!=g&&(this.segments.push(g),c=g.end)}this.isClosed&&(d=this.segments[0],c=this.segments[this.segments.length-1],0.01<Math.abs(d.start.x-
c.end.x)&&0.01<Math.abs(d.start.y-c.end.y)&&(this.segments.push(new a.LineSegment(c.end,d.start)),this.hasClosingSegment=!0))}}}();a.SubPath=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.None=0]="None";a[a.Small=1]="Small";a[a.Medium=2]="Medium";a[a.Large=3]="Large"})(e=a.ArrowSize||(a.ArrowSize={}));var d=function(){function c(b,g,c,d,f,l,k,m){void 0===k&&(k=e.None);void 0===m&&(m=e.None);this.endArrowPoints=this.startArrowPoints=null;this._hitBounds=new a.Bounds;this._fillBounds=new a.Bounds;this._hasStrokeApproximation=!1;this.subPaths=b;this.hasInterior=g;this.isConvex=c;this.createPoints();this.createStrokeApproximation(d,f);this.createArrowHeads(k,
m,d);l||this.freeStrokeApproximation()}Object.defineProperty(c.prototype,"hitBounds",{get:function(){return this._hitBounds},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fillBounds",{get:function(){return this._fillBounds},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasStrokeApproximation",{get:function(){return this._hasStrokeApproximation},enumerable:!0,configurable:!0});c.prototype.updateStrokeWidth=function(b,g,c,d){void 0===c&&(c=e.None);void 0===
d&&(d=e.None);this._hitBounds=new a.Bounds;this._fillBounds=new a.Bounds;this.createStrokeApproximation(b,g);this.createArrowHeads(c,d,b)};c.prototype.createPoints=function(){this.points=[];for(var b=0;b<this.subPaths.length;b++){var g=this.subPaths[b];this.points.push(g.start.clone());var c=g.segments.length;g.hasClosingSegment&&c--;for(var d=0;d<c;d++){var e=g.segments[d];if(e instanceof a.CubicSegment){var f=e;this.points.push(f.controlPoint1.clone());this.points.push(f.controlPoint2.clone())}else e instanceof
a.QuadraticSegment&&this.points.push(e.controlPoint.clone());this.points.push(e.end.clone())}}};c.prototype.createStrokeApproximation=function(b,g){for(var c=0;c<this.subPaths.length;c++){var d=this.subPaths[c];if(0<d.segments.length){for(var e=0;e<d.segments.length;e++){var f=d.segments[e];f.approximateStroke(b);0<e&&(a.PathSegment.createMiterPoint(d.segments[e-1],f,b,g),this._hitBounds.union(d.segments[e-1].strokedBounds));this._fillBounds.union(f.centerBounds);this._hitBounds.union(f.strokedBounds)}d.isClosed?
a.PathSegment.createMiterPoint(d.segments[d.segments.length-1],d.segments[0],b,g):(a.PathSegment.createSquareStartCap(d.segments[0],b),a.PathSegment.createSquareEndCap(d.segments[d.segments.length-1],b));this._hitBounds.union(d.segments[0].strokedBounds);this._hitBounds.union(d.segments[d.segments.length-1].strokedBounds)}}this._hasStrokeApproximation=!0};c.prototype.freeStrokeApproximation=function(){if(this._hasStrokeApproximation)for(var a=0;a<this.subPaths.length;a++)for(var g=this.subPaths[a],
c=0;c<g.segments.length;c++)g.segments[c].innerOffsetPoints=null,g.segments[c].outerOffsetPoints=null;this._hasStrokeApproximation=!1};c.prototype.createArrowHeads=function(b,g,c){if(0!=this.subPaths.length){var d=new a.Point,f=new a.Point,l=this.subPaths[0];b!=e.None&&!l.isClosed&&0<l.segments.length&&(this.startArrowPoints=Array(3),l=l.segments[0],l.curve.interpolate(0,d),l.curve.getUnitTangent(0,f),f.scale(-1,-1),this.createArrowHeadPoints(this.startArrowPoints,d,f,c,b),this.hitBounds.addPoints(this.startArrowPoints));
l=this.subPaths[this.subPaths.length-1];g!=e.None&&!l.isClosed&&0<l.segments.length&&(this.endArrowPoints=Array(3),l=l.segments[l.segments.length-1],l.curve.interpolate(1,d),l.curve.getUnitTangent(1,f),this.createArrowHeadPoints(this.endArrowPoints,d,f,c,g),this.hitBounds.addPoints(this.endArrowPoints))}};c.prototype.createArrowHeadPoints=function(b,g,c,d,f){switch(f){case e.Small:f=8/3*d;break;case e.Large:f=20/3*d;break;default:f=4*d}var l=(0.5+4/3)*d;d=new a.Point(0.75*f,f);g=new a.Point(g.x+c.x*
l,g.y+c.y*l);f=new a.Point(g.x-c.x*d.y,g.y-c.y*d.y);c=new a.Point(0.5*d.x*c.y,0.5*d.x*-c.x);b[0]=g;b[1]=new a.Point(f.x+c.x,f.y+c.y);b[2]=new a.Point(f.x-c.x,f.y-c.y)};return c}();a.PathGeometry=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(a,g,e,f,n,l){void 0===e&&(e=null);void 0===f&&(f=0);void 0===n&&(n=2);void 0===l&&(l=!1);return d.call(this,[c.createSubPath(a,e)],g,!0,f,n,l)||this}__extends(c,d);c.createSubPath=function(b,g){void 0===b&&(b=new a.Rect);void 0===g&&(g=null);var d=new a.SubPath;d.isClosed=!0;d.segments=[];null!==g&&0!==g.x&&0!==g.y?(g.x=Math.min(g.x,0.5*b.width),g.y=Math.min(g.y,0.5*b.height),c.createRounded(d,b,g)):c.createNonRounded(d,b);return d};c.createNonRounded=
function(b,g){b.start=new a.Point(g.left,g.top);var c;c=new a.Point(b.start.x,b.start.y);c=new a.LineSegment(c,new a.Point(g.right,g.top));b.segments.push(c);c=new a.Point(c.end.x,c.end.y);c=new a.LineSegment(c,new a.Point(g.right,g.bottom));b.segments.push(c);c=new a.Point(c.end.x,c.end.y);c=new a.LineSegment(c,new a.Point(g.left,g.bottom));b.segments.push(c);c=new a.Point(c.end.x,c.end.y);c=new a.LineSegment(c,new a.Point(g.left,g.top));b.segments.push(c)};c.createRounded=function(b,g,c){var d=
c.x-0.551784*c.x,e=c.y-0.551784*c.y;c.x=Math.min(c.x,0.5*g.width);c.x=Math.max(c.x,0);c.y=Math.min(c.y,0.5*g.height);c.y=Math.max(c.y,0);b.start=new a.Point(g.left+c.x,g.top);var f;f=new a.LineSegment(new a.Point(b.start.x,b.start.y),new a.Point(g.right-c.x,g.top));b.segments.push(f);f=new a.CubicSegment(new a.Point(f.end.x,f.end.y),new a.Point(g.right-d,g.top),new a.Point(g.right,g.top+e),new a.Point(g.right,g.top+c.y));b.segments.push(f);f=new a.LineSegment(new a.Point(f.end.x,f.end.y),new a.Point(g.right,
g.bottom-c.y));b.segments.push(f);f=new a.CubicSegment(new a.Point(f.end.x,f.end.y),new a.Point(g.right,g.bottom-e),new a.Point(g.right-d,g.bottom),new a.Point(g.right-c.x,g.bottom));b.segments.push(f);f=new a.LineSegment(new a.Point(f.end.x,f.end.y),new a.Point(g.left+c.x,g.bottom));b.segments.push(f);f=new a.CubicSegment(new a.Point(f.end.x,f.end.y),new a.Point(g.left+d,g.bottom),new a.Point(g.left,g.bottom-e),new a.Point(g.left,g.bottom-c.y));b.segments.push(f);f=new a.LineSegment(new a.Point(f.end.x,
f.end.y),new a.Point(g.left,g.top+c.y));b.segments.push(f);f=new a.CubicSegment(new a.Point(f.end.x,f.end.y),new a.Point(g.left,g.top+e),new a.Point(g.left+d,g.top),new a.Point(g.left+c.x,g.top));b.segments.push(f)};return c}(a.PathGeometry);a.RectangleGeometry=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(a,g,e,f){void 0===f&&(f=!1);return d.call(this,[c.createSubPath(a)],g,!0,e,0,f)||this}__extends(c,d);c.createSubPath=function(b){var g=0.5*b.width,c=0.5*b.height,d=b.left+g,e=b.top+c,f=d-g,g=d+g,k=e-c,c=e+c,m=0.275892*b.width;b=0.275892*b.height;var p=new a.SubPath;p.isClosed=!0;p.segments=[];p.start=new a.Point(d,k);var r=new a.CubicSegment(new a.Point(p.start.x,p.start.y),new a.Point(d+m,k),new a.Point(g,e-b),new a.Point(g,e));p.segments.push(r);
r=new a.CubicSegment(new a.Point(r.end.x,r.end.y),new a.Point(g,e+b),new a.Point(d+m,c),new a.Point(d,c));p.segments.push(r);r=new a.CubicSegment(new a.Point(r.end.x,r.end.y),new a.Point(d-m,c),new a.Point(f,e+b),new a.Point(f,e));p.segments.push(r);r=new a.CubicSegment(new a.Point(r.end.x,r.end.y),new a.Point(f,e-b),new a.Point(d-m,k),new a.Point(d,k));p.segments.push(r);return p};return c}(a.PathGeometry);a.EllipseGeometry=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c){this.points=this.distances=null;this.curve=c}Object.defineProperty(a.prototype,"length",{get:function(){return this.distances[this.distances.length-1]},enumerable:!0,configurable:!0});a.prototype.getParameter=function(a,b){return 0};return a}();a.CurveSolver=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(a){a=d.call(this,a)||this;a.createDistanceTable();return a}__extends(c,d);c.prototype.createDistanceTable=function(){this.distances=Array(2);this.distances[0]=0;this.distances[1]=a.Point.distance(this.curve.controlPoints[0],this.curve.controlPoints[1]);this.points=Array(2);this.points[0]=this.curve.controlPoints[0];this.points[1]=this.curve.controlPoints[1]};c.prototype.getParameter=function(a,g){return a/this.length};return c}(a.CurveSolver);
a.LineSolver=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(a){a=d.call(this,a)||this;a.createDistanceTable();return a}__extends(c,d);c.prototype.estimateSampleCount=function(){for(var b=0,g=0;g<this.curve.controlPoints.length-1;g++)b+=a.Point.distance(this.curve.controlPoints[g],this.curve.controlPoints[g+1]);b=Math.sqrt(b*b+1);return 10+Math.ceil(b/50)};c.prototype.createDistanceTable=function(){var b=new a.Point,g=new a.Point,c=0,d=this.estimateSampleCount();this.distances=Array(d);this.points=Array(d);
for(var e=0;e<d;e++)this.curve.interpolate(e/(d-1),b),0<e&&(c+=a.Point.distance(g,b)),this.distances[e]=c,this.points[e]=b.clone(),g.x=b.x,g.y=b.y};c.prototype.getParameter=function(a,g){var c=0;if(!g)return a/this.length;c=this.findIndexOfLargestValueSmallerThan(this.distances,a,0,this.distances.length-1);if(c>=this.distances.length-1)return 1;if(this.distances[c]==a)c/=this.distances.length-1;else var d=this.distances[c],c=(c+(a-d)/(this.distances[c+1]-d))/(this.distances.length-1);return c};c.prototype.findIndexOfLargestValueSmallerThan=
function(a,g,c,d){do{if(g<a[c])return c;if(g>a[d])return d;if(1==d-c)return c;var e=Math.ceil(0.5*(c+d));if(g>a[e])c=e;else if(g<a[e])d=e;else return e}while(1)};return c}(a.CurveSolver);a.BezierSolver=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c){this._vecA=new a.Point;this._vecB=new a.Point;this._segmentDistance=[];this.curveSolvers=[];for(var b=0,g=0;g<c.subPaths.length;g++){var d=c.subPaths[g];if(0<d.segments.length)for(var e=0;e<d.segments.length;e++){var f=d.segments[e],f=f.curve instanceof a.BezierCurve?new a.BezierSolver(f.curve):new a.LineSolver(f.curve),b=b+f.length;this._segmentDistance.push(b);this.curveSolvers.push(f)}}}Object.defineProperty(d.prototype,"length",{get:function(){return this._segmentDistance[this._segmentDistance.length-
1]},enumerable:!0,configurable:!0});d.prototype.evaluate=function(a,b,g){void 0===g&&(g=null);for(var d=this.curveSolvers,e=this._segmentDistance,f=a*this.length,l=a=0,k=e.length;l<k;l++)if(f<=e[l]){a=l;break}l=f;0<a&&(l=f-e[a-1]);e=d[a].getParameter(l,!0);d=d[a].curve;d.interpolate(e,b);null!==g&&d.getUnitTangent(e,g)};d.prototype.findClosestPoint=function(c,b){void 0===b&&(b=null);for(var g=Number.MAX_VALUE,d=0,e=this._vecA,f=this._vecB,l=0,k=this.curveSolvers.length;l<k;l++)for(var m=this.curveSolvers[l],
p=m.points,r=p[0],u=1,v=p.length;u<v;u++){var w=p[u];e.x=c.x-r.x;e.y=c.y-r.y;f.x=w.x-r.x;f.y=w.y-r.y;var y=e.getLength(),x=f.getLength(),z=a.Point.dotProduct(e,f)/(y*x),x=y*z/x;0>x?x=0:1<x&&(x=1);var y=f.x*x,x=f.y*x,z=r.x+y,r=r.y+x,D=c.x-z,B=c.y-r,D=D*D+B*B;D<g&&(d=m.distances[u-1],d+=Math.sqrt(y*y+x*x),0<l&&(d+=this._segmentDistance[l-1]),d/=this.length,g=D,null!==b&&(b.x=z,b.y=r));r=w}return d};return d}();a.PathSolver=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.define=function(c,b,g){void 0===g&&(g=b.points);for(var d,e,f,l,k=0,m=0,p=b.subPaths.length;k<p;k++){d=g[m];c.moveTo(d.x,d.y);d=b.subPaths[k];var r=d.segments.length;d.hasClosingSegment&&r--;for(var u=0;u<r;u++)e=d.segments[u],e instanceof a.CubicSegment?(e=g[m+1],f=g[m+2],l=g[m+3],c.bezierCurveTo(e.x,e.y,f.x,f.y,l.x,l.y),m+=3):e instanceof a.QuadraticSegment?(e=g[m+1],f=g[m+2],c.quadraticCurveTo(e.x,e.y,f.x,f.y),m+=2):e instanceof a.LineSegment&&
(e=g[m+1],c.lineTo(e.x,e.y),m+=1);d.isClosed&&c.closePath();m++}};d.defineSnapped=function(c,b,g){for(var e=b.points,f=this._snap0,n=this._snap1,l=this._snap2,k=this._snap3,m=0,p=0,r=b.subPaths.length;m<r;m++){d.snapPoint(g,e[p],f);c.moveTo(f.x,f.y);var u=b.subPaths[m],v=u.segments.length;u.hasClosingSegment&&v--;for(var w=0;w<v;w++){var y=u.segments[w];y instanceof a.CubicSegment?(d.snapPoint(g,e[p+1],n),d.snapPoint(g,e[p+2],l),d.snapPoint(g,e[p+3],k),c.bezierCurveTo(n.x,n.y,l.x,l.y,k.x,k.y),p+=
3):y instanceof a.QuadraticSegment?(d.snapPoint(g,e[p+1],n),d.snapPoint(g,e[p+2],l),c.quadraticCurveTo(n.x,n.y,l.x,l.y),p+=2):y instanceof a.LineSegment&&(d.snapPoint(g,e[p+1],n),c.lineTo(n.x,n.y),p+=1)}u.isClosed&&c.closePath();p++}};d.snapPoint=function(a,b,g){a.transformPoint(b,g);g.x=Math.floor(g.x)+0.5;g.y=Math.floor(g.y)+0.5};d.snapXY=function(a,b,g,d){a.transformXY(b,g,d);d.x=Math.floor(d.x)+0.5;d.y=Math.floor(d.y)+0.5};d.snapPoints=function(a,b,g){for(var d=0,e=b.length;d<e;d++)this.snapPoint(a,
b[d],g[d])};d.snapRect=function(a,b,g){a.transformRect(b,g);g.left=Math.floor(g.left)+0.5;g.top=Math.floor(g.top)+0.5;g.right=Math.floor(g.right)+0.5;g.bottom=Math.floor(g.bottom)+0.5};d.defineStroke=function(a,b){if(b.hasStrokeApproximation)for(var g=b.subPaths,d=g.length,e=0;e<d;e++){var f=g[e],l=f.segments,k=l[0].outerOffsetPoints[0];a.moveTo(k.x,k.y);for(var m=1,p=l.length,r=0;r<p;r++){for(var u=l[r].outerOffsetPoints,v=u.length;m<v;m++)a.lineTo(u[m].x,u[m].y);m=0}f.isClosed&&(r=l[0].innerOffsetPoints[0],
a.lineTo(k.x,k.y),a.lineTo(r.x,r.y));for(r=l.length-1;0<=r;r--)for(k=l[r].innerOffsetPoints,m=k.length-1;0<=m;m--)a.lineTo(k[m].x,k[m].y);a.closePath()}};d.defineOuterStroke=function(a,b){if(b.hasStrokeApproximation&&0<b.subPaths.length){var g=b.subPaths[0].segments,d=g[0].outerOffsetPoints[0];a.moveTo(d.x,d.y);for(var e=1,d=g.length,f=0;f<d;f++){for(var l=g[f].outerOffsetPoints,k=l.length;e<k;e++)a.lineTo(l[e].x,l[e].y);e=0}a.closePath()}};d.defineArrowHeads=function(a,b){var g=b.startArrowPoints,
d=b.endArrowPoints;null!=g&&(a.moveTo(g[0].x,g[0].y),a.lineTo(g[1].x,g[1].y),a.lineTo(g[2].x,g[2].y),a.closePath());null!=d&&(a.moveTo(d[0].x,d[0].y),a.lineTo(d[1].x,d[1].y),a.lineTo(d[2].x,d[2].y),a.closePath())};d.isPointInPath=function(a,b,g,e,f){a.save();a.setTransform(f.m11,f.m12,f.m21,f.m22,f.dx,f.dy);f=!1;b.isConvex&&b.hasInterior&&b.hasStrokeApproximation?(a.beginPath(),d.defineOuterStroke(a,b),f=a.isPointInPath(g,e)):(b.hasInterior&&(a.beginPath(),d.define(a,b),f=a.isPointInPath(g,e)),!f&&
b.hasStrokeApproximation&&(a.beginPath(),d.defineStroke(a,b),f=a.isPointInPath(g,e)));f||null==b.startArrowPoints&&null==b.endArrowPoints||(a.beginPath(),d.defineArrowHeads(a,b),f=a.isPointInPath(g,e));a.restore();return f};d.drawHitRegions=function(a,b,g){a.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);a.lineWidth=1;a.strokeStyle="gray";a.fillStyle="rgba(200, 200, 200, 0.8)";var e=!1;b.isConvex&&b.hasInterior&&b.hasStrokeApproximation?(e=!0,a.beginPath(),d.defineOuterStroke(a,b),a.fill(),a.stroke()):
(b.hasInterior&&(a.beginPath(),d.define(a,b),a.fill(),a.stroke()),b.hasStrokeApproximation&&(a.beginPath(),d.defineStroke(a,b),a.fill(),a.stroke()));if(null!=b.startArrowPoints||null!=b.endArrowPoints)a.beginPath(),d.defineArrowHeads(a,b),a.fill(),a.stroke();b.hasStrokeApproximation&&d.drawOffsetPoints(a,b,g,e)};d.drawOffsetPoints=function(c,b,g,d){if(b.hasStrokeApproximation){c.save();c.setTransform(1,0,0,1,0,0);c.strokeStyle="yellow";c.lineWidth=1;for(var e=new a.Point,f=new a.Point,l=b.subPaths.length,
k=0;k<l;k++){var m=b.subPaths[k],p=m.segments.length;c.beginPath();for(var r=0;r<p;r++)for(var u=m.segments[r].outerOffsetPoints,v=0,w=u.length;v<w;v++)g.transformPoint(u[v],f),c.rect(f.x-2,f.y-2,4,4);c.fillStyle="red";c.fill();c.stroke();if(!d){c.beginPath();for(r=0;r<p;r++)for(u=m.segments[r].innerOffsetPoints,v=0,w=u.length;v<w;v++)g.transformPoint(u[v],e),c.rect(e.x-2,e.y-2,4,4);c.fillStyle="blue";c.fill();c.stroke()}}c.restore()}};d._snap0=new a.Point;d._snap1=new a.Point;d._snap2=new a.Point;
d._snap3=new a.Point;return d}();a.PathRegion=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.Left=0]="Left";a[a.Center=1]="Center";a[a.Right=2]="Right"})(e=a.HorizontalAlignment||(a.HorizontalAlignment={}));var d;(function(a){a[a.Top=0]="Top";a[a.Middle=1]="Middle";a[a.Bottom=2]="Bottom"})(d=a.VerticalAlignment||(a.VerticalAlignment={}));var c;(function(a){a[a.LeftToRight=0]="LeftToRight";a[a.TopToBottom=1]="TopToBottom";a[a.BottomToTop=2]="BottomToTop"})(c=a.TextDirection||(a.TextDirection={}));var b=function(){function b(g,f){this._horizontalAlignment=
e.Center;this._verticalAlignment=d.Middle;this._textDirection=c.LeftToRight;this._fontColor=null;this._textPosition=new a.Point(0,0);this._text="";this._textLines=[];this._area=g;this._font=f;this._textHeight=f.size;this.horizontalAlignment=e.Center;this.verticalAlignment=d.Middle}Object.defineProperty(b.prototype,"horizontalAlignment",{get:function(){return this._horizontalAlignment},set:function(a){this._horizontalAlignment=a;this._horizontalAlignmentString=b.convertToHorizontalAlignmentString(a)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(a){this._verticalAlignment=a;this._verticalAlignmentString=b.convertToVerticalAlignmentString(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"textDirection",{get:function(){return this._textDirection},set:function(a){this._textDirection=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"textHeight",{get:function(){return this._textHeight},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fontFillStyle",{get:function(){return this._fontColor},set:function(a){this._fontColor=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"font",{get:function(){return this._font},enumerable:!0,configurable:!0});b.prototype.draw=function(b,g,d){void 0===d&&(d=!0);g!==this._text&&this.parseText(g);b.save();b.textBaseline=this._verticalAlignmentString;b.textAlign=this._horizontalAlignmentString;b.font=this._font.toString();
b.fillStyle=d?this.fontFillStyle.value:a.VisualNode.disabledLineColor;g=this._textPosition.x;d=this._textPosition.y;for(var e=0;e<this._textLines.length;e++){0==this._textAngle?b.fillText(this._textLines[e],g,d):(b.translate(g,d),b.rotate(this._textAngle),b.fillText(this._textLines[e],0,0),b.rotate(-this._textAngle),b.translate(-g,-d));var f=this._font.size*this._font.lineSpacing;switch(this.textDirection){case c.LeftToRight:d+=f;break;case c.TopToBottom:g-=f;break;case c.BottomToTop:g+=f}}b.restore()};
b.prototype.parseText=function(a){void 0==a||null==a?a="":"string"!=typeof a&&(a=String(a));this._textLines=a.split("\n");var b=(this._textLines.length-1)*this._textHeight*this._font.lineSpacing,g,f,k;switch(this.textDirection){case c.LeftToRight:g=0;switch(this.horizontalAlignment){case e.Left:f=0;break;case e.Right:f=this._area.x;break;case e.Center:f=0.5*this._area.x}switch(this.verticalAlignment){case d.Top:k=0;break;case d.Bottom:k=this._area.y-b;break;case d.Middle:k=0.5*(this._area.y-b)}break;
case c.TopToBottom:g=0.5*Math.PI;switch(this.horizontalAlignment){case e.Left:k=0;break;case e.Right:k=this._area.y;break;case e.Center:k=0.5*this._area.y}switch(this.verticalAlignment){case d.Top:f=this._area.x;break;case d.Bottom:f=b;break;case d.Middle:f=0.5*(this._area.x+b)}break;case c.BottomToTop:g=1.5*Math.PI;switch(this.horizontalAlignment){case e.Left:k=this._area.y;break;case e.Right:k=0;break;case e.Center:k=0.5*this._area.y}switch(this.verticalAlignment){case d.Top:f=0;break;case d.Bottom:f=
this._area.x-b;break;case d.Middle:f=0.5*(this._area.x-b)}}this._text=a;this._textAngle=g;this._textPosition.x=f;this._textPosition.y=k};b.convertToHorizontalAlignmentString=function(a){switch(a){case e.Left:return"left";case e.Right:return"right";default:return"center"}};b.convertToVerticalAlignmentString=function(a){switch(a){case d.Top:return"top";case d.Bottom:return"bottom";default:return"middle"}};b.measureTextLine=function(a,b,g,c){a.save();a.font=g.toString();var d=a.measureText(b).width;
g=g.size;c.left=0;c.top=0;c.right=d;c.bottom=g;if(!(1>d||1>g)&&void 0!==a.getImageData){if(a.canvas.width<d||a.canvas.height<g){a.restore();return}a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,d,g);a.fillStyle="black";a.textAlign="center";a.textBaseline="middle";a.fillText(b,0.5*d,0.5*g);b=a.getImageData(0,0,d,g);for(var e=!1,f=0;f<g&&!e;f++)for(var r=0;r<d&&!e;r++){var u=4*(r+f*d);if(0!==b.data[u+3]){c.top=f;e=!0;break}}e=!1;for(f=g-1;0<=f&&!e;f--)for(r=0;r<d&&!e;r++)if(u=4*(r+f*d),0!==b.data[u+3]){c.bottom=
f;e=!0;break}}a.restore()};return b}();a.TextRegion=b})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.Fill=0]="Fill";a[a.Fit=1]="Fit";a[a.Stretch=2]="Stretch";a[a.Center=3]="Center"})(e=a.ImageScaling||(a.ImageScaling={}));(function(a){a[a.Pixels=0]="Pixels";a[a.Percent=1]="Percent"})(a.ImageAreaUnits||(a.ImageAreaUnits={}));var d=function(){function c(a,g,c,d){void 0===d&&(d=null);var e=this;this._disabledCanvas=void 0;this._area=g;this._scaling=c;this._imageElement=window.document.createElement("img");this._imageElement.onload=function(a){e.calcBlitRectangles();
e._isLoaded=!0;null!==d&&d()};this._isLoaded=!1;this._imageElement.src=a}Object.defineProperty(c.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"disabledCanvas",{get:function(){void 0===this._disabledCanvas&&(this._disabledCanvas=this.createDisableCanvas());return this._disabledCanvas},enumerable:!0,configurable:!0});c.prototype.createDisableCanvas=function(){var a=window.document.createElement("canvas");a.width=this._destRect.width;
a.height=this._destRect.height;var g=a.getContext("2d");g.drawImage(this._imageElement,this._sourceRect.left,this._sourceRect.top,this._sourceRect.width,this._sourceRect.height,0,0,a.width,a.height);var c=null;try{c=g.getImageData(0,0,a.width,a.height)}catch(d){return null}for(var e=c.width,f=c.height,k=c.data,m=0;m<f;m++)for(var p=4*m*e,r=0;r<e;r++,p+=4){var u=0.21*k[p]+0.72*k[p+1]+0.07*k[p+2],u=32893/98685*(u-128)+128,u=u+60,u=Math.max(0,Math.min(u,255));k[p]=u;k[p+1]=u;k[p+2]=u}g.putImageData(c,
0,0);return a};c.prototype.draw=function(a,g){void 0===g&&(g=!0);if(this._isLoaded)if(a.beginPath(),g){var c=this._sourceRect.left>this._imageElement.width?this._imageElement.width-1:this._sourceRect.left,d=this._sourceRect.top>this._imageElement.height?this._imageElement.height-1:this._sourceRect.top,e=c+this._sourceRect.width>=this._imageElement.width?this._imageElement.width-c:this._sourceRect.width,f=d+this._sourceRect.height>=this._imageElement.height?this._imageElement.height-d:this._sourceRect.height;
0<e&&0<f&&a.drawImage(this._imageElement,c,d,e,f,this._destRect.left,this._destRect.top,this._destRect.width,this._destRect.height)}else null!=this.disabledCanvas&&a.drawImage(this.disabledCanvas,0,0,this._disabledCanvas.width,this._disabledCanvas.height,this._destRect.left,this._destRect.top,this._destRect.width,this._destRect.height)};c.prototype.calcBlitRectangles=function(){switch(this._scaling){case e.Stretch:this._sourceRect=new a.Rect(0,0,this._imageElement.width,this._imageElement.height);
this._destRect=new a.Rect(0,0,this._area.x,this._area.y);break;case e.Fit:var b=this._area.x/this._area.y,g=this._imageElement.width/this._imageElement.height,c,d;b>=g?(d=this._area.y,c=this._area.y*g):(d=this._area.x/g,c=this._area.x);b=0.5*this._area.x-0.5*c;g=0.5*this._area.y-0.5*d;this._sourceRect=new a.Rect(0,0,this._imageElement.width,this._imageElement.height);this._destRect=new a.Rect(b,g,b+c,g+d);break;case e.Fill:b=this._area.x/this._area.y;g=this._imageElement.width/this._imageElement.height;
b>=g?(d=this._imageElement.width,c=this._imageElement.width/b):(d=this._imageElement.height*b,c=this._imageElement.height);b=0.5*this._imageElement.width-0.5*d;g=0.5*this._imageElement.height-0.5*c;this._sourceRect=new a.Rect(b,g,b+d,g+c);this._destRect=new a.Rect(0,0,this._area.x,this._area.y);break;case e.Center:d=Math.min(this._imageElement.width,this._area.x),c=Math.min(this._imageElement.height,this._area.y),b=0.5*this._imageElement.width-0.5*d,g=0.5*this._imageElement.height-0.5*c,this._sourceRect=
new a.Rect(b,g,b+d,g+c),b=0.5*this._area.x-0.5*d,g=0.5*this._area.y-0.5*c,this._destRect=new a.Rect(b,g,b+d,g+c)}};return c}();a.ImageRegion=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c,b,g,e,f){this._fontString="";this._family=c;this._size=b;this._style=g;this._weight=e;this._lineSpacing=f;this._fontString=a.createFontString(c,b,g,e)}Object.defineProperty(a.prototype,"family",{get:function(){return this._family},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"style",{get:function(){return this._style},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"weight",{get:function(){return this._weight},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"lineSpacing",{get:function(){return this._lineSpacing},enumerable:!0,configurable:!0});a.prototype.toString=function(){return this._fontString};a.createFontString=function(a,b,g,d){var e=new StringBuilder;e.append(g.toLowerCase());e.append(" ");e.append(d.toString());e.append(" ");e.append(b.toFixed(1));e.append("px ");e.append(a);
return e.toString()};return a}();a.FontInfo=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(c,b,g,e){void 0===c&&(c=0);void 0===b&&(b=0);void 0===g&&(g=0);void 0===e&&(e=255);this.R=c;this.G=b;this.B=g;this.A=e;this._colorString=a.toCssString(c,b,g,e)}a.prototype.toString=function(){return this._colorString};a.toCssString=function(c,b,g,e){var f=a._colorStringArray;f[1]=c.toString();f[3]=b.toString();f[5]=g.toString();f[7]=(e/255).toString();return f.join("")};a._colorStringArray="rgba(;0;, ;0;, ;0;, ;0;)".split(";");a.Black=new a(0,
0,0,255);a.White=new a(255,255,255,255);return a}();a.Color=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));(function(f){(function(a){var e=function(){function d(c){void 0===c&&(c={});this.color=a.Parser.getColor(c.Color,a.Color.White)}d.prototype.createStyle=function(a,b){return this.color.toString()};d.White=new d({Color:"#FFFFFFFF"});return d}();a.SolidFill=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(a){this._stops=this.parseGradientStops(a)}d.prototype.createStyle=function(a,b){};d.prototype.parseGradientStops=function(c){var b=[];if(void 0!=c.Stops)for(var g=0;g<c.Stops.length;g++){var d=new a.GradientStop(a.Parser.getNumber(c.Stops[g].Offset),a.Parser.getColor(c.Stops[g].Color));b.push(d)}return b};return d}();a.GradientFill=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.createFill=function(c){if(d.IsNoFill(c))return null;switch(a.Parser.getString(c.Type)){case "LinearGradientFill":return new a.LinearGradientFill(c);case "RadialGradientFill":return new a.RadialGradientFill(c);case "SolidFill":return new a.SolidFill(c);default:return null}};d.IsNoFill=function(a){return void 0===a||null===a};d.createFillStyle=function(a,b,g){b=d.createFill(b);return null!==b?b.createStyle(a,g):null};return d}();a.FillFactory=
e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));(function(f){(function(a){var e=function(){return function(a,c){this.offset=a;this.color=c}}();a.GradientStop=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var g=d.call(this,b)||this;g._startPoint=a.Parser.getPoint(b.StartPoint);g._endPoint=a.Parser.getPoint(b.EndPoint);return g}__extends(c,d);c.prototype.createStyle=function(a,g){for(var c=a.createLinearGradient(g.left+g.width*this._startPoint.x,g.top+g.height*this._startPoint.y,g.left+g.width*this._endPoint.x,g.top+g.height*this._endPoint.y),d=0;d<this._stops.length;d++){var e=this._stops[d];c.addColorStop(e.offset,e.color.toString())}return c};
return c}(a.GradientFill);a.LinearGradientFill=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var g=d.call(this,b)||this;g._center=a.Parser.getPoint(b.Center);g._radiusX=a.Parser.getNumber(b.RadiusX,1);g._radiusY=a.Parser.getNumber(b.RadiusY,1);return g}__extends(c,d);c.prototype.createStyle=function(b,g){for(var c=g.left+g.width*this._center.x,d=g.top+g.height*this._center.y,e=new a.Point(this._radiusX*g.width,this._radiusY*g.height),f=Math.max(e.x,e.y),c=b.createRadialGradient(c,d,0,c,d,f),d=0;d<this._stops.length;d++)f=
this._stops[d],c.addColorStop(f.offset,f.color.toString());c.fillMatrix=this.createFillMatrix(g,e);return c};c.prototype.createFillMatrix=function(b,g){var c=new a.Point(1,1);g.x>g.y?c.y=g.y/g.x:c.x=g.x/g.y;var d=new a.Point(b.left,b.top);d.x+=b.width*this._center.x;d.y+=b.height*this._center.y;var e=new a.Matrix;e.translate(d.x,d.y);e.scale(c.x,c.y);e.translate(-d.x,-d.y);return e};return c}(a.GradientFill);a.RadialGradientFill=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.LOW=0]="LOW";a[a.HIGH=1]="HIGH"})(e=a.SignalState||(a.SignalState={}));var d=function(){function c(a,g,c){this._activeState=a;this._assertedValue=g;this._deassertedValue=c}Object.defineProperty(c.prototype,"output",{get:function(){return this._output},enumerable:!0,configurable:!0});c.prototype.convert=function(b){this._output=(b=a.Parser.convertToBoolean(b))&&this._activeState==e.HIGH||!b&&this._activeState==e.LOW?this._assertedValue:this._deassertedValue};
return c}();a.BooleanConverter=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(a,b,g,d){this._sourceLow=a;this._sourceHigh=b;this._targetLow=g;this._targetHigh=d;this._rangeFactor=(d-g)/(b-a);isFinite(this._rangeFactor)||(this._rangeFactor=1)}Object.defineProperty(d.prototype,"output",{get:function(){return this._output},enumerable:!0,configurable:!0});d.prototype.convert=function(a){this._output=d.convert(a,this._sourceLow,this._sourceHigh,this._targetLow,this._targetHigh,this._rangeFactor)};d.convert=function(c,b,g,d,e,
f){c=a.Parser.getNumber(c);isNaN(c)&&(c=0);c<b?c=b:c>g&&(c=g);return d+(c-b)*f};d.lerp=function(a,b,g,e,f){return d.convert(a,b,g,e,f,(f-e)/(g-b))};return d}();a.LerpFloatConverter=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b,g,d){this._output=new a.Point;this._sourceLow=c;this._sourceHigh=b;this._targetStart=g;this._targetEnd=d;c=b-c;this._rangeFactorX=(d.x-g.x)/c;this._rangeFactorY=(d.y-g.y)/c;isFinite(this._rangeFactorX)||(this._rangeFactorX=1);isFinite(this._rangeFactorY)||(this._rangeFactorY=1)}Object.defineProperty(d.prototype,"output",{get:function(){return this._output},enumerable:!0,configurable:!0});d.prototype.convert=function(c){c=a.Parser.getNumber(c);
isNaN(c)&&(c=0);c<this._sourceLow?c=this._sourceLow:c>this._sourceHigh&&(c=this._sourceHigh);c-=this._sourceLow;this._output.x=this._targetStart.x+c*this._rangeFactorX;this._output.y=this._targetStart.y+c*this._rangeFactorY};return d}();a.LerpPointConverter=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b){this.node=c;this.dataSource=d.defaultDataValue;this.variableName=a.Parser.getString(b.Variable);if(b.Script){var g=b.Script,e=a.Parser.getString(g.Name),g=g.Parameters,f=[];if(g)for(var n=0;n<g.length;n++)g[n].Constant?f.push(new a.Constant(g[n].Constant)):g[n].Variable&&f.push(new a.Variable(g[n].Variable,g[n].Variable.type));this.dataSource=new a.Expression(b.ModuleName,e,f)}}d.prototype.run=function(a){};d.defaultDataValue=new a.Constant("");
return d}();a.Dynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g){var c=d.call(this,b,g)||this;c.isSmoothingEnabled=a.Parser.getBoolean(g.Smoothing,!1);c.hasCircularRange=a.Parser.getBoolean(g.CircularRange,!1);return c}__extends(c,d);c.prototype.getDataValue=function(b,g,c,d){void 0===d&&(d=0);var e=d;this.isSmoothingEnabled&&this.dataSource instanceof a.Variable?(d=this.dataSource,b=b.smoothingWindow.getTargetTime(),d=d.getTimestampEntry(b),null!==d&&(e=this.hasCircularRange&&d.valueFrom>=g&&d.valueFrom<=
c&&d.valueTo>=g&&d.valueTo<=c?this.wrapValue(d,b,g,c):a.LerpFloatConverter.lerp(b,d.timeFrom,d.timeTo,d.valueFrom,d.valueTo))):e="string"==typeof this.dataSource.value?a.Parser.getNumber(this.dataSource.value,d):this.dataSource.value;return e};c.prototype.wrapValue=function(b,g,c,d){var e=b.valueFrom,f=b.valueTo,k=0.5*(c+d)+(f-e);k>d?f=c-(d-f):k<c&&(f=d+(f-c));b=a.LerpFloatConverter.lerp(g,b.timeFrom,b.timeTo,e,f);b>d?b=c+(b-d):b<c&&(b=d-(c-b));return b};return c}(a.Dynamic);a.RangeDynamic=e})(f.Hmi||
(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g){var c=d.call(this,b,g)||this;c._targetProperty=null;var e=a.Parser.getBoolean(g.ChangeWhen);c._converter=new a.BooleanConverter(e?a.SignalState.HIGH:a.SignalState.LOW,!1,!0);c._targetProperty=b.getTargetProperty("Variable");return c}__extends(c,d);c.prototype.run=function(a){this._converter.convert(this.dataSource.value);this._targetProperty.value=this._converter.output};c.appendNew=function(b){var g={Type:"ButtonStateDynamic",Variable:a.Parser.getString(b.Variable),
TargetProperty:"Variable",ChangeWhen:!1};void 0===b.Dynamics&&(b.Dynamics=[]);b.Dynamics.push(g)};return c}(a.Dynamic);a.ButtonStateDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g,c){var e=d.call(this,g,c)||this;if(g instanceof a.VisualNode){var f=a.Parser.getBoolean(c.ChangeWhen);b=a.FillFactory.createFillStyle(b,c.Fill,g.path.fillBounds);c=a.Parser.getColor(c.LineColor,a.VisualNode.defaultLineColor);e._fillConverter=new a.BooleanConverter(f?a.SignalState.HIGH:a.SignalState.LOW,b,g.fillStyle.value);e._strokeConverter=new a.BooleanConverter(f?a.SignalState.HIGH:a.SignalState.LOW,c.toString(),g.strokeStyle.value)}return e}
__extends(c,d);c.prototype.run=function(a){this._fillConverter.convert(this.dataSource.value);this._strokeConverter.convert(this.dataSource.value);a=this.node;a.fillStyle.value=this._fillConverter.output;a.strokeStyle.value=this._strokeConverter.output};return c}(a.Dynamic);a.ColorDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g){var c=d.call(this,b,g)||this;c.enabledIsAuthorized=!0;var e=a.Parser.getBoolean(g.ChangeWhen);c._converter=new a.BooleanConverter(e?a.SignalState.HIGH:a.SignalState.LOW,!1,!0);return c}__extends(c,d);c.prototype.OnSecurityContextChanged=function(a){this.enabledIsAuthorized=a.shouldEnableNode(this.node)};c.prototype.run=function(a){this.node.isEnabled.value=this.enabledIsAuthorized&&this.getConvertedEnabledFromDataSource()};c.prototype.getConvertedEnabledFromDataSource=
function(){this._converter.convert(this.dataSource.value);return this._converter.output};return c}(a.Dynamic);a.DisableDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(){return function(a,b,g){this.value=a;this.lineColor=b;this.fillColor=g}}();a.MultiColorThreshold=e;var d=function(c){function b(b,d){var e=c.call(this,b,d)||this;e._interpolate=a.Parser.getBoolean(d.Interpolate,!0);e._thresholds=e.getMultiColorThresholds(d);return e}__extends(b,c);b.prototype.getMultiColorThresholds=function(b){var c=[];if(void 0!==b.ThresholdData&&(b=b.ThresholdData,void 0!=b&&void 0!=b.length)){for(var d=0;d<b.length;d++){var f=b[d],l=a.Parser.getNumber(f.Value),
k=a.Parser.getColor(f.LineColor),m=new a.Color;void 0!=f.Fill&&"SolidFill"==f.Fill.Type&&(m=a.Parser.getColor(f.Fill.Color));f=new e(l,k,m);c.push(f)}c.sort(function(a,b){return a.value-b.value})}return c};b.prototype.run=function(b){if(0!=this._thresholds.length){var c=parseFloat(this.dataSource.value);b=0;var d=this._thresholds.length-1;if(c<this._thresholds[0].value)c=this._thresholds[0].lineColor.toString(),b=this._thresholds[0].fillColor.toString();else if(c>=this._thresholds[d].value)c=this._thresholds[d].lineColor.toString(),
b=this._thresholds[d].fillColor.toString();else{for(var e=d;0<=e;e--)if(c>=this._thresholds[e].value){b=e;break}if(this._interpolate){e=b+1;e>=d&&(e=d);var d=(c-this._thresholds[b].value)/(this._thresholds[e].value-this._thresholds[b].value),c=this._thresholds[b].lineColor,f=this._thresholds[e].lineColor,k=Math.round(c.R+d*(f.R-c.R)),m=Math.round(c.G+d*(f.G-c.G)),p=Math.round(c.B+d*(f.B-c.B)),f=Math.round(c.A+d*(f.A-c.A)),c=a.Color.toCssString(k,m,p,f);b=this._thresholds[b].fillColor;e=this._thresholds[e].fillColor;
k=Math.round(b.R+d*(e.R-b.R));m=Math.round(b.G+d*(e.G-b.G));p=Math.round(b.B+d*(e.B-b.B));f=Math.round(b.A+d*(e.A-b.A));b=a.Color.toCssString(k,m,p,f)}else c=this._thresholds[b].lineColor.toString(),b=this._thresholds[b].fillColor.toString()}e=this.node;e.fillStyle.value=b;e.strokeStyle.value=c}};return b}(a.Dynamic);a.MultiColorDynamic=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(){return function(a,b,g,d){this.threshold=a;this.fill=b;this.style=g;this.blink=d}}();a.FillDynamicThreshold=e;var d=function(c){function b(b,d,e){var f=c.call(this,d,e)||this;f._targetProperty=null;f._interpolate=a.Parser.getBoolean(e.Interpolate,!0);if(void 0!==e.Rate)switch(e.Rate.toUpperCase()){case "SLOW":f.blinkStatusVariableName="@BlinkSlowStatus";break;case "FAST":f.blinkStatusVariableName="@BlinkFastStatus";break;case "MEDIUM":f.blinkStatusVariableName=
"@BlinkStatus"}f._thresholds=f.getThresholds(b,d,e);0<f._thresholds.length&&(f._minimum=f._thresholds[0],f._maximum=f._thresholds[f._thresholds.length-1]);b=a.Parser.getString(e.TargetProperty);f._targetProperty=d.getTargetProperty(b);f._defaultFill=f._targetProperty.value;return f}__extends(b,c);b.prototype.getThresholds=function(b,c,d){var f=[],l=void 0!==d.Rate&&"NONE"!==d.Rate.toUpperCase(),k=!1;if(void 0!==d.ThresholdData&&(d=d.ThresholdData,void 0!=d&&void 0!=d.length)){for(var m=0;m<d.length;m++){var k=
d[m],p=a.Parser.getNumber(k.Threshold),r=null,u=a.FillFactory.createFill(k.Value);null!==u&&(r=u.createStyle(b,c.path.fillBounds));k=void 0===k.Blink?!1:!0===k.Blink;f.push(new e(p,u,r,l&&k));null!==u&&u instanceof a.SolidFill||(this._interpolate=!1)}f.sort(function(a,b){return a.threshold-b.threshold})}return f};b.prototype.run=function(b){if(0!=this._thresholds.length){var c=this.getDataValue(b,this._minimum.threshold,this._maximum.threshold),d=0,e=this._thresholds.length-1;b=!1;if(c<this._minimum.threshold)c=
this._minimum.style,b=this._minimum.blink;else if(c>=this._maximum.threshold)c=this._maximum.style,b=this._maximum.blink;else{for(b=e;0<=b;b--)if(c>=this._thresholds[b].threshold){d=b;break}var f=this._thresholds[d];b=f.blink;if(this._interpolate){d+=1;d>=e&&(d=e);var e=this._thresholds[d],c=(c-f.threshold)/(e.threshold-f.threshold),f=f.fill.color,k=e.fill.color,e=Math.round(f.R+c*(k.R-f.R)),d=Math.round(f.G+c*(k.G-f.G)),m=Math.round(f.B+c*(k.B-f.B)),c=Math.round(f.A+c*(k.A-f.A)),c=a.Color.toCssString(e,
d,m,c)}else c=f.style}b&&0==this.blinkStateDataSource.value&&(c=this._defaultFill);this._targetProperty.value=c}};return b}(a.RangeDynamic);a.FillDynamic=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.Translation=0]="Translation";a[a.Rotation=1]="Rotation"})(e=a.PathMotionType||(a.PathMotionType={}));var d=function(c){function b(g,d){var f=c.call(this,g,d)||this;f._targetId=null;f._position=new a.Point;f.path=null;f.target=null;f._targetId=a.Parser.getString(d.TargetId);f.lowRange=a.Parser.getNumber(d.LowRange);f.highRange=a.Parser.getNumber(d.HighRange);f.direction=b.getPathDirection(d.Direction);f.motionType=b.getMotionType(d.MotionType);f._tangent=
null;f._alignment=null;f.motionType===e.Translation?a.Parser.getBoolean(d.AlignToTangent,!1)&&(f._alignment=f._tangent=new a.Point):f._alignment=new a.Point;f.pathOffset=a.Parser.getNumber(d.PathOffset);f.pathOffset=Math.min(Math.max(f.pathOffset,0),1);f._rangeFactor=1/(f.highRange-f.lowRange);isFinite(f._rangeFactor)||(f._rangeFactor=1);return f}__extends(b,c);Object.defineProperty(b.prototype,"targetId",{get:function(){return this._targetId},enumerable:!0,configurable:!0});b.getMotionType=function(a,
b){void 0===b&&(b=e.Translation);if(void 0===a)return b;switch(a){case "Rotation":return e.Rotation;default:return e.Translation}};b.getPathDirection=function(b,c){void 0===c&&(c=a.PathDirection.Forward);if(void 0===b)return c;switch(b){case "Reverse":return a.PathDirection.Reverse;default:return a.PathDirection.Forward}};b.prototype.run=function(b){b=this.getDataValue(b,this.lowRange,this.highRange);b!==this._previousValue&&(this._previousValue=b,b<this.lowRange?b=this.lowRange:b>this.highRange&&
(b=this.highRange),b=(b-this.lowRange)*this._rangeFactor+this.pathOffset,1<b?b-=1:0>b&&(b+=1),this.direction===a.PathDirection.Reverse&&(b=1-b),this.path.solver.evaluate(b,this._position,this._tangent),this.motionType===e.Rotation?(b=this.target.location.value,this._alignment.x=this._position.x-b.x,this._alignment.y=this._position.y-b.y):this.target.location.setPointValue(this._position.x,this._position.y),null!==this._alignment&&(b=Math.atan(this._alignment.y/this._alignment.x),0>this._alignment.x&&
(b+=0>this._alignment.y?-Math.PI:Math.PI),this.target.rotation.value=b))};return b}(a.RangeDynamic);a.PathDynamic=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g){var c=d.call(this,b,g)||this;c._lowRange=a.Parser.getNumber(g.LowRange);c._highRange=a.Parser.getNumber(g.HighRange);var e=a.Parser.getNumber(g.StartAngle),f=a.Parser.getNumber(g.EndAngle);c._converter=new a.LerpFloatConverter(c._lowRange,c._highRange,a.MathHelper.degToRad(e),a.MathHelper.degToRad(f));c._initialValue=b.rotation.value;c._isRelative=a.Parser.getBoolean(g.Relative,!0);return c}__extends(c,d);c.prototype.run=function(a){var g=
this._converter;g.convert(this.getDataValue(a,this._lowRange,this._highRange));a=g.output;this._isRelative&&(a+=this._initialValue);this.node.rotation.value=a};return c}(a.RangeDynamic);a.RotationDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,g){var c=d.call(this,b,g)||this;c._lowRange=a.Parser.getNumber(g.LowRange);c._highRange=a.Parser.getNumber(g.HighRange);var e=a.Parser.getPoint(g.StartScale),f=a.Parser.getPoint(g.EndScale);c._converter=new a.LerpPointConverter(c._lowRange,c._highRange,e,f);c._initialValue=b.scale.value.clone();c._isRelative=a.Parser.getBoolean(g.Relative,!0);return c}__extends(c,d);c.prototype.run=function(a){this._converter.convert(this.getDataValue(a,this._lowRange,
this._highRange,1));var g=this._converter.output;a=g.x;g=g.y;this._isRelative&&(a*=this._initialValue.x,g*=this._initialValue.y);this.node.scale.setPointValue(a,g)};return c}(a.RangeDynamic);a.ScaleDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.None=0]="None";a[a.Fixed=1]="Fixed";a[a.IsoDate=2]="IsoDate"})(e||(e={}));var d=function(c){function b(b,d){var f=c.call(this,b,d)||this;f._targetProperty=null;f.formatType=e.None;f.fixedDecimals=0;var n=a.Parser.getString(d.TargetProperty);f._targetProperty=b.getTargetProperty(n);f.parseFormat(d);return f}__extends(b,c);Object.defineProperty(b.prototype,"dataSource",{get:function(){return this.dataValueSource},set:function(b){this.dataValueSource=
b;if(this.dataValueSource instanceof a.Variable)switch(this.dataValueSource.type){case "TIME":this.formatValue=this.formatTIME;break;case "DATE_AND_TIME":this.formatValue=this.formatDateAndTime;break;case "LINT":this.formatValue=this.format64BitSignedInt;break;case "LWORD":case "ULINT":this.formatValue=this.format64BitUnsignedInt;break;case "LREAL":case "REAL":this.formatValue=this.formatNumberToFixed;break;case "LDATE":this.formatValue=this.formatLDate;break;case "LTIME_OF_DAY":this.formatValue=
this.formatLTIMEOFDAY;break;case "LTIME":this.formatValue=this.formatLTIME;break;case "LDATE_AND_TIME":this.formatValue=this.formatLDateAndTime}},enumerable:!0,configurable:!0});b.prototype.formatNumberToFixed=function(a){if(null!=a&&this.formatType===e.Fixed){var b;b="string"==typeof a?parseFloat(a):a;isNaN(b)||(a=b.toFixed(this.fixedDecimals))}return a};b.prototype.formatTIME=function(a){return null!=a&&"number"===typeof a?this.formatLTIME(Long.fromNumber(a).mul(b.NS_TO_MS)).slice(1):a};b.prototype.formatLTIMEOFDAY=
function(a){if(null!=a&&Long.isLong(a)){var c=a.rem(b.NS_TO_D);c.lt(Long.ZERO)&&(c=b.NS_TO_D.add(c));var d=c.div(b.NS_TO_MS),e=d.toNumber();a="LTOD#"+(new Date(e)).toISOString().substr(11,8);c=e%1E3*b.NS_TO_MS+c.sub(d.mul(b.NS_TO_MS)).toNumber();if(0<c){d=Math.floor(c/b.NS_TO_MS);c-=d*b.NS_TO_MS;e=Math.floor(c/b.NS_TO_US);c-=e*b.NS_TO_US;if(0<d||0<e||0<c)a+="."+("00"+d).slice(-3);if(0<e||0<c)a+="_"+("00"+e).slice(-3);0<c&&(a+="_"+("00"+c).slice(-3))}}return a};b.prototype.formatLTIME=function(a){if(null!=
a&&Long.isLong(a)){var c=a.lt(Long.ZERO);c&&(a=Long.ZERO.sub(a));var d=a.div(b.NS_TO_D);a=a.sub(d.mul(b.NS_TO_D));var e=a.div(b.NS_TO_H);a=a.sub(e.mul(b.NS_TO_H));var f=a.div(b.NS_TO_M);a=a.sub(f.mul(b.NS_TO_M));var k=a.div(b.NS_TO_S),m=a.sub(k.mul(b.NS_TO_S)).toNumber(),p=Math.floor(m/b.NS_TO_MS),m=m-p*b.NS_TO_MS,r=Math.floor(m/b.NS_TO_US),m=m-r*b.NS_TO_US;a="";d.gt(Long.ZERO)&&(a+=d+"d");if(d.gt(Long.ZERO)||e.gt(Long.ZERO))a+=e+"h";if(d.gt(Long.ZERO)||e.gt(Long.ZERO)||f.gt(Long.ZERO))a+=f+"m";if(d.eq(Long.ZERO)&&
e.eq(Long.ZERO)&&f.eq(Long.ZERO)||k.gt(Long.ZERO)||0<p||0<r||0<m){a+=k.toString();if(0<p||0<r||0<m)a+="."+("00"+p).slice(-3);if(0<r||0<m)a+="_"+("00"+r).slice(-3);0<m&&(a+="_"+("00"+m).slice(-3));a+="s"}c&&(a="-"+a);a="LT#"+a}return a};b.prototype.formatLDateAndTime=function(a){null!=a&&Long.isLong(a)&&(a="LDT#"+this.formatLDate(a).slice(3)+"-"+this.formatLTIMEOFDAY(a).slice(5));return a};b.prototype.formatDateAndTime=function(a){return null!=a&&"number"===typeof a?this.formatLDateAndTime(Long.fromNumber(a).mul(b.NS_TO_MS)).slice(1):
a};b.prototype.formatLDate=function(a){null!=a&&Long.isLong(a)&&(a=a.div(b.NS_TO_MS).toNumber(),a="LD#"+(new Date(a)).toISOString().slice(0,10));return a};b.prototype.format64BitInt=function(a,c){if(null!=a&&this.formatType===e.Fixed){"boolean"===typeof a&&(a=a?1:0);if("number"===typeof a)return isNaN(a)||(a=a.toFixed(this.fixedDecimals)),a;if("string"===typeof a&&0<a.length){var d=TypeConverter.booleanStringToNumber(a);if(isNaN(d))a=Long.fromString(a,c);else return d.toFixed(this.fixedDecimals)}Long.isLong(a)&&
(a=b.longToFixed(a,this.fixedDecimals))}return a};b.prototype.format64BitSignedInt=function(a){return this.format64BitInt(a,!1)};b.prototype.format64BitUnsignedInt=function(a){return this.format64BitInt(a,!0)};b.longToFixed=function(a,b){var c=a.toString();if(0<b)for(var c=c+".",d=0;20>d&&d<b;d++)c+="0";return c};b.prototype.parseFormat=function(b){b=a.Parser.getString(b.Format);void 0===b||null===b||0===b.length?this.formatType=e.None:(b=b.trim().toLowerCase(),-1!==b.indexOf("fixed",0)&&(this.formatType=
e.Fixed,b=b.replace("fixed","").trim(),this.fixedDecimals=parseInt(b)))};b.prototype.run=function(a){a=null;null!=this.dataSource&&(a=this.dataSource.value);if(null!=a){if(this.formatValue)a=this.formatValue(a);else if(this.formatType===e.Fixed)if(Long.isLong(a))a=b.longToFixed(a,this.fixedDecimals);else{var c;c="string"==typeof a?parseFloat(a):a;isNaN(c)||(a=c.toFixed(this.fixedDecimals))}this._targetProperty.value=a}};b.NS_TO_US=1E3;b.NS_TO_MS=1E3*b.NS_TO_US;b.NS_TO_S=Long.fromNumber(1E3*b.NS_TO_MS);
b.NS_TO_M=b.NS_TO_S.mul(60);b.NS_TO_H=b.NS_TO_M.mul(60);b.NS_TO_D=b.NS_TO_H.mul(24);return b}(a.Dynamic);a.TextDynamic=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c){var e=d.call(this,b,c)||this,f=a.Parser.getNumber(c.LowRange),n=a.Parser.getNumber(c.HighRange),l=a.Parser.getPoint(c.StartOffset),k=a.Parser.getPoint(c.EndOffset);e._initialValue=new a.Point(b.location.value.x,b.location.value.y);e._converter=new a.LerpPointConverter(f,n,l,k);return e}__extends(c,d);c.prototype.run=function(a){this._converter.convert(this.dataSource.value);a=this._initialValue;var c=this._converter.output;this.node.location.setPointValue(a.x+
c.x,a.y+c.y)};return c}(a.Dynamic);a.TranslationDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c){var e=d.call(this,b,c)||this;e._lowRange=a.Parser.getNumber(c.LowRange);e._highRange=a.Parser.getNumber(c.HighRange);var f=a.Parser.getNumber(c.StartOffset),n=a.Parser.getNumber(c.EndOffset);e._converter=new a.LerpFloatConverter(e._lowRange,e._highRange,f,n);e._initialValue=b.location.value.x;e._isRelative=a.Parser.getBoolean(c.Relative,!0);return e}__extends(c,d);c.prototype.run=function(a){var c=this._converter;c.convert(this.getDataValue(a,
this._lowRange,this._highRange));a=c.output;this._isRelative&&(a+=this._initialValue);this.node.location.setX(a)};return c}(a.RangeDynamic);a.HorizontalTranslationDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c){var e=d.call(this,b,c)||this;e._lowRange=a.Parser.getNumber(c.LowRange);e._highRange=a.Parser.getNumber(c.HighRange);var f=a.Parser.getNumber(c.StartOffset),n=a.Parser.getNumber(c.EndOffset);e._converter=new a.LerpFloatConverter(e._lowRange,e._highRange,f,n);e._initialValue=b.location.value.y;e._isRelative=a.Parser.getBoolean(c.Relative,!0);return e}__extends(c,d);c.prototype.run=function(a){var c=this._converter;c.convert(this.getDataValue(a,
this._lowRange,this._highRange));a=c.output;this._isRelative&&(a+=this._initialValue);this.node.location.setY(a)};return c}(a.RangeDynamic);a.VerticalTranslationDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c){var e=d.call(this,b,c)||this;e.visibilityIsAuthorized=!0;var f=a.Parser.getBoolean(c.ChangeWhen);e._converter=new a.BooleanConverter(f?a.SignalState.HIGH:a.SignalState.LOW,!1,!0);return e}__extends(c,d);c.prototype.OnSecurityContextChanged=function(a){this.visibilityIsAuthorized=a.shouldShowNode(this.node)};c.prototype.run=function(a){this.node.visibility.value=this.visibilityIsAuthorized&&this.GetConvertedValueFromDataSource()};c.prototype.GetConvertedValueFromDataSource=
function(){this._converter.convert(this.dataSource.value);return this._converter.output};return c}(a.Dynamic);a.VisibilityDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.BlinkOff=0]="BlinkOff";a[a.BlinkOn=1]="BlinkOn";a[a.BlinkDisabled=2]="BlinkDisabled"})(e||(e={}));var d=function(c){function b(b,d,f){var n=this,l=d.getTargetProperty(f.TargetProperty).value;f.ThresholdData=Array(3);f.ThresholdData[0]={Threshold:0,Value:f.OnColor};f.ThresholdData[1]={Threshold:1,Value:f.OffColor};f.ThresholdData[2]={Threshold:e.BlinkDisabled};n=c.call(this,b,d,f)||this;a.FillFactory.IsNoFill(l)||(n._thresholds[2].style=l);void 0===
n.blinkStatusVariableName&&(n.blinkStatusVariableName="@BlinkStatus");return n}__extends(b,c);b.prototype.getDataValue=function(a,b,d,f){void 0===f&&(f=0);a=c.prototype.getDataValue.call(this,a,b,d,f);"boolean"===typeof a&&(a=a?1:0);0==a?a=e.BlinkDisabled:null!=this.blinkStateDataSource&&(a=this.blinkStateDataSource.value);return a};return b}(a.FillDynamic);a.BlinkDynamic=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(a,c){var e=d.call(this,a,c)||this;e.action=null;e.active=!1;return e}__extends(c,d);c.prototype.run=function(b){this.dataSource.value?this.active||(this.active=!0,a.Node.ActionExecuted(this.node,this.action)):this.active&&(this.active=!1)};return c}(a.Dynamic);a.DataTriggerDynamic=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.createDynamic=function(c,b,d){var e=void 0;void 0!=d&&(e=a.Parser.getString(d.Type));switch(e){case "PathDynamic":return new a.PathDynamic(b,d);case "RotationDynamic":return new a.RotationDynamic(b,d);case "ScaleDynamic":return new a.ScaleDynamic(b,d);case "TranslationDynamic":return new a.TranslationDynamic(b,d);case "HorizontalTranslationDynamic":return new a.HorizontalTranslationDynamic(b,d);case "VerticalTranslationDynamic":return new a.VerticalTranslationDynamic(b,
d);case "VisibilityDynamic":return new a.VisibilityDynamic(b,d);case "DisableDynamic":return new a.DisableDynamic(b,d);case "DataTriggerDynamic":return new a.DataTriggerDynamic(b,d)}if(b instanceof a.VisualNode)switch(e){case "ButtonStateDynamic":return new a.ButtonStateDynamic(b,d);case "ColorDynamic":return new a.ColorDynamic(c,b,d);case "MultiColorDynamic":return new a.MultiColorDynamic(b,d);case "FillDynamic":return new a.FillDynamic(c,b,d);case "TextDynamic":return new a.TextDynamic(b,d);case "BlinkDynamic":return new a.BlinkDynamic(c,
b,d)}return null};return d}();a.DynamicFactory=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.None=0]="None";a[a.Click=1]="Click";a[a.Drag=2]="Drag";a[a.Pressed=3]="Pressed";a[a.Released=4]="Released";a[a.Data=5]="Data"})(e=a.ActionGesture||(a.ActionGesture={}));var d;(function(a){a[a.None=0]="None";a[a.Right=1]="Right";a[a.Middle=2]="Middle";a[a.Left=4]="Left"})(d=a.MouseButtons||(a.MouseButtons={}));var c=function(){function a(b){void 0===b&&(b={});this.gesture=e.None;this.gesture=this.parseGesture(b);this.mouseButtons=this.parseMouseButtons(b)}
a.prototype.parseGesture=function(a){if(void 0==a.Gesture)return e.Click;var b=e.Click;switch(a.Gesture.toUpperCase()){case "PRESSED":b=e.Pressed;break;case "RELEASED":b=e.Released;break;case "DATA":b=e.Data;break;case "NONE":b=e.None}return b};a.prototype.parseMouseButtons=function(a){if(void 0==a.Button)return d.Left;var b=d.None;a=a.Button.split(/\s+/);for(var c=0;c<a.length;c++)switch(a[c].toUpperCase()){case "LEFT":b|=d.Left;break;case "RIGHT":b|=d.Right}return b};return a}();a.Action=c})(f.Hmi||
(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var c=d.call(this,b)||this;c.targetName=null;c.target=null;c.targetName=a.Parser.getString(b.Variable);return c}__extends(c,d);return c}(a.Action);a.ToggleValueAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){var c=d.call(this,b)||this;c.sourceType=a.WriteRequestSourceType.Constant;c.sourceName=null;c.source=null;c.targetName=null;c.target=null;c.targetName=a.Parser.getString(b.DestinationVariable,null);switch(a.Parser.getString(b.SourceType)){case "Constant":c.sourceType=a.WriteRequestSourceType.Constant;c.sourceName=a.Parser.getString(b.SourceConstant,null);break;case "Variable":c.sourceType=a.WriteRequestSourceType.Variable,c.sourceName=a.Parser.getString(b.SourceVariable,
null)}return c}__extends(c,d);return c}(a.Action);a.WriteValueAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var c=d.call(this,b)||this;c.increment=0;c.targetName=null;c.target=null;c.targetName=a.Parser.getString(b.Variable,null);c.increment=a.Parser.getNumber(b.StepConstant,0);return c}__extends(c,d);return c}(a.Action);a.IncrementValueAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var c=d.call(this,b)||this;c.pageName=null;c.pageName=a.Parser.getString(b.Page);return c}__extends(c,d);return c}(a.Action);a.LoadPageAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var c=d.call(this,b)||this;c.pageName=null;c.dimBackground=!1;c.pageName=a.Parser.getString(b.Page);c.dimBackground=a.Parser.getBoolean(b.DimBackground,!1);return c}__extends(c,d);return c}(a.Action);a.OpenDialogAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){void 0===b&&(b={});return a.call(this,b)||this}__extends(c,a);return c}(a.WriteValueAction);a.CloseDialogAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var c=d.call(this,b)||this;c.target=null;c.symbolInstance=null;c.symbol=a.Parser.getString(b.Symbol,null);c.value1=a.Parser.getString(b.Value1,null);c.value2=a.Parser.getString(b.Value2,null);c.targetName=a.Parser.getString(b.ResultVariable,null);c.buttons=a.Parser.getNumber(b.Buttons,0);c.icon=a.Parser.getNumber(b.Icon,0);c.caption=a.Parser.getString(b.Caption,null);return c}__extends(c,d);return c}(a.Action);a.MessageBoxAction=
e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){void 0===b&&(b={});return a.call(this,b)||this}__extends(c,a);return c}(a.Action);a.PageBackAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){void 0===b&&(b={});return a.call(this,b)||this}__extends(c,a);return c}(a.Action);a.PageForwardAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Up=2]="Up";a[a.Down=3]="Down";a[a.Home=4]="Home"})(e=a.NavDirection||(a.NavDirection={}));var d=function(a){function b(b,d){void 0===b&&(b={});var f=a.call(this,b)||this;f.direction=e.Left;f.direction=d;return f}__extends(b,a);return b}(a.LoadPageAction);a.NavigationAction=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.Once=0]="Once";a[a.Continuous=1]="Continuous"})(e=a.FollowPathWriteMode||(a.FollowPathWriteMode={}));var d=function(c){function b(d){void 0===d&&(d={});var f=c.call(this,d)||this;f.writeMode=e.Once;f.snapToTick=!1;f.gesture=a.ActionGesture.Drag;f.writeMode=b.getWriteMode(d);f.snapToTick=a.Parser.getBoolean(d.SnapToTick,!1);return f}__extends(b,c);b.getWriteMode=function(a){var b=e.Once;if(void 0!==a.WriteMode)switch(a.WriteMode){case "Continuous":b=
e.Continuous;break;default:b=e.Once}return b};return b}(a.Action);a.FollowPathAction=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b){void 0===b&&(b={});var c=d.call(this,b)||this;c.hitRegionWidth=0;c.gesture=a.ActionGesture.Click;c.hitRegionWidth=a.Parser.getNumber(b.HitRegionWidth,0);return c}__extends(c,d);return c}(a.Action);a.UpdateFollowersAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.createAction=function(c){var b=void 0;void 0!=c&&(b=a.Parser.getString(c.Type));switch(b){case "ToggleValueAction":return new a.ToggleValueAction(c);case "WriteValueAction":return new a.WriteValueAction(c);case "IncrementValueAction":return new a.IncrementValueAction(c);case "LoadPageAction":return new a.LoadPageAction(c);case "OpenDialogAction":return new a.OpenDialogAction(c);case "CloseDialogAction":return new a.CloseDialogAction(c);case "MessageBoxAction":return new a.MessageBoxAction(c);
case "PageBackAction":return new a.PageBackAction(c);case "PageForwardAction":return new a.PageForwardAction(c);case "FollowPathAction":return new a.FollowPathAction(c);case "UpdateFollowersAction":return new a.UpdateFollowersAction(c);case "NavigateLeftAction":return new a.NavigationAction(c,a.NavDirection.Left);case "NavigateRightAction":return new a.NavigationAction(c,a.NavDirection.Right);case "NavigateUpAction":return new a.NavigationAction(c,a.NavDirection.Up);case "NavigateDownAction":return new a.NavigationAction(c,
a.NavDirection.Down);case "NavigateHomeAction":return new a.NavigationAction(c,a.NavDirection.Home);case "LogInAction":return new a.LogInAction(c);case "LogOutAction":return new a.LogOutAction(c);case "LaunchFileAction":return new a.ExecuteCommandAction(c)}};return d}();a.ActionFactory=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e;(function(a){a[a.None=0]="None";a[a.BeginDrag=1]="BeginDrag";a[a.Drag=2]="Drag";a[a.EndDrag=3]="EndDrag"})(e=a.DragState||(a.DragState={}));var d=function(){return function(){this.state=e.None;this.mouseCurrent=new a.Point;this.dynamic=this.action=null;this.dragValueSource=new a.DataValueSource;this.dragPoint=new a.Point;this.closestPoint=new a.Point}}();a.DragData=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){void 0===b&&(b={});return a.call(this,b)||this}__extends(c,a);c.userNameTargetName="USERNAME";c.passwordTargetName="PASSWORD";return c}(a.Action);a.LogInAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){return a.call(this,b)||this}__extends(c,a);return c}(a.LoadPageAction);a.LogOutAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(){function b(){}b.prototype.DoOpen=function(b,c){return c===a.CommandLaunchOption.SameWindow?window.open(b,b):window.open(b,"_blank")};return b}(),d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.prototype.Open=function(a,b,c){return this.DoOpen(a,b)};return b}(e),c=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.prototype.Open=function(a,b){return this.DoOpen(a,b)};return b}(e),
b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.prototype.Open=function(a,b){return this.DoOpen(a,b)};return b}(e);a.getProjectLauncher=function(){return new d};a.getFileLauncher=function(){return new c};a.getUrlLauncher=function(){return new b};a.getCommandLineLauncher=function(){return null}})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.NewWindow=0]="NewWindow";a[a.NewWindowFullScreen=1]="NewWindowFullScreen";a[a.SameWindow=2]="SameWindow"})(e=a.CommandLaunchOption||(a.CommandLaunchOption={}));var d=function(c){function b(b){var d=c.call(this,b)||this;d.windowLaunchOption=e.SameWindow;d.commandType=a.Parser.getString(b.LaunchFileCommandType);switch(d.commandType){case "OpenSupportFile":var f=a.Parser.getString(b.LaunchFileSupportFileName);null!=f&&(d.commandTarget=a.ModuleLoader.getResourceUrl(encodeURIComponent(f)));
break;case "OpenProject":d.commandTarget=a.Parser.getString(b.LaunchFileProjectLocation);b.LaunchFileProjectAliasName&&(d.alias=a.Parser.getString(b.LaunchFileProjectAliasName));break;case "OpenUrl":d.commandTarget=a.Parser.getString(b.LaunchFileUrl);break;case "RunCommandLine":d.commandTarget=b.LaunchFileRunCommandLine,b.LaunchFileRunCommandLineWorkingDirectory&&(d.workingDirectory=a.Parser.getString(b.LaunchFileRunCommandLineWorkingDirectory))}if(b.LaunchFileWindowBehavior)switch(a.Parser.getString(b.LaunchFileWindowBehavior)){case "SameWindow":d.windowLaunchOption=
e.SameWindow;break;case "NewWindow":d.windowLaunchOption=e.NewWindow;break;case "NewWindowFullScreen":d.windowLaunchOption=e.NewWindowFullScreen}return d}__extends(b,c);return b}(a.Action);a.ExecuteCommandAction=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b,c){var e=a.call(this,{})||this;e.gesture=b;e.actionCallback=c;return e}__extends(c,a);return c}(a.Action);a.CustomAction=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(c,b){var d=this;this.parent=this.uid=null;this.visibility=new a.BooleanValue(!0);this.isEnabled=new a.BooleanValue(!0);this.location=new a.PointValue;this.rotation=new a.FloatValue;this.scale=new a.PointValue(new a.Point(1,1));this._visibilityCount=0;this.screenMatrix=new a.Matrix;this.screenBounds=new a.Bounds;this.tabIndex=0;this.focusStyle=a.FocusStyle.Box;this.nodes=[];this.dynamics=[];this.actions=[];this._animationWatchDog=0;this.id=a.Parser.getString(c.ID);
this.parent=b;this.isEnabled.value=a.Parser.getBoolean(c.isEnabled,!0);this.tabIndex=a.Parser.getNumber(c.TabOrder,0);this.location.value=a.Parser.getPoint(c.Location);this.scale.value=a.Parser.getPoint(c.Scale,{X:1,Y:1});this.rotation.value=a.MathHelper.degToRad(a.Parser.getNumber(c.Rotation));var e=function(a){d.resetAnimationWatchDog(!0)};this.location.valueChanged=e;this.scale.valueChanged=e;this.rotation.valueChanged=e;this.visibility.valueChanged=function(a){d.onVisibilityChanged(d.visibility.value)};
this.loadSecurityExpressions(c)}Object.defineProperty(d.prototype,"isVisible",{get:function(){return 0===this._visibilityCount},enumerable:!0,configurable:!0});d.prototype.init=function(a){return this};d.prototype.onVisibilityChanged=function(a){this._visibilityCount+=a?1:-1;if(0<this._visibilityCount)throw Error("visibilityCount > 0");this.resetAnimationWatchDog();for(var b=0,d=this.nodes.length;b<d;b++)this.nodes[b].onVisibilityChanged(a)};d.prototype.loadSecurityExpressions=function(c){c.EnabledAccessControl&&
"Always"!=c.EnabledAccessControl.Scope&&(this.enabledAccessControl=new a.AccessControlExpression(c.EnabledAccessControl));c.VisibilityAccessControl&&"Always"!=c.VisibilityAccessControl.Scope&&(this.visibilityAccessControl=new a.AccessControlExpression(c.VisibilityAccessControl))};d.prototype.isAnimating=function(c){return c-this._animationWatchDog<a.VisualNode.animationWatchDogPreset};d.prototype.resetAnimationWatchDog=function(a){void 0===a&&(a=!1);this._animationWatchDog=Date.now();if(a)for(var b=
0,d=this.nodes.length;b<d;b++)this.nodes[b].resetAnimationWatchDog(a)};d.prototype.computeScreenMatrix=function(a){var b=this.screenMatrix,d=this.location.value,e=this.rotation.value,f=this.scale.value;b.identity();b.postMultiply(a);b.translate(d.x,d.y);b.rotate(e);b.scale(f.x,f.y)};d.prototype.computeScreenClipRect=function(){};d.prototype.computeScreenBounds=function(){this.screenBounds.reset()};d.prototype.computeFocusRect=function(a){var b=this.screenBounds,d=b.left,e=b.top,f=b.right,b=b.bottom;
a[0].x=d;a[0].y=e;a[1].x=f;a[1].y=e;a[2].x=f;a[2].y=b;a[3].x=d;a[3].y=b};d.prototype.onFocus=function(){null!==d.Focused&&d.Focused(this);return!0};d.prototype.onBlur=function(){null!==d.Blurred&&d.Blurred(this);return!0};d.prototype.onKeyPress=function(a){return!0};d.prototype.onKeyDown=function(a){return!0};d.prototype.onKeyUp=function(a){return!0};d.prototype.onPointerOver=function(c){return this.hasActions(!1)?(c=this.getAction(function(b){return b.gesture===a.ActionGesture.Click||b.gesture===
a.ActionGesture.Pressed||b.gesture===a.ActionGesture.Released}),this.isEnabled.value&&null!==c&&null!==d.CursorChanged&&d.CursorChanged(this,a.MouseCursor.Pointer),!0):!1};d.prototype.onPointerOut=function(c){d.CursorChanged(this,a.MouseCursor.Default);return!0};d.prototype.onPointerDown=function(c){return this.executeActions(a.ActionGesture.Pressed)};d.prototype.onPointerUp=function(c){return this.executeActions(a.ActionGesture.Released)};d.prototype.onPointerTap=function(c){return this.executeActions(a.ActionGesture.Click)};
d.prototype.implBeginDrag=function(c,b,g){c=this.getAction(function(b){return b instanceof a.FollowPathAction});if(null===c)return!1;b=this.getDynamic(function(b){return b instanceof a.PathDynamic});if(null===b)return!1;g.action=c;g.dynamic=b;null!==d.DragExecuted&&d.DragExecuted(this,d._dragData);return!0};d.prototype.onBeginDrag=function(c,b){d._dragData.state=a.DragState.None;if(!this.isEnabled.value)return!1;d._dragData.state=a.DragState.BeginDrag;d._dragData.mouseCurrent.x=c;d._dragData.mouseCurrent.y=
b;return this.implBeginDrag(c,b,d._dragData)?!0:!1};d.prototype.implDrag=function(a,b,g){d.DragExecuted(this,g);return!0};d.prototype.onDrag=function(c,b){if(d._dragData.state!==a.DragState.BeginDrag&&d._dragData.state!==a.DragState.Drag)return!1;d._dragData.state=a.DragState.Drag;d._dragData.mouseCurrent.x=c;d._dragData.mouseCurrent.y=b;this.implDrag(c,b,d._dragData);return!0};d.prototype.implEndDrag=function(a,b,g){d.DragExecuted(this,g);return!0};d.prototype.onEndDrag=function(c,b){if(d._dragData.state!==
a.DragState.BeginDrag&&d._dragData.state!==a.DragState.Drag)return!1;d._dragData.state=a.DragState.EndDrag;d._dragData.mouseCurrent.x=c;d._dragData.mouseCurrent.y=b;this.implEndDrag(c,b,d._dragData);return!0};d.prototype.hasActions=function(a){var b=0<this.actions.length;if(!b&&a)for(a=this.parent;null!==a&&!b;)b=0<a.actions.length,a=a.parent;return b};d.prototype.getAction=function(a){for(var b=0;b<this.actions.length;b++)if(a(this.actions[b]))return this.actions[b];return null};d.prototype.executeActions=
function(c){if(!this.isEnabled.value)return!1;for(var b=0,g=0;g<this.actions.length;g++){var e=this.actions[g];e.gesture===c&&e.mouseButtons!=a.MouseButtons.None&&(b++,null!==d.ActionExecuted&&d.ActionExecuted(this,e))}return 0<b};d.prototype.getDynamic=function(a){for(var b=0;b<this.dynamics.length;b++)if(a(this.dynamics[b]))return this.dynamics[b];return null};d.prototype.getChildNodeIndex=function(a){for(var b=-1,d=0;d<this.nodes.length;d++)if(this.nodes[d]==a){b=d;break}return b};d.prototype.removeChildNode=
function(a){a=this.getChildNodeIndex(a);-1!=a&&this.nodes.splice(a,1)};d.prototype.getTargetProperty=function(a){return null};d.PressedExecuted=null;d.ReleasedExecuted=null;d.ActionExecuted=null;d.DragExecuted=null;d.CursorChanged=null;d.Focused=null;d.Blurred=null;d.Enabled=null;d.Disabled=null;d._dragData=new a.DragData;return d}();a.Node=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b,c){return a.call(this,b,c)||this}__extends(c,a);c.prototype.onLoaded=function(){};return c}(a.Node);a.Group=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(){var b=a.call(this,{},null)||this;b.uid=b.id="@Root";return b}__extends(c,a);return c}(a.Group);a.RootNode=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.Flat=0]="Flat";a[a.Glossy=1]="Glossy"})(e=a.GuiStyle||(a.GuiStyle={}));(function(a){a[a.None=0]="None";a[a.Box=1]="Box"})(a.FocusStyle||(a.FocusStyle={}));var d=function(c){function b(d,e,f){var n=c.call(this,e,f)||this;n.text=null;n.fillStyle=new a.DynamicValue(null);n.strokeStyle=new a.DynamicValue(null);n.fontFillStyle=new a.DynamicValue(null);n.path=null;n.guiStyle=b.defaultGuiStyle;n.font=null;n.lineWidth=b.defaultLineWidth;n.dashSegments=[];n.dashOffset=
0;n._boundsPoint=new a.Point;n.strokeStyle.value=a.Parser.getColor(e.LineColor,b.defaultLineColor).toString();n.fontFillStyle.value=a.Parser.getColor(e.FontColor,b.defaultFontColor).toString();n.guiStyle=b.getGuiStyle(e.GuiStyle,b.defaultGuiStyle);n.lineWidth=a.Parser.getNumber(e.LineWidth,b.defaultLineWidth);n.loadDashStyle(e);d=a.Parser.getString(e.FontFamily,b.defaultFontFamily);f=a.Parser.getNumber(e.FontSize,b.defaultFontSize);var l=a.Parser.getString(e.FontStyle,b.defaultFontStyle),k=a.Parser.getNumber(e.FontWeight,
b.defaultFontWeight);e=a.Parser.getNumber(e.FontLineSpacing,b.defaultFontLineSpacing);n.font=new a.FontInfo(d,f,l,k,e);e=function(a){n.resetAnimationWatchDog()};n.fillStyle.valueChanged=e;n.strokeStyle.valueChanged=e;n.fontFillStyle.valueChanged=e;n.isEnabled.valueChanged=function(b){n.resetAnimationWatchDog();n.isEnabled.value&&null!==a.Node.Enabled?a.Node.Enabled(n):null!==a.Node.Disabled&&a.Node.Disabled(n)};return n}__extends(b,c);Object.defineProperty(b.prototype,"bounds",{get:function(){return this.path.hitBounds},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasHitRegion",{get:function(){return this.getHasHitRegion()},enumerable:!0,configurable:!0});b.prototype.getHasHitRegion=function(){return this.hasActions(!0)};b.prototype.initVisual=function(a,b){c.prototype.init.call(this,b);this.path&&!this.needPathStrokeApproximation()&&this.path.freeStrokeApproximation();return this};b.prototype.needPathStrokeApproximation=function(){return this.hasHitRegion};b.getGuiStyle=function(a,b){void 0===
b&&(b=e.Flat);if(void 0==a)return b;switch(a){case "Glossy":return e.Glossy;default:return e.Flat}};b.prototype.loadDashStyle=function(b){if(void 0!=b.DashStyle&&void 0!=b.DashStyle.Dashes){var c=b.DashStyle.Dashes;this.dashSegments=Array(c.length);for(var d=0;d<c.length;d++)this.dashSegments[d]=this.lineWidth*a.Parser.getNumber(c[d]),0>=this.dashSegments[d]&&(this.dashSegments[d]=1);this.dashOffset=a.Parser.getNumber(b.DashStyle.Offset,0)}};b.prototype.draw=function(a,b){};b.prototype.isPointInPath=
function(b,c,d){return null===this.path?!1:a.PathRegion.isPointInPath(b,this.path,c,d,this.screenMatrix)};b.prototype.isPointClippped=function(a,b){return this.screenClipRect?!this.screenClipRect.containsXY(a,b):!1};b.prototype.onKeyDown=function(b){if("Enter"==b.key||" "==b.key||"Spacebar"==b.key){var c=new a.PointerEventArgs(b.source);a.App.dispatchNodeEvent(this,function(a){return a.onPointerOver(c)});a.App.dispatchNodeEvent(this,function(a){return a.onPointerDown(c)});return!0}return!1};b.prototype.onKeyUp=
function(b){if("Enter"==b.key||" "==b.key||"Spacebar"==b.key){var c=new a.PointerEventArgs(b.source);a.App.dispatchNodeEvent(this,function(a){return a.onPointerUp(c)});a.App.dispatchNodeEvent(this,function(a){return a.onPointerTap(c)});a.App.dispatchNodeEvent(this,function(a){return a.onPointerOut(c)})}return!1};b.prototype.computeScreenBounds=function(){var a=this.screenBounds,b=this.bounds;a.reset();var c=b.left,d=b.top,e=b.right,b=b.bottom;if(0<e-c&&0<b-d){var f=this.screenMatrix,m=this._boundsPoint;
f.transformXY(c,d,m);a.addXY(m.x,m.y);f.transformXY(e,d,m);a.addXY(m.x,m.y);f.transformXY(e,b,m);a.addXY(m.x,m.y);f.transformXY(c,b,m);a.addXY(m.x,m.y)}};b.prototype.computeFocusRect=function(a){var b=this.bounds,c=b.left,d=b.top,e=b.right,b=b.bottom;a[0].x=c;a[0].y=d;a[1].x=e;a[1].y=d;a[2].x=e;a[2].y=b;a[3].x=c;a[3].y=b;this.screenMatrix.transformPointsInPlace(a)};b.prototype.getTargetProperty=function(a){var b=c.prototype.getTargetProperty.call(this,a);if(null===b)switch(a){case "Text":return this.text;
case "Fill":return this.fillStyle;case "LineColor":return this.strokeStyle;case "FontColor":return this.fontFillStyle}return b};b.defaultGuiStyle=e.Flat;b.defaultFontFamily="sans-serif";b.defaultFontSize=12;b.defaultFontStyle="normal";b.defaultFontWeight=400;b.defaultFontLineSpacing=1.15;b.defaultFontColor=a.Color.Black;b.defaultLineColor=a.Color.Black;b.defaultLineWidth=0;b.defaultFill=a.SolidFill.White;b.defaultShadowOffset=new a.Point(1,1);b.defaultShadowBlur=2;b.defaultShadowColor="rgba(0, 0, 0, 0.4)";
b.defaultPathMiterLimit=15;b.defaultRectangleMiterLimit=2;b.disabledFillColor="rgba(244, 244, 244, 1)";b.disabledLineColor="rgba(173, 178, 181, 1)";b.defaultLineEndType="None";b.defaultLineEndSize="Medium";b.defaultFocusLineWidth=5;b.defaultFocusPadding=0.5*b.defaultFocusLineWidth+2;b.defaultFocusStrokeStyle="rgba(63, 207, 216, 0.8)";b.defaultDialogCornerRadius=new a.Point(5,5);b.defaultDialogDimmerColor="rgba(0, 0, 0, 0.6)";b.defaultDialogShadowColor="rgba(0, 0, 0, 0.6)";b.defaultDialogShadowBlur=
20;b.animationWatchDogPreset=1E3;return b}(a.Node);a.VisualNode=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c,e){e=d.call(this,b,c,e)||this;var f=a.Parser.getRect(c.Geometry.Rect),n=a.Parser.getSize(c.CornerRadii),l=!a.FillFactory.IsNoFill(c.Fill);e.path=new a.RectangleGeometry(f,l,n,e.lineWidth,a.VisualNode.defaultRectangleMiterLimit,!0);e.fillStyle.value=a.FillFactory.createFillStyle(b,c.Fill,f);return e}__extends(c,d);c.prototype.draw=function(b,c){var d=this.screenMatrix;b.save();b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);b.beginPath();
a.PathRegion.define(b,this.path);null!==this.fillStyle.value&&(b.fillStyle=this.fillStyle.value,b.transformFill());0<this.lineWidth&&(b.lineJoin="miter",b.lineCap="square",b.miterLimit=2,b.strokeStyle=this.strokeStyle.value,b.lineWidth=this.lineWidth,b.setLineDash(this.dashSegments),b.lineDashOffset=this.dashOffset,b.stroke());b.restore()};return c}(a.VisualNode);a.Rectangle=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c,e){e=d.call(this,b,c,e)||this;var f=a.Parser.getRect(c.Geometry.Rect),n=!a.FillFactory.IsNoFill(c.Fill);e.path=new a.EllipseGeometry(f,n,e.lineWidth,!0);e.fillStyle.value=a.FillFactory.createFillStyle(b,c.Fill,f);return e}__extends(c,d);c.prototype.initVisual=function(a,c){d.prototype.initVisual.call(this,a,c);this.hasHitRegion||this.path.freeStrokeApproximation();return this};c.prototype.draw=function(b,c){b.save();var d=this.screenMatrix;
b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);b.beginPath();a.PathRegion.define(b,this.path);null!==this.fillStyle.value&&(b.fillStyle=this.fillStyle.value,b.transformFill());0<this.lineWidth&&(b.strokeStyle=this.strokeStyle.value,b.lineCap="square",b.lineWidth=this.lineWidth,b.setLineDash(this.dashSegments),b.lineDashOffset=this.dashOffset,b.stroke());b.restore()};return c}(a.VisualNode);a.Ellipse=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){(function(a){a[a.Forward=0]="Forward";a[a.Reverse=1]="Reverse"})(a.PathDirection||(a.PathDirection={}));var e=function(d){function c(b,c,e){e=d.call(this,b,c,e)||this;e.solver=null;e._startArrowSize=a.ArrowSize.None;e._endArrowSize=a.ArrowSize.None;e.dragData=null;e.loadArrowSizes(c);var f=e.lineWidth,n=e.loadSubPaths(c.Geometry);e.path=new a.PathGeometry(n,!a.FillFactory.IsNoFill(c.Fill),!1,f,a.VisualNode.defaultPathMiterLimit,!0,e._startArrowSize,e._endArrowSize);e.fillStyle.value=
a.FillFactory.createFillStyle(b,c.Fill,e.path.fillBounds);return e}__extends(c,d);c.prototype.initVisual=function(b,c){d.prototype.initVisual.call(this,b,c);var e=this.strokeWidth;e!=this.lineWidth&&(this.path.updateStrokeWidth(e,a.VisualNode.defaultPathMiterLimit,this._startArrowSize,this._endArrowSize),this.fillStyle.value=a.FillFactory.createFillStyle(b,c.Fill,this.path.fillBounds));this.hasHitRegion&&0<e||this.path.freeStrokeApproximation();return this};c.prototype.needPathStrokeApproximation=
function(){return!0};Object.defineProperty(c.prototype,"strokeWidth",{get:function(){var b=this.lineWidth,c=this.getAction(function(b){return b instanceof a.UpdateFollowersAction});null!==c&&c.hitRegionWidth>this.lineWidth&&(b=c.hitRegionWidth);return b},enumerable:!0,configurable:!0});c.prototype.loadSubPaths=function(b){var c=[];if(void 0!=b.SubPaths)for(var d=0;d<b.SubPaths.length;d++)c.push(new a.SubPath(b.SubPaths[d]));return c};c.prototype.loadArrowSizes=function(b){this._endArrowSize=this._startArrowSize=
a.ArrowSize.None;"None"!=a.Parser.getString(b.StartLineEndType,a.VisualNode.defaultLineEndType)&&(this._startArrowSize=this.parseArrowSize(a.Parser.getString(b.StartLineEndSize,a.VisualNode.defaultLineEndSize)));"None"!=a.Parser.getString(b.EndLineEndType,a.VisualNode.defaultLineEndType)&&(this._endArrowSize=this.parseArrowSize(a.Parser.getString(b.EndLineEndSize,a.VisualNode.defaultLineEndSize)))};c.prototype.parseArrowSize=function(b){switch(b){case "Small":return a.ArrowSize.Small;case "Large":return a.ArrowSize.Large}return a.ArrowSize.Medium};
c.prototype.draw=function(b,c){var d=this.screenMatrix;b.save();b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);b.beginPath();a.PathRegion.define(b,this.path);null!==this.fillStyle.value&&(b.fillStyle=this.fillStyle.value,b.transformFill());0<this.lineWidth&&(b.strokeStyle=this.strokeStyle.value,b.lineWidth=this.lineWidth,b.lineCap="square",b.lineJoin="miter",b.miterLimit=a.VisualNode.defaultPathMiterLimit,b.setLineDash(this.dashSegments),b.lineDashOffset=this.dashOffset,b.stroke());if(this._startArrowSize!=
a.ArrowSize.None||this._endArrowSize!=a.ArrowSize.None)b.beginPath(),a.PathRegion.defineArrowHeads(b,this.path),b.fillStyle=this.strokeStyle.value,b.fill();c&a.RenderOptions.DrawAnimationPoints&&null!==this.solver&&this.drawChords(b);b.restore()};c.prototype.drawChords=function(b){b.save();b.setTransform(1,0,0,1,0,0);var c=new a.Point,d=new a.Point;b.lineWidth=1;b.strokeStyle="rgba(255, 255, 0, 1.0)";for(var e=0;e<this.solver.curveSolvers.length;e++){var f=this.solver.curveSolvers[e];if(f instanceof
a.LineSolver)b.beginPath(),f=this.solver.curveSolvers[e].curve,c.x=f.controlPoints[0].x,c.y=f.controlPoints[0].y,this.screenMatrix.transformPoint(c,d),b.moveTo(d.x,d.y),c.x=f.controlPoints[1].x,c.y=f.controlPoints[1].y,this.screenMatrix.transformPoint(c,d),b.lineTo(d.x,d.y),b.stroke();else if(f instanceof a.BezierSolver){var l=this.solver.curveSolvers[e].curve;l.interpolate(0,c);this.screenMatrix.transformPoint(c,d);b.beginPath();b.moveTo(d.x,d.y);for(var k=1;k<=f.distances.length;k++)l.interpolate(k/
f.distances.length,c),this.screenMatrix.transformPoint(c,d),b.lineTo(d.x,d.y);b.stroke();l.interpolate(0,c);this.screenMatrix.transformPoint(c,d);b.beginPath();b.rect(d.x-2,d.y-2,4,4);for(k=1;k<=f.distances.length;k++)l.interpolate(k/f.distances.length,c),this.screenMatrix.transformPoint(c,d),b.rect(d.x-2,d.y-2,4,4);b.fillStyle="rgba(255, 0, 255, 1.0)";b.fill()}}b.restore()};c.prototype.onPointerDown=function(b){if(b.source!==this)return!0;if(null!==this.getAction(function(b){return b instanceof a.UpdateFollowersAction})){var c=
[];this.getFollowers(this,c);for(var e=0;e<c.length;e++)c[e].onBeginDrag(b.x,b.y),c[e].onEndDrag(b.x,b.y);return!0}return d.prototype.onPointerDown.call(this,b)};c.prototype.onPointerUp=function(a){return a.source!==this?!0:d.prototype.onPointerUp.call(this,a)};c.prototype.onPointerTap=function(a){return a.source!==this?!0:d.prototype.onPointerTap.call(this,a)};c.prototype.onPointerOver=function(b){return b.source!==this?!0:this.hasActions(!1)?(b=this.getAction(function(b){return b.gesture===a.ActionGesture.Click}),
this.isEnabled.value&&null!==b&&null!==a.Node.CursorChanged&&a.Node.CursorChanged(this,a.MouseCursor.Pointer),!0):!1};c.prototype.onPointerOut=function(a){return a.source!==this?!0:d.prototype.onPointerOut.call(this,a)};c.prototype.getFollowers=function(b,c){for(var d=0;d<b.nodes.length;d++){var e=b.nodes[d];null!==e.getDynamic(function(b){return b instanceof a.PathDynamic})?c.push(e):this.getFollowers(e,c)}};c.prototype.drawDragData=function(a){a.setTransform(this.screenMatrix.m11,this.screenMatrix.m12,
this.screenMatrix.m21,this.screenMatrix.m22,this.screenMatrix.dx,this.screenMatrix.dy);null!==this.dragData&&(a.lineWidth=1,a.strokeStyle="green",a.moveTo(this.dragData.dragPoint.x,this.dragData.dragPoint.y),a.lineTo(this.dragData.closestPoint.x,this.dragData.closestPoint.y),a.stroke())};return c}(a.VisualNode);a.Path=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();(function(f){(function(a){var e=function(a){function c(b,c,e){return a.call(this,b,c,e)||this}__extends(c,a);return c}(a.Path);a.Line=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(){return function(b){this.length=a.Parser.getNumber(b.Length);this.width=a.Parser.getNumber(b.Width);this.offset=a.Parser.getNumber(b.Offset)}}(),d=function(){return function(b){this.referenceRect=new a.Rect;this.anchor=a.Parser.getString(b.Anchor);this.pathSide=a.Parser.getString(b.PathSide);this.offset=a.Parser.getNumber(b.Offset)}}(),c=function(){return function(){this.start=new a.Point;this.end=new a.Point}}(),b=function(){return function(){this.matrix=
new a.Matrix}}(),g=function(g){function f(a,b,c){c=g.call(this,a,b,c)||this;c._tickCount=0;c._majorTicks=[];c._minorTicks=[];c._labels=[];c._majorTickWidth=1;c._minorTickWidth=1;a.font=c.font.toString();c.createScale(a,b);return c}__extends(f,g);Object.defineProperty(f.prototype,"tickCount",{get:function(){return this._tickCount},enumerable:!0,configurable:!0});f.prototype.createScale=function(b,g){var f=a.Parser.getNumber(g.GaugeScaleSettings.MinValue),h=a.Parser.getNumber(g.GaugeScaleSettings.MaxValue),
q=a.Parser.getNumber(g.GaugeScaleSettings.MajorTicks.Interval),r=a.Parser.getNumber(g.GaugeScaleSettings.MinorTicks.Count),u=new e(g.GaugeScaleSettings.MajorTicks.Geometry),v=new e(g.GaugeScaleSettings.MinorTicks.Geometry);this._labelSettings=new d(g.GaugeScaleSettings.Labels);a.TextRegion.measureTextLine(b,"0",this.font,this._labelSettings.referenceRect);this._tickCount=(h-f)/(q/(r+1));for(var h=new a.PathSolver(this.path),w=new a.Point,y=new a.Point,x=new a.Point,z=0,D=this.tickCount;z<=D;z++){var B=
new c,H=0===z%(r+1);h.evaluate(z/this.tickCount,w,y);x.x=-y.y;x.y=y.x;var T=H?u.length:v.length,J=-(0.5*T),J=J+(H?u.offset:v.offset);B.start.x=w.x+J*x.x;B.start.y=w.y+J*x.y;B.end.x=B.start.x+T*x.x;B.end.y=B.start.y+T*x.y;H?(H=Math.round(f+this._majorTicks.length*q),H=this.createLabel(b,H,w,y,x),this._labels.push(H),this._majorTicks.push(B)):this._minorTicks.push(B)}this._minorTickWidth=v.width;this._majorTickWidth=u.width};f.prototype.createLabel=function(a,c,d,e,g){var f=new b;f.text=c.toFixed(0);
f.width=a.measureText(f.text).width;f.matrix.identity();f.matrix.translate(d.x,d.y);c=0;"Horizontal"!==this._labelSettings.anchor&&(c=Math.atan2(e.y,e.x),0>c&&(c+=2*Math.PI),f.matrix.rotate(c));switch(this._labelSettings.anchor){case "Left":case "Top":case "Right":case "Bottom":"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(a,f,this._labelSettings.anchor):this.transformRightSideLabel(a,f,this._labelSettings.anchor);break;case "TopOrBottom":c>=0.5*Math.PI&&c<1.5*Math.PI?"Left"==this._labelSettings.pathSide?
this.transformLeftSideLabel(a,f,"Top"):this.transformRightSideLabel(a,f,"Bottom"):"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(a,f,"Bottom"):this.transformRightSideLabel(a,f,"Top");break;case "LeftOrRight":0<=c&&c<Math.PI?"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(a,f,"Left"):this.transformRightSideLabel(a,f,"Right"):"Left"==this._labelSettings.pathSide?this.transformLeftSideLabel(a,f,"Right"):this.transformRightSideLabel(a,f,"Left");break;default:case "Horizontal":this.transformHorizontalLabel(a,
f,g)}return f};f.prototype.transformRightSideLabel=function(a,b,c){a=0.5*b.width;var d=0.5*this._labelSettings.referenceRect.height;b=b.matrix;b.translate(0,this._labelSettings.offset);switch(c){case "Left":b.translate(0,a);b.rotate(0.5*Math.PI);break;case "Top":b.translate(0,d);b.rotate(0);break;case "Right":b.translate(0,a);b.rotate(0.5*-Math.PI);break;case "Bottom":b.translate(0,d),b.rotate(Math.PI)}};f.prototype.transformLeftSideLabel=function(a,b,c){a=-(0.5*b.width);var d=-(0.5*this._labelSettings.referenceRect.height);
b=b.matrix;b.translate(0,this._labelSettings.offset);switch(c){case "Left":b.translate(0,a);b.rotate(0.5*-Math.PI);break;case "Top":b.translate(0,d);b.rotate(-Math.PI);break;case "Right":b.translate(0,a);b.rotate(0.5*Math.PI);break;case "Bottom":b.translate(0,d),b.rotate(0)}};f.prototype.transformHorizontalLabel=function(b,c,d){var e=c.width,g=this._labelSettings.referenceRect.height;b=new a.Point(d.x,d.y);"Right"==this._labelSettings.pathSide&&b.scale(-1,-1);var f=new a.Point(0.5*e,0.5*g),h=Math.sqrt(0.25*
e*e+0.25*g*g),h=new a.Point(f.x+h*b.x,f.y+h*b.y);0>=h.x?(g=new a.Point(0,0),e=new a.Point(0,1)):h.x>=e?(g=new a.Point(e,0),e=new a.Point(0,1)):(g=0>=h.y?new a.Point(0,0):new a.Point(0,g),e=new a.Point(1,0));var q=new a.Matrix(e.x,b.x,e.y,b.y),w=new a.Point(h.x-g.x,h.y-g.y),h=new a.Point;a.Matrix.solve(q,w,h);q=0;isNaN(h.x)||isNaN(h.y)||(e=new a.Point(g.x+h.x*e.x,g.y+h.y*e.y),q+=a.Point.distance(f,e));c.matrix.translate(-b.x*q,-b.y*q);c.matrix.translate(d.x*this._labelSettings.offset,d.y*this._labelSettings.offset)};
f.prototype.draw=function(b,c){b.save();b.strokeStyle=this.strokeStyle.value;var d=this.screenMatrix;b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);b.beginPath();a.PathRegion.define(b,this.path);0<this.lineWidth&&(b.lineWidth=this.lineWidth,b.lineCap="square",b.lineJoin="miter",b.miterLimit=a.VisualNode.defaultPathMiterLimit,b.setLineDash(this.dashSegments),b.lineDashOffset=this.dashOffset,b.stroke());b.lineDashOffset=0;b.setLineDash([]);if(0<this._majorTickWidth){b.beginPath();b.lineCap="butt";
b.lineWidth=this._majorTickWidth;for(var e=0,g=this._majorTicks.length;e<g;e++){var f=this._majorTicks[e];b.moveTo(f.start.x,f.start.y);b.lineTo(f.end.x,f.end.y)}b.stroke()}if(0<this._minorTickWidth){b.beginPath();b.lineWidth=this._minorTickWidth;e=0;for(g=this._minorTicks.length;e<g;e++)f=this._minorTicks[e],b.moveTo(f.start.x,f.start.y),b.lineTo(f.end.x,f.end.y);b.stroke()}b.beginPath();b.font=this.font.toString();b.fillStyle=this.fontFillStyle.value;b.textAlign="center";b.textBaseline="middle";
b.save();e=0;for(g=this._labels.length;e<g;e++){var f=this._labels[e],h=f.matrix;b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);b.transform(h.m11,h.m12,h.m21,h.m22,h.dx,h.dy);b.fillText(f.text,0,0)}b.restore();c&a.RenderOptions.DrawAnimationPoints&&null!==this.solver&&this.drawChords(b);b.restore()};return f}(a.Path);a.GaugeScale=g})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c,e){var f=d.call(this,b,c,e)||this;e=a.Parser.getRect(c.Geometry.Rect);f.path=new a.RectangleGeometry(e,!0);f.fillStyle.value=a.FillFactory.createFillStyle(b,c.Fill,e);b=a.ModuleLoader.getResourceUrl(c.Image);c=a.Parser.getImageScaling(c.ImageScaling);f._imageRegion=new a.ImageRegion(b,new a.Point(e.width,e.height),c,function(){return f.resetAnimationWatchDog()});return f}__extends(c,d);c.prototype.draw=function(b,c){var d=this.screenMatrix;
b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);b.save();b.beginPath();a.PathRegion.define(b,this.path);b.clip();d=this.path.fillBounds;b.translate(d.left,d.top);this._imageRegion.draw(b);b.restore()};return c}(a.VisualNode);a.Image=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e;(function(a){a[a.Left=0]="Left";a[a.Top=1]="Top";a[a.Right=2]="Right";a[a.Bottom=3]="Bottom";a[a.Center=4]="Center"})(e=a.Placement||(a.Placement={}));var d;(function(a){a[a.Normal=0]="Normal";a[a.Pressed=1]="Pressed";a[a.MouseOver=2]="MouseOver"})(d||(d={}));var c=function(b){function c(d,e,g){var f=b.call(this,d,e,g)||this;f.textWhenDown=new a.StringValue(null);f.buttonValue=new a.BooleanValue(!1);f.fillWhenDownStyle=new a.DynamicValue(null);f._textRect=new a.Rect;
f._imageRect=new a.Rect;f._isMouseDown=!1;f._isMouseOver=!1;f._isLatching=!1;f._isLatched=!1;f._gradient=null;f.initGeometry(d,e);g=f.path.fillBounds;f.initFillStyle(d,e,g);f.initImage(e,g.width,g.height,f._imageRect);f.initText(d,e,g.width,g.height,f._imageRect,f._textRect);f._imageRect.translate(g.left,g.top);f._textRect.translate(g.left,g.top);f._isLatching=a.Parser.getBoolean(e.IsLatching);f._valueWhenPressed=a.Parser.getBoolean(e.ValueWhenPressed,!0);f._isLatching&&(f._isLatched=!f._valueWhenPressed);
null!==a.Parser.getString(e.Variable,null)&&a.ButtonStateDynamic.appendNew(e);d=function(a){f.resetAnimationWatchDog()};f.text.valueChanged=d;f.textWhenDown.valueChanged=d;f.fillWhenDownStyle.valueChanged=d;f.buttonValue.valueChanged=function(a){f.onButtonValueChanged(a)};return f}__extends(c,b);Object.defineProperty(c.prototype,"hasHitRegion",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bounds",{get:function(){return this._buttonBounds},enumerable:!0,
configurable:!0});c.prototype.initGeometry=function(b,c){a.Parser.getSize(c.Size);var d=a.Parser.getSize(c.CornerRadii);this.guiStyle===a.GuiStyle.Glossy&&(this.lineWidth=1);var e=a.Parser.getRect(c.Geometry.Rect);this.path=new a.RectangleGeometry(e,!0,d,this.lineWidth,a.VisualNode.defaultRectangleMiterLimit,!0);if(this.guiStyle===a.GuiStyle.Glossy){var g=a.VisualNode.defaultShadowOffset.x+a.VisualNode.defaultShadowBlur,f=a.VisualNode.defaultShadowOffset.y+a.VisualNode.defaultShadowBlur;this._buttonBounds=
this.path.hitBounds.clone();this._buttonBounds.addXY(this._buttonBounds.right+g,this._buttonBounds.bottom+f)}else this._buttonBounds=this.path.hitBounds;g=a.Parser.getNumber(c.Margin);e.left+=g;e.top+=g;e.right-=g;e.bottom-=g;this._marginPath=new a.RectangleGeometry(e,!0,new a.Point(d.x-g,d.y-g))};c.prototype.initFillStyle=function(b,c,d){this.fillStyle.value=a.FillFactory.createFillStyle(b,c.Fill,d);void 0!==c.FillWhenDown&&(this.fillWhenDownStyle.value=a.FillFactory.createFillStyle(b,c.FillWhenDown,
d));this.guiStyle===a.GuiStyle.Glossy&&this.createGradient(b,this.path.fillBounds)};c.prototype.initImage=function(b,d,f,l){var k=this;if(void 0!=b.Image){var m=a.Parser.getSize(b.ImageArea),p=a.Parser.getNumber(b.Margin);c.getImageAreaUnits(b.ImageAreaWidthUnits)===a.ImageAreaUnits.Percent&&(m.x=m.x/100*(d-2*p-this.lineWidth));c.getImageAreaUnits(b.ImageAreaHeightUnits)===a.ImageAreaUnits.Percent&&(m.y=m.y/100*(f-2*p-this.lineWidth));var r=0.5*this.lineWidth,u=new a.Point;switch(a.Parser.getPlacement(b.ImagePlacement)){case e.Left:u.x=
p+r;u.y=0.5*(f-m.y);break;case e.Right:u.x=d-p-m.x-r;u.y=0.5*(f-m.y);break;case e.Top:u.x=0.5*(d-m.x);u.y=p+r;break;case e.Bottom:u.x=0.5*(d-m.x);u.y=f-p-m.y-r;break;default:u.x=0.5*(d-m.x),u.y=0.5*(f-m.y)}l.left=u.x;l.top=u.y;l.right=u.x+m.x;l.bottom=u.y+m.y;d=a.ModuleLoader.getResourceUrl(b.Image);b=a.Parser.getImageScaling(b.ImageScaling);this._imageRegion=new a.ImageRegion(d,m,b,function(){return k.resetAnimationWatchDog()})}};c.prototype.initText=function(b,c,d,g,f,m){b=new a.Point;var p=new a.Point,
r=a.Parser.getNumber(c.Margin),u=a.Parser.getPlacement(c.ImagePlacement),v=0.5*this.lineWidth;p.x=r+v;p.y=r+v;switch(u){case e.Left:0<f.width&&(p.x=f.left+f.width+r);break;case e.Top:0<f.height&&(p.y=f.top+f.height+r)}b.x=d-2*r-this.lineWidth;b.y=g-2*r-this.lineWidth;switch(u){case e.Left:case e.Right:0<f.width&&(b.x-=f.width+r);break;case e.Top:case e.Bottom:0<f.height&&(b.y-=f.height+r)}b.x=Math.max(b.x,0);b.y=Math.max(b.y,0);m.left=p.x;m.top=p.y;m.right=p.x+b.x;m.bottom=p.y+b.y;this._textRegion=
new a.TextRegion(b,this.font);this._textRegion.fontFillStyle=this.fontFillStyle;this._textRegion.horizontalAlignment=a.Parser.getHorizontalAlignment(c.HorizontalTextAlignment);this._textRegion.verticalAlignment=a.Parser.getVerticalAlignment(c.VerticalTextAlignment);this._textRegion.textDirection=a.Parser.getTextDirection(c.TextDirection);this.text=new a.StringValue(a.Parser.getString(c.Text,null));this.textWhenDown.value=a.Parser.getString(c.TextWhenDown,null)};c.getImageAreaUnits=function(b,c){void 0===
c&&(c=a.ImageAreaUnits.Pixels);if(void 0==b)return c;switch(b){case "Percent":return a.ImageAreaUnits.Percent;default:return a.ImageAreaUnits.Pixels}};c.prototype.createGradient=function(a,b){var c=b.left+0.5*b.width;this._gradient=a.createLinearGradient(c,b.top,c,b.bottom);this._gradient.addColorStop(0,"rgba(255, 255, 255, 0.9)");this._gradient.addColorStop(0.5,"rgba(255, 255, 255, 0.6)");this._gradient.addColorStop(0.5,"rgba(255, 255, 255, 0.5)");this._gradient.addColorStop(1,"rgba(255, 255, 255, 0)")};
c.prototype.computeFocusRect=function(a){var b=this.path.hitBounds,c=b.left,d=b.top,e=b.right,b=b.bottom;a[0].x=c;a[0].y=d;a[1].x=e;a[1].y=d;a[2].x=e;a[2].y=b;a[3].x=c;a[3].y=b;this.screenMatrix.transformPointsInPlace(a)};c.prototype.onButtonValueChanged=function(a){this._isLatching&&(this._isLatched=a.value===this._valueWhenPressed,this.resetAnimationWatchDog())};c.prototype.onPointerOver=function(b){this.isEnabled.value&&(this._isMouseOver=!0,this.resetAnimationWatchDog(),null!==a.Node.CursorChanged&&
a.Node.CursorChanged(this,a.MouseCursor.Pointer));return!0};c.prototype.onPointerOut=function(b){this.isEnabled.value&&(this._isMouseOver=!1,this.resetAnimationWatchDog());null!==a.Node.CursorChanged&&a.Node.CursorChanged(this,a.MouseCursor.Default);return!0};c.prototype.onPointerDown=function(b){b=this.executeActions(a.ActionGesture.Pressed);if(this.isEnabled.value){this._isMouseDown=!0;if(!this._isLatching&&this._isMouseOver&&null!==a.Node.ActionExecuted){var c=this.getDynamic(function(b){return b instanceof
a.ButtonStateDynamic});if(null!==c&&c.dataSource instanceof a.Variable){var d=this._valueWhenPressed?"1":"0",e=new a.WriteValueAction({DestinationVariable:c.dataSource.name,SourceType:"Constant",SourceConstant:d});e.target=c.dataSource;e.source=new a.Constant(d);a.Node.ActionExecuted(this,e)}}this.resetAnimationWatchDog()}return b};c.prototype.onPointerUp=function(b){b=this.executeActions(a.ActionGesture.Released);if(this.isEnabled.value){this._isMouseDown=!1;if(!this._isLatching&&null!==a.Node.ActionExecuted){var c=
this.getDynamic(function(b){return b instanceof a.ButtonStateDynamic});if(null!==c&&c.dataSource instanceof a.Variable){var d=this._valueWhenPressed?"0":"1",e=new a.WriteValueAction({DestinationVariable:c.dataSource.name,SourceType:"Constant",SourceConstant:d});e.target=c.dataSource;e.source=new a.Constant(d);a.Node.ActionExecuted(this,e)}}this.resetAnimationWatchDog()}return b};c.prototype.onPointerTap=function(b){b=this.executeActions(a.ActionGesture.Click);if(this.isEnabled.value&&this._isLatching&&
(this._isLatched=!this._isLatched,null!==a.Node.ActionExecuted)){var c=this.getDynamic(function(b){return b instanceof a.ButtonStateDynamic});if(null!==c&&c.dataSource instanceof a.Variable){var d=(this._isLatched?this._valueWhenPressed:!this._valueWhenPressed)?"1":"0",e=new a.WriteValueAction({DestinationVariable:c.dataSource.name,SourceType:"Constant",SourceConstant:d});e.target=c.dataSource;e.source=new a.Constant(d);a.Node.ActionExecuted(this,e)}}return b};c.prototype.draw=function(a,b){var c=
d.Normal;this._isLatching?this._isLatched||this._isMouseDown&&this._isMouseOver?c=d.Pressed:this._isMouseOver&&(c=d.MouseOver):this._isMouseOver&&(c=this._isMouseDown?d.Pressed:d.MouseOver);this.drawButton(a,b,c)};c.prototype.drawButton=function(b,c,e){var g=this.screenMatrix;b.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);this.drawBackground(b,c,e);void 0!==this._imageRegion&&this.drawImage(b);this.drawText(b,e===d.Pressed);this.guiStyle===a.GuiStyle.Glossy?this.drawGlossyBorder(b,e):0<this.lineWidth&&
this.drawFlatBorder(b,e);this.drawShading(b,e)};c.prototype.drawBackground=function(b,c,e){b.beginPath();a.PathRegion.define(b,this.path);b.save();this.guiStyle!==a.GuiStyle.Glossy||0==(c&a.RenderOptions.DrawButtonShadows)||!this.isEnabled.value||e!=d.Normal&&e!=d.MouseOver||(b.shadowOffsetX=a.VisualNode.defaultShadowOffset.x,b.shadowOffsetY=a.VisualNode.defaultShadowOffset.y,b.shadowColor=a.VisualNode.defaultShadowColor,b.shadowBlur=a.VisualNode.defaultShadowBlur);c=null;c=this.isEnabled.value?e==
d.Pressed&&null!==this.fillWhenDownStyle.value?this.fillWhenDownStyle.value:this.fillStyle.value:a.VisualNode.disabledFillColor;null!==c&&(b.fillStyle=c,b.transformFill());b.restore();this.guiStyle==a.GuiStyle.Glossy&&this.isEnabled.value&&(b.fillStyle=this._gradient,b.fill())};c.prototype.drawImage=function(b){b.save();var c=this._imageRect;b.beginPath();b.rect(c.left,c.top,c.width,c.height);b.clip();b.beginPath();a.PathRegion.define(b,this._marginPath);b.clip();b.translate(c.left,c.top);this._imageRegion.draw(b,
this.isEnabled.value);b.restore()};c.prototype.drawText=function(b,c){b.save();var d=this._textRect;b.beginPath();b.rect(d.left,d.top,d.width,d.height);b.clip();b.beginPath();a.PathRegion.define(b,this._marginPath);b.clip();b.translate(d.left,d.top);d=this.text.value;c&&null!=this.textWhenDown.value&&(d=this.textWhenDown.value);this._textRegion.draw(b,d,this.isEnabled.value);b.restore()};c.prototype.drawFlatBorder=function(b,c){b.save();b.beginPath();var d=this.screenMatrix;0<this.dashSegments.length||
this.strokeStyle.value instanceof CanvasGradient?(b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),a.PathRegion.define(b,this.path)):(b.setTransform(1,0,0,1,0,0),a.PathRegion.defineSnapped(b,this.path,d));b.strokeStyle=this.isEnabled.value?this.strokeStyle.value:a.VisualNode.disabledLineColor;b.lineJoin="miter";b.lineCap="square";b.miterLimit=2;b.lineWidth=this.lineWidth;b.setLineDash(this.dashSegments);b.lineDashOffset=this.dashOffset;b.stroke();b.restore()};c.prototype.drawGlossyBorder=function(b,
c){b.save();b.setTransform(1,0,0,1,0,0);b.beginPath();a.PathRegion.defineSnapped(b,this.path,this.screenMatrix);b.lineWidth=1;this.isEnabled.value?c==d.Pressed?(b.clip(),b.strokeStyle="rgba(20, 20, 20, 0.6)",b.shadowColor="rgba(100, 100, 100, 1)",b.shadowOffsetX=0.5,b.shadowOffsetY=0.5,b.shadowBlur=3):b.strokeStyle=this.guiStyle==a.GuiStyle.Glossy?"rgba(0, 0, 0, 0.1)":this.strokeStyle.value:b.strokeStyle=a.VisualNode.disabledLineColor;b.stroke();b.restore()};c.prototype.drawShading=function(b,c){b.beginPath();
a.PathRegion.defineOuterStroke(b,this.path);var e="rgba(0, 0, 0, 0)";this.isEnabled.value&&c===d.MouseOver?e="rgba(255, 255, 255, 0.3)":c==d.Pressed&&null===this.fillWhenDownStyle.value&&(e="rgba(0, 0, 0, 0.1)");b.fillStyle=e;b.fill()};c.prototype.getTargetProperty=function(a){var c=b.prototype.getTargetProperty.call(this,a);if(null===c)switch(a){case "TextWhenDown":return this.textWhenDown;case "FillWhenDown":return this.fillWhenDownStyle;case "Variable":return this.buttonValue}return c};return c}(a.VisualNode);
a.Button=c})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,e,f){var q=d.call(this,b,e,f)||this;q.checkBoxValue=new a.BooleanValue(!1);q._textRect=new a.Rect;q._textRegion=null;q._isMouseDown=!1;q._isMouseOver=!1;q._isLatched=!1;q._boxFillStyle=null;q._innerGradient=null;q._outerGradient=null;f=a.Parser.getRect(e.Geometry.Rect);q.path=new a.RectangleGeometry(f,!0,null,q.lineWidth,a.VisualNode.defaultRectangleMiterLimit,!0);q.fillStyle.value=a.FillFactory.createFillStyle(b,e.Fill,f);q._outerBoxSize=q.font.size*
c.outerBoxScale;q._boxMargins=[0.2*q._outerBoxSize,0.25*q._outerBoxSize,0.2*q._outerBoxSize,0.2*q._outerBoxSize];q._valueWhenChecked=a.Parser.getBoolean(e.ValueWhenChecked,!0);q._isLatched=!q._valueWhenChecked;var n=Math.max(0,f.width-q.lineWidth),l=Math.max(0,f.height-q.lineWidth),k=0.5*q.lineWidth;q._clipRect=new a.Rect(k,k,k+n,k+l);q._clipRect.translate(f.left,f.top);null!==a.Parser.getString(e.Variable,null)&&a.ButtonStateDynamic.appendNew(e);f=q.path.fillBounds;q.initText(b,e,f.width,f.height,
q._textRect);q._textRect.translate(f.left,f.top);q.initBox(b,e,f);q.checkBoxValue.valueChanged=function(a){q.onCheckBoxValueChanged(a)};q.text.valueChanged=function(a){q.resetAnimationWatchDog()};return q}__extends(c,d);Object.defineProperty(c.prototype,"hasHitRegion",{get:function(){return!0},enumerable:!0,configurable:!0});c.prototype.initText=function(b,d,e,f,n){b=new a.Point;var l=new a.Point,k=0.5*this.lineWidth;switch(a.Parser.getPlacement(d.TextPlacement)){case a.Placement.Left:l.x=k+c.padding;
break;default:l.x=k+c.padding+this._outerBoxSize+c.textMargin}l.y=k;b.x=e-(this.lineWidth+c.textMargin+this._outerBoxSize+2*c.padding);b.y=f-this.lineWidth;b.x=Math.max(b.x,0);b.y=Math.max(b.y,0);n.left=l.x;n.top=l.y;n.right=l.x+b.x;n.bottom=l.y+b.y;this._textRegion=new a.TextRegion(b,this.font);this._textRegion.fontFillStyle=this.fontFillStyle;this._textRegion.horizontalAlignment=a.Parser.getHorizontalAlignment(d.HorizontalTextAlignment);this._textRegion.verticalAlignment=a.Parser.getVerticalAlignment(d.VerticalTextAlignment);
this._textRegion.textDirection=a.Parser.getTextDirection(d.TextDirection);this.text=new a.StringValue(a.Parser.getString(d.Text,null));this.text.value=a.Parser.getString(d.Text,null)};c.prototype.initBox=function(b,d,e){this._outerBoxPosition=new a.Point(e.left,e.top);this._outerBoxPosition.y+=0.5*(e.height-this._outerBoxSize);var f=0.5*this.lineWidth;switch(a.Parser.getPlacement(d.TextPlacement)){case a.Placement.Left:this._outerBoxPosition.x+=e.width-this._outerBoxSize-c.padding-f;break;default:this._outerBoxPosition.x+=
f+c.padding}e=new a.Rect(this._outerBoxPosition.x,this._outerBoxPosition.y,this._outerBoxPosition.x+this._outerBoxSize,this._outerBoxPosition.y+this._outerBoxSize);this.guiStyle==a.GuiStyle.Glossy?(this._outerBoxPath=new a.RectangleGeometry(e,!0,new a.Point(c.outerBoxRadius,c.outerBoxRadius)),this._snappedBorder=new a.RectangleGeometry(e,!0,new a.Point(c.outerBoxRadius,c.outerBoxRadius)),f=new a.Rect(e.left+c.innerBoxMargin,e.top+c.innerBoxMargin,e.right-c.innerBoxMargin,e.bottom-c.innerBoxMargin),
this._innerBoxPath=new a.RectangleGeometry(f,!0,new a.Point(c.innerBoxRadius,c.innerBoxRadius)),f=new a.Rect(e.left+c.innerBoxMargin,e.top+c.innerBoxMargin,e.right-c.innerBoxMargin,e.bottom-c.innerBoxMargin),this.createInnerGradient(b,f),this.createOuterGradient(b,e)):(this._outerBoxPath=new a.RectangleGeometry(e,!0,new a.Point),this._snappedBorder=new a.RectangleGeometry(e,!0,new a.Point));this._boxFillStyle=a.FillFactory.createFillStyle(b,d.BoxBackgroundFill,e)};c.prototype.onCheckBoxValueChanged=
function(a){this._isLatched=a.value===this._valueWhenChecked;this.resetAnimationWatchDog()};c.prototype.onPointerOver=function(b){this.isEnabled.value&&(this._isMouseOver=!0,this.resetAnimationWatchDog(),null!==a.Node.CursorChanged&&a.Node.CursorChanged(this,a.MouseCursor.Pointer));return!0};c.prototype.onPointerOut=function(b){this.isEnabled.value&&(this._isMouseOver=!1,this.resetAnimationWatchDog());null!==a.Node.CursorChanged&&a.Node.CursorChanged(this,a.MouseCursor.Default);return!0};c.prototype.onPointerDown=
function(b){b=this.executeActions(a.ActionGesture.Pressed);this.isEnabled.value&&(this._isMouseDown=!0,this.resetAnimationWatchDog());return b};c.prototype.onPointerUp=function(b){b=this.executeActions(a.ActionGesture.Released);this.isEnabled.value&&(this._isMouseDown=!1,this.resetAnimationWatchDog());return b};c.prototype.onPointerTap=function(b){b=this.executeActions(a.ActionGesture.Click);if(this.isEnabled.value&&(this._isLatched=!this._isLatched,null!==a.Node.ActionExecuted)){var c=this.getDynamic(function(b){return b instanceof
a.ButtonStateDynamic});if(null!==c&&c.dataSource instanceof a.Variable){var d=(this._isLatched?this._valueWhenChecked:!this._valueWhenChecked)?"1":"0",e=new a.WriteValueAction({DestinationVariable:c.dataSource.name,SourceType:"Constant",SourceConstant:d});e.target=c.dataSource;e.source=new a.Constant(d);a.Node.ActionExecuted(this,e)}}return b};c.prototype.draw=function(b,c){var d=this.screenMatrix,e=this._clipRect;a.PathRegion.snapPoints(d,this._outerBoxPath.points,this._snappedBorder.points);b.setTransform(d.m11,
d.m12,d.m21,d.m22,d.dx,d.dy);this.drawBackground(b);b.save();b.beginPath();b.rect(e.left,e.top,e.width,e.height);b.clip();this.guiStyle!=a.GuiStyle.Flat&&this.isEnabled.value?this.drawGlossyBox(b,c):this.drawFlatBox(b);this._isLatched&&this.drawCheckMark(b,this._outerBoxPosition,this._outerBoxSize,this._boxMargins);this.drawText(b);b.restore()};c.prototype.drawBackground=function(a){a.save();a.beginPath();var c=this.path.fillBounds;a.rect(c.left,c.top,c.width,c.height);null!==this.fillStyle.value&&
(a.fillStyle=this.fillStyle.value,a.transformFill());0<this.lineWidth&&(a.lineJoin="miter",a.lineCap="square",a.miterLimit=2,a.strokeStyle=this.strokeStyle.value,a.lineWidth=this.lineWidth,a.setLineDash(this.dashSegments),a.lineDashOffset=this.dashOffset,a.stroke());a.restore()};c.prototype.drawFlatBox=function(b){b.save();b.beginPath();a.PathRegion.define(b,this._outerBoxPath);var d=this.isEnabled.value?this._boxFillStyle:a.VisualNode.disabledFillColor;null!==d&&(b.fillStyle=d,b.transformFill());
b.setTransform(1,0,0,1,0,0);b.beginPath();a.PathRegion.define(b,this._snappedBorder);b.lineWidth=c.boxLineWidth;b.strokeStyle=this.isEnabled.value?this.strokeStyle.value:a.VisualNode.disabledLineColor;b.stroke();b.restore()};c.prototype.drawGlossyBox=function(a,c){this.drawGlossyBackground(a,c);this.drawGlossyShading(a);this.drawGlossyBorder(a)};c.prototype.drawGlossyBackground=function(b,c){b.save();b.beginPath();if(null!==this.fillStyle.value){var d=this.path.fillBounds;b.rect(d.left,d.top,d.width,
d.height);b.fillStyle=this.fillStyle.value;b.transformFill()}b.beginPath();a.PathRegion.define(b,this._outerBoxPath);0===(c&a.RenderOptions.DrawButtonShadows)||this._isMouseDown&&this._isMouseOver||(b.shadowOffsetX=a.VisualNode.defaultShadowOffset.x,b.shadowOffsetY=a.VisualNode.defaultShadowOffset.y,b.shadowColor=a.VisualNode.defaultShadowColor,b.shadowBlur=a.VisualNode.defaultShadowBlur);null!==this._boxFillStyle&&(b.fillStyle=this._boxFillStyle,b.transformFill());b.restore();b.fillStyle=this._outerGradient;
b.fill();b.beginPath();a.PathRegion.define(b,this._innerBoxPath);null!==this._boxFillStyle&&(b.fillStyle=this._boxFillStyle,b.transformFill());b.fillStyle=this._innerGradient;b.fill()};c.prototype.drawGlossyShading=function(b){b.beginPath();a.PathRegion.define(b,this._outerBoxPath);var c="rgba(0, 0, 0, 0)";this._isMouseDown&&this._isMouseOver?c="rgba(0, 0, 0, 0.1)":this._isMouseOver&&(c="rgba(255, 255, 255, 0.3)");b.fillStyle=c;b.fill()};c.prototype.drawGlossyBorder=function(b){b.save();b.setTransform(1,
0,0,1,0,0);b.beginPath();a.PathRegion.define(b,this._snappedBorder);b.lineWidth=c.boxLineWidth;b.strokeStyle=this._boxFillStyle;b.stroke();this._isMouseDown&&this._isMouseOver&&(b.save(),b.clip(),b.lineWidth=1,b.strokeStyle="rgba(20, 20, 20, 0.6)",b.shadowColor="rgba(100, 100, 100, 1)",b.shadowOffsetX=0.5,b.shadowOffsetY=0.5,b.shadowBlur=3,b.stroke(),b.restore());b.restore()};c.prototype.drawText=function(a){a.save();var c=this._textRect;a.beginPath();a.rect(c.left,c.top,c.width,c.height);a.clip();
a.translate(c.left,c.top);this._textRegion.draw(a,this.text.value,this.isEnabled.value);a.restore()};c.prototype.drawCheckMark=function(b,c,d,e){var f=0.15*d,l=Array(3);l[0]=new a.Point(c.x+e[0],c.y+0.5*d);l[1]=new a.Point(c.x+0.5*d,c.y+d-e[1]);l[2]=new a.Point(c.x+d-e[2],c.y+e[3]);b.beginPath();b.moveTo(l[0].x,l[0].y);b.lineTo(l[1].x,l[1].y);b.lineTo(l[2].x,l[2].y);b.lineWidth=f;b.lineCap="butt";b.strokeStyle=this.isEnabled.value?this.fontFillStyle.value:a.VisualNode.disabledLineColor;b.stroke()};
c.prototype.createInnerGradient=function(a,c){this._innerGradient=a.createLinearGradient(c.left,c.top,c.right,c.bottom);this._innerGradient.addColorStop(0,"rgba(255, 255, 255, 0)");this._innerGradient.addColorStop(0.5,"rgba(255, 255, 255, 0.4)");this._innerGradient.addColorStop(1,"rgba(255, 255, 255, 0.9)")};c.prototype.createOuterGradient=function(a,c){this._outerGradient=a.createLinearGradient(c.left,c.top,c.right,c.bottom);this._outerGradient.addColorStop(0,"rgba(255, 255, 255, 0.8)");this._outerGradient.addColorStop(1,
"rgba(255, 255, 255, 0)")};c.prototype.getTargetProperty=function(a){var c=d.prototype.getTargetProperty.call(this,a);if(null===c)switch(a){case "Variable":return this.checkBoxValue}return c};c.boxLineWidth=1;c.outerBoxRadius=1;c.padding=2;c.textMargin=6;c.innerBoxMargin=1;c.innerBoxRadius=0;c.outerBoxScale=0.9;return c}(a.VisualNode);a.CheckBox=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c,e){var f=d.call(this,b,c,e)||this;f.text=new a.StringValue(a.Parser.getString(c.Text,null));f.text.value=a.Parser.getString(c.Text,null);f.text.valueChanged=function(a){f.resetAnimationWatchDog()};e=a.Parser.getRect(c.Geometry.Rect);f.path=new a.RectangleGeometry(e,!0,null,f.lineWidth,a.VisualNode.defaultRectangleMiterLimit,!0);f.fillStyle.value=a.FillFactory.createFillStyle(b,c.Fill,f.path.fillBounds);var n=f.lineWidth;b=Math.max(0,e.width-
n);var l=Math.max(0,e.height-n),n=0.5*n;f._clipRect=new a.Rect(n,n,n+b,n+l);f._clipRect.translate(e.left,e.top);f._textRegion=new a.TextRegion(new a.Point(b,l),f.font);f._textRegion.fontFillStyle=f.fontFillStyle;f._textRegion.horizontalAlignment=a.Parser.getHorizontalAlignment(c.HorizontalTextAlignment,a.HorizontalAlignment.Left);f._textRegion.verticalAlignment=a.Parser.getVerticalAlignment(c.VerticalTextAlignment);f._textRegion.textDirection=a.Parser.getTextDirection(c.TextDirection,a.TextDirection.LeftToRight);
return f}__extends(c,d);c.prototype.draw=function(a,d){var e=this.screenMatrix;a.setTransform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);c.drawLabel(a,this,this.path.fillBounds,this._clipRect,this._textRegion,this.text.value)};c.drawLabel=function(a,c,d,e,f,l){a.save();a.beginPath();a.rect(d.left,d.top,d.width,d.height);null!==c.fillStyle.value&&(a.fillStyle=c.fillStyle.value,a.transformFill());0<c.lineWidth&&(a.lineJoin="miter",a.lineCap="square",a.miterLimit=2,a.strokeStyle=c.strokeStyle.value,a.lineWidth=
c.lineWidth,a.setLineDash(c.dashSegments),a.lineDashOffset=c.dashOffset,a.stroke());a.beginPath();a.rect(e.left,e.top,e.width,e.height);a.clip();a.translate(e.left,e.top);f.draw(a,l);a.restore()};return c}(a.VisualNode);a.TextLabel=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b,c,e){b=a.call(this,b,c,e)||this;b.dragListeners=[];b.isSelected=!1;return b}__extends(c,a);c.prototype.addDragListener=function(a){this.dragListeners.push(a)};c.prototype.getHasHitRegion=function(){return this.isSelected?!1:a.prototype.getHasHitRegion.call(this)};c.prototype.implBeginDrag=function(b,c,e){var f=this;return this.dragListeners.some(function(a){return a.onListItemDragStart(f,b,c,e)})?!0:a.prototype.implBeginDrag.call(this,b,c,e)};
c.prototype.implDrag=function(b,c,e){var f=this;return this.dragListeners.some(function(a){return a.onListItemDrag(f,b,c,e)})?!0:a.prototype.implDrag.call(this,b,c,e)};c.prototype.implEndDrag=function(b,c,e){var f=this;return this.dragListeners.some(function(a){return a.onListItemEndDrag(f,b,c,e)})?!0:a.prototype.implEndDrag.call(this,b,c,e)};return c}(a.Rectangle);a.ListItem=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){this.rowItemNamePrefix="RowItemSymbolInstance";this.listItemNamePrefix="ROW";this.selectedIndextargetName=null;this.rowInitialLocations=[];this.upperBound=this.lowerBound=0}d.prototype.constructModel=function(c){var b=this;c.SelectedIndexVariable&&(this.selectedIndextargetName=c.SelectedIndexVariable);c.ListItem.LowerBound&&(this.upperBound=parseInt(c.ListItem.LowerBound));c.ListItem.UpperBound&&(this.upperBound=parseInt(c.ListItem.UpperBound));
var d=this.upperBound-this.lowerBound+1;this.listItemHeight=c.ListItem.Height;var e=c.Geometry.Rect.Right-c.Geometry.Rect.Left;this.rowCount=Math.round(0.5+(c.Geometry.Rect.Bottom-c.Geometry.Rect.Top)/(this.listItemHeight+c.RowPadding+c.HorizontalLineWidth));this.rowCount=d>this.rowCount?d:this.rowCount;var d=c.Geometry.Rect.Left,f=c.Geometry.Rect.Top+c.RowPadding,n=this.listItemHeight;this.rowHeight=c.RowPadding+c.HorizontalLineWidth+this.listItemHeight;void 0==c.Objects&&(c.Objects=[]);var l=this.createBackgroundFillFromModel(c);
l&&c.Objects.push(l);var k;for(k=0;k<this.rowCount;k++){l={Type:"SymbolInstance",Symbol:c.ListItem.RowSymbol,Location:{X:0,Y:0},Rotation:0,ID:this.rowItemNamePrefix+k,IsTabSelectable:!1,TabOrder:0};this.rowInitialLocations.push(new a.Point(d,f));if(c.ListItem.Parameters){var m=Array(c.ListItem.Parameters.length);c.ListItem.Parameters.forEach(function(a,d){m[d]="ParameterBindingField"===a.Type?{Type:"ParameterBindingArrayVariable",Source:c.ListItem.Variable,Index:k,LowerBound:b.lowerBound,Name:a.Name,
MemberName:a.Source}:a});l.Parameters=m}var p={Type:"Group",Location:{X:d,Y:f},ID:"ListItemContiner"+k,Objects:[]},r=this.createListItemAtGeometryWithID(0,0,e,n,this.listItemNamePrefix+k);this.selectedIndextargetName&&(r.Actions=[{Type:"WriteValueAction",SourceType:"Variable",SourceVariable:this.selectedRowVariableName,DestinationVariable:this.selectedIndextargetName}]);r.Dynamics=this.SelectedRowFillDynamicModel(k,this.selectedRowVariableName);p.Objects.push(l);p.Objects.push(r);c.Objects.push(p);
0<c.HorizontalLineWidth&&p.Objects.push(this.createHorizontalLine(0,this.listItemHeight+1+c.HorizontalLineWidth/2,e,c.HorizontalLineColor,c.HorizontalLineWidth));f=f+1+this.rowHeight}var u;c.Dynamics&&(u=c.Dynamics.filter(function(a){return"FillDynamic"===a.Type&&"LineColor"===a.TargetProperty}));if(u||c.LineWidth&&0<c.LineWidth)e=this.createBorderFromModel(c),u&&(e.Dynamics=u),c.Objects.push(e);return c};d.prototype.createBackgroundFillFromModel=function(a){var b,d;a.Dynamics&&(d=a.Dynamics.filter(function(a){return("BlinkDynamic"===
a.Type||"FillDynamic"==a.Type)&&"LineColor"!=a.TargetProperty}));if(d||a.Fill)b=this.createBorderFromModel(a),b.Fill=a.Fill,b.LineWidth=0,d&&(b.Dynamics=d);return b};d.prototype.constructArrayMember=function(a,b,d){return"."==d?a+"["+b+"]":a+"["+b+"]."+d};d.prototype.createHorizontalLine=function(a,b,d,e,f){return{Type:"Path",Geometry:{Type:"Path",SubPaths:[{IsClosed:!1,Start:{X:0,Y:0},Segments:[{Type:"LinePathSegment",End:{X:d,Y:0}}]}]},LineColor:e,LineWidth:f,DashStyle:{Offset:0},Location:{X:a,
Y:b},Rotation:0,ID:"testLine",IsTabSelectable:!1,TabOrder:0}};d.prototype.createBorderFromModel=function(a){return{Type:"Rectangle",CornerRadii:{Width:0,Height:0},Geometry:{Type:"Rectangle",Rect:{Left:a.Geometry.Rect.Left,Top:a.Geometry.Rect.Top,Right:a.Geometry.Rect.Right,Bottom:a.Geometry.Rect.Bottom}},LineColor:a.LineColor,LineWidth:a.LineWidth,DashStyle:a.DashStyle,Location:{X:0,Y:0},ID:"ListBoxBorder",IsTabSelectable:!1,TabOrder:0}};d.prototype.createListItemAtGeometryWithID=function(a,b,d,e,
f){return{Type:"ListItem",CornerRadii:{Width:0,Height:0},Fill:{Type:"SolidFill",Color:"#00000000"},Geometry:{Type:"Rectangle",Rect:{Left:a,Top:b,Right:d,Bottom:e}},DashStyle:{Offset:0},Location:{X:0,Y:0},ID:f,IsTabSelectable:!1,TabOrder:0}};d.prototype.SelectedRowFillDynamicModel=function(a,b){return[{Type:"FillDynamic",TargetProperty:"Fill",Interpolate:!1,ThresholdData:[{Threshold:a-1,Value:{Type:"SolidFill",Color:"#00FFFFFF"}},{Threshold:a,Value:{Type:"SolidFill",Color:"#808ACCD1"}},{Threshold:a+
1,Value:{Type:"SolidFill",Color:"#00FFFFFF"}}],Smoothing:!1,CircularRange:!1,Variable:b,IsEnabled:!0}]};return d}();a.ListBoxModelBuilder=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c){var e=d.call(this,b,c)||this;e._listItemNamePrefix=null;e._listItemHeight=0;e._rowHeight=0;e._rowCount=0;e._selectedRow=-1;e._yScrollOffset=0;e._topRowIndex=0;e.selectedIndextargetName=null;e.selectedIndextarget=null;e._selectedIndexVariable=null;e._rowInitialLocations=[];e._rowContent=[];e._rows=[];e._lowerBound=0;e._upperBound=0;e.scrollerCallback=function(b,c,d){for(d=0;d<e._rowCount;d++)e._rowContent[d].location.value=new a.Point(e._rowInitialLocations[d].x+
b,e._rowInitialLocations[d].y+-c)};e._boundsPoint=new a.Point;e.OnRowClickCallback=function(a,b){var c=parseInt(a.id.substring(3),10);e._selectedRow!=c&&(e.selectRowItemAtIndex(e._selectedRow,!1),e._selectedRow=c,e.selectRowItemAtIndex(c,!0),e._selectedIndexVariable&&(e._selectedIndexVariable.value=c))};e._dragMouseStart=new a.Point;e._dragInverse=new a.Matrix;e.screenClipRect=new a.Bounds;e._selectedRowVariableName="@"+e.id+".SelectedIndex";var f=new a.ListBoxModelBuilder;f.selectedRowVariableName=
e._selectedRowVariableName;f.constructModel(b);e._listItemHeight=f.listItemHeight;e._rowCount=f.rowCount;e._rowInitialLocations=f.rowInitialLocations;e._rowHeight=f.rowHeight;e._upperBound=f.upperBound;e._lowerBound=f.lowerBound;e._listItemNamePrefix=f.listItemNamePrefix;e._localRect=new a.Rect(b.Geometry.Rect.Left,b.Geometry.Rect.Top,b.Geometry.Rect.Right,b.Geometry.Rect.Bottom);e.path=new a.RectangleGeometry(e._localRect,!1,new a.Point,b.LineWidth,a.VisualNode.defaultRectangleMiterLimit,!1);return e}
__extends(c,d);c.prototype.computeScreenClipRect=function(){var a=this.screenClipRect;a.reset();var c=this.path.hitBounds,d=c.left,e=c.top,f=c.right,c=c.bottom;if(0<f-d&&0<c-e){var l=this.screenMatrix,k=this._boundsPoint;l.transformXY(d,e,k);a.addXY(k.x,k.y);l.transformXY(f,e,k);a.addXY(k.x,k.y);l.transformXY(f,c,k);a.addXY(k.x,k.y);l.transformXY(d,c,k);a.addXY(k.x,k.y)}this.screenClipRect!==a&&this.callTraverseNode()};c.prototype.getListItemContentByID=function(b){for(var c=this.nodes.filter(function(b){return b instanceof
a.Group}),d=0;d<c.length;d++){var e=c[d].nodes.filter(function(a){return a.id==b});if(0<e.length)return e[0]}};c.prototype.onLoaded=function(){var b=this;this.nodes.filter(function(b){return b instanceof a.Group}).forEach(function(a){b._rowContent.push(a)});for(var c=0;c<this._rowCount;c++){var d=this.getListItemContentByID(this._listItemNamePrefix+c);this._rows.push(d);d.actions.splice(0,0,new a.CustomAction(a.ActionGesture.Click,this.OnRowClickCallback.bind(this)));d.addDragListener(this)}this.initializeSelectedRow();
this._scroller=new Scroller(this.scrollerCallback.bind(this),{scrollingX:!0,scrollingY:!0,animating:!1});this._scroller.setDimensions(this._localRect.width,this._localRect.height,this._localRect.width,this._rowCount*(1+this._rowHeight));this.callTraverseNode()};c.prototype.initializeSelectedRow=function(){(this._selectedIndexVariable=this._rows[0].dynamics[0].dataSource)&&-1!==this._selectedIndexVariable.value&&(this._selectedIndexVariable.value=-1,a.Node.ActionExecuted(this._rows[0],this._rows[0].actions.filter(function(b){return b instanceof
a.WriteValueAction})[0]))};c.prototype.selectRowItemAtIndex=function(a,c){0<=a&&a<this._rows.length&&(this._rows[a].isSelected=c)};c.prototype.onListItemDragStart=function(b,c,d,e){if(!a.Matrix.findInverse(b.screenMatrix,this._dragInverse))return!1;this._dragMouseStart.x=e.mouseCurrent.x;this._dragMouseStart.y=e.mouseCurrent.y;this._dragInverse.transformXY(this._dragMouseStart.x,this._dragMouseStart.y,e.dragPoint);return!0};c.prototype.handleScroll=function(a,c,d,e){a=e.mouseCurrent.x;c=e.mouseCurrent.y;
this._dragInverse.transformXY(a,c,e.dragPoint);this._scroller.scrollBy(0,-(c-this._dragMouseStart.y),!1);this._dragMouseStart.x=a;this._dragMouseStart.y=c;return!0};c.prototype.onListItemDrag=function(a,c,d,e){return this.handleScroll(a,c,d,e)};c.prototype.onListItemEndDrag=function(a,c,d,e){return this.handleScroll(a,c,d,e)};c.prototype.callTraverseNode=function(){var b=this;a.TraverseNodes(this,function(a){a.screenClipRect=b.screenClipRect;return!0})};return c}(a.Group);a.ListBox=e})(f.Hmi||(f.Hmi=
{}))})(Pxc||(Pxc={}));__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c){var e=d.call(this,b,c)||this,f=1,n=1,l=0,k=0;void 0!==b.ScaleTransform&&(f=a.Parser.getNumber(b.ScaleTransform.ScaleX,1),n=a.Parser.getNumber(b.ScaleTransform.ScaleY,1),l=a.Parser.getNumber(b.ScaleTransform.CenterX,0),k=a.Parser.getNumber(b.ScaleTransform.CenterY,0));var m=new a.Group({},e);m.id="surrogate"+Math.floor(1E3*Math.random()).toString();m.scale.value=new a.Point(f,n);m.location.value=new a.Point(l,k);e.nodes.push(m);return e}__extends(c,
d);return c}(a.Group);a.SymbolInstance=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){}d.createNode=function(c,b,d){var e=void 0;void 0!==b&&(e=a.Parser.getString(b.Type));switch(e){case "Group":return new a.Group(b,d);case "SymbolInstance":return new a.SymbolInstance(b,d);case "Rectangle":return new a.Rectangle(c,b,d);case "Ellipse":return new a.Ellipse(c,b,d);case "Path":return new a.Path(c,b,d);case "HmiImage":case "Image":return new a.Image(c,b,d);case "Line":return new a.Line(c,b,d);case "GaugeScale":return new a.GaugeScale(c,
b,d);case "HmiText":case "Text":return new a.TextLabel(c,b,d);case "Button":return new a.Button(c,b,d);case "CheckBox":return new a.CheckBox(c,b,d);case "TextInput":return new a.TextInput(c,b,d);case "ListBox":return new a.ListBox(b,d);case "ListItem":return new a.ListItem(c,b,d);default:return null}};return d}();a.NodeFactory=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){a.TraverseNodes=function(a,d){var c=[];for(c.push(a);0<c.length;){var b=c.pop();if(!d(b))break;b.nodes.forEach(function(a){return c.push(a)})}}})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function d(){this._surfaceElement=window.document.getElementById("canvasArea");this._frontCanvas=HtmlHelper.getSubElementById(this._surfaceElement,"frontCanvas");this._backCanvas=document.createElement("canvas");this._modalOverlay=window.document.getElementById("modalOverlay");this._preloader=window.document.getElementById("preloader");this._noConnection=window.document.getElementById("noConnection");this._retryCounter=window.document.getElementById("retryCounter")}
Object.defineProperty(d.prototype,"surfaceElement",{get:function(){return this._surfaceElement},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"frontCanvas",{get:function(){return this._frontCanvas},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"backCanvas",{get:function(){return this._backCanvas},enumerable:!0,configurable:!0});d.prototype.changeCursor=function(c){switch(c){case a.MouseCursor.Pointer:this.frontCanvas.style.cursor="pointer";break;default:this.frontCanvas.style.cursor=
"default"}};d.prototype.hideAllOverlays=function(){this._preloader.style.visibility="hidden";this._modalOverlay.style.visibility="hidden";this._noConnection.style.visibility="hidden"};d.prototype.showPreloader=function(){this._modalOverlay.style.visibility="visible";this._preloader.style.visibility="visible";this._noConnection.style.visibility="hidden"};d.prototype.showNoDataConnection=function(a){this._modalOverlay.style.visibility="visible";this._preloader.style.visibility="hidden";this._noConnection.style.visibility=
"visible";this._retryCounter.textContent=a.toString()};d.prototype.updateRetryCounter=function(a){this._retryCounter.textContent=a.toString()};d.prototype.isActive=function(){return"hidden"!=this._preloader.style.visibility||"hidden"!=this._modalOverlay.style.visibility||"hidden"!=this._noConnection.style.visibility};d.prototype.showStatusMessage=function(a){this.hideAllOverlays();this.frontCanvas.style.visibility="hidden";var b=document.getElementById("pageCaption");b.textContent=ErrorStrings.pageCaption;
b=document.getElementById("messageCaption");b.textContent=a;window.document.getElementById("errorMessage").style.visibility="visible"};return d}();a.CanvasHost=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
var ErrorStrings={pageCaption:"The HMI application has stopped.",messageCaption:"An error has occurred.",DownloadScreenError:"A project resource could not be downloaded.",UpdateDataError:"A data update error occurred.",RegisterGroupError:"An error occurred during data group registration.",UnauthorizedDataError:"Access unauthorized on secure data channel. User levels not configured for project and/or the login dialog is not present.",ManageSessionError:"An error occurred during data session management.",
DuplicateStationIDError:"An error occurred during data session management because the requested Station ID is already in use.",LocalProjectChangeError:"Project change detected, please restart.",NetworkLevelError:"A network level error occurred.",NetworkTimeoutError:"A network timeout error occurred.",InternalError:"An internal error occurred.",ExceptionError:"An exception occurred."};
!function(f,a,e,d){function c(a,c,d){return Array.isArray(a)?(b(a,d[c],d),!0):!1}function b(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function g(a,b,c){var d="DEPRECATED METHOD: "+b+"\n"+c+" AT \n";return function(){var b=Error("get-stack-trace"),b=b&&b.stack?b.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):
"Unknown Stack Trace",c=f.console&&(f.console.warn||f.console.log);return c&&c.call(f.console,d,b),a.apply(this,arguments)}}function h(a,b,c){var d=b.prototype;b=a.prototype=Object.create(d);b.constructor=a;b._super=d;c&&K(b,c)}function q(a,b){return function(){return a.apply(b,arguments)}}function n(a,b){return typeof a==La?a.apply(b?b[0]||d:d,b):a}function l(a,c,d){b(p(c),function(b){a.addEventListener(b,d,!1)})}function k(a,c,d){b(p(c),function(b){a.removeEventListener(b,d,!1)})}function m(a,b){for(;a;){if(a==
b)return!0;a=a.parentNode}return!1}function p(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function u(a){return Array.prototype.slice.call(a,0)}function v(a,b,c){for(var d=[],e=[],g=0;g<a.length;){var f=b?a[g][b]:a[g];0>r(e,f)&&d.push(a[g]);e[g]=f;g++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function w(a,b){for(var c,e,g=b[0].toUpperCase()+b.slice(1),f=
0;f<wa.length;){if(c=wa[f],e=c?c+g:b,e in a)return e;f++}return d}function y(a){a=a.ownerDocument||a;return a.defaultView||a.parentWindow||f}function x(a,b){var c=this;this.manager=a;this.callback=b;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(b){n(a.options.enable,[a])&&c.handler(b)};this.init()}function z(a){var b=a.options.inputClass;return new (b?b:Ma?la:Na?ca:xa?ma:da)(a,D)}function D(a,b,c){var e=c.pointers.length,g=c.changedPointers.length,f=b&C&&0===e-
g,e=b&(A|E)&&0===e-g;c.isFirst=!!f;c.isFinal=!!e;f&&(a.session={});c.eventType=b;b=a.session;f=c.pointers;e=f.length;b.firstInput||(b.firstInput=B(c));1<e&&!b.firstMultiple?b.firstMultiple=B(c):1===e&&(b.firstMultiple=!1);var g=b.firstInput,h=(e=b.firstMultiple)?e.center:g.center,k=c.center=H(f);c.timeStamp=na();c.deltaTime=c.timeStamp-g.timeStamp;c.angle=oa(h,k);c.distance=J(h,k);var g=c.center,h=b.offsetDelta||{},k=b.prevDelta||{},l=b.prevInput||{};c.eventType!==C&&l.eventType!==A||(k=b.prevDelta=
{x:l.deltaX||0,y:l.deltaY||0},h=b.offsetDelta={x:g.x,y:g.y});c.deltaX=k.x+(g.x-h.x);c.deltaY=k.y+(g.y-h.y);c.offsetDirection=T(c.deltaX,c.deltaY);g=c.deltaX/c.deltaTime||0;h=c.deltaY/c.deltaTime||0;c.overallVelocityX=g;c.overallVelocityY=h;c.overallVelocity=P(g)>P(h)?g:h;c.scale=e?J(f[0],f[1],ea)/J(e.pointers[0],e.pointers[1],ea):1;c.rotation=e?oa(f[1],f[0],ea)+oa(e.pointers[1],e.pointers[0],ea):0;c.maxPointers=b.prevInput?c.pointers.length>b.prevInput.maxPointers?c.pointers.length:b.prevInput.maxPointers:
c.pointers.length;h=b.lastInterval||c;f=c.timeStamp-h.timeStamp;c.eventType!=E&&(f>Oa||h.velocity===d)?(g=c.deltaX-h.deltaX,h=c.deltaY-h.deltaY,k=g/f||0,l=h/f||0,f=k,e=l,k=P(k)>P(l)?k:l,g=T(g,h),b.lastInterval=c):(k=h.velocity,f=h.velocityX,e=h.velocityY,g=h.direction);c.velocity=k;c.velocityX=f;c.velocityY=e;c.direction=g;b=a.element;m(c.srcEvent.target,b)&&(b=c.srcEvent.target);c.target=b;a.emit("hammer.input",c);a.recognize(c);a.session.prevInput=c}function B(a){for(var b=[],c=0;c<a.pointers.length;)b[c]=
{clientX:U(a.pointers[c].clientX),clientY:U(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:H(b),deltaX:a.deltaX,deltaY:a.deltaY}}function H(a){var b=a.length;if(1===b)return{x:U(a[0].clientX),y:U(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:U(c/b),y:U(d/b)}}function T(a,b){return a===b?fa:P(a)>=P(b)?0>a?W:X:0>b?Y:Z}function J(a,b,c){c||(c=ya);var d=b[c[0]]-a[c[0]];a=b[c[1]]-a[c[1]];return Math.sqrt(d*d+a*a)}function oa(a,b,c){c||(c=ya);
return 180*Math.atan2(b[c[1]]-a[c[1]],b[c[0]]-a[c[0]])/Math.PI}function da(){this.evEl=Pa;this.evWin=Qa;this.pressed=!1;x.apply(this,arguments)}function la(){this.evEl=za;this.evWin=Aa;x.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function Ba(){this.evTarget=Ra;this.evWin=Sa;this.started=!1;x.apply(this,arguments)}function ca(){this.evTarget=Ta;this.targetIds={};x.apply(this,arguments)}function Ua(a,b){var c=u(a.touches),d=this.targetIds;if(b&(C|Q)&&1===c.length)return d[c[0].identifier]=
!0,[c,c];var e,g=u(a.changedTouches),f=[],h=this.target;if(e=c.filter(function(a){return m(a.target,h)}),b===C)for(c=0;c<e.length;)d[e[c].identifier]=!0,c++;for(c=0;c<g.length;)d[g[c].identifier]&&f.push(g[c]),b&(A|E)&&delete d[g[c].identifier],c++;return f.length?[v(e.concat(f),"identifier",!0),f]:void 0}function ma(){x.apply(this,arguments);var a=q(this.handler,this);this.touch=new ca(this.manager,a);this.mouse=new da(this.manager,a);this.primaryTouch=null;this.lastTouches=[]}function Ca(a){a=a.changedPointers[0];
if(a.identifier===this.primaryTouch){var b={x:a.clientX,y:a.clientY};this.lastTouches.push(b);var c=this.lastTouches;setTimeout(function(){var a=c.indexOf(b);-1<a&&c.splice(a,1)},Va)}}function pa(a,b){this.manager=a;this.set(b)}function Wa(a){if(-1<a.indexOf(R))return R;var b=-1<a.indexOf($),c=-1<a.indexOf(aa);return b&&c?R:b||c?b?$:aa:-1<a.indexOf(qa)?qa:Da}function L(a){this.options=K({},this.defaults,a||{});this.id=Xa++;this.manager=null;this.options.enable=this.options.enable===d?!0:this.options.enable;
this.state=ga;this.simultaneous={};this.requireFail=[]}function Ea(a){return a&ba?"cancel":a&O?"end":a&V?"move":a&F?"start":""}function Fa(a){return a==Z?"down":a==Y?"up":a==W?"left":a==X?"right":""}function ha(a,b){var c=b.manager;return c?c.get(a):a}function G(){L.apply(this,arguments)}function ia(){G.apply(this,arguments);this.pY=this.pX=null}function ra(){G.apply(this,arguments)}function sa(){L.apply(this,arguments);this._input=this._timer=null}function ta(){G.apply(this,arguments)}function ua(){G.apply(this,
arguments)}function ja(){L.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function M(a,b){return b=b||{},b.recognizers=b.recognizers===d?M.defaults.preset:b.recognizers,new va(a,b)}function va(a,c){this.options=K({},M.defaults,c||{});this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=a;this.input=z(this);this.touchAction=new pa(this,this.options.touchAction);Ga(this,
!0);b(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]);a[3]&&b.requireFailure(a[3])},this)}function Ga(a,c){var d=a.element;if(d.style){var e;b(a.options.cssProps,function(b,g){e=w(d.style,g);c?(a.oldCssProps[e]=d.style[e],d.style[e]=b):d.style[e]=a.oldCssProps[e]||""});c||(a.oldCssProps={})}}function Ya(b,c){var d=a.createEvent("Event");d.initEvent(b,!0,!0);d.gesture=c;c.target.dispatchEvent(d)}var K,wa=" webkit Moz MS ms o".split(" "),Za=a.createElement("div"),
La="function",U=Math.round,P=Math.abs,na=Date.now;K="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var g in e)e.hasOwnProperty(g)&&(b[g]=e[g])}return b}:Object.assign;var Ha=g(function(a,b,c){for(var e=Object.keys(b),g=0;g<e.length;)(!c||c&&a[e[g]]===d)&&(a[e[g]]=b[e[g]]),g++;return a},"extend","Use `assign`."),$a=g(function(a,
b){return Ha(a,b,!0)},"merge","Use `assign`."),Xa=1,ab=/mobile|tablet|ip(ad|hone|od)|android/i,xa="ontouchstart"in f,Ma=w(f,"PointerEvent")!==d,Na=xa&&ab.test(navigator.userAgent),Oa=25,C=1,Q=2,A=4,E=8,fa=1,W=2,X=4,Y=8,Z=16,I=W|X,S=Y|Z,Ia=I|S,ya=["x","y"],ea=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&l(this.element,this.evEl,this.domHandler);this.evTarget&&l(this.target,this.evTarget,this.domHandler);this.evWin&&l(y(this.element),this.evWin,this.domHandler)},
destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler);this.evTarget&&k(this.target,this.evTarget,this.domHandler);this.evWin&&k(y(this.element),this.evWin,this.domHandler)}};var bb={mousedown:C,mousemove:Q,mouseup:A},Pa="mousedown",Qa="mousemove mouseup";h(da,x,{handler:function(a){var b=bb[a.type];b&C&&0===a.button&&(this.pressed=!0);b&Q&&1!==a.which&&(b=A);this.pressed&&(b&A&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:"mouse",srcEvent:a}))}});
var cb={pointerdown:C,pointermove:Q,pointerup:A,pointercancel:E,pointerout:E},db={2:"touch",3:"pen",4:"mouse",5:"kinect"},za="pointerdown",Aa="pointermove pointerup pointercancel";f.MSPointerEvent&&!f.PointerEvent&&(za="MSPointerDown",Aa="MSPointerMove MSPointerUp MSPointerCancel");h(la,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),d=cb[d],e=db[a.pointerType]||a.pointerType,g="touch"==e,f=r(b,a.pointerId,"pointerId");d&C&&(0===a.button||g)?0>f&&(b.push(a),f=
b.length-1):d&(A|E)&&(c=!0);0>f||(b[f]=a,this.callback(this.manager,d,{pointers:b,changedPointers:[a],pointerType:e,srcEvent:a}),c&&b.splice(f,1))}});var eb={touchstart:C,touchmove:Q,touchend:A,touchcancel:E},Ra="touchstart",Sa="touchstart touchmove touchend touchcancel";h(Ba,x,{handler:function(a){var b=eb[a.type];if(b===C&&(this.started=!0),this.started){var c,d=u(a.touches);c=u(a.changedTouches);c=(b&(A|E)&&(d=v(d.concat(c),"identifier",!0)),[d,c]);b&(A|E)&&0===c[0].length-c[1].length&&(this.started=
!1);this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:"touch",srcEvent:a})}}});var fb={touchstart:C,touchmove:Q,touchend:A,touchcancel:E},Ta="touchstart touchmove touchend touchcancel";h(ca,x,{handler:function(a){var b=fb[a.type],c=Ua.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:"touch",srcEvent:a})}});var Va=2500;h(ma,x,{handler:function(a,b,c){var d="touch"==c.pointerType,e="mouse"==c.pointerType;if(!(e&&c.sourceCapabilities&&
c.sourceCapabilities.firesTouchEvents)){if(d)b&C?(this.primaryTouch=c.changedPointers[0].identifier,Ca.call(this,c)):b&(A|E)&&Ca.call(this,c);else{if(d=e)a:{for(var d=c.srcEvent.clientX,e=c.srcEvent.clientY,g=0;g<this.lastTouches.length;g++){var f=this.lastTouches[g],h=Math.abs(d-f.x),f=Math.abs(e-f.y);if(25>=h&&25>=f){d=!0;break a}}d=!1}if(d)return}this.callback(a,b,c)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var Ja=w(Za.style,"touchAction"),Ka=Ja!==d,Da="auto",qa="manipulation",
R="none",$="pan-x",aa="pan-y",ka=function(){if(!Ka)return!1;var a={},b=f.CSS&&f.CSS.supports;return"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(c){a[c]=b?f.CSS.supports("touch-action",c):!0}),a}();pa.prototype={set:function(a){"compute"==a&&(a=this.compute());Ka&&this.manager.element.style&&ka[a]&&(this.manager.element.style[Ja]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return b(this.manager.recognizers,
function(b){n(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),Wa(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=-1<d.indexOf(R)&&!ka[R],g=-1<d.indexOf(aa)&&!ka[aa],d=-1<d.indexOf($)&&!ka[$];if(e){var f=2>a.distance,h=250>a.deltaTime;if(1===a.pointers.length&&f&&h)return}return d&&g?void 0:e||g&&c&I||d&&c&S?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=
!0;a.preventDefault()}};var ga=1,F=2,V=4,O=8,N=O,ba=16;L.prototype={defaults:{},set:function(a){return K(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(c(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=ha(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return c(a,"dropRecognizeWith",this)?this:(a=ha(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(c(a,"requireFailure",
this))return this;var b=this.requireFail;return a=ha(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(c(a,"dropRequireFailure",this))return this;a=ha(a,this);a=r(this.requireFail,a);return-1<a&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(d){c.manager.emit(d,a)}var c=this,d=this.state;O>d&&b(c.options.event+Ea(d));
b(c.options.event);a.additionalEvent&&b(a.additionalEvent);d>=O&&b(c.options.event+Ea(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|ga)))return!1;a++}return!0},recognize:function(a){a=K({},a);return n(this.options.enable,[this,a])?(this.state&(N|ba|32)&&(this.state=ga),this.state=this.process(a),void(this.state&(F|V|O|ba)&&this.tryEmit(a))):(this.reset(),void(this.state=
32))},process:function(a){},getTouchAction:function(){},reset:function(){}};h(G,L,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(F|V);a=this.attrTest(a);return d&&(c&E||!a)?b|ba:d||a?c&A?b|O:b&F?b|V:F:32}});h(ia,G,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ia},getTouchAction:function(){var a=this.options.direction,b=[];return a&I&&b.push(aa),a&S&&b.push($),b},directionTest:function(a){var b=
this.options,c=!0,d=a.distance,e=a.direction,g=a.deltaX,f=a.deltaY;return e&b.direction||(b.direction&I?(e=0===g?fa:0>g?W:X,c=g!=this.pX,d=Math.abs(a.deltaX)):(e=0===f?fa:0>f?Y:Z,c=f!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return G.prototype.attrTest.call(this,a)&&(this.state&F||!(this.state&F)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX;this.pY=a.deltaY;var b=Fa(a.direction);b&&(a.additionalEvent=this.options.event+b);this._super.emit.call(this,
a)}});h(ra,G,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[R]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&F)},emit:function(a){1!==a.scale&&(a.additionalEvent=this.options.event+(1>a.scale?"in":"out"));this._super.emit.call(this,a)}});h(sa,L,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Da]},process:function(a){var b=this.options,c=a.pointers.length===
b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(A|E)&&!e)this.reset();else if(a.eventType&C)this.reset(),this._timer=setTimeout(q(function(){this.state=N;this.tryEmit()},this),b.time);else if(a.eventType&A)return N;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===N&&(a&&a.eventType&A?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}});h(ta,
G,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[R]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&F)}});h(ua,G,{defaults:{event:"swipe",threshold:10,velocity:0.3,direction:I|S,pointers:1},getTouchAction:function(){return ia.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(I|S)?b=a.overallVelocity:c&I?b=a.overallVelocityX:c&S&&(b=a.overallVelocityY),
this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&P(b)>this.options.velocity&&a.eventType&A},emit:function(a){var b=Fa(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a);this.manager.emit(this.options.event,a)}});h(ja,L,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[qa]},process:function(a){var b=this.options,c=a.pointers.length===
b.pointers,d=a.distance<b.threshold,e=a.deltaTime<b.time;if(this.reset(),a.eventType&C&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=A)return this.failTimeout();c=this.pTime?a.timeStamp-this.pTime<b.interval:!0;d=!this.pCenter||J(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;d&&c?this.count+=1:this.count=1;this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=setTimeout(q(function(){this.state=N;this.tryEmit()},
this),b.interval),F):N}return 32},failTimeout:function(){return this._timer=setTimeout(q(function(){this.state=32},this),this.options.interval),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==N&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});M.VERSION="2.0.8";M.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ta,{enable:!1}],[ra,{enable:!1},["rotate"]],[ua,{direction:I}],[ia,{direction:I},
["swipe"]],[ja],[ja,{event:"doubletap",taps:2},["tap"]],[sa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};va.prototype={set:function(a){return K(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);
var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&N)&&(e=b.curRecognizer=null);for(var g=0;g<d.length;)c=d[g],2===b.stopped||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(F|V|O)&&(e=b.curRecognizer=c),g++}},get:function(a){if(a instanceof L)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(c(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),
a.manager=this,this.touchAction.update(),a},remove:function(a){if(c(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers;a=r(b,a);-1!==a&&(b.splice(a,1),this.touchAction.update())}return this},on:function(a,c){if(a!==d&&c!==d){var e=this.handlers;return b(p(a),function(a){e[a]=e[a]||[];e[a].push(c)}),this}},off:function(a,c){if(a!==d){var e=this.handlers;return b(p(a),function(a){c?e[a]&&e[a].splice(r(e[a],c),1):delete e[a]}),this}},emit:function(a,b){this.options.domEvents&&Ya(a,
b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a;b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&Ga(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};K(M,{INPUT_START:C,INPUT_MOVE:Q,INPUT_END:A,INPUT_CANCEL:E,STATE_POSSIBLE:ga,STATE_BEGAN:F,STATE_CHANGED:V,STATE_ENDED:O,STATE_RECOGNIZED:N,STATE_CANCELLED:ba,STATE_FAILED:32,DIRECTION_NONE:fa,DIRECTION_LEFT:W,
DIRECTION_RIGHT:X,DIRECTION_UP:Y,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:I,DIRECTION_VERTICAL:S,DIRECTION_ALL:Ia,Manager:va,Input:x,TouchAction:pa,TouchInput:ca,MouseInput:da,PointerEventInput:la,TouchMouseInput:ma,SingleTouchInput:Ba,Recognizer:L,AttrRecognizer:G,Tap:ja,Pan:ia,Swipe:ua,Pinch:ra,Rotate:ta,Press:sa,on:l,off:k,each:b,merge:$a,extend:Ha,assign:K,inherit:h,bindFn:q,prefixed:w});("undefined"!=typeof f?f:"undefined"!=typeof self?self:{}).Hammer=M;"function"==typeof define&&define.amd?define(function(){return M}):
"undefined"!=typeof module&&module.exports?module.exports=M:f[e]=M}(window,document,"Hammer");var Scroller;
(function(){var f=function(){};Scroller=function(a,c){this.__callback=a;this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:0.5,maxZoom:3,speedMultiplier:1,scrollingComplete:f,penetrationDeceleration:0.03,penetrationAcceleration:0.08};for(var d in c)this.options[d]=c[d]};var a=function(a){return Math.pow(a-1,3)+1},e=function(a){return 1>(a/=0.5)?0.5*Math.pow(a,3):0.5*(Math.pow(a-2,3)+2)},d={__isSingleTouch:!1,
__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,
__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(a,c,d,e){a===+a&&(this.__clientWidth=a);c===+c&&(this.__clientHeight=c);d===+d&&(this.__contentWidth=d);e===+e&&(this.__contentHeight=e);this.__computeScrollMax();this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition:function(a,
c){this.__clientLeft=a||0;this.__clientTop=c||0},setSnapSize:function(a,c){this.__snapWidth=a;this.__snapHeight=c},activatePullToRefresh:function(a,c,d,e){this.__refreshHeight=a;this.__refreshActivate=c;this.__refreshDeactivate=d;this.__refreshStart=e},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0);this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){this.__refreshActive=!1;this.__refreshDeactivate&&this.__refreshDeactivate();
this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(a,c,d,e,f){if(!this.options.zooming)throw Error("Zooming is not enabled!");f&&(this.__zoomComplete=f);this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);f=this.__zoomLevel;null==d&&(d=this.__clientWidth/2);
null==e&&(e=this.__clientHeight/2);a=Math.max(Math.min(a,this.options.maxZoom),this.options.minZoom);this.__computeScrollMax(a);d=(d+this.__scrollLeft)*a/f-d;e=(e+this.__scrollTop)*a/f-e;d>this.__maxScrollLeft?d=this.__maxScrollLeft:0>d&&(d=0);e>this.__maxScrollTop?e=this.__maxScrollTop:0>e&&(e=0);this.__publish(d,e,a,c)},zoomBy:function(a,c,d,e,f){this.zoomTo(this.__zoomLevel*a,c,d,e,f)},scrollTo:function(a,c,d,e){this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=
!1);if(null!=e&&e!==this.__zoomLevel){if(!this.options.zooming)throw Error("Zooming is not enabled!");a*=e;c*=e;this.__computeScrollMax(e)}else e=this.__zoomLevel;this.options.scrollingX?this.options.paging?a=Math.round(a/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(a=Math.round(a/this.__snapWidth)*this.__snapWidth):a=this.__scrollLeft;this.options.scrollingY?this.options.paging?c=Math.round(c/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(c=Math.round(c/this.__snapHeight)*
this.__snapHeight):c=this.__scrollTop;a=Math.max(Math.min(this.__maxScrollLeft,a),0);c=Math.max(Math.min(this.__maxScrollTop,c),0);a===this.__scrollLeft&&c===this.__scrollTop&&(d=!1);this.__isTracking||this.__publish(a,c,e,d)},scrollBy:function(a,c,d){this.scrollTo((this.__isAnimating?this.__scheduledLeft:this.__scrollLeft)+(a||0),(this.__isAnimating?this.__scheduledTop:this.__scrollTop)+(c||0),d)},doMouseZoom:function(a,c,d,e){return this.zoomTo(this.__zoomLevel*(0<a?0.97:1.03),!1,d-this.__clientLeft,
e-this.__clientTop)},doTouchStart:function(a,c){if(null==a.length)throw Error("Invalid touch list: "+a);c instanceof Date&&(c=c.valueOf());if("number"!==typeof c)throw Error("Invalid timestamp value: "+c);this.__interruptedAnimation=!0;this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0);this.__isAnimating&&(core.effect.Animate.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var d,e,f=1===a.length;
f?(d=a[0].pageX,e=a[0].pageY):(d=Math.abs(a[0].pageX+a[1].pageX)/2,e=Math.abs(a[0].pageY+a[1].pageY)/2);this.__initialTouchLeft=d;this.__initialTouchTop=e;this.__zoomLevelStart=this.__zoomLevel;this.__lastTouchLeft=d;this.__lastTouchTop=e;this.__lastTouchMove=c;this.__lastScale=1;this.__enableScrollX=!f&&this.options.scrollingX;this.__enableScrollY=!f&&this.options.scrollingY;this.__isTracking=!0;this.__didDecelerationComplete=!1;this.__isDragging=!f;this.__isSingleTouch=f;this.__positions=[]},doTouchMove:function(a,
c,d){if(null==a.length)throw Error("Invalid touch list: "+a);c instanceof Date&&(c=c.valueOf());if("number"!==typeof c)throw Error("Invalid timestamp value: "+c);if(this.__isTracking){var e;2===a.length?(e=Math.abs(a[0].pageX+a[1].pageX)/2,a=Math.abs(a[0].pageY+a[1].pageY)/2):(e=a[0].pageX,a=a[0].pageY);var f=this.__positions;if(this.__isDragging){var l=e-this.__lastTouchLeft,k=a-this.__lastTouchTop,m=this.__scrollLeft,p=this.__scrollTop,r=this.__zoomLevel;if(null!=d&&this.options.zooming){var u=
r,r=r/this.__lastScale*d,r=Math.max(Math.min(r,this.options.maxZoom),this.options.minZoom);if(u!==r){var v=e-this.__clientLeft,w=a-this.__clientTop,m=(v+m)*r/u-v,p=(w+p)*r/u-w;this.__computeScrollMax(r)}}this.__enableScrollX&&(m-=l*this.options.speedMultiplier,u=this.__maxScrollLeft,m>u||0>m)&&(m=this.options.bouncing?m+l/2*this.options.speedMultiplier:m>u?u:0);this.__enableScrollY&&(p-=k*this.options.speedMultiplier,l=this.__maxScrollTop,p>l||0>p)&&(this.options.bouncing?(p+=k/2*this.options.speedMultiplier,
this.__enableScrollX||null==this.__refreshHeight||(!this.__refreshActive&&p<=-this.__refreshHeight?(this.__refreshActive=!0,this.__refreshActivate&&this.__refreshActivate()):this.__refreshActive&&p>-this.__refreshHeight&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))):p=p>l?l:0);60<f.length&&f.splice(0,30);f.push(m,p,c);this.__publish(m,p,r)}else if(k=this.options.locking?3:0,m=Math.abs(e-this.__initialTouchLeft),p=Math.abs(a-this.__initialTouchTop),this.__enableScrollX=
this.options.scrollingX&&m>=k,this.__enableScrollY=this.options.scrollingY&&p>=k,f.push(this.__scrollLeft,this.__scrollTop,c),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(5<=m||5<=p))this.__interruptedAnimation=!1;this.__lastTouchLeft=e;this.__lastTouchTop=a;this.__lastTouchMove=c;this.__lastScale=d}},doTouchEnd:function(a){a instanceof Date&&(a=a.valueOf());if("number"!==typeof a)throw Error("Invalid timestamp value: "+a);if(this.__isTracking){this.__isTracking=!1;if(this.__isDragging)if(this.__isDragging=
!1,this.__isSingleTouch&&this.options.animating&&100>=a-this.__lastTouchMove){for(var c=this.__positions,d=c.length-1,e=d,f=d;0<f&&c[f]>this.__lastTouchMove-100;f-=3)e=f;e!==d?(d=c[d]-c[e],f=this.__scrollTop-c[e-1],this.__decelerationVelocityX=(this.__scrollLeft-c[e-2])/d*(1E3/60),this.__decelerationVelocityY=f/d*(1E3/60),c=this.options.paging||this.options.snapping?4:1,Math.abs(this.__decelerationVelocityX)>c||Math.abs(this.__decelerationVelocityY)>c?this.__refreshActive||this.__startDeceleration(a):
this.options.scrollingComplete()):this.options.scrollingComplete()}else 100<a-this.__lastTouchMove&&this.options.scrollingComplete();this.__isDecelerating||(this.__refreshActive&&this.__refreshStart?(this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()):((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel),this.__refreshActive&&(this.__refreshActive=
!1,this.__refreshDeactivate&&this.__refreshDeactivate())));this.__positions.length=0}},__publish:function(b,c,d,f){var n=this,l=n.__isAnimating;l&&(core.effect.Animate.stop(l),n.__isAnimating=!1);if(f&&n.options.animating){n.__scheduledLeft=b;n.__scheduledTop=c;n.__scheduledZoom=d;var k=n.__scrollLeft,m=n.__scrollTop,p=n.__zoomLevel,r=b-k,u=c-m,v=d-p;n.__isAnimating=core.effect.Animate.start(function(a,b,c){c&&(n.__scrollLeft=k+r*a,n.__scrollTop=m+u*a,n.__zoomLevel=p+v*a,n.__callback&&n.__callback(n.__scrollLeft,
n.__scrollTop,n.__zoomLevel))},function(a){return n.__isAnimating===a},function(a,b,c){b===n.__isAnimating&&(n.__isAnimating=!1);(n.__didDecelerationComplete||c)&&n.options.scrollingComplete();n.options.zooming&&(n.__computeScrollMax(),n.__zoomComplete&&(n.__zoomComplete(),n.__zoomComplete=null))},n.options.animationDuration,l?a:e)}else n.__scheduledLeft=n.__scrollLeft=b,n.__scheduledTop=n.__scrollTop=c,n.__scheduledZoom=n.__zoomLevel=d,n.__callback&&n.__callback(b,c,d),n.options.zooming&&(n.__computeScrollMax(),
n.__zoomComplete&&(n.__zoomComplete(),n.__zoomComplete=null))},__computeScrollMax:function(a){null==a&&(a=this.__zoomLevel);this.__maxScrollLeft=Math.max(this.__contentWidth*a-this.__clientWidth,0);this.__maxScrollTop=Math.max(this.__contentHeight*a-this.__clientHeight,0)},__startDeceleration:function(a){var c=this;if(c.options.paging){a=Math.max(Math.min(c.__scrollLeft,c.__maxScrollLeft),0);var d=Math.max(Math.min(c.__scrollTop,c.__maxScrollTop),0),e=c.__clientWidth,f=c.__clientHeight;c.__minDecelerationScrollLeft=
Math.floor(a/e)*e;c.__minDecelerationScrollTop=Math.floor(d/f)*f;c.__maxDecelerationScrollLeft=Math.ceil(a/e)*e;c.__maxDecelerationScrollTop=Math.ceil(d/f)*f}else c.__minDecelerationScrollLeft=0,c.__minDecelerationScrollTop=0,c.__maxDecelerationScrollLeft=c.__maxScrollLeft,c.__maxDecelerationScrollTop=c.__maxScrollTop;var l=c.options.snapping?4:0.001;c.__isDecelerating=core.effect.Animate.start(function(a,b,d){c.__stepThroughDeceleration(d)},function(){var a=Math.abs(c.__decelerationVelocityX)>=l||
Math.abs(c.__decelerationVelocityY)>=l;a||(c.__didDecelerationComplete=!0);return a},function(a,b,d){c.__isDecelerating=!1;c.__didDecelerationComplete&&c.options.scrollingComplete();c.scrollTo(c.__scrollLeft,c.__scrollTop,c.options.snapping)})},__stepThroughDeceleration:function(a){var c=this.__scrollLeft+this.__decelerationVelocityX,d=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var e=Math.max(Math.min(this.__maxDecelerationScrollLeft,c),this.__minDecelerationScrollLeft);
e!==c&&(c=e,this.__decelerationVelocityX=0);e=Math.max(Math.min(this.__maxDecelerationScrollTop,d),this.__minDecelerationScrollTop);e!==d&&(d=e,this.__decelerationVelocityY=0)}a?this.__publish(c,d,this.__zoomLevel):(this.__scrollLeft=c,this.__scrollTop=d);this.options.paging||(this.__decelerationVelocityX*=0.95,this.__decelerationVelocityY*=0.95);if(this.options.bouncing){var e=a=0,f=this.options.penetrationDeceleration,l=this.options.penetrationAcceleration;c<this.__minDecelerationScrollLeft?a=this.__minDecelerationScrollLeft-
c:c>this.__maxDecelerationScrollLeft&&(a=this.__maxDecelerationScrollLeft-c);d<this.__minDecelerationScrollTop?e=this.__minDecelerationScrollTop-d:d>this.__maxDecelerationScrollTop&&(e=this.__maxDecelerationScrollTop-d);0!==a&&(this.__decelerationVelocityX=0>=a*this.__decelerationVelocityX?this.__decelerationVelocityX+a*f:a*l);0!==e&&(this.__decelerationVelocityY=0>=e*this.__decelerationVelocityY?this.__decelerationVelocityY+e*f:e*l)}}},c;for(c in d)Scroller.prototype[c]=d[c]})();
!function(){var f="undefined"!=typeof module&&module.exports,a="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,e=function(){var a,b,d=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],e=0;b=d.length;for(var f={};b>e;e++)if(a=d[e],a&&a[1]in document){e=0;for(b=a.length;b>e;e++)f[d[0][e]]=a[e];return f}return!1}(),d={request:function(c){var b=e.requestFullscreen;c=c||document.documentElement;/5\.1[\.\d]* Safari/.test(navigator.userAgent)?
c[b]():c[b](a&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[e.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(){},onerror:function(){},raw:e};return e?(Object.defineProperties(d,{isFullscreen:{get:function(){return!!document[e.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[e.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[e.fullscreenEnabled]}}}),document.addEventListener(e.fullscreenchange,
function(a){d.onchange.call(d,a)}),document.addEventListener(e.fullscreenerror,function(a){d.onerror.call(d,a)}),void(f?module.exports=d:window.screenfull=d)):void(f?module.exports=!1:window.screenfull=!1)}();
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(a){function c(b){var c=a.call(this,b.value)||this;c._inputElement=b;return c}__extends(c,a);Object.defineProperty(c.prototype,"value",{get:function(){return this._inputElement.value},set:function(a){document.activeElement!==this._inputElement&&this.hasValueChanged(this._inputElement.value,a)&&(this._inputElement.value=a,this.onValueChanged())},enumerable:!0,configurable:!0});return c}(a.DynamicValue);a.TextInputValue=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,e,f){var q=d.call(this,b,e,f)||this;q.element=null;q._isModified=!1;q._isClipped=!1;q._lastMatrix=new a.Matrix;f=a.Parser.getRect(e.Geometry.Rect);q.path=new a.RectangleGeometry(f,!0,null,q.lineWidth,a.VisualNode.defaultRectangleMiterLimit,!1);q.fillStyle.value=a.FillFactory.createFillStyle(b,e.Fill,f);q._textAlign=a.Parser.getString(e.HorizontalTextAlignment,"Left").toLowerCase();b=a.Parser.getString(e.Text,null);e.PasswordInputType?q.createPasswordElement(b,
f):q.createElement(b,f);q.setElementColors(q.isEnabled.value);q.focusStyle=a.FocusStyle.None;q.text=new a.TextInputValue(q.element);q.text.valueChanged=function(a){q.resetAnimationWatchDog()};var n=q.lineWidth+2*c._padding;b=Math.max(0,f.width-n);var l=Math.max(0,f.height-n),n=0.5*n;q._clipRect=new a.Rect(n,n,n+b,n+l);q._clipRect.translate(f.left,f.top);q._textRegion=new a.TextRegion(new a.Point(b,l),q.font);q._textRegion.fontFillStyle=q.fontFillStyle;q._textRegion.horizontalAlignment=a.Parser.getHorizontalAlignment(e.HorizontalTextAlignment,
a.HorizontalAlignment.Left);q._textRegion.textDirection=a.TextDirection.LeftToRight;return q}__extends(c,d);Object.defineProperty(c.prototype,"hasHitRegion",{get:function(){return!0},enumerable:!0,configurable:!0});c.prototype.onVisibilityChanged=function(a){d.prototype.onVisibilityChanged.call(this,a);void 0!=this.element&&(this.element.style.visibility=this.isVisible?"visible":"hidden")};c.prototype.onFocus=function(){return!0};c.prototype.onBlur=function(){this._isModified&&c.InputSubmitted(this.element);
this._isModified=!1;this.resetAnimationWatchDog();null!==a.Node.Blurred&&a.Node.Blurred(this);return!0};c.prototype.onKeyPress=function(a){switch(a.key){case "Escape":case "Esc":this._isModified=!1;break;default:this._isModified=!0}"Enter"!=a.key&&"Escape"!=a.key&&"Esc"!=a.key||this.element.blur();return!0};c.prototype.onPointerOver=function(a){return!0};c.prototype.onPointerOut=function(a){return!0};c.prototype.onPointerDown=function(a){return!0};c.prototype.onPointerUp=function(a){return!0};c.prototype.onPointerTap=
function(a){return!0};c.prototype.draw=function(b,c){var d=this.screenMatrix;b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);void 0!==this.screenClipRect?this.symbolListChecker(this.screenClipRect,this.screenBounds,this.element.style,b):null===this.element.parentElement||this._isClipped?(this.element.style.visibility="hidden",a.TextLabel.drawLabel(b,this,this.path.fillBounds,this._clipRect,this._textRegion,this.text.value)):this.updateElement(b)};c.prototype.symbolListChecker=function(b,c,d,e){c.top<
b.top||c.bottom>b.bottom?(d.visibility="hidden",a.TextLabel.drawLabel(e,this,this.path.fillBounds,this._clipRect,this._textRegion,this.text.value)):this.updateElement(e)};c.prototype.updateElement=function(b){var c=this._lastMatrix,d=this.screenMatrix,e=this.element,f=e.style;d.equals(c,1E-5)||(c.setMatrixFrom(d),b=b.getInvPixelRatio(),a.Matrix.preMultiply(d,b,0,0,b,0,0),f.transform=d.toCssString());e.disabled!==!this.isEnabled.value&&(e.disabled=!this.isEnabled.value);this.setElementColors(this.isEnabled.value);
"visible"!==f.visibility&&(f.visibility="visible")};c.prototype.createElement=function(a,c){this.createElementWithType(a,c,"text")};c.prototype.createPasswordElement=function(a,c){this.createElementWithType(a,c,"password")};c.prototype.createElementWithType=function(a,d,e){var f=this;this.element=document.createElement("input");this.element.setAttribute("type",e);this.element.value=a;this.element.tabIndex=-1;a=this.element.style;a.position="fixed";a.fontFamily=this.font.family;a.fontStyle=this.font.style;
a.fontWeight=this.font.weight.toString();a.fontSize=this.font.size+"px";a.textAlign=this._textAlign;e=0.5*this.lineWidth;a.outline="none";a.border=this.lineWidth+"px solid";a.margin="0";a.padding=c._padding+"px";var n=this.lineWidth+2*c._padding;a.width=d.width-n+"px";a.height=d.height-n+"px";n=d.left-e;d=d.top-e;a.left=n+"px";a.top=d+"px";a.transformOrigin=-n+"px "+-d+"px";a.visibility="hidden";this.element.onchange=function(){f._isModified=!0;f.onBlur()}};c.prototype.setElementColors=function(b){var c=
this.element.style,d=b?this.fillStyle.value:a.VisualNode.disabledFillColor;c.backgroundColor!==d&&(c.backgroundColor=d);d=b?this.fontFillStyle.value:a.VisualNode.disabledLineColor;c.color!==d&&(c.color=d);b=b?this.strokeStyle.value:a.VisualNode.disabledLineColor;c.borderColor!==b&&(c.borderColor=b)};c.prototype.isClipped=function(a){var c=this.location.value,d=this.bounds;return this._isClipped=0>c.y||c.y+d.bottom>a.y||0>c.x||c.x+d.right>a.x};c._padding=0;return c}(a.VisualNode);a.TextInput=e})(f.Hmi||
(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){function a(){this._canCache=!1;this._canCache=a.storageAvailable("sessionStorage")}a.storageAvailable=function(a){try{var b=window[a];b.setItem("__storage_test__","__storage_test__");b.removeItem("__storage_test__");return!0}catch(d){return d instanceof DOMException&&(22===d.code||1014===d.code||"QuotaExceededError"===d.name||"NS_ERROR_DOM_QUOTA_REACHED"===d.name)&&0!==b.length}};a.prototype.clearCache=function(){if(!this._canCache)return!1;window.sessionStorage.clear();
return!0};a.prototype.keyExists=function(a){return this._canCache?null!=window.sessionStorage.getItem(a):!1};a.prototype.getItem=function(a){return this._canCache?window.sessionStorage.getItem(a):null};a.prototype.setItem=function(a,b){if(!this._canCache)return!1;try{return window.sessionStorage.setItem(a,b),!0}catch(d){}return!1};return a}();a.PageCache=e;a.createPageCache=function(){var a=new e;a.clearCache();return a}})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
__extends=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(a,e){function d(){this.constructor=a}f(a,e);a.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();
(function(f){(function(a){var e=function(d){function c(b,c,e){void 0===e&&(e=null);var f=d.call(this,b,c,e)||this;f._renderer=new a.Renderer(c.frontCanvas,c.backCanvas,f.settings.renderOptions);f._statusMessage=c;f._presenter=new a.Presenter(f);f._renderer.CanvasResized=function(a,b){f._pageManager.centerPages(a,b,f.settings.zoomToFit)};return f}__extends(c,d);c.prototype.start=function(b){var d=this;this.run();this.loadPageAsync(b,function(e){e===a.DataAccessStatus.OK?(d._navigationBackStack.push(b),
d.pageManager.rootPage.updateNavigationState(d.getNavigationState(b),d.securityContext),null!==c.Started&&c.Started()):d._errorStatus=e})};c.prototype.runFrame=function(){var b=this;this._clock.tick();var c=this.getRunState(this._runFrameContext.previousState);if(c!==this._runFrameContext.previousState&&(this.changeRunState(c),this._runFrameContext.previousState=c,c===a.RunState.Aborting))return;c=!1;this._pageManager.havePages?((this._pageManager.isPageReady||this._pageManager.isTopPageLoginDialog())&&
this._pageManager.runDynamics(this._clock),c=!0):this._errorStatus===a.DataAccessStatus.AuthorizationError&&(c=!0);var d=0!=this._runFrameContext.minInterval&&performance.now()-this._runFrameContext.lastRender+0.5<=this._runFrameContext.minInterval;c&&!d&&(this._runFrameContext.lastRender=performance.now(),this._renderer.render(this.pageManager));this._animationFrameHandle=requestAnimationFrame(function(){return b.runFrame()})};c.prototype.run=function(){this._runFrameContext.lastRender=0;this._runFrameContext.previousState=
a.RunState.Waiting;this.changeRunState(a.RunState.Waiting);this.runFrame()};c.prototype.getRunState=function(b){switch(this._errorStatus){case a.DataAccessStatus.InternalError:case a.DataAccessStatus.ExceptionError:case a.DataAccessStatus.DownloadScreenError:case a.DataAccessStatus.UpdateDataError:case a.DataAccessStatus.RegisterGroupError:case a.DataAccessStatus.SessionError:case a.DataAccessStatus.DuplicateStationIDError:return a.RunState.Aborting;case a.DataAccessStatus.AuthorizationError:if(b!=
a.RunState.LoginPrompt)return a.RunState.LoginPrompt;break;case a.DataAccessStatus.InvalidGroupIDError:if(b!=a.RunState.NoDataConnection)return a.RunState.NoDataConnection;break;case a.DataAccessStatus.ProjectChanged:return a.RunState.ChangingProject}switch(b){case a.RunState.NoDataConnection:if(this._connectionRetryTimer.isExpired)return a.RunState.Retrying;break;case a.RunState.Retrying:return a.RunState.Waiting;case a.RunState.Waiting:switch(this._errorStatus){case a.DataAccessStatus.OK:if(null!=
this.pageManager.topPage&&!this.canShowPage(this._pageManager.topPage)&&this.securityContext)return a.RunState.LoginPrompt;if(this._pageManager.isPageReady)return a.RunState.Normal;break;case a.DataAccessStatus.NetworkLevelError:case a.DataAccessStatus.NetworkTimeoutError:return a.RunState.NoDataConnection}break;case a.RunState.Normal:switch(this._errorStatus){case a.DataAccessStatus.DataPollTimeoutWarning:return a.RunState.Waiting;case a.DataAccessStatus.NetworkLevelError:case a.DataAccessStatus.NetworkTimeoutError:return a.RunState.NoDataConnection}if(!this.canShowPage(this.pageManager.topPage))return this.authService.status===
a.AuthenticationStatus.LogOutCompleted?a.RunState.LoginPrompt:a.RunState.Waiting;break;case a.RunState.LoginPrompt:if(null===this.pageManager.topPage||"LOGIN"!==this.pageManager.topPage.name.toUpperCase())return a.RunState.Waiting;if(this.authService.status===a.AuthenticationStatus.LogInPending)return a.RunState.Authenticating;if(this.authService.status===a.AuthenticationStatus.LogInCompleted&&void 0!=this.securityContext.loggedInUserName)return a.RunState.Waiting;break;case a.RunState.Authenticating:if(this.authService.status===
a.AuthenticationStatus.LogInCompleted)return void 0!=this.securityContext.loggedInUserName?(this.authService.clearStatus(),a.RunState.Waiting):a.RunState.LoginPrompt;this.authService.status===a.AuthenticationStatus.Error&&a.RunState.LoginPrompt;break;case a.RunState.ChangingProject:if(!0===this.onChangingProject(this)){if(!0===this._dataClient.isProjectSettingsDownloaded)return this._statusMessage.hideAllOverlays(),a.RunState.Waiting;throw Error("Failed to load project settings");}}return b};c.prototype.logIn=
function(a){d.prototype.logInEx.call(this,this,a)};c.prototype.stopAnimation=function(){this._renderer.CanvasResized=null;null!=this._animationFrameHandle&&(cancelAnimationFrame(this._animationFrameHandle),this._animationFrameHandle=null)};return c}(a.EngineBase);a.Engine=e})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));
(function(f){(function(a){var e=function(){return function(){this.pointerId1=this.pointerId0=-1;this.center=new a.Point;this.offset=new a.Point;this.zoomSize=new a.Point}}(),d=function(){function c(b,c,d){var f=this;this._enableKnobs=!1;this._touchState=new e;this._touchClick=this._touchUp=this._touchDown=!1;this.applicationVariables=new HashTable;this._onWheelListener=function(a){return f.onMouseWheel(a)};this._onTouchStartListener=function(a){return f.onTouchStart(a)};this._onTouchEndListener=function(a){return f.onTouchEnd(a)};
this._onTouchMoveListener=function(a){return f.onTouchMove(a)};this._hoveredOverVisual=null;this._isDragging=!1;this._tappedVisual=this._capturedVisual=null;var n=new a.EngineSettings;void 0!==d&&void 0!==d.LogClockEvents&&"ON"===d.LogClockEvents.toUpperCase()&&(n.logClockEvents=!0);if(void 0!==d&&void 0!==d.MaxFPS){var l=parseInt(d.MaxFPS);!isNaN(l)&&isFinite(l)&&n.setMaxFPS(l)}this._canvasHost=c;this._engine=new a.Engine(b,c,n);this._pageManager=this._engine.pageManager;void 0!==d&&void 0!==d.Settings&&
"ON"===d.Settings.toUpperCase()?this._enableKnobs=!0:a.RenderOptionsDialog.dispose();this.InitializeApplicationSystemVariables(d)}c.registerApplicationVariable=function(a,d,e){return c._instance.registerApplicationVariableInternal(a,d,e)};c.prototype.registerApplicationVariableInternal=function(b,c,d){var e=this.applicationVariables.getValue(b);null===e&&(e=new a.Variable(b,c,d),this.applicationVariables.add(b,e));return e};c.getApplicationVariable=function(a){return c._instance.applicationVariables.getValue(a)};
Object.defineProperty(c,"renderer",{get:function(){return this._instance._engine.renderer},enumerable:!0,configurable:!0});c.prototype.InitializeApplicationSystemVariables=function(a){var c=this.registerApplicationVariableInternal("@@StationID","STRING",!0);a.StationID&&(c.value=a.StationID)};c.initialize=function(a,d,e){this._instance=new c(a,d,e);this._instance._engine.setRenderOptions(this._instance._engine.settings.renderOptions);this._instance._engine.loadApplicationVariables()};c.run=function(b){a.Engine.Started=
function(){return c._instance.onEngineStarted()};a.Engine.Stopped=function(){return c._instance.onEngineStopped()};a.Engine.PageActivated=function(a){return c._instance.onPageActivated(a)};a.Engine.PageDeactivated=function(a){return c._instance.onPageDeactivated(a)};c._instance._engine.start(b);return!0};c.prototype.onEngineStarted=function(){this.hookCanvasEvents()};c.prototype.onEngineStopped=function(){this.unhookCanvasEvents()};c.prototype.hookCanvasEvents=function(){var a=this,c=HtmlHelper.getSubElementById(this._canvasHost.surfaceElement,
"frontCanvas");c.onmousemove=function(c){return a.onMouseMove(c)};c.onmouseover=function(c){return a.onMouseOver(c)};c.onmouseout=function(c){return a.onMouseOut(c)};c.onmousedown=function(c){return a.onMouseDown(c)};c.onmouseup=function(c){return a.onMouseUp(c)};c.onclick=function(c){return a.onMouseClick(c)};c.addEventListener("wheel",this._onWheelListener,!1);c.addEventListener("touchstart",this._onTouchStartListener,!1);c.addEventListener("touchend",this._onTouchEndListener,!1);c.addEventListener("touchmove",
this._onTouchMoveListener,!1);var c=new Hammer.Manager(c),d=new Hammer.Pinch({threshold:0,pointers:2}),e=new Hammer.Pan({threshold:10,pointers:1}),f=new Hammer.Tap({event:"doubletap",threshold:10,pointers:1,taps:3}),l=new Hammer.Swipe({event:"swipe",threshold:10,pointers:1,direction:Hammer.DIRECTION_ALL,velocity:0.3});c.add(e);c.add(d);c.add(f);c.add(l);e.recognizeWith(d);e.recognizeWith(l);d.recognizeWith(e);c.on("panstart panmove panend",function(c){return a.onPan(c)});c.on("pinchstart pinchmove pinchend pinchcancel",
function(c){return a.onPinch(c)});c.on("swipe",function(c){return a.onSwipe(c)});if(this._enableKnobs)c.on("doubletap",function(c){return a.onDoubleTap(c)})};c.prototype.onMouseWheel=function(a){a.returnValue=!1;a.preventDefault&&a.preventDefault();return!1};c.prototype.unhookCanvasEvents=function(){var a=HtmlHelper.getSubElementById(this._canvasHost.surfaceElement,"frontCanvas");a.onmousemove=null;a.onmouseover=null;a.onmouseout=null;a.onmousedown=null;a.onmouseup=null;a.onclick=null;a.removeEventListener("wheel",
this._onWheelListener);a.removeEventListener("touchstart",this._onTouchStartListener);a.removeEventListener("touchend",this._onTouchEndListener);a.removeEventListener("touchmove",this._onTouchMoveListener)};c.prototype.onPageActivated=function(a){var c=this;a=a.getElements();for(var d=0;d<a.length;d++){var e=a[d];e.onfocus=function(a){return c.onFocus(a)};e.onblur=function(a){return c.onBlur(a)};e.onkeypress=function(a){return c.onKeyPress(a)};e.onkeydown=function(a){return c.onKeyDown(a)};e.onkeyup=
function(a){return c.onKeyUp(a)};this._canvasHost.surfaceElement.appendChild(a[d])}};c.prototype.onPageDeactivated=function(a){a=a.getElements();for(var c=0;c<a.length;c++){var d=a[c];d.onfocus=null;d.onblur=null;d.onkeypress=null;d.onkeydown=null;d.onkeyup=null;this._canvasHost.surfaceElement.contains(d)&&this._canvasHost.surfaceElement.removeChild(d)}};c.dispatchNodeEvent=function(a,c){for(;null!==a&&!c(a);)a=a.parent;return a};c.prototype.hoverOverObject=function(b){var d=this;b!==this._hoveredOverVisual&&
(null!==this._hoveredOverVisual&&(c.dispatchNodeEvent(this._hoveredOverVisual,function(b){return b.onPointerOut(new a.PointerEventArgs(d._hoveredOverVisual))}),this._hoveredOverVisual=null),null!=b&&(this._hoveredOverVisual=b,c.dispatchNodeEvent(this._hoveredOverVisual,function(b){return b.onPointerOver(new a.PointerEventArgs(d._hoveredOverVisual))})))};c.prototype.onFullScreenToggled=function(){screenfull.toggle()};c.prototype.onKnobSettingsChanged=function(a){this._engine.setRenderOptions(a.renderOptions)};
c.prototype.onFocus=function(a){a=this._pageManager.topPage.getNodeForElement(a.target);null!==a&&a.isEnabled.value&&c.dispatchNodeEvent(a,function(a){return a.onFocus()})};c.prototype.onBlur=function(a){a=this._pageManager.topPage.getNodeForElement(a.target);null!==a&&c.dispatchNodeEvent(a,function(a){return a.onBlur()})};c.prototype.onKeyPress=function(b){var d=this._pageManager.topPage.getNodeForElement(b.target);if(null!==d){var e=new a.KeyboardEventArgs(d,b);c.dispatchNodeEvent(d,function(a){return a.onKeyPress(e)})}};
c.prototype.onKeyDown=function(b){var d=this._pageManager.topPage.getNodeForElement(b.target);if(null!==d){var e=new a.KeyboardEventArgs(d,b);c.dispatchNodeEvent(d,function(a){return a.onKeyDown(e)})}};c.prototype.onKeyUp=function(b){var d=this._pageManager.topPage.getNodeForElement(b.target);if(null!==d){var e=new a.KeyboardEventArgs(d,b);c.dispatchNodeEvent(d,function(a){return a.onKeyUp(e)})}};c.prototype.onMouseMove=function(a){null!==this._capturedVisual&&(this._isDragging?c.dispatchNodeEvent(this._capturedVisual,
function(c){return c.onDrag(a.clientX,a.clientY)}):this._isDragging=null!==c.dispatchNodeEvent(this._capturedVisual,function(c){return c.onBeginDrag(a.clientX,a.clientY)}));var d=this._engine.getHitVisual(a.clientX,a.clientY);this.hoverOverObject(d);a.cancelBubble=!0};c.prototype.onMouseOver=function(a){var c=this._engine.getHitVisual(a.clientX,a.clientY);this.hoverOverObject(c);a.cancelBubble=!0};c.prototype.onMouseOut=function(a){var c=this._engine.getHitVisual(a.clientX,a.clientY);this.hoverOverObject(c);
a.cancelBubble=!0};c.prototype.onMouseDown=function(b){var d=this;if(this._touchDown)this._touchDown=!1;else if(0===b.button){var e=this._engine.getHitVisual(b.clientX,b.clientY);if(null!==e&&(this._capturedVisual=e,c.dispatchNodeEvent(e,function(c){return c.onPointerDown(new a.PointerEventArgs(e,b.clientX,b.clientY))}),window.onmouseup=function(a){d.onMouseUp(a)},e.isEnabled.value)){var f=this._pageManager.topPage.getElementForNode(e);null!==f&&setTimeout(function(){return f.focus()})}this._engine.selectDebugVisual(e)}};
c.prototype.onMouseUp=function(b){this._tappedVisual=null;if(this._touchUp)this._touchUp=!1;else if(0===b.button){window.onmouseup=null;var d=this._engine.getHitVisual(b.clientX,b.clientY);null!==this._capturedVisual&&(d===this._capturedVisual&&(this._tappedVisual=d),this._isDragging&&(c.dispatchNodeEvent(this._capturedVisual,function(a){return a.onEndDrag(b.clientX,b.clientY)}),this._isDragging=!1),d=this._capturedVisual,this._capturedVisual=null);null!==d&&c.dispatchNodeEvent(d,function(b){return b.onPointerUp(new a.PointerEventArgs(d))})}};
c.prototype.onMouseClick=function(b){if(this._touchClick)this._touchClick=!1;else{if(0===b.button){var d=this._engine.getHitVisual(b.clientX,b.clientY);null!==d&&d===this._tappedVisual&&c.dispatchNodeEvent(d,function(c){return c.onPointerTap(new a.PointerEventArgs(d,b.clientY,b.clientY))})}b.cancelBubble=!0}};c.prototype.onTouchStart=function(b){if(1==b.changedTouches.length){var d=this._engine.getHitVisual(b.changedTouches[0].pageX,b.changedTouches[0].pageY);if(null!=d){this.hoverOverObject(d);this._capturedVisual=
d;var e=new a.PointerEventArgs(d,b.changedTouches[0].pageX,b.changedTouches[0].pageY);c.dispatchNodeEvent(d,function(a){return a.onPointerDown(e)});if(d.isEnabled.value){var f=this._pageManager.topPage.getElementForNode(d);null!==f&&setTimeout(function(){return f.focus()})}this._touchDown=!0}this._engine.selectDebugVisual(d)}};c.prototype.onTouchEnd=function(b){var d=null;1==b.changedTouches.length&&(d=this._engine.getHitVisual(b.changedTouches[0].pageX,b.changedTouches[0].pageY));this._tappedVisual=
null;null!==this._capturedVisual&&(d===this._capturedVisual&&(this._tappedVisual=d),this._isDragging&&(c.dispatchNodeEvent(this._capturedVisual,function(a){return a.onEndDrag(b.changedTouches[0].pageX,b.changedTouches[0].pageY)}),this._isDragging=!1),d=this._capturedVisual,this._capturedVisual=null);null!==d&&(this.hoverOverObject(d),c.dispatchNodeEvent(d,function(b){return b.onPointerUp(new a.PointerEventArgs(d))}),this._touchUp=!0);null!==this._tappedVisual&&(c.dispatchNodeEvent(d,function(b){return b.onPointerTap(new a.PointerEventArgs(d))}),
this._touchClick=!0)};c.prototype.onTouchMove=function(a){if(1==a.changedTouches.length){null!==this._capturedVisual&&(this._isDragging?c.dispatchNodeEvent(this._capturedVisual,function(c){return c.onDrag(a.changedTouches[0].pageX,a.changedTouches[0].pageY)}):this._isDragging=null!==c.dispatchNodeEvent(this._capturedVisual,function(c){return c.onBeginDrag(a.changedTouches[0].pageX,a.changedTouches[0].pageY)}));var d=this._engine.getHitVisual(a.changedTouches[0].pageX,a.changedTouches[0].pageY);this.hoverOverObject(d)}a.preventDefault()};
c.prototype.onDoubleTap=function(a){this._enableKnobs&&this._engine.loadRenderOptionsDialog()};c.prototype.onPan=function(a){if(1==a.changedPointers.length&&!this._isDragging){var c=a.changedPointers[0].identifier;"panend"==a.type?this._touchState.pointerId0=-1:"panstart"==a.type?(this._touchState.pointerId0=a.changedPointers[0].identifier,this._touchState.center.x=a.center.x,this._touchState.center.y=a.center.y):c==this._touchState.pointerId0&&(c=this._pageManager.rootPage.location,this._engine.pan(c.x+
(a.center.x-this._touchState.center.x),c.y+(a.center.y-this._touchState.center.y)),this._touchState.center.x=a.center.x,this._touchState.center.y=a.center.y)}};c.prototype.onPinch=function(a){if(2==a.pointers.length){var c=this._pageManager.rootPage;if("pinchend"!=a.type)if("pinchstart"==a.type)this._touchState.zoomSize.x=c.size.x*c.scale.x,this._touchState.zoomSize.y=c.size.y*c.scale.y,this._touchState.offset.x=c.location.x-a.center.x,this._touchState.offset.y=c.location.y-a.center.y;else{var d=
this._touchState.zoomSize.x*a.scale/c.size.x;this._engine.zoom(d);1E-4>Math.abs(c.scale.x-d)&&this._engine.pan(a.center.x+this._touchState.offset.x*a.scale,a.center.y+this._touchState.offset.y*a.scale)}}};c.prototype.onSwipe=function(a){a.direction==Hammer.DIRECTION_LEFT?this._engine.navigateRight():a.direction==Hammer.DIRECTION_RIGHT?this._engine.navigateLeft():a.direction==Hammer.DIRECTION_UP?this._engine.navigateDown():a.direction==Hammer.DIRECTION_DOWN&&this._engine.navigateUp()};Object.defineProperty(c,
"canClose",{get:function(){return!1},enumerable:!0,configurable:!0});c.closeDown=function(){};return c}();a.App=d})(f.Hmi||(f.Hmi={}))})(Pxc||(Pxc={}));var _this=this,g_query;
window.onload=function(){var f=navigator.userAgent;null!==f.match(/(iPod|iPhone|iPad)/)&&null!==f.match(/AppleWebKit/)&&forceAppleViewportSize();g_query=_this.parseQuery();f=createDataClient(g_query);if(void 0!==f){var a=f.startPageUrl;if(void 0!==a){var e=new Pxc.Hmi.CanvasHost;Pxc.Hmi.App.initialize(f,e,g_query);Pxc.Hmi.App.run(a)}else alert("ERROR: Please specify the desired path by including '?HmiPath=<PagePath>' in the URL, or the desired page by including '?HmiPage=<PagePath>/<PageFileName>.json' in the URL.")}else alert("ERROR: Invalid data source: "+g_query.DataSource)};
function parseQuery(f){var a={};void 0===f&&(f=window.location.search.substring(1));window&&window.location&&window.location.protocol&&(a.DataProtocol=window.location.protocol);f=f.split("&");for(var e in f){var d=f[e].split("=");a[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return a}
function createDataClient(f){return void 0!==f?(void 0===f.StationID&&(f.StationID="0"),new Pxc.Hmi.DataClient(f.HmiPage,f.DataSource,parseInt(f.DataRetries),f.DataHost,parseInt(f.DataTimeout),parseInt(f.DataPollInterval),parseInt(f.DataPollTimeoutMultiplier),f.DataDebug,parseInt(f.DownloadTimeout),f.DataProtocol,f.StationID)):null}
function forceAppleViewportSize(){var f=function(){var a=Number.MAX_VALUE,e=Number.MAX_VALUE;document.getElementById("canvasArea");document.body.style.width=a+"px";document.body.style.height=e+"px";window.scrollTo(0,0)};window.addEventListener("orientationchange",f);f()};
